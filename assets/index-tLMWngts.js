var oA=Object.defineProperty;var cA=(i,e,n)=>e in i?oA(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var ar=(i,e,n)=>cA(i,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function ti(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Jd={exports:{}},_e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function dA(){if(Qy)return _e;Qy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function O(T,U,V){this.props=T,this.context=U,this.refs=E,this.updater=V||_}O.prototype.isReactComponent={},O.prototype.setState=function(T,U){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,U,"setState")},O.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function x(){}x.prototype=O.prototype;function k(T,U,V){this.props=T,this.context=U,this.refs=E,this.updater=V||_}var M=k.prototype=new x;M.constructor=k,A(M,O.prototype),M.isPureReactComponent=!0;var ae=Array.isArray,B={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function ne(T,U,V,ee,W,ue){return V=ue.ref,{$$typeof:i,type:T,key:U,ref:V!==void 0?V:null,props:ue}}function F(T,U){return ne(T.type,U,void 0,void 0,void 0,T.props)}function re(T){return typeof T=="object"&&T!==null&&T.$$typeof===i}function he(T){var U={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(V){return U[V]})}var Oe=/\/+/g;function Ge(T,U){return typeof T=="object"&&T!==null&&T.key!=null?he(""+T.key):U.toString(36)}function $e(){}function te(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then($e,$e):(T.status="pending",T.then(function(U){T.status==="pending"&&(T.status="fulfilled",T.value=U)},function(U){T.status==="pending"&&(T.status="rejected",T.reason=U)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Q(T,U,V,ee,W){var ue=typeof T;(ue==="undefined"||ue==="boolean")&&(T=null);var oe=!1;if(T===null)oe=!0;else switch(ue){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(T.$$typeof){case i:case e:oe=!0;break;case g:return oe=T._init,Q(oe(T._payload),U,V,ee,W)}}if(oe)return W=W(T),oe=ee===""?"."+Ge(T,0):ee,ae(W)?(V="",oe!=null&&(V=oe.replace(Oe,"$&/")+"/"),Q(W,U,V,"",function(ze){return ze})):W!=null&&(re(W)&&(W=F(W,V+(W.key==null||T&&T.key===W.key?"":(""+W.key).replace(Oe,"$&/")+"/")+oe)),U.push(W)),1;oe=0;var Qe=ee===""?".":ee+":";if(ae(T))for(var xe=0;xe<T.length;xe++)ee=T[xe],ue=Qe+Ge(ee,xe),oe+=Q(ee,U,V,ue,W);else if(xe=v(T),typeof xe=="function")for(T=xe.call(T),xe=0;!(ee=T.next()).done;)ee=ee.value,ue=Qe+Ge(ee,xe++),oe+=Q(ee,U,V,ue,W);else if(ue==="object"){if(typeof T.then=="function")return Q(te(T),U,V,ee,W);throw U=String(T),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return oe}function L(T,U,V){if(T==null)return T;var ee=[],W=0;return Q(T,ee,"","",function(ue){return U.call(V,ue,W++)}),ee}function q(T){if(T._status===-1){var U=T._result;U=U(),U.then(function(V){(T._status===0||T._status===-1)&&(T._status=1,T._result=V)},function(V){(T._status===0||T._status===-1)&&(T._status=2,T._result=V)}),T._status===-1&&(T._status=0,T._result=U)}if(T._status===1)return T._result.default;throw T._result}var G=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function K(){}return _e.Children={map:L,forEach:function(T,U,V){L(T,function(){U.apply(this,arguments)},V)},count:function(T){var U=0;return L(T,function(){U++}),U},toArray:function(T){return L(T,function(U){return U})||[]},only:function(T){if(!re(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},_e.Component=O,_e.Fragment=n,_e.Profiler=l,_e.PureComponent=k,_e.StrictMode=r,_e.Suspense=h,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,_e.act=function(){throw Error("act(...) is not supported in production builds of React.")},_e.cache=function(T){return function(){return T.apply(null,arguments)}},_e.cloneElement=function(T,U,V){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var ee=A({},T.props),W=T.key,ue=void 0;if(U!=null)for(oe in U.ref!==void 0&&(ue=void 0),U.key!==void 0&&(W=""+U.key),U)!X.call(U,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&U.ref===void 0||(ee[oe]=U[oe]);var oe=arguments.length-2;if(oe===1)ee.children=V;else if(1<oe){for(var Qe=Array(oe),xe=0;xe<oe;xe++)Qe[xe]=arguments[xe+2];ee.children=Qe}return ne(T.type,W,void 0,void 0,ue,ee)},_e.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},_e.createElement=function(T,U,V){var ee,W={},ue=null;if(U!=null)for(ee in U.key!==void 0&&(ue=""+U.key),U)X.call(U,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(W[ee]=U[ee]);var oe=arguments.length-2;if(oe===1)W.children=V;else if(1<oe){for(var Qe=Array(oe),xe=0;xe<oe;xe++)Qe[xe]=arguments[xe+2];W.children=Qe}if(T&&T.defaultProps)for(ee in oe=T.defaultProps,oe)W[ee]===void 0&&(W[ee]=oe[ee]);return ne(T,ue,void 0,void 0,null,W)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(T){return{$$typeof:f,render:T}},_e.isValidElement=re,_e.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:q}},_e.memo=function(T,U){return{$$typeof:m,type:T,compare:U===void 0?null:U}},_e.startTransition=function(T){var U=B.T,V={};B.T=V;try{var ee=T(),W=B.S;W!==null&&W(V,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(K,G)}catch(ue){G(ue)}finally{B.T=U}},_e.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},_e.use=function(T){return B.H.use(T)},_e.useActionState=function(T,U,V){return B.H.useActionState(T,U,V)},_e.useCallback=function(T,U){return B.H.useCallback(T,U)},_e.useContext=function(T){return B.H.useContext(T)},_e.useDebugValue=function(){},_e.useDeferredValue=function(T,U){return B.H.useDeferredValue(T,U)},_e.useEffect=function(T,U){return B.H.useEffect(T,U)},_e.useId=function(){return B.H.useId()},_e.useImperativeHandle=function(T,U,V){return B.H.useImperativeHandle(T,U,V)},_e.useInsertionEffect=function(T,U){return B.H.useInsertionEffect(T,U)},_e.useLayoutEffect=function(T,U){return B.H.useLayoutEffect(T,U)},_e.useMemo=function(T,U){return B.H.useMemo(T,U)},_e.useOptimistic=function(T,U){return B.H.useOptimistic(T,U)},_e.useReducer=function(T,U,V){return B.H.useReducer(T,U,V)},_e.useRef=function(T){return B.H.useRef(T)},_e.useState=function(T){return B.H.useState(T)},_e.useSyncExternalStore=function(T,U,V){return B.H.useSyncExternalStore(T,U,V)},_e.useTransition=function(){return B.H.useTransition()},_e.version="19.0.0",_e}var Yy;function qh(){return Yy||(Yy=1,Jd.exports=dA()),Jd.exports}var z=qh();const I=ti(z);var Wd={exports:{}},tl={},ef={exports:{}},tf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function fA(){return Fy||(Fy=1,function(i){function e(L,q){var G=L.length;L.push(q);e:for(;0<G;){var K=G-1>>>1,T=L[K];if(0<l(T,q))L[K]=q,L[G]=T,G=K;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],G=L.pop();if(G!==q){L[0]=G;e:for(var K=0,T=L.length,U=T>>>1;K<U;){var V=2*(K+1)-1,ee=L[V],W=V+1,ue=L[W];if(0>l(ee,G))W<T&&0>l(ue,ee)?(L[K]=ue,L[W]=G,K=W):(L[K]=ee,L[V]=G,K=V);else if(W<T&&0>l(ue,G))L[K]=ue,L[W]=G,K=W;else break e}}return q}function l(L,q){var G=L.sortIndex-q.sortIndex;return G!==0?G:L.id-q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var h=[],m=[],g=1,y=null,v=3,_=!1,A=!1,E=!1,O=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function M(L){for(var q=n(m);q!==null;){if(q.callback===null)r(m);else if(q.startTime<=L)r(m),q.sortIndex=q.expirationTime,e(h,q);else break;q=n(m)}}function ae(L){if(E=!1,M(L),!A)if(n(h)!==null)A=!0,te();else{var q=n(m);q!==null&&Q(ae,q.startTime-L)}}var B=!1,X=-1,ne=5,F=-1;function re(){return!(i.unstable_now()-F<ne)}function he(){if(B){var L=i.unstable_now();F=L;var q=!0;try{e:{A=!1,E&&(E=!1,x(X),X=-1),_=!0;var G=v;try{t:{for(M(L),y=n(h);y!==null&&!(y.expirationTime>L&&re());){var K=y.callback;if(typeof K=="function"){y.callback=null,v=y.priorityLevel;var T=K(y.expirationTime<=L);if(L=i.unstable_now(),typeof T=="function"){y.callback=T,M(L),q=!0;break t}y===n(h)&&r(h),M(L)}else r(h);y=n(h)}if(y!==null)q=!0;else{var U=n(m);U!==null&&Q(ae,U.startTime-L),q=!1}}break e}finally{y=null,v=G,_=!1}q=void 0}}finally{q?Oe():B=!1}}}var Oe;if(typeof k=="function")Oe=function(){k(he)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,$e=Ge.port2;Ge.port1.onmessage=he,Oe=function(){$e.postMessage(null)}}else Oe=function(){O(he,0)};function te(){B||(B=!0,Oe())}function Q(L,q){X=O(function(){L(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(L){L.callback=null},i.unstable_continueExecution=function(){A||_||(A=!0,te())},i.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<L?Math.floor(1e3/L):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return n(h)},i.unstable_next=function(L){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var G=v;v=q;try{return L()}finally{v=G}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=v;v=L;try{return q()}finally{v=G}},i.unstable_scheduleCallback=function(L,q,G){var K=i.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?K+G:K):G=K,L){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=G+T,L={id:g++,callback:q,priorityLevel:L,startTime:G,expirationTime:T,sortIndex:-1},G>K?(L.sortIndex=G,e(m,L),n(h)===null&&L===n(m)&&(E?(x(X),X=-1):E=!0,Q(ae,G-K))):(L.sortIndex=T,e(h,L),A||_||(A=!0,te())),L},i.unstable_shouldYield=re,i.unstable_wrapCallback=function(L){var q=v;return function(){var G=v;v=q;try{return L.apply(this,arguments)}finally{v=G}}}}(tf)),tf}var Ky;function hA(){return Ky||(Ky=1,ef.exports=fA()),ef.exports}var nf={exports:{}},xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function mA(){if(Xy)return xt;Xy=1;var i=qh();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(h,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:h,containerInfo:m,implementation:g}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xt.createPortal=function(h,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(h,m,null,g)},xt.flushSync=function(h){var m=c.T,g=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=m,r.p=g,r.d.f()}},xt.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(h,m))},xt.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},xt.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var g=m.as,y=f(g,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?r.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:_}):g==="script"&&r.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},xt.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=f(m.as,m.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(h)},xt.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=f(g,m.crossOrigin);r.d.L(h,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},xt.preloadModule=function(h,m){if(typeof h=="string")if(m){var g=f(m.as,m.crossOrigin);r.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(h)},xt.requestFormReset=function(h){r.d.r(h)},xt.unstable_batchedUpdates=function(h,m){return h(m)},xt.useFormState=function(h,m,g){return c.H.useFormState(h,m,g)},xt.useFormStatus=function(){return c.H.useHostTransitionStatus()},xt.version="19.0.0",xt}var Jy;function Kv(){if(Jy)return nf.exports;Jy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),nf.exports=mA(),nf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function pA(){if(Wy)return tl;Wy=1;var i=hA(),e=qh(),n=Kv();function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var u=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),_=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),ae=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function X(t){return t===null||typeof t!="object"?null:(t=B&&t[B]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Symbol.for("react.client.reference");function F(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ne?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case h:return"Fragment";case f:return"Portal";case g:return"Profiler";case m:return"StrictMode";case E:return"Suspense";case O:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _:return(t.displayName||"Context")+".Provider";case v:return(t._context.displayName||"Context")+".Consumer";case A:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return a=t.displayName||null,a!==null?a:F(t.type)||"Memo";case k:a=t._payload,t=t._init;try{return F(t(a))}catch{}}return null}var re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=Object.assign,Oe,Ge;function $e(t){if(Oe===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Oe=a&&a[1]||"",Ge=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+t+Ge}var te=!1;function Q(t,a){if(!t||te)return"";te=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(P){var j=P}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(P){j=P}t.call(Z.prototype)}}else{try{throw Error()}catch(P){j=P}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(P){if(P&&j&&typeof P.stack=="string")return[P.stack,j.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=o.DetermineComponentFrameRoot(),b=p[0],w=p[1];if(b&&w){var S=b.split(`
`),C=w.split(`
`);for(d=o=0;o<S.length&&!S[o].includes("DetermineComponentFrameRoot");)o++;for(;d<C.length&&!C[d].includes("DetermineComponentFrameRoot");)d++;if(o===S.length||d===C.length)for(o=S.length-1,d=C.length-1;1<=o&&0<=d&&S[o]!==C[d];)d--;for(;1<=o&&0<=d;o--,d--)if(S[o]!==C[d]){if(o!==1||d!==1)do if(o--,d--,0>d||S[o]!==C[d]){var $=`
`+S[o].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=o&&0<=d);break}}}finally{te=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?$e(s):""}function L(t){switch(t.tag){case 26:case 27:case 5:return $e(t.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 15:return t=Q(t.type,!1),t;case 11:return t=Q(t.type.render,!1),t;case 1:return t=Q(t.type,!0),t;default:return""}}function q(t){try{var a="";do a+=L(t),t=t.return;while(t);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function G(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function K(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function T(t){if(G(t)!==t)throw Error(r(188))}function U(t){var a=t.alternate;if(!a){if(a=G(t),a===null)throw Error(r(188));return a!==t?null:t}for(var s=t,o=a;;){var d=s.return;if(d===null)break;var p=d.alternate;if(p===null){if(o=d.return,o!==null){s=o;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===s)return T(d),t;if(p===o)return T(d),a;p=p.sibling}throw Error(r(188))}if(s.return!==o.return)s=d,o=p;else{for(var b=!1,w=d.child;w;){if(w===s){b=!0,s=d,o=p;break}if(w===o){b=!0,o=d,s=p;break}w=w.sibling}if(!b){for(w=p.child;w;){if(w===s){b=!0,s=p,o=d;break}if(w===o){b=!0,o=p,s=d;break}w=w.sibling}if(!b)throw Error(r(189))}}if(s.alternate!==o)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:a}function V(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=V(t),a!==null)return a;t=t.sibling}return null}var ee=Array.isArray,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},oe=[],Qe=-1;function xe(t){return{current:t}}function ze(t){0>Qe||(t.current=oe[Qe],oe[Qe]=null,Qe--)}function Ae(t,a){Qe++,oe[Qe]=t.current,t.current=a}var Ot=xe(null),Wt=xe(null),Dn=xe(null),mn=xe(null);function oa(t,a){switch(Ae(Dn,a),Ae(Wt,t),Ae(Ot,null),t=a.nodeType,t){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?Ay(a):0;break;default:if(t=t===8?a.parentNode:a,a=t.tagName,t=t.namespaceURI)t=Ay(t),a=Ey(t,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ze(Ot),Ae(Ot,a)}function en(){ze(Ot),ze(Wt),ze(Dn)}function ni(t){t.memoizedState!==null&&Ae(mn,t);var a=Ot.current,s=Ey(a,t.type);a!==s&&(Ae(Wt,t),Ae(Ot,s))}function br(t){Wt.current===t&&(ze(Ot),ze(Wt)),mn.current===t&&(ze(mn),Ks._currentValue=ue)}var vr=Object.prototype.hasOwnProperty,pn=i.unstable_scheduleCallback,ja=i.unstable_cancelCallback,ai=i.unstable_shouldYield,Zl=i.unstable_requestPaint,tn=i.unstable_now,Zo=i.unstable_getCurrentPriorityLevel,Vl=i.unstable_ImmediatePriority,ca=i.unstable_UserBlockingPriority,Mn=i.unstable_NormalPriority,_r=i.unstable_LowPriority,ss=i.unstable_IdlePriority,Kn=i.log,Ql=i.unstable_setDisableYieldValue,wr=null,jt=null;function ls(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(wr,t,void 0,(t.current.flags&128)===128)}catch{}}function jn(t){if(typeof Kn=="function"&&Ql(t),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(wr,t)}catch{}}var kt=Math.clz32?Math.clz32:Qo,Yl=Math.log,Vo=Math.LN2;function Qo(t){return t>>>=0,t===0?32:31-(Yl(t)/Vo|0)|0}var ri=128,tt=4194304;function nt(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ht(t,a){var s=t.pendingLanes;if(s===0)return 0;var o=0,d=t.suspendedLanes,p=t.pingedLanes,b=t.warmLanes;t=t.finishedLanes!==0;var w=s&134217727;return w!==0?(s=w&~d,s!==0?o=nt(s):(p&=w,p!==0?o=nt(p):t||(b=w&~b,b!==0&&(o=nt(b))))):(w=s&~d,w!==0?o=nt(w):p!==0?o=nt(p):t||(b=s&~b,b!==0&&(o=nt(b)))),o===0?0:a!==0&&a!==o&&(a&d)===0&&(d=o&-o,b=a&-a,d>=b||d===32&&(b&4194176)!==0)?a:o}function qt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Gt(t,a){switch(t){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rt(){var t=ri;return ri<<=1,(ri&4194176)===0&&(ri=128),t}function nn(){var t=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),t}function Xn(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Ye(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jn(t,a,s,o,d,p){var b=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var w=t.entanglements,S=t.expirationTimes,C=t.hiddenUpdates;for(s=b&~s;0<s;){var $=31-kt(s),Z=1<<$;w[$]=0,S[$]=-1;var j=C[$];if(j!==null)for(C[$]=null,$=0;$<j.length;$++){var P=j[$];P!==null&&(P.lane&=-536870913)}s&=~Z}o!==0&&an(t,o,0),p!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=p&~(b&~a))}function an(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-kt(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|s&4194218}function gn(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var o=31-kt(s),d=1<<o;d&a|t[o]&a&&(t[o]|=a),s&=~d}}function ka(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function La(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:zy(t.type))}function Wn(t,a){var s=W.p;try{return W.p=t,a()}finally{W.p=s}}var Zt=Math.random().toString(36).slice(2),rt="__reactFiber$"+Zt,Vt="__reactProps$"+Zt,ii="__reactContainer$"+Zt,Yo="__reactEvents$"+Zt,e0="__reactListeners$"+Zt,t0="__reactHandles$"+Zt,_m="__reactResources$"+Zt,us="__reactMarker$"+Zt;function Fo(t){delete t[rt],delete t[Vt],delete t[Yo],delete t[e0],delete t[t0]}function Ar(t){var a=t[rt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[ii]||s[rt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=Oy(t);t!==null;){if(s=t[rt])return s;t=Oy(t)}return a}t=s,s=t.parentNode}return null}function si(t){if(t=t[rt]||t[ii]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function os(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(r(33))}function li(t){var a=t[_m];return a||(a=t[_m]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function mt(t){t[us]=!0}var wm=new Set,Am={};function Er(t,a){ui(t,a),ui(t+"Capture",a)}function ui(t,a){for(Am[t]=a,t=0;t<a.length;t++)wm.add(a[t])}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Em={},Sm={};function a0(t){return vr.call(Sm,t)?!0:vr.call(Em,t)?!1:n0.test(t)?Sm[t]=!0:(Em[t]=!0,!1)}function Fl(t,a,s){if(a0(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function Kl(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function fa(t,a,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+o)}}function yn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tm(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function r0(t){var a=Tm(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),o=""+t[a];if(!t.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,p=s.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return d.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(t,a,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Xl(t){t._valueTracker||(t._valueTracker=r0(t))}function Om(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),o="";return t&&(o=Tm(t)?t.checked?"true":"false":t.value),t=o,t!==s?(a.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var i0=/[\n"\\]/g;function bn(t){return t.replace(i0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ko(t,a,s,o,d,p,b,w){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),a!=null?b==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+yn(a)):t.value!==""+yn(a)&&(t.value=""+yn(a)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),a!=null?Xo(t,b,yn(a)):s!=null?Xo(t,b,yn(s)):o!=null&&t.removeAttribute("value"),d==null&&p!=null&&(t.defaultChecked=!!p),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+yn(w):t.removeAttribute("name")}function Rm(t,a,s,o,d,p,b,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;s=s!=null?""+yn(s):"",a=a!=null?""+yn(a):s,w||a===t.value||(t.value=a),t.defaultValue=a}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=w?t.checked:!!o,t.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Xo(t,a,s){a==="number"&&Jl(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function oi(t,a,s,o){if(t=t.options,a){a={};for(var d=0;d<s.length;d++)a["$"+s[d]]=!0;for(s=0;s<t.length;s++)d=a.hasOwnProperty("$"+t[s].value),t[s].selected!==d&&(t[s].selected=d),d&&o&&(t[s].defaultSelected=!0)}else{for(s=""+yn(s),a=null,d=0;d<t.length;d++){if(t[d].value===s){t[d].selected=!0,o&&(t[d].defaultSelected=!0);return}a!==null||t[d].disabled||(a=t[d])}a!==null&&(a.selected=!0)}}function Cm(t,a,s){if(a!=null&&(a=""+yn(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+yn(s):""}function xm(t,a,s,o){if(a==null){if(o!=null){if(s!=null)throw Error(r(92));if(ee(o)){if(1<o.length)throw Error(r(93));o=o[0]}s=o}s==null&&(s=""),a=s}s=yn(a),t.defaultValue=s,o=t.textContent,o===s&&o!==""&&o!==null&&(t.value=o)}function ci(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var s0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nm(t,a,s){var o=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,s):typeof s!="number"||s===0||s0.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function Dm(t,a,s){if(a!=null&&typeof a!="object")throw Error(r(62));if(t=t.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var d in a)o=a[d],a.hasOwnProperty(d)&&s[d]!==o&&Nm(t,d,o)}else for(var p in a)a.hasOwnProperty(p)&&Nm(t,p,a[p])}function Jo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(t){return u0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Wo=null;function ec(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var di=null,fi=null;function Mm(t){var a=si(t);if(a&&(t=a.stateNode)){var s=t[Vt]||null;e:switch(t=a.stateNode,a.type){case"input":if(Ko(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+bn(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var o=s[a];if(o!==t&&o.form===t.form){var d=o[Vt]||null;if(!d)throw Error(r(90));Ko(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<s.length;a++)o=s[a],o.form===t.form&&Om(o)}break e;case"textarea":Cm(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&oi(t,!!s.multiple,a,!1)}}}var tc=!1;function jm(t,a,s){if(tc)return t(a,s);tc=!0;try{var o=t(a);return o}finally{if(tc=!1,(di!==null||fi!==null)&&(Uu(),di&&(a=di,t=fi,fi=di=null,Mm(a),t)))for(a=0;a<t.length;a++)Mm(t[a])}}function cs(t,a){var s=t.stateNode;if(s===null)return null;var o=s[Vt]||null;if(o===null)return null;s=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,a,typeof s));return s}var nc=!1;if(da)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){nc=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{nc=!1}var Ua=null,ac=null,eu=null;function km(){if(eu)return eu;var t,a=ac,s=a.length,o,d="value"in Ua?Ua.value:Ua.textContent,p=d.length;for(t=0;t<s&&a[t]===d[t];t++);var b=s-t;for(o=1;o<=b&&a[s-o]===d[p-o];o++);return eu=d.slice(t,1<o?1-o:void 0)}function tu(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function nu(){return!0}function Lm(){return!1}function Qt(t){function a(s,o,d,p,b){this._reactName=s,this._targetInst=d,this.type=o,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(s=t[w],this[w]=s?s(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?nu:Lm,this.isPropagationStopped=Lm,this}return he(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),a}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},au=Qt(Sr),fs=he({},Sr,{view:0,detail:0}),o0=Qt(fs),rc,ic,hs,ru=he({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hs&&(hs&&t.type==="mousemove"?(rc=t.screenX-hs.screenX,ic=t.screenY-hs.screenY):ic=rc=0,hs=t),rc)},movementY:function(t){return"movementY"in t?t.movementY:ic}}),Um=Qt(ru),c0=he({},ru,{dataTransfer:0}),d0=Qt(c0),f0=he({},fs,{relatedTarget:0}),sc=Qt(f0),h0=he({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),m0=Qt(h0),p0=he({},Sr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),g0=Qt(p0),y0=he({},Sr,{data:0}),Im=Qt(y0),b0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w0(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=_0[t])?!!a[t]:!1}function lc(){return w0}var A0=he({},fs,{key:function(t){if(t.key){var a=b0[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?v0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lc,charCode:function(t){return t.type==="keypress"?tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),E0=Qt(A0),S0=he({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bm=Qt(S0),T0=he({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lc}),O0=Qt(T0),R0=he({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C0=Qt(R0),x0=he({},ru,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),N0=Qt(x0),D0=he({},Sr,{newState:0,oldState:0}),M0=Qt(D0),j0=[9,13,27,32],uc=da&&"CompositionEvent"in window,ms=null;da&&"documentMode"in document&&(ms=document.documentMode);var k0=da&&"TextEvent"in window&&!ms,Pm=da&&(!uc||ms&&8<ms&&11>=ms),$m=" ",zm=!1;function Hm(t,a){switch(t){case"keyup":return j0.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hi=!1;function L0(t,a){switch(t){case"compositionend":return qm(a);case"keypress":return a.which!==32?null:(zm=!0,$m);case"textInput":return t=a.data,t===$m&&zm?null:t;default:return null}}function U0(t,a){if(hi)return t==="compositionend"||!uc&&Hm(t,a)?(t=km(),eu=ac=Ua=null,hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Pm&&a.locale!=="ko"?null:a.data;default:return null}}var I0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gm(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!I0[t.type]:a==="textarea"}function Zm(t,a,s,o){di?fi?fi.push(o):fi=[o]:di=o,a=zu(a,"onChange"),0<a.length&&(s=new au("onChange","change",null,s,o),t.push({event:s,listeners:a}))}var ps=null,gs=null;function B0(t){yy(t,0)}function iu(t){var a=os(t);if(Om(a))return t}function Vm(t,a){if(t==="change")return a}var Qm=!1;if(da){var oc;if(da){var cc="oninput"in document;if(!cc){var Ym=document.createElement("div");Ym.setAttribute("oninput","return;"),cc=typeof Ym.oninput=="function"}oc=cc}else oc=!1;Qm=oc&&(!document.documentMode||9<document.documentMode)}function Fm(){ps&&(ps.detachEvent("onpropertychange",Km),gs=ps=null)}function Km(t){if(t.propertyName==="value"&&iu(gs)){var a=[];Zm(a,gs,t,ec(t)),jm(B0,a)}}function P0(t,a,s){t==="focusin"?(Fm(),ps=a,gs=s,ps.attachEvent("onpropertychange",Km)):t==="focusout"&&Fm()}function $0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(gs)}function z0(t,a){if(t==="click")return iu(a)}function H0(t,a){if(t==="input"||t==="change")return iu(a)}function q0(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var rn=typeof Object.is=="function"?Object.is:q0;function ys(t,a){if(rn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),o=Object.keys(a);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var d=s[o];if(!vr.call(a,d)||!rn(t[d],a[d]))return!1}return!0}function Xm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jm(t,a){var s=Xm(t);t=0;for(var o;s;){if(s.nodeType===3){if(o=t+s.textContent.length,t<=a&&o>=a)return{node:s,offset:a-t};t=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Xm(s)}}function Wm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Wm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function ep(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Jl(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=Jl(t.document)}return a}function dc(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}function G0(t,a){var s=ep(a);a=t.focusedElem;var o=t.selectionRange;if(s!==a&&a&&a.ownerDocument&&Wm(a.ownerDocument.documentElement,a)){if(o!==null&&dc(a)){if(t=o.start,s=o.end,s===void 0&&(s=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(s,a.value.length);else if(s=(t=a.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var d=a.textContent.length,p=Math.min(o.start,d);o=o.end===void 0?p:Math.min(o.end,d),!s.extend&&p>o&&(d=o,o=p,p=d),d=Jm(a,p);var b=Jm(a,o);d&&b&&(s.rangeCount!==1||s.anchorNode!==d.node||s.anchorOffset!==d.offset||s.focusNode!==b.node||s.focusOffset!==b.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),s.removeAllRanges(),p>o?(s.addRange(t),s.extend(b.node,b.offset)):(t.setEnd(b.node,b.offset),s.addRange(t)))}}for(t=[],s=a;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)s=t[a],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Z0=da&&"documentMode"in document&&11>=document.documentMode,mi=null,fc=null,bs=null,hc=!1;function tp(t,a,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;hc||mi==null||mi!==Jl(o)||(o=mi,"selectionStart"in o&&dc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),bs&&ys(bs,o)||(bs=o,o=zu(fc,"onSelect"),0<o.length&&(a=new au("onSelect","select",null,a,s),t.push({event:a,listeners:o}),a.target=mi)))}function Tr(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var pi={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionrun:Tr("Transition","TransitionRun"),transitionstart:Tr("Transition","TransitionStart"),transitioncancel:Tr("Transition","TransitionCancel"),transitionend:Tr("Transition","TransitionEnd")},mc={},np={};da&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function Or(t){if(mc[t])return mc[t];if(!pi[t])return t;var a=pi[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in np)return mc[t]=a[s];return t}var ap=Or("animationend"),rp=Or("animationiteration"),ip=Or("animationstart"),V0=Or("transitionrun"),Q0=Or("transitionstart"),Y0=Or("transitioncancel"),sp=Or("transitionend"),lp=new Map,up="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function kn(t,a){lp.set(t,a),Er(a,[t])}var vn=[],gi=0,pc=0;function su(){for(var t=gi,a=pc=gi=0;a<t;){var s=vn[a];vn[a++]=null;var o=vn[a];vn[a++]=null;var d=vn[a];vn[a++]=null;var p=vn[a];if(vn[a++]=null,o!==null&&d!==null){var b=o.pending;b===null?d.next=d:(d.next=b.next,b.next=d),o.pending=d}p!==0&&op(s,d,p)}}function lu(t,a,s,o){vn[gi++]=t,vn[gi++]=a,vn[gi++]=s,vn[gi++]=o,pc|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function gc(t,a,s,o){return lu(t,a,s,o),uu(t)}function Ia(t,a){return lu(t,null,null,a),uu(t)}function op(t,a,s){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s);for(var d=!1,p=t.return;p!==null;)p.childLanes|=s,o=p.alternate,o!==null&&(o.childLanes|=s),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(d=!0)),t=p,p=p.return;d&&a!==null&&t.tag===3&&(p=t.stateNode,d=31-kt(s),p=p.hiddenUpdates,t=p[d],t===null?p[d]=[a]:t.push(a),a.lane=s|536870912)}function uu(t){if(50<qs)throw qs=0,Ad=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var yi={},cp=new WeakMap;function _n(t,a){if(typeof t=="object"&&t!==null){var s=cp.get(t);return s!==void 0?s:(a={value:t,source:a,stack:q(a)},cp.set(t,a),a)}return{value:t,source:a,stack:q(a)}}var bi=[],vi=0,ou=null,cu=0,wn=[],An=0,Rr=null,ha=1,ma="";function Cr(t,a){bi[vi++]=cu,bi[vi++]=ou,ou=t,cu=a}function dp(t,a,s){wn[An++]=ha,wn[An++]=ma,wn[An++]=Rr,Rr=t;var o=ha;t=ma;var d=32-kt(o)-1;o&=~(1<<d),s+=1;var p=32-kt(a)+d;if(30<p){var b=d-d%5;p=(o&(1<<b)-1).toString(32),o>>=b,d-=b,ha=1<<32-kt(a)+d|s<<d|o,ma=p+t}else ha=1<<p|s<<d|o,ma=t}function yc(t){t.return!==null&&(Cr(t,1),dp(t,1,0))}function bc(t){for(;t===ou;)ou=bi[--vi],bi[vi]=null,cu=bi[--vi],bi[vi]=null;for(;t===Rr;)Rr=wn[--An],wn[An]=null,ma=wn[--An],wn[An]=null,ha=wn[--An],wn[An]=null}var Lt=null,wt=null,je=!1,Ln=null,ea=!1,vc=Error(r(519));function xr(t){var a=Error(r(418,""));throw ws(_n(a,t)),vc}function fp(t){var a=t.stateNode,s=t.type,o=t.memoizedProps;switch(a[rt]=t,a[Vt]=o,s){case"dialog":Ne("cancel",a),Ne("close",a);break;case"iframe":case"object":case"embed":Ne("load",a);break;case"video":case"audio":for(s=0;s<Zs.length;s++)Ne(Zs[s],a);break;case"source":Ne("error",a);break;case"img":case"image":case"link":Ne("error",a),Ne("load",a);break;case"details":Ne("toggle",a);break;case"input":Ne("invalid",a),Rm(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Xl(a);break;case"select":Ne("invalid",a);break;case"textarea":Ne("invalid",a),xm(a,o.value,o.defaultValue,o.children),Xl(a)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||o.suppressHydrationWarning===!0||wy(a.textContent,s)?(o.popover!=null&&(Ne("beforetoggle",a),Ne("toggle",a)),o.onScroll!=null&&Ne("scroll",a),o.onScrollEnd!=null&&Ne("scrollend",a),o.onClick!=null&&(a.onclick=Hu),a=!0):a=!1,a||xr(t)}function hp(t){for(Lt=t.return;Lt;)switch(Lt.tag){case 3:case 27:ea=!0;return;case 5:case 13:ea=!1;return;default:Lt=Lt.return}}function vs(t){if(t!==Lt)return!1;if(!je)return hp(t),je=!0,!1;var a=!1,s;if((s=t.tag!==3&&t.tag!==27)&&((s=t.tag===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Pd(t.type,t.memoizedProps)),s=!s),s&&(a=!0),a&&wt&&xr(t),hp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(a===0){wt=In(t.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;t=t.nextSibling}wt=null}}else wt=Lt?In(t.stateNode.nextSibling):null;return!0}function _s(){wt=Lt=null,je=!1}function ws(t){Ln===null?Ln=[t]:Ln.push(t)}var As=Error(r(460)),mp=Error(r(474)),_c={then:function(){}};function pp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function du(){}function gp(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(du,du),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,t===As?Error(r(483)):t;default:if(typeof a.status=="string")a.then(du,du);else{if(t=Ze,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=o}},function(o){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,t===As?Error(r(483)):t}throw Es=a,As}}var Es=null;function yp(){if(Es===null)throw Error(r(459));var t=Es;return Es=null,t}var _i=null,Ss=0;function fu(t){var a=Ss;return Ss+=1,_i===null&&(_i=[]),gp(_i,t,a)}function Ts(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function hu(t,a){throw a.$$typeof===u?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function bp(t){var a=t._init;return a(t._payload)}function vp(t){function a(N,R){if(t){var D=N.deletions;D===null?(N.deletions=[R],N.flags|=16):D.push(R)}}function s(N,R){if(!t)return null;for(;R!==null;)a(N,R),R=R.sibling;return null}function o(N){for(var R=new Map;N!==null;)N.key!==null?R.set(N.key,N):R.set(N.index,N),N=N.sibling;return R}function d(N,R){return N=Fa(N,R),N.index=0,N.sibling=null,N}function p(N,R,D){return N.index=D,t?(D=N.alternate,D!==null?(D=D.index,D<R?(N.flags|=33554434,R):D):(N.flags|=33554434,R)):(N.flags|=1048576,R)}function b(N){return t&&N.alternate===null&&(N.flags|=33554434),N}function w(N,R,D,H){return R===null||R.tag!==6?(R=md(D,N.mode,H),R.return=N,R):(R=d(R,D),R.return=N,R)}function S(N,R,D,H){var le=D.type;return le===h?$(N,R,D.props.children,H,D.key):R!==null&&(R.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===k&&bp(le)===R.type)?(R=d(R,D.props),Ts(R,D),R.return=N,R):(R=Du(D.type,D.key,D.props,null,N.mode,H),Ts(R,D),R.return=N,R)}function C(N,R,D,H){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=pd(D,N.mode,H),R.return=N,R):(R=d(R,D.children||[]),R.return=N,R)}function $(N,R,D,H,le){return R===null||R.tag!==7?(R=Pr(D,N.mode,H,le),R.return=N,R):(R=d(R,D),R.return=N,R)}function Z(N,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=md(""+R,N.mode,D),R.return=N,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case c:return D=Du(R.type,R.key,R.props,null,N.mode,D),Ts(D,R),D.return=N,D;case f:return R=pd(R,N.mode,D),R.return=N,R;case k:var H=R._init;return R=H(R._payload),Z(N,R,D)}if(ee(R)||X(R))return R=Pr(R,N.mode,D,null),R.return=N,R;if(typeof R.then=="function")return Z(N,fu(R),D);if(R.$$typeof===_)return Z(N,Cu(N,R),D);hu(N,R)}return null}function j(N,R,D,H){var le=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return le!==null?null:w(N,R,""+D,H);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case c:return D.key===le?S(N,R,D,H):null;case f:return D.key===le?C(N,R,D,H):null;case k:return le=D._init,D=le(D._payload),j(N,R,D,H)}if(ee(D)||X(D))return le!==null?null:$(N,R,D,H,null);if(typeof D.then=="function")return j(N,R,fu(D),H);if(D.$$typeof===_)return j(N,R,Cu(N,D),H);hu(N,D)}return null}function P(N,R,D,H,le){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return N=N.get(D)||null,w(R,N,""+H,le);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case c:return N=N.get(H.key===null?D:H.key)||null,S(R,N,H,le);case f:return N=N.get(H.key===null?D:H.key)||null,C(R,N,H,le);case k:var Re=H._init;return H=Re(H._payload),P(N,R,D,H,le)}if(ee(H)||X(H))return N=N.get(D)||null,$(R,N,H,le,null);if(typeof H.then=="function")return P(N,R,D,fu(H),le);if(H.$$typeof===_)return P(N,R,D,Cu(R,H),le);hu(R,H)}return null}function de(N,R,D,H){for(var le=null,Re=null,me=R,pe=R=0,yt=null;me!==null&&pe<D.length;pe++){me.index>pe?(yt=me,me=null):yt=me.sibling;var ke=j(N,me,D[pe],H);if(ke===null){me===null&&(me=yt);break}t&&me&&ke.alternate===null&&a(N,me),R=p(ke,R,pe),Re===null?le=ke:Re.sibling=ke,Re=ke,me=yt}if(pe===D.length)return s(N,me),je&&Cr(N,pe),le;if(me===null){for(;pe<D.length;pe++)me=Z(N,D[pe],H),me!==null&&(R=p(me,R,pe),Re===null?le=me:Re.sibling=me,Re=me);return je&&Cr(N,pe),le}for(me=o(me);pe<D.length;pe++)yt=P(me,N,pe,D[pe],H),yt!==null&&(t&&yt.alternate!==null&&me.delete(yt.key===null?pe:yt.key),R=p(yt,R,pe),Re===null?le=yt:Re.sibling=yt,Re=yt);return t&&me.forEach(function(nr){return a(N,nr)}),je&&Cr(N,pe),le}function ye(N,R,D,H){if(D==null)throw Error(r(151));for(var le=null,Re=null,me=R,pe=R=0,yt=null,ke=D.next();me!==null&&!ke.done;pe++,ke=D.next()){me.index>pe?(yt=me,me=null):yt=me.sibling;var nr=j(N,me,ke.value,H);if(nr===null){me===null&&(me=yt);break}t&&me&&nr.alternate===null&&a(N,me),R=p(nr,R,pe),Re===null?le=nr:Re.sibling=nr,Re=nr,me=yt}if(ke.done)return s(N,me),je&&Cr(N,pe),le;if(me===null){for(;!ke.done;pe++,ke=D.next())ke=Z(N,ke.value,H),ke!==null&&(R=p(ke,R,pe),Re===null?le=ke:Re.sibling=ke,Re=ke);return je&&Cr(N,pe),le}for(me=o(me);!ke.done;pe++,ke=D.next())ke=P(me,N,pe,ke.value,H),ke!==null&&(t&&ke.alternate!==null&&me.delete(ke.key===null?pe:ke.key),R=p(ke,R,pe),Re===null?le=ke:Re.sibling=ke,Re=ke);return t&&me.forEach(function(uA){return a(N,uA)}),je&&Cr(N,pe),le}function et(N,R,D,H){if(typeof D=="object"&&D!==null&&D.type===h&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case c:e:{for(var le=D.key;R!==null;){if(R.key===le){if(le=D.type,le===h){if(R.tag===7){s(N,R.sibling),H=d(R,D.props.children),H.return=N,N=H;break e}}else if(R.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===k&&bp(le)===R.type){s(N,R.sibling),H=d(R,D.props),Ts(H,D),H.return=N,N=H;break e}s(N,R);break}else a(N,R);R=R.sibling}D.type===h?(H=Pr(D.props.children,N.mode,H,D.key),H.return=N,N=H):(H=Du(D.type,D.key,D.props,null,N.mode,H),Ts(H,D),H.return=N,N=H)}return b(N);case f:e:{for(le=D.key;R!==null;){if(R.key===le)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){s(N,R.sibling),H=d(R,D.children||[]),H.return=N,N=H;break e}else{s(N,R);break}else a(N,R);R=R.sibling}H=pd(D,N.mode,H),H.return=N,N=H}return b(N);case k:return le=D._init,D=le(D._payload),et(N,R,D,H)}if(ee(D))return de(N,R,D,H);if(X(D)){if(le=X(D),typeof le!="function")throw Error(r(150));return D=le.call(D),ye(N,R,D,H)}if(typeof D.then=="function")return et(N,R,fu(D),H);if(D.$$typeof===_)return et(N,R,Cu(N,D),H);hu(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,R!==null&&R.tag===6?(s(N,R.sibling),H=d(R,D),H.return=N,N=H):(s(N,R),H=md(D,N.mode,H),H.return=N,N=H),b(N)):s(N,R)}return function(N,R,D,H){try{Ss=0;var le=et(N,R,D,H);return _i=null,le}catch(me){if(me===As)throw me;var Re=On(29,me,null,N.mode);return Re.lanes=H,Re.return=N,Re}finally{}}}var Nr=vp(!0),_p=vp(!1),wi=xe(null),mu=xe(0);function wp(t,a){t=Ta,Ae(mu,t),Ae(wi,a),Ta=t|a.baseLanes}function wc(){Ae(mu,Ta),Ae(wi,wi.current)}function Ac(){Ta=mu.current,ze(wi),ze(mu)}var En=xe(null),ta=null;function Ba(t){var a=t.alternate;Ae(ot,ot.current&1),Ae(En,t),ta===null&&(a===null||wi.current!==null||a.memoizedState!==null)&&(ta=t)}function Ap(t){if(t.tag===22){if(Ae(ot,ot.current),Ae(En,t),ta===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(ta=t)}}else Pa()}function Pa(){Ae(ot,ot.current),Ae(En,En.current)}function pa(t){ze(En),ta===t&&(ta=null),ze(ot)}var ot=xe(0);function pu(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var F0=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},K0=i.unstable_scheduleCallback,X0=i.unstable_NormalPriority,ct={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ec(){return{controller:new F0,data:new Map,refCount:0}}function Os(t){t.refCount--,t.refCount===0&&K0(X0,function(){t.controller.abort()})}var Rs=null,Sc=0,Ai=0,Ei=null;function J0(t,a){if(Rs===null){var s=Rs=[];Sc=0,Ai=Nd(),Ei={status:"pending",value:void 0,then:function(o){s.push(o)}}}return Sc++,a.then(Ep,Ep),a}function Ep(){if(--Sc===0&&Rs!==null){Ei!==null&&(Ei.status="fulfilled");var t=Rs;Rs=null,Ai=0,Ei=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function W0(t,a){var s=[],o={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var d=0;d<s.length;d++)(0,s[d])(a)},function(d){for(o.status="rejected",o.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),o}var Sp=re.S;re.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&J0(t,a),Sp!==null&&Sp(t,a)};var Dr=xe(null);function Tc(){var t=Dr.current;return t!==null?t:Ze.pooledCache}function gu(t,a){a===null?Ae(Dr,Dr.current):Ae(Dr,a.pool)}function Tp(){var t=Tc();return t===null?null:{parent:ct._currentValue,pool:t}}var $a=0,Te=null,Ie=null,it=null,yu=!1,Si=!1,Mr=!1,bu=0,Cs=0,Ti=null,ew=0;function at(){throw Error(r(321))}function Oc(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!rn(t[s],a[s]))return!1;return!0}function Rc(t,a,s,o,d,p){return $a=p,Te=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,re.H=t===null||t.memoizedState===null?jr:za,Mr=!1,p=s(o,d),Mr=!1,Si&&(p=Rp(a,s,o,d)),Op(t),p}function Op(t){re.H=na;var a=Ie!==null&&Ie.next!==null;if($a=0,it=Ie=Te=null,yu=!1,Cs=0,Ti=null,a)throw Error(r(300));t===null||pt||(t=t.dependencies,t!==null&&Ru(t)&&(pt=!0))}function Rp(t,a,s,o){Te=t;var d=0;do{if(Si&&(Ti=null),Cs=0,Si=!1,25<=d)throw Error(r(301));if(d+=1,it=Ie=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}re.H=kr,p=a(s,o)}while(Si);return p}function tw(){var t=re.H,a=t.useState()[0];return a=typeof a.then=="function"?xs(a):a,t=t.useState()[0],(Ie!==null?Ie.memoizedState:null)!==t&&(Te.flags|=1024),a}function Cc(){var t=bu!==0;return bu=0,t}function xc(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Nc(t){if(yu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}yu=!1}$a=0,it=Ie=Te=null,Si=!1,Cs=bu=0,Ti=null}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Te.memoizedState=it=t:it=it.next=t,it}function st(){if(Ie===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var a=it===null?Te.memoizedState:it.next;if(a!==null)it=a,Ie=t;else{if(t===null)throw Te.alternate===null?Error(r(467)):Error(r(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},it===null?Te.memoizedState=it=t:it=it.next=t}return it}var vu;vu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function xs(t){var a=Cs;return Cs+=1,Ti===null&&(Ti=[]),t=gp(Ti,t,a),a=Te,(it===null?a.memoizedState:it.next)===null&&(a=a.alternate,re.H=a===null||a.memoizedState===null?jr:za),t}function _u(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xs(t);if(t.$$typeof===_)return Ct(t)}throw Error(r(438,String(t)))}function Dc(t){var a=null,s=Te.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var o=Te.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=vu(),Te.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),o=0;o<t;o++)s[o]=ae;return a.index++,s}function ga(t,a){return typeof a=="function"?a(t):a}function wu(t){var a=st();return Mc(a,Ie,t)}function Mc(t,a,s){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var d=t.baseQueue,p=o.pending;if(p!==null){if(d!==null){var b=d.next;d.next=p.next,p.next=b}a.baseQueue=d=p,o.pending=null}if(p=t.baseState,d===null)t.memoizedState=p;else{a=d.next;var w=b=null,S=null,C=a,$=!1;do{var Z=C.lane&-536870913;if(Z!==C.lane?(De&Z)===Z:($a&Z)===Z){var j=C.revertLane;if(j===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),Z===Ai&&($=!0);else if(($a&j)===j){C=C.next,j===Ai&&($=!0);continue}else Z={lane:0,revertLane:C.revertLane,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},S===null?(w=S=Z,b=p):S=S.next=Z,Te.lanes|=j,Ka|=j;Z=C.action,Mr&&s(p,Z),p=C.hasEagerState?C.eagerState:s(p,Z)}else j={lane:Z,revertLane:C.revertLane,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},S===null?(w=S=j,b=p):S=S.next=j,Te.lanes|=Z,Ka|=Z;C=C.next}while(C!==null&&C!==a);if(S===null?b=p:S.next=w,!rn(p,t.memoizedState)&&(pt=!0,$&&(s=Ei,s!==null)))throw s;t.memoizedState=p,t.baseState=b,t.baseQueue=S,o.lastRenderedState=p}return d===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function jc(t){var a=st(),s=a.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var o=s.dispatch,d=s.pending,p=a.memoizedState;if(d!==null){s.pending=null;var b=d=d.next;do p=t(p,b.action),b=b.next;while(b!==d);rn(p,a.memoizedState)||(pt=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),s.lastRenderedState=p}return[p,o]}function Cp(t,a,s){var o=Te,d=st(),p=je;if(p){if(s===void 0)throw Error(r(407));s=s()}else s=a();var b=!rn((Ie||d).memoizedState,s);if(b&&(d.memoizedState=s,pt=!0),d=d.queue,Uc(Dp.bind(null,o,d,t),[t]),d.getSnapshot!==a||b||it!==null&&it.memoizedState.tag&1){if(o.flags|=2048,Oi(9,Np.bind(null,o,d,s,a),{destroy:void 0},null),Ze===null)throw Error(r(349));p||($a&60)!==0||xp(o,a,s)}return s}function xp(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=Te.updateQueue,a===null?(a=vu(),Te.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Np(t,a,s,o){a.value=s,a.getSnapshot=o,Mp(a)&&jp(t)}function Dp(t,a,s){return s(function(){Mp(a)&&jp(t)})}function Mp(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!rn(t,s)}catch{return!0}}function jp(t){var a=Ia(t,2);a!==null&&Ut(a,t,2)}function kc(t){var a=Yt();if(typeof t=="function"){var s=t;if(t=s(),Mr){jn(!0);try{s()}finally{jn(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},a}function kp(t,a,s,o){return t.baseState=s,Mc(t,Ie,typeof o=="function"?o:ga)}function nw(t,a,s,o,d){if(Su(t))throw Error(r(485));if(t=a.action,t!==null){var p={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};re.T!==null?s(!0):p.isTransition=!1,o(p),s=a.pending,s===null?(p.next=a.pending=p,Lp(a,p)):(p.next=s.next,a.pending=s.next=p)}}function Lp(t,a){var s=a.action,o=a.payload,d=t.state;if(a.isTransition){var p=re.T,b={};re.T=b;try{var w=s(d,o),S=re.S;S!==null&&S(b,w),Up(t,a,w)}catch(C){Lc(t,a,C)}finally{re.T=p}}else try{p=s(d,o),Up(t,a,p)}catch(C){Lc(t,a,C)}}function Up(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){Ip(t,a,o)},function(o){return Lc(t,a,o)}):Ip(t,a,s)}function Ip(t,a,s){a.status="fulfilled",a.value=s,Bp(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,Lp(t,s)))}function Lc(t,a,s){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=s,Bp(a),a=a.next;while(a!==o)}t.action=null}function Bp(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Pp(t,a){return a}function $p(t,a){if(je){var s=Ze.formState;if(s!==null){e:{var o=Te;if(je){if(wt){t:{for(var d=wt,p=ea;d.nodeType!==8;){if(!p){d=null;break t}if(d=In(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){wt=In(d.nextSibling),o=d.data==="F!";break e}}xr(o)}o=!1}o&&(a=s[0])}}return s=Yt(),s.memoizedState=s.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:a},s.queue=o,s=rg.bind(null,Te,o),o.dispatch=s,o=kc(!1),p=zc.bind(null,Te,!1,o.queue),o=Yt(),d={state:a,dispatch:null,action:t,pending:null},o.queue=d,s=nw.bind(null,Te,d,p,s),d.dispatch=s,o.memoizedState=t,[a,s,!1]}function zp(t){var a=st();return Hp(a,Ie,t)}function Hp(t,a,s){a=Mc(t,a,Pp)[0],t=wu(ga)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?xs(a):a;var o=st(),d=o.queue,p=d.dispatch;return s!==o.memoizedState&&(Te.flags|=2048,Oi(9,aw.bind(null,d,s),{destroy:void 0},null)),[a,p,t]}function aw(t,a){t.action=a}function qp(t){var a=st(),s=Ie;if(s!==null)return Hp(a,s,t);st(),a=a.memoizedState,s=st();var o=s.queue.dispatch;return s.memoizedState=t,[a,o,!1]}function Oi(t,a,s,o){return t={tag:t,create:a,inst:s,deps:o,next:null},a=Te.updateQueue,a===null&&(a=vu(),Te.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(o=s.next,s.next=t,t.next=o,a.lastEffect=t),t}function Gp(){return st().memoizedState}function Au(t,a,s,o){var d=Yt();Te.flags|=t,d.memoizedState=Oi(1|a,s,{destroy:void 0},o===void 0?null:o)}function Eu(t,a,s,o){var d=st();o=o===void 0?null:o;var p=d.memoizedState.inst;Ie!==null&&o!==null&&Oc(o,Ie.memoizedState.deps)?d.memoizedState=Oi(a,s,p,o):(Te.flags|=t,d.memoizedState=Oi(1|a,s,p,o))}function Zp(t,a){Au(8390656,8,t,a)}function Uc(t,a){Eu(2048,8,t,a)}function Vp(t,a){return Eu(4,2,t,a)}function Qp(t,a){return Eu(4,4,t,a)}function Yp(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Fp(t,a,s){s=s!=null?s.concat([t]):null,Eu(4,4,Yp.bind(null,a,t),s)}function Ic(){}function Kp(t,a){var s=st();a=a===void 0?null:a;var o=s.memoizedState;return a!==null&&Oc(a,o[1])?o[0]:(s.memoizedState=[t,a],t)}function Xp(t,a){var s=st();a=a===void 0?null:a;var o=s.memoizedState;if(a!==null&&Oc(a,o[1]))return o[0];if(o=t(),Mr){jn(!0);try{t()}finally{jn(!1)}}return s.memoizedState=[o,a],o}function Bc(t,a,s){return s===void 0||($a&1073741824)!==0?t.memoizedState=a:(t.memoizedState=s,t=Wg(),Te.lanes|=t,Ka|=t,s)}function Jp(t,a,s,o){return rn(s,a)?s:wi.current!==null?(t=Bc(t,s,o),rn(t,a)||(pt=!0),t):($a&42)===0?(pt=!0,t.memoizedState=s):(t=Wg(),Te.lanes|=t,Ka|=t,a)}function Wp(t,a,s,o,d){var p=W.p;W.p=p!==0&&8>p?p:8;var b=re.T,w={};re.T=w,zc(t,!1,a,s);try{var S=d(),C=re.S;if(C!==null&&C(w,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var $=W0(S,o);Ns(t,a,$,on(t))}else Ns(t,a,o,on(t))}catch(Z){Ns(t,a,{then:function(){},status:"rejected",reason:Z},on())}finally{W.p=p,re.T=b}}function rw(){}function Pc(t,a,s,o){if(t.tag!==5)throw Error(r(476));var d=eg(t).queue;Wp(t,d,a,ue,s===null?rw:function(){return tg(t),s(o)})}function eg(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:ue},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function tg(t){var a=eg(t).next.queue;Ns(t,a,{},on())}function $c(){return Ct(Ks)}function ng(){return st().memoizedState}function ag(){return st().memoizedState}function iw(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=on();t=Ga(s);var o=Za(a,t,s);o!==null&&(Ut(o,a,s),js(o,a,s)),a={cache:Ec()},t.payload=a;return}a=a.return}}function sw(t,a,s){var o=on();s={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Su(t)?ig(a,s):(s=gc(t,a,s,o),s!==null&&(Ut(s,t,o),sg(s,a,o)))}function rg(t,a,s){var o=on();Ns(t,a,s,o)}function Ns(t,a,s,o){var d={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Su(t))ig(a,d);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,w=p(b,s);if(d.hasEagerState=!0,d.eagerState=w,rn(w,b))return lu(t,a,d,0),Ze===null&&su(),!1}catch{}finally{}if(s=gc(t,a,d,o),s!==null)return Ut(s,t,o),sg(s,a,o),!0}return!1}function zc(t,a,s,o){if(o={lane:2,revertLane:Nd(),action:o,hasEagerState:!1,eagerState:null,next:null},Su(t)){if(a)throw Error(r(479))}else a=gc(t,s,o,2),a!==null&&Ut(a,t,2)}function Su(t){var a=t.alternate;return t===Te||a!==null&&a===Te}function ig(t,a){Si=yu=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function sg(t,a,s){if((s&4194176)!==0){var o=a.lanes;o&=t.pendingLanes,s|=o,a.lanes=s,gn(t,s)}}var na={readContext:Ct,use:_u,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useLayoutEffect:at,useInsertionEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useSyncExternalStore:at,useId:at};na.useCacheRefresh=at,na.useMemoCache=at,na.useHostTransitionStatus=at,na.useFormState=at,na.useActionState=at,na.useOptimistic=at;var jr={readContext:Ct,use:_u,useCallback:function(t,a){return Yt().memoizedState=[t,a===void 0?null:a],t},useContext:Ct,useEffect:Zp,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,Au(4194308,4,Yp.bind(null,a,t),s)},useLayoutEffect:function(t,a){return Au(4194308,4,t,a)},useInsertionEffect:function(t,a){Au(4,2,t,a)},useMemo:function(t,a){var s=Yt();a=a===void 0?null:a;var o=t();if(Mr){jn(!0);try{t()}finally{jn(!1)}}return s.memoizedState=[o,a],o},useReducer:function(t,a,s){var o=Yt();if(s!==void 0){var d=s(a);if(Mr){jn(!0);try{s(a)}finally{jn(!1)}}}else d=a;return o.memoizedState=o.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},o.queue=t,t=t.dispatch=sw.bind(null,Te,t),[o.memoizedState,t]},useRef:function(t){var a=Yt();return t={current:t},a.memoizedState=t},useState:function(t){t=kc(t);var a=t.queue,s=rg.bind(null,Te,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Ic,useDeferredValue:function(t,a){var s=Yt();return Bc(s,t,a)},useTransition:function(){var t=kc(!1);return t=Wp.bind(null,Te,t.queue,!0,!1),Yt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var o=Te,d=Yt();if(je){if(s===void 0)throw Error(r(407));s=s()}else{if(s=a(),Ze===null)throw Error(r(349));(De&60)!==0||xp(o,a,s)}d.memoizedState=s;var p={value:s,getSnapshot:a};return d.queue=p,Zp(Dp.bind(null,o,p,t),[t]),o.flags|=2048,Oi(9,Np.bind(null,o,p,s,a),{destroy:void 0},null),s},useId:function(){var t=Yt(),a=Ze.identifierPrefix;if(je){var s=ma,o=ha;s=(o&~(1<<32-kt(o)-1)).toString(32)+s,a=":"+a+"R"+s,s=bu++,0<s&&(a+="H"+s.toString(32)),a+=":"}else s=ew++,a=":"+a+"r"+s.toString(32)+":";return t.memoizedState=a},useCacheRefresh:function(){return Yt().memoizedState=iw.bind(null,Te)}};jr.useMemoCache=Dc,jr.useHostTransitionStatus=$c,jr.useFormState=$p,jr.useActionState=$p,jr.useOptimistic=function(t){var a=Yt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=zc.bind(null,Te,!0,s),s.dispatch=a,[t,a]};var za={readContext:Ct,use:_u,useCallback:Kp,useContext:Ct,useEffect:Uc,useImperativeHandle:Fp,useInsertionEffect:Vp,useLayoutEffect:Qp,useMemo:Xp,useReducer:wu,useRef:Gp,useState:function(){return wu(ga)},useDebugValue:Ic,useDeferredValue:function(t,a){var s=st();return Jp(s,Ie.memoizedState,t,a)},useTransition:function(){var t=wu(ga)[0],a=st().memoizedState;return[typeof t=="boolean"?t:xs(t),a]},useSyncExternalStore:Cp,useId:ng};za.useCacheRefresh=ag,za.useMemoCache=Dc,za.useHostTransitionStatus=$c,za.useFormState=zp,za.useActionState=zp,za.useOptimistic=function(t,a){var s=st();return kp(s,Ie,t,a)};var kr={readContext:Ct,use:_u,useCallback:Kp,useContext:Ct,useEffect:Uc,useImperativeHandle:Fp,useInsertionEffect:Vp,useLayoutEffect:Qp,useMemo:Xp,useReducer:jc,useRef:Gp,useState:function(){return jc(ga)},useDebugValue:Ic,useDeferredValue:function(t,a){var s=st();return Ie===null?Bc(s,t,a):Jp(s,Ie.memoizedState,t,a)},useTransition:function(){var t=jc(ga)[0],a=st().memoizedState;return[typeof t=="boolean"?t:xs(t),a]},useSyncExternalStore:Cp,useId:ng};kr.useCacheRefresh=ag,kr.useMemoCache=Dc,kr.useHostTransitionStatus=$c,kr.useFormState=qp,kr.useActionState=qp,kr.useOptimistic=function(t,a){var s=st();return Ie!==null?kp(s,Ie,t,a):(s.baseState=t,[t,s.queue.dispatch])};function Hc(t,a,s,o){a=t.memoizedState,s=s(o,a),s=s==null?a:he({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var qc={isMounted:function(t){return(t=t._reactInternals)?G(t)===t:!1},enqueueSetState:function(t,a,s){t=t._reactInternals;var o=on(),d=Ga(o);d.payload=a,s!=null&&(d.callback=s),a=Za(t,d,o),a!==null&&(Ut(a,t,o),js(a,t,o))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var o=on(),d=Ga(o);d.tag=1,d.payload=a,s!=null&&(d.callback=s),a=Za(t,d,o),a!==null&&(Ut(a,t,o),js(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=on(),o=Ga(s);o.tag=2,a!=null&&(o.callback=a),a=Za(t,o,s),a!==null&&(Ut(a,t,s),js(a,t,s))}};function lg(t,a,s,o,d,p,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,p,b):a.prototype&&a.prototype.isPureReactComponent?!ys(s,o)||!ys(d,p):!0}function ug(t,a,s,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,o),a.state!==t&&qc.enqueueReplaceState(a,a.state,null)}function Lr(t,a){var s=a;if("ref"in a){s={};for(var o in a)o!=="ref"&&(s[o]=a[o])}if(t=t.defaultProps){s===a&&(s=he({},s));for(var d in t)s[d]===void 0&&(s[d]=t[d])}return s}var Tu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function og(t){Tu(t)}function cg(t){console.error(t)}function dg(t){Tu(t)}function Ou(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function fg(t,a,s){try{var o=t.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Gc(t,a,s){return s=Ga(s),s.tag=3,s.payload={element:null},s.callback=function(){Ou(t,a)},s}function hg(t){return t=Ga(t),t.tag=3,t}function mg(t,a,s,o){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;t.payload=function(){return d(p)},t.callback=function(){fg(a,s,o)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){fg(a,s,o),typeof d!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function lw(t,a,s,o,d){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=s.alternate,a!==null&&Ms(a,s,d,!0),s=En.current,s!==null){switch(s.tag){case 13:return ta===null?Td():s.alternate===null&&We===0&&(We=3),s.flags&=-257,s.flags|=65536,s.lanes=d,o===_c?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([o]):a.add(o),Rd(t,o,d)),!1;case 22:return s.flags|=65536,o===_c?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([o]):s.add(o)),Rd(t,o,d)),!1}throw Error(r(435,s.tag))}return Rd(t,o,d),Td(),!1}if(je)return a=En.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,o!==vc&&(t=Error(r(422),{cause:o}),ws(_n(t,s)))):(o!==vc&&(a=Error(r(423),{cause:o}),ws(_n(a,s))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,o=_n(o,s),d=Gc(t.stateNode,o,d),id(t,d),We!==4&&(We=2)),!1;var p=Error(r(520),{cause:o});if(p=_n(p,s),zs===null?zs=[p]:zs.push(p),We!==4&&(We=2),a===null)return!0;o=_n(o,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=d&-d,s.lanes|=t,t=Gc(s.stateNode,o,t),id(s,t),!1;case 1:if(a=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Xa===null||!Xa.has(p))))return s.flags|=65536,d&=-d,s.lanes|=d,d=hg(d),mg(d,t,s,o),id(s,d),!1}s=s.return}while(s!==null);return!1}var pg=Error(r(461)),pt=!1;function At(t,a,s,o){a.child=t===null?_p(a,null,s,o):Nr(a,t.child,s,o)}function gg(t,a,s,o,d){s=s.render;var p=a.ref;if("ref"in o){var b={};for(var w in o)w!=="ref"&&(b[w]=o[w])}else b=o;return Ir(a),o=Rc(t,a,s,b,p,d),w=Cc(),t!==null&&!pt?(xc(t,a,d),ya(t,a,d)):(je&&w&&yc(a),a.flags|=1,At(t,a,o,d),a.child)}function yg(t,a,s,o,d){if(t===null){var p=s.type;return typeof p=="function"&&!hd(p)&&p.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=p,bg(t,a,p,o,d)):(t=Du(s.type,null,o,a,a.mode,d),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!Wc(t,d)){var b=p.memoizedProps;if(s=s.compare,s=s!==null?s:ys,s(b,o)&&t.ref===a.ref)return ya(t,a,d)}return a.flags|=1,t=Fa(p,o),t.ref=a.ref,t.return=a,a.child=t}function bg(t,a,s,o,d){if(t!==null){var p=t.memoizedProps;if(ys(p,o)&&t.ref===a.ref)if(pt=!1,a.pendingProps=o=p,Wc(t,d))(t.flags&131072)!==0&&(pt=!0);else return a.lanes=t.lanes,ya(t,a,d)}return Zc(t,a,s,o,d)}function vg(t,a,s){var o=a.pendingProps,d=o.children,p=(a.stateNode._pendingVisibility&2)!==0,b=t!==null?t.memoizedState:null;if(Ds(t,a),o.mode==="hidden"||p){if((a.flags&128)!==0){if(o=b!==null?b.baseLanes|s:s,t!==null){for(d=a.child=t.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;a.childLanes=p&~o}else a.childLanes=0,a.child=null;return _g(t,a,o,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&gu(a,b!==null?b.cachePool:null),b!==null?wp(a,b):wc(),Ap(a);else return a.lanes=a.childLanes=536870912,_g(t,a,b!==null?b.baseLanes|s:s,s)}else b!==null?(gu(a,b.cachePool),wp(a,b),Pa(),a.memoizedState=null):(t!==null&&gu(a,null),wc(),Pa());return At(t,a,d,s),a.child}function _g(t,a,s,o){var d=Tc();return d=d===null?null:{parent:ct._currentValue,pool:d},a.memoizedState={baseLanes:s,cachePool:d},t!==null&&gu(a,null),wc(),Ap(a),t!==null&&Ms(t,a,o,!0),null}function Ds(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=2097664);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(t===null||t.ref!==s)&&(a.flags|=2097664)}}function Zc(t,a,s,o,d){return Ir(a),s=Rc(t,a,s,o,void 0,d),o=Cc(),t!==null&&!pt?(xc(t,a,d),ya(t,a,d)):(je&&o&&yc(a),a.flags|=1,At(t,a,s,d),a.child)}function wg(t,a,s,o,d,p){return Ir(a),a.updateQueue=null,s=Rp(a,o,s,d),Op(t),o=Cc(),t!==null&&!pt?(xc(t,a,p),ya(t,a,p)):(je&&o&&yc(a),a.flags|=1,At(t,a,s,p),a.child)}function Ag(t,a,s,o,d){if(Ir(a),a.stateNode===null){var p=yi,b=s.contextType;typeof b=="object"&&b!==null&&(p=Ct(b)),p=new s(o,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=qc,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=o,p.state=a.memoizedState,p.refs={},ad(a),b=s.contextType,p.context=typeof b=="object"&&b!==null?Ct(b):yi,p.state=a.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(Hc(a,s,b,o),p.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&qc.enqueueReplaceState(p,p.state,null),Ls(a,o,p,d),ks(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){p=a.stateNode;var w=a.memoizedProps,S=Lr(s,w);p.props=S;var C=p.context,$=s.contextType;b=yi,typeof $=="object"&&$!==null&&(b=Ct($));var Z=s.getDerivedStateFromProps;$=typeof Z=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,$||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||C!==b)&&ug(a,p,o,b),qa=!1;var j=a.memoizedState;p.state=j,Ls(a,o,p,d),ks(),C=a.memoizedState,w||j!==C||qa?(typeof Z=="function"&&(Hc(a,s,Z,o),C=a.memoizedState),(S=qa||lg(a,s,S,o,j,C,b))?($||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=C),p.props=o,p.state=C,p.context=b,o=S):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{p=a.stateNode,rd(t,a),b=a.memoizedProps,$=Lr(s,b),p.props=$,Z=a.pendingProps,j=p.context,C=s.contextType,S=yi,typeof C=="object"&&C!==null&&(S=Ct(C)),w=s.getDerivedStateFromProps,(C=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==Z||j!==S)&&ug(a,p,o,S),qa=!1,j=a.memoizedState,p.state=j,Ls(a,o,p,d),ks();var P=a.memoizedState;b!==Z||j!==P||qa||t!==null&&t.dependencies!==null&&Ru(t.dependencies)?(typeof w=="function"&&(Hc(a,s,w,o),P=a.memoizedState),($=qa||lg(a,s,$,o,j,P,S)||t!==null&&t.dependencies!==null&&Ru(t.dependencies))?(C||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,P,S),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,P,S)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===t.memoizedProps&&j===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&j===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=P),p.props=o,p.state=P,p.context=S,o=$):(typeof p.componentDidUpdate!="function"||b===t.memoizedProps&&j===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&j===t.memoizedState||(a.flags|=1024),o=!1)}return p=o,Ds(t,a),o=(a.flags&128)!==0,p||o?(p=a.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&o?(a.child=Nr(a,t.child,null,d),a.child=Nr(a,null,s,d)):At(t,a,s,d),a.memoizedState=p.state,t=a.child):t=ya(t,a,d),t}function Eg(t,a,s,o){return _s(),a.flags|=256,At(t,a,s,o),a.child}var Vc={dehydrated:null,treeContext:null,retryLane:0};function Qc(t){return{baseLanes:t,cachePool:Tp()}}function Yc(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=Rn),t}function Sg(t,a,s){var o=a.pendingProps,d=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=t!==null&&t.memoizedState===null?!1:(ot.current&2)!==0),b&&(d=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,t===null){if(je){if(d?Ba(a):Pa(),je){var w=wt,S;if(S=w){e:{for(S=w,w=ea;S.nodeType!==8;){if(!w){w=null;break e}if(S=In(S.nextSibling),S===null){w=null;break e}}w=S}w!==null?(a.memoizedState={dehydrated:w,treeContext:Rr!==null?{id:ha,overflow:ma}:null,retryLane:536870912},S=On(18,null,null,0),S.stateNode=w,S.return=a,a.child=S,Lt=a,wt=null,S=!0):S=!1}S||xr(a)}if(w=a.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return w.data==="$!"?a.lanes=16:a.lanes=536870912,null;pa(a)}return w=o.children,o=o.fallback,d?(Pa(),d=a.mode,w=Kc({mode:"hidden",children:w},d),o=Pr(o,d,s,null),w.return=a,o.return=a,w.sibling=o,a.child=w,d=a.child,d.memoizedState=Qc(s),d.childLanes=Yc(t,b,s),a.memoizedState=Vc,o):(Ba(a),Fc(a,w))}if(S=t.memoizedState,S!==null&&(w=S.dehydrated,w!==null)){if(p)a.flags&256?(Ba(a),a.flags&=-257,a=Xc(t,a,s)):a.memoizedState!==null?(Pa(),a.child=t.child,a.flags|=128,a=null):(Pa(),d=o.fallback,w=a.mode,o=Kc({mode:"visible",children:o.children},w),d=Pr(d,w,s,null),d.flags|=2,o.return=a,d.return=a,o.sibling=d,a.child=o,Nr(a,t.child,null,s),o=a.child,o.memoizedState=Qc(s),o.childLanes=Yc(t,b,s),a.memoizedState=Vc,a=d);else if(Ba(a),w.data==="$!"){if(b=w.nextSibling&&w.nextSibling.dataset,b)var C=b.dgst;b=C,o=Error(r(419)),o.stack="",o.digest=b,ws({value:o,source:null,stack:null}),a=Xc(t,a,s)}else if(pt||Ms(t,a,s,!1),b=(s&t.childLanes)!==0,pt||b){if(b=Ze,b!==null){if(o=s&-s,(o&42)!==0)o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(o=(o&(b.suspendedLanes|s))!==0?0:o,o!==0&&o!==S.retryLane)throw S.retryLane=o,Ia(t,o),Ut(b,t,o),pg}w.data==="$?"||Td(),a=Xc(t,a,s)}else w.data==="$?"?(a.flags|=128,a.child=t.child,a=Aw.bind(null,t),w._reactRetry=a,a=null):(t=S.treeContext,wt=In(w.nextSibling),Lt=a,je=!0,Ln=null,ea=!1,t!==null&&(wn[An++]=ha,wn[An++]=ma,wn[An++]=Rr,ha=t.id,ma=t.overflow,Rr=a),a=Fc(a,o.children),a.flags|=4096);return a}return d?(Pa(),d=o.fallback,w=a.mode,S=t.child,C=S.sibling,o=Fa(S,{mode:"hidden",children:o.children}),o.subtreeFlags=S.subtreeFlags&31457280,C!==null?d=Fa(C,d):(d=Pr(d,w,s,null),d.flags|=2),d.return=a,o.return=a,o.sibling=d,a.child=o,o=d,d=a.child,w=t.child.memoizedState,w===null?w=Qc(s):(S=w.cachePool,S!==null?(C=ct._currentValue,S=S.parent!==C?{parent:C,pool:C}:S):S=Tp(),w={baseLanes:w.baseLanes|s,cachePool:S}),d.memoizedState=w,d.childLanes=Yc(t,b,s),a.memoizedState=Vc,o):(Ba(a),s=t.child,t=s.sibling,s=Fa(s,{mode:"visible",children:o.children}),s.return=a,s.sibling=null,t!==null&&(b=a.deletions,b===null?(a.deletions=[t],a.flags|=16):b.push(t)),a.child=s,a.memoizedState=null,s)}function Fc(t,a){return a=Kc({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Kc(t,a){return Kg(t,a,0,null)}function Xc(t,a,s){return Nr(a,t.child,null,s),t=Fc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Tg(t,a,s){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),td(t.return,a,s)}function Jc(t,a,s,o,d){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:d}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=s,p.tailMode=d)}function Og(t,a,s){var o=a.pendingProps,d=o.revealOrder,p=o.tail;if(At(t,a,o.children,s),o=ot.current,(o&2)!==0)o=o&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tg(t,s,a);else if(t.tag===19)Tg(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(Ae(ot,o),d){case"forwards":for(s=a.child,d=null;s!==null;)t=s.alternate,t!==null&&pu(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=a.child,a.child=null):(d=s.sibling,s.sibling=null),Jc(a,!1,d,s,p);break;case"backwards":for(s=null,d=a.child,a.child=null;d!==null;){if(t=d.alternate,t!==null&&pu(t)===null){a.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}Jc(a,!0,s,null,p);break;case"together":Jc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ya(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),Ka|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(Ms(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,s=Fa(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=Fa(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function Wc(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Ru(t)))}function uw(t,a,s){switch(a.tag){case 3:oa(a,a.stateNode.containerInfo),Ha(a,ct,t.memoizedState.cache),_s();break;case 27:case 5:ni(a);break;case 4:oa(a,a.stateNode.containerInfo);break;case 10:Ha(a,a.type,a.memoizedProps.value);break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Ba(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Sg(t,a,s):(Ba(a),t=ya(t,a,s),t!==null?t.sibling:null);Ba(a);break;case 19:var d=(t.flags&128)!==0;if(o=(s&a.childLanes)!==0,o||(Ms(t,a,s,!1),o=(s&a.childLanes)!==0),d){if(o)return Og(t,a,s);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ae(ot,ot.current),o)break;return null;case 22:case 23:return a.lanes=0,vg(t,a,s);case 24:Ha(a,ct,t.memoizedState.cache)}return ya(t,a,s)}function Rg(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)pt=!0;else{if(!Wc(t,s)&&(a.flags&128)===0)return pt=!1,uw(t,a,s);pt=(t.flags&131072)!==0}else pt=!1,je&&(a.flags&1048576)!==0&&dp(a,cu,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var o=a.elementType,d=o._init;if(o=d(o._payload),a.type=o,typeof o=="function")hd(o)?(t=Lr(o,t),a.tag=1,a=Ag(null,a,o,t,s)):(a.tag=0,a=Zc(null,a,o,t,s));else{if(o!=null){if(d=o.$$typeof,d===A){a.tag=11,a=gg(null,a,o,t,s);break e}else if(d===x){a.tag=14,a=yg(null,a,o,t,s);break e}}throw a=F(o)||o,Error(r(306,a,""))}}return a;case 0:return Zc(t,a,a.type,a.pendingProps,s);case 1:return o=a.type,d=Lr(o,a.pendingProps),Ag(t,a,o,d,s);case 3:e:{if(oa(a,a.stateNode.containerInfo),t===null)throw Error(r(387));var p=a.pendingProps;d=a.memoizedState,o=d.element,rd(t,a),Ls(a,p,null,s);var b=a.memoizedState;if(p=b.cache,Ha(a,ct,p),p!==d.cache&&nd(a,[ct],s,!0),ks(),p=b.element,d.isDehydrated)if(d={element:p,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=Eg(t,a,p,s);break e}else if(p!==o){o=_n(Error(r(424)),a),ws(o),a=Eg(t,a,p,s);break e}else for(wt=In(a.stateNode.containerInfo.firstChild),Lt=a,je=!0,Ln=null,ea=!0,s=_p(a,null,p,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(_s(),p===o){a=ya(t,a,s);break e}At(t,a,p,s)}a=a.child}return a;case 26:return Ds(t,a),t===null?(s=Ny(a.type,null,a.pendingProps,null))?a.memoizedState=s:je||(s=a.type,t=a.pendingProps,o=qu(Dn.current).createElement(s),o[rt]=a,o[Vt]=t,Et(o,s,t),mt(o),a.stateNode=o):a.memoizedState=Ny(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return ni(a),t===null&&je&&(o=a.stateNode=Ry(a.type,a.pendingProps,Dn.current),Lt=a,ea=!0,wt=In(o.firstChild)),o=a.pendingProps.children,t!==null||je?At(t,a,o,s):a.child=Nr(a,null,o,s),Ds(t,a),a.child;case 5:return t===null&&je&&((d=o=wt)&&(o=Bw(o,a.type,a.pendingProps,ea),o!==null?(a.stateNode=o,Lt=a,wt=In(o.firstChild),ea=!1,d=!0):d=!1),d||xr(a)),ni(a),d=a.type,p=a.pendingProps,b=t!==null?t.memoizedProps:null,o=p.children,Pd(d,p)?o=null:b!==null&&Pd(d,b)&&(a.flags|=32),a.memoizedState!==null&&(d=Rc(t,a,tw,null,null,s),Ks._currentValue=d),Ds(t,a),At(t,a,o,s),a.child;case 6:return t===null&&je&&((t=s=wt)&&(s=Pw(s,a.pendingProps,ea),s!==null?(a.stateNode=s,Lt=a,wt=null,t=!0):t=!1),t||xr(a)),null;case 13:return Sg(t,a,s);case 4:return oa(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=Nr(a,null,o,s):At(t,a,o,s),a.child;case 11:return gg(t,a,a.type,a.pendingProps,s);case 7:return At(t,a,a.pendingProps,s),a.child;case 8:return At(t,a,a.pendingProps.children,s),a.child;case 12:return At(t,a,a.pendingProps.children,s),a.child;case 10:return o=a.pendingProps,Ha(a,a.type,o.value),At(t,a,o.children,s),a.child;case 9:return d=a.type._context,o=a.pendingProps.children,Ir(a),d=Ct(d),o=o(d),a.flags|=1,At(t,a,o,s),a.child;case 14:return yg(t,a,a.type,a.pendingProps,s);case 15:return bg(t,a,a.type,a.pendingProps,s);case 19:return Og(t,a,s);case 22:return vg(t,a,s);case 24:return Ir(a),o=Ct(ct),t===null?(d=Tc(),d===null&&(d=Ze,p=Ec(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=s),d=p),a.memoizedState={parent:o,cache:d},ad(a),Ha(a,ct,d)):((t.lanes&s)!==0&&(rd(t,a),Ls(a,null,null,s),ks()),d=t.memoizedState,p=a.memoizedState,d.parent!==o?(d={parent:o,cache:o},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),Ha(a,ct,o)):(o=p.cache,Ha(a,ct,o),o!==d.cache&&nd(a,[ct],s,!0))),At(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var ed=xe(null),Ur=null,ba=null;function Ha(t,a,s){Ae(ed,a._currentValue),a._currentValue=s}function va(t){t._currentValue=ed.current,ze(ed)}function td(t,a,s){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===s)break;t=t.return}}function nd(t,a,s,o){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var p=d.dependencies;if(p!==null){var b=d.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=d;for(var S=0;S<a.length;S++)if(w.context===a[S]){p.lanes|=s,w=p.alternate,w!==null&&(w.lanes|=s),td(p.return,s,t),o||(b=null);break e}p=w.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(r(341));b.lanes|=s,p=b.alternate,p!==null&&(p.lanes|=s),td(b,s,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Ms(t,a,s,o){t=null;for(var d=a,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var w=d.type;rn(d.pendingProps.value,b.value)||(t!==null?t.push(w):t=[w])}}else if(d===mn.current){if(b=d.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Ks):t=[Ks])}d=d.return}t!==null&&nd(a,t,s,o),a.flags|=262144}function Ru(t){for(t=t.firstContext;t!==null;){if(!rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ir(t){Ur=t,ba=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ct(t){return Cg(Ur,t)}function Cu(t,a){return Ur===null&&Ir(t),Cg(t,a)}function Cg(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},ba===null){if(t===null)throw Error(r(308));ba=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else ba=ba.next=a;return s}var qa=!1;function ad(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rd(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ga(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Za(t,a,s){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ke&2)!==0){var d=o.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),o.pending=a,a=uu(t),op(t,null,s),a}return lu(t,o,a,s),uu(t)}function js(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194176)!==0)){var o=a.lanes;o&=t.pendingLanes,s|=o,a.lanes=s,gn(t,s)}}function id(t,a){var s=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var d=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?d=p=b:p=p.next=b,s=s.next}while(s!==null);p===null?d=p=a:p=p.next=a}else d=p=a;s={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:o.shared,callbacks:o.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var sd=!1;function ks(){if(sd){var t=Ei;if(t!==null)throw t}}function Ls(t,a,s,o){sd=!1;var d=t.updateQueue;qa=!1;var p=d.firstBaseUpdate,b=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var S=w,C=S.next;S.next=null,b===null?p=C:b.next=C,b=S;var $=t.alternate;$!==null&&($=$.updateQueue,w=$.lastBaseUpdate,w!==b&&(w===null?$.firstBaseUpdate=C:w.next=C,$.lastBaseUpdate=S))}if(p!==null){var Z=d.baseState;b=0,$=C=S=null,w=p;do{var j=w.lane&-536870913,P=j!==w.lane;if(P?(De&j)===j:(o&j)===j){j!==0&&j===Ai&&(sd=!0),$!==null&&($=$.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var de=t,ye=w;j=a;var et=s;switch(ye.tag){case 1:if(de=ye.payload,typeof de=="function"){Z=de.call(et,Z,j);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ye.payload,j=typeof de=="function"?de.call(et,Z,j):de,j==null)break e;Z=he({},Z,j);break e;case 2:qa=!0}}j=w.callback,j!==null&&(t.flags|=64,P&&(t.flags|=8192),P=d.callbacks,P===null?d.callbacks=[j]:P.push(j))}else P={lane:j,tag:w.tag,payload:w.payload,callback:w.callback,next:null},$===null?(C=$=P,S=Z):$=$.next=P,b|=j;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;P=w,w=P.next,P.next=null,d.lastBaseUpdate=P,d.shared.pending=null}}while(!0);$===null&&(S=Z),d.baseState=S,d.firstBaseUpdate=C,d.lastBaseUpdate=$,p===null&&(d.shared.lanes=0),Ka|=b,t.lanes=b,t.memoizedState=Z}}function xg(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function Ng(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)xg(s[t],a)}function Us(t,a){try{var s=a.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var d=o.next;s=d;do{if((s.tag&t)===t){o=void 0;var p=s.create,b=s.inst;o=p(),b.destroy=o}s=s.next}while(s!==d)}}catch(w){He(a,a.return,w)}}function Va(t,a,s){try{var o=a.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var p=d.next;o=p;do{if((o.tag&t)===t){var b=o.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,d=a;var S=s;try{w()}catch(C){He(d,S,C)}}}o=o.next}while(o!==p)}}catch(C){He(a,a.return,C)}}function Dg(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Ng(a,s)}catch(o){He(t,t.return,o)}}}function Mg(t,a,s){s.props=Lr(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(o){He(t,a,o)}}function Br(t,a){try{var s=t.ref;if(s!==null){var o=t.stateNode;switch(t.tag){case 26:case 27:case 5:var d=o;break;default:d=o}typeof s=="function"?t.refCleanup=s(d):s.current=d}}catch(p){He(t,a,p)}}function sn(t,a){var s=t.ref,o=t.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(d){He(t,a,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){He(t,a,d)}else s.current=null}function jg(t){var a=t.type,s=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(d){He(t,t.return,d)}}function kg(t,a,s){try{var o=t.stateNode;jw(o,t.type,s,a),o[Vt]=a}catch(d){He(t,t.return,d)}}function Lg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ud(t,a,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?s.nodeType===8?s.parentNode.insertBefore(t,a):s.insertBefore(t,a):(s.nodeType===8?(a=s.parentNode,a.insertBefore(t,s)):(a=s,a.appendChild(t)),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Hu));else if(o!==4&&o!==27&&(t=t.child,t!==null))for(ud(t,a,s),t=t.sibling;t!==null;)ud(t,a,s),t=t.sibling}function xu(t,a,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(o!==4&&o!==27&&(t=t.child,t!==null))for(xu(t,a,s),t=t.sibling;t!==null;)xu(t,a,s),t=t.sibling}var _a=!1,Je=!1,od=!1,Ug=typeof WeakSet=="function"?WeakSet:Set,gt=null,Ig=!1;function ow(t,a){if(t=t.containerInfo,Id=Fu,t=ep(t),dc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var d=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var b=0,w=-1,S=-1,C=0,$=0,Z=t,j=null;t:for(;;){for(var P;Z!==s||d!==0&&Z.nodeType!==3||(w=b+d),Z!==p||o!==0&&Z.nodeType!==3||(S=b+o),Z.nodeType===3&&(b+=Z.nodeValue.length),(P=Z.firstChild)!==null;)j=Z,Z=P;for(;;){if(Z===t)break t;if(j===s&&++C===d&&(w=b),j===p&&++$===o&&(S=b),(P=Z.nextSibling)!==null)break;Z=j,j=Z.parentNode}Z=P}s=w===-1||S===-1?null:{start:w,end:S}}else s=null}s=s||{start:0,end:0}}else s=null;for(Bd={focusedElem:t,selectionRange:s},Fu=!1,gt=a;gt!==null;)if(a=gt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,gt=t;else for(;gt!==null;){switch(a=gt,p=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,s=a,d=p.memoizedProps,p=p.memoizedState,o=s.stateNode;try{var de=Lr(s.type,d,s.elementType===s.type);t=o.getSnapshotBeforeUpdate(de,p),o.__reactInternalSnapshotBeforeUpdate=t}catch(ye){He(s,s.return,ye)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Hd(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Hd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=a.sibling,t!==null){t.return=a.return,gt=t;break}gt=a.return}return de=Ig,Ig=!1,de}function Bg(t,a,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:Aa(t,s),o&4&&Us(5,s);break;case 1:if(Aa(t,s),o&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(w){He(s,s.return,w)}else{var d=Lr(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(d,a,t.__reactInternalSnapshotBeforeUpdate)}catch(w){He(s,s.return,w)}}o&64&&Dg(s),o&512&&Br(s,s.return);break;case 3:if(Aa(t,s),o&64&&(o=s.updateQueue,o!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Ng(o,t)}catch(w){He(s,s.return,w)}}break;case 26:Aa(t,s),o&512&&Br(s,s.return);break;case 27:case 5:Aa(t,s),a===null&&o&4&&jg(s),o&512&&Br(s,s.return);break;case 12:Aa(t,s);break;case 13:Aa(t,s),o&4&&zg(t,s);break;case 22:if(d=s.memoizedState!==null||_a,!d){a=a!==null&&a.memoizedState!==null||Je;var p=_a,b=Je;_a=d,(Je=a)&&!b?Qa(t,s,(s.subtreeFlags&8772)!==0):Aa(t,s),_a=p,Je=b}o&512&&(s.memoizedProps.mode==="manual"?Br(s,s.return):sn(s,s.return));break;default:Aa(t,s)}}function Pg(t){var a=t.alternate;a!==null&&(t.alternate=null,Pg(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Fo(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,ln=!1;function wa(t,a,s){for(s=s.child;s!==null;)$g(t,a,s),s=s.sibling}function $g(t,a,s){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(wr,s)}catch{}switch(s.tag){case 26:Je||sn(s,a),wa(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Je||sn(s,a);var o=lt,d=ln;for(lt=s.stateNode,wa(t,a,s),s=s.stateNode,a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Fo(s),lt=o,ln=d;break;case 5:Je||sn(s,a);case 6:d=lt;var p=ln;if(lt=null,wa(t,a,s),lt=d,ln=p,lt!==null)if(ln)try{t=lt,o=s.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)}catch(b){He(s,a,b)}else try{lt.removeChild(s.stateNode)}catch(b){He(s,a,b)}break;case 18:lt!==null&&(ln?(a=lt,s=s.stateNode,a.nodeType===8?zd(a.parentNode,s):a.nodeType===1&&zd(a,s),el(a)):zd(lt,s.stateNode));break;case 4:o=lt,d=ln,lt=s.stateNode.containerInfo,ln=!0,wa(t,a,s),lt=o,ln=d;break;case 0:case 11:case 14:case 15:Je||Va(2,s,a),Je||Va(4,s,a),wa(t,a,s);break;case 1:Je||(sn(s,a),o=s.stateNode,typeof o.componentWillUnmount=="function"&&Mg(s,a,o)),wa(t,a,s);break;case 21:wa(t,a,s);break;case 22:Je||sn(s,a),Je=(o=Je)||s.memoizedState!==null,wa(t,a,s),Je=o;break;default:wa(t,a,s)}}function zg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{el(t)}catch(s){He(a,a.return,s)}}function cw(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Ug),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Ug),a;default:throw Error(r(435,t.tag))}}function cd(t,a){var s=cw(t);a.forEach(function(o){var d=Ew.bind(null,t,o);s.has(o)||(s.add(o),o.then(d,d))})}function Sn(t,a){var s=a.deletions;if(s!==null)for(var o=0;o<s.length;o++){var d=s[o],p=t,b=a,w=b;e:for(;w!==null;){switch(w.tag){case 27:case 5:lt=w.stateNode,ln=!1;break e;case 3:lt=w.stateNode.containerInfo,ln=!0;break e;case 4:lt=w.stateNode.containerInfo,ln=!0;break e}w=w.return}if(lt===null)throw Error(r(160));$g(p,b,d),lt=null,ln=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Hg(a,t),a=a.sibling}var Un=null;function Hg(t,a){var s=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(a,t),Tn(t),o&4&&(Va(3,t,t.return),Us(3,t),Va(5,t,t.return));break;case 1:Sn(a,t),Tn(t),o&512&&(Je||s===null||sn(s,s.return)),o&64&&_a&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var d=Un;if(Sn(a,t),Tn(t),o&512&&(Je||s===null||sn(s,s.return)),o&4){var p=s!==null?s.memoizedState:null;if(o=t.memoizedState,s===null)if(o===null)if(t.stateNode===null){e:{o=t.type,s=t.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":p=d.getElementsByTagName("title")[0],(!p||p[us]||p[rt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(o),d.head.insertBefore(p,d.querySelector("head > title"))),Et(p,o,s),p[rt]=t,mt(p),o=p;break e;case"link":var b=jy("link","href",d).get(o+(s.href||""));if(b){for(var w=0;w<b.length;w++)if(p=b[w],p.getAttribute("href")===(s.href==null?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(w,1);break t}}p=d.createElement(o),Et(p,o,s),d.head.appendChild(p);break;case"meta":if(b=jy("meta","content",d).get(o+(s.content||""))){for(w=0;w<b.length;w++)if(p=b[w],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(w,1);break t}}p=d.createElement(o),Et(p,o,s),d.head.appendChild(p);break;default:throw Error(r(468,o))}p[rt]=t,mt(p),o=p}t.stateNode=o}else ky(d,t.type,t.stateNode);else t.stateNode=My(d,o,t.memoizedProps);else p!==o?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,o===null?ky(d,t.type,t.stateNode):My(d,o,t.memoizedProps)):o===null&&t.stateNode!==null&&kg(t,t.memoizedProps,s.memoizedProps)}break;case 27:if(o&4&&t.alternate===null){d=t.stateNode,p=t.memoizedProps;try{for(var S=d.firstChild;S;){var C=S.nextSibling,$=S.nodeName;S[us]||$==="HEAD"||$==="BODY"||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&S.rel.toLowerCase()==="stylesheet"||d.removeChild(S),S=C}for(var Z=t.type,j=d.attributes;j.length;)d.removeAttributeNode(j[0]);Et(d,Z,p),d[rt]=t,d[Vt]=p}catch(de){He(t,t.return,de)}}case 5:if(Sn(a,t),Tn(t),o&512&&(Je||s===null||sn(s,s.return)),t.flags&32){d=t.stateNode;try{ci(d,"")}catch(de){He(t,t.return,de)}}o&4&&t.stateNode!=null&&(d=t.memoizedProps,kg(t,d,s!==null?s.memoizedProps:d)),o&1024&&(od=!0);break;case 6:if(Sn(a,t),Tn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,s=t.stateNode;try{s.nodeValue=o}catch(de){He(t,t.return,de)}}break;case 3:if(Vu=null,d=Un,Un=Gu(a.containerInfo),Sn(a,t),Un=d,Tn(t),o&4&&s!==null&&s.memoizedState.isDehydrated)try{el(a.containerInfo)}catch(de){He(t,t.return,de)}od&&(od=!1,qg(t));break;case 4:o=Un,Un=Gu(t.stateNode.containerInfo),Sn(a,t),Tn(t),Un=o;break;case 12:Sn(a,t),Tn(t);break;case 13:Sn(a,t),Tn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(vd=tn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cd(t,o)));break;case 22:if(o&512&&(Je||s===null||sn(s,s.return)),S=t.memoizedState!==null,C=s!==null&&s.memoizedState!==null,$=_a,Z=Je,_a=$||S,Je=Z||C,Sn(a,t),Je=Z,_a=$,Tn(t),a=t.stateNode,a._current=t,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,o&8192&&(a._visibility=S?a._visibility&-2:a._visibility|1,S&&(a=_a||Je,s===null||C||a||Ri(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(s=null,a=t;;){if(a.tag===5||a.tag===26||a.tag===27){if(s===null){C=s=a;try{if(d=C.stateNode,S)p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{b=C.stateNode,w=C.memoizedProps.style;var P=w!=null&&w.hasOwnProperty("display")?w.display:null;b.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(de){He(C,C.return,de)}}}else if(a.tag===6){if(s===null){C=a;try{C.stateNode.nodeValue=S?"":C.memoizedProps}catch(de){He(C,C.return,de)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,cd(t,s))));break;case 19:Sn(a,t),Tn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cd(t,o)));break;case 21:break;default:Sn(a,t),Tn(t)}}function Tn(t){var a=t.flags;if(a&2){try{if(t.tag!==27){e:{for(var s=t.return;s!==null;){if(Lg(s)){var o=s;break e}s=s.return}throw Error(r(160))}switch(o.tag){case 27:var d=o.stateNode,p=ld(t);xu(t,p,d);break;case 5:var b=o.stateNode;o.flags&32&&(ci(b,""),o.flags&=-33);var w=ld(t);xu(t,w,b);break;case 3:case 4:var S=o.stateNode.containerInfo,C=ld(t);ud(t,C,S);break;default:throw Error(r(161))}}}catch($){He(t,t.return,$)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function qg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;qg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Aa(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Bg(t,a.alternate,a),a=a.sibling}function Ri(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Va(4,a,a.return),Ri(a);break;case 1:sn(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Mg(a,a.return,s),Ri(a);break;case 26:case 27:case 5:sn(a,a.return),Ri(a);break;case 22:sn(a,a.return),a.memoizedState===null&&Ri(a);break;default:Ri(a)}t=t.sibling}}function Qa(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,d=t,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:Qa(d,p,s),Us(4,p);break;case 1:if(Qa(d,p,s),o=p,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(C){He(o,o.return,C)}if(o=p,d=o.updateQueue,d!==null){var w=o.stateNode;try{var S=d.shared.hiddenCallbacks;if(S!==null)for(d.shared.hiddenCallbacks=null,d=0;d<S.length;d++)xg(S[d],w)}catch(C){He(o,o.return,C)}}s&&b&64&&Dg(p),Br(p,p.return);break;case 26:case 27:case 5:Qa(d,p,s),s&&o===null&&b&4&&jg(p),Br(p,p.return);break;case 12:Qa(d,p,s);break;case 13:Qa(d,p,s),s&&b&4&&zg(d,p);break;case 22:p.memoizedState===null&&Qa(d,p,s),Br(p,p.return);break;default:Qa(d,p,s)}a=a.sibling}}function dd(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Os(s))}function fd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Os(t))}function Ya(t,a,s,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Gg(t,a,s,o),a=a.sibling}function Gg(t,a,s,o){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Ya(t,a,s,o),d&2048&&Us(9,a);break;case 3:Ya(t,a,s,o),d&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Os(t)));break;case 12:if(d&2048){Ya(t,a,s,o),t=a.stateNode;try{var p=a.memoizedProps,b=p.id,w=p.onPostCommit;typeof w=="function"&&w(b,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(S){He(a,a.return,S)}}else Ya(t,a,s,o);break;case 23:break;case 22:p=a.stateNode,a.memoizedState!==null?p._visibility&4?Ya(t,a,s,o):Is(t,a):p._visibility&4?Ya(t,a,s,o):(p._visibility|=4,Ci(t,a,s,o,(a.subtreeFlags&10256)!==0)),d&2048&&dd(a.alternate,a);break;case 24:Ya(t,a,s,o),d&2048&&fd(a.alternate,a);break;default:Ya(t,a,s,o)}}function Ci(t,a,s,o,d){for(d=d&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=t,b=a,w=s,S=o,C=b.flags;switch(b.tag){case 0:case 11:case 15:Ci(p,b,w,S,d),Us(8,b);break;case 23:break;case 22:var $=b.stateNode;b.memoizedState!==null?$._visibility&4?Ci(p,b,w,S,d):Is(p,b):($._visibility|=4,Ci(p,b,w,S,d)),d&&C&2048&&dd(b.alternate,b);break;case 24:Ci(p,b,w,S,d),d&&C&2048&&fd(b.alternate,b);break;default:Ci(p,b,w,S,d)}a=a.sibling}}function Is(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,o=a,d=o.flags;switch(o.tag){case 22:Is(s,o),d&2048&&dd(o.alternate,o);break;case 24:Is(s,o),d&2048&&fd(o.alternate,o);break;default:Is(s,o)}a=a.sibling}}var Bs=8192;function xi(t){if(t.subtreeFlags&Bs)for(t=t.child;t!==null;)Zg(t),t=t.sibling}function Zg(t){switch(t.tag){case 26:xi(t),t.flags&Bs&&t.memoizedState!==null&&Jw(Un,t.memoizedState,t.memoizedProps);break;case 5:xi(t);break;case 3:case 4:var a=Un;Un=Gu(t.stateNode.containerInfo),xi(t),Un=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Bs,Bs=16777216,xi(t),Bs=a):xi(t));break;default:xi(t)}}function Vg(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ps(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var o=a[s];gt=o,Yg(o,t)}Vg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qg(t),t=t.sibling}function Qg(t){switch(t.tag){case 0:case 11:case 15:Ps(t),t.flags&2048&&Va(9,t,t.return);break;case 3:Ps(t);break;case 12:Ps(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&4&&(t.return===null||t.return.tag!==13)?(a._visibility&=-5,Nu(t)):Ps(t);break;default:Ps(t)}}function Nu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var o=a[s];gt=o,Yg(o,t)}Vg(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Va(8,a,a.return),Nu(a);break;case 22:s=a.stateNode,s._visibility&4&&(s._visibility&=-5,Nu(a));break;default:Nu(a)}t=t.sibling}}function Yg(t,a){for(;gt!==null;){var s=gt;switch(s.tag){case 0:case 11:case 15:Va(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Os(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,gt=o;else e:for(s=t;gt!==null;){o=gt;var d=o.sibling,p=o.return;if(Pg(o),o===s){gt=null;break e}if(d!==null){d.return=p,gt=d;break e}gt=p}}}function dw(t,a,s,o){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,a,s,o){return new dw(t,a,s,o)}function hd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fa(t,a){var s=t.alternate;return s===null?(s=On(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&31457280,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Fg(t,a){t.flags&=31457282;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Du(t,a,s,o,d,p){var b=0;if(o=t,typeof t=="function")hd(t)&&(b=1);else if(typeof t=="string")b=Kw(t,s,Ot.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case h:return Pr(s.children,d,p,a);case m:b=8,d|=24;break;case g:return t=On(12,s,a,d|2),t.elementType=g,t.lanes=p,t;case E:return t=On(13,s,a,d),t.elementType=E,t.lanes=p,t;case O:return t=On(19,s,a,d),t.elementType=O,t.lanes=p,t;case M:return Kg(s,d,p,a);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y:case _:b=10;break e;case v:b=9;break e;case A:b=11;break e;case x:b=14;break e;case k:b=16,o=null;break e}b=29,s=Error(r(130,t===null?"null":typeof t,"")),o=null}return a=On(b,s,a,d),a.elementType=t,a.type=o,a.lanes=p,a}function Pr(t,a,s,o){return t=On(7,t,o,a),t.lanes=s,t}function Kg(t,a,s,o){t=On(22,t,o,a),t.elementType=M,t.lanes=s;var d={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var p=d._current;if(p===null)throw Error(r(456));if((d._pendingVisibility&2)===0){var b=Ia(p,2);b!==null&&(d._pendingVisibility|=2,Ut(b,p,2))}},attach:function(){var p=d._current;if(p===null)throw Error(r(456));if((d._pendingVisibility&2)!==0){var b=Ia(p,2);b!==null&&(d._pendingVisibility&=-3,Ut(b,p,2))}}};return t.stateNode=d,t}function md(t,a,s){return t=On(6,t,null,a),t.lanes=s,t}function pd(t,a,s){return a=On(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}function Ea(t){t.flags|=4}function Xg(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ly(a)){if(a=En.current,a!==null&&((De&4194176)===De?ta!==null:(De&62914560)!==De&&(De&536870912)===0||a!==ta))throw Es=_c,mp;t.flags|=8192}}function Mu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?nn():536870912,t.lanes|=a,Di|=a)}function $s(t,a){if(!je)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Fe(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,o=0;if(a)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,o|=d.subtreeFlags&31457280,o|=d.flags&31457280,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=s,a}function fw(t,a,s){var o=a.pendingProps;switch(bc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(a),null;case 1:return Fe(a),null;case 3:return s=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),va(ct),en(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(vs(a)?Ea(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ln!==null&&(Ed(Ln),Ln=null))),Fe(a),null;case 26:return s=a.memoizedState,t===null?(Ea(a),s!==null?(Fe(a),Xg(a,s)):(Fe(a),a.flags&=-16777217)):s?s!==t.memoizedState?(Ea(a),Fe(a),Xg(a,s)):(Fe(a),a.flags&=-16777217):(t.memoizedProps!==o&&Ea(a),Fe(a),a.flags&=-16777217),null;case 27:br(a),s=Dn.current;var d=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ea(a);else{if(!o){if(a.stateNode===null)throw Error(r(166));return Fe(a),null}t=Ot.current,vs(a)?fp(a):(t=Ry(d,o,s),a.stateNode=t,Ea(a))}return Fe(a),null;case 5:if(br(a),s=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ea(a);else{if(!o){if(a.stateNode===null)throw Error(r(166));return Fe(a),null}if(t=Ot.current,vs(a))fp(a);else{switch(d=qu(Dn.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?d.createElement(s,{is:o.is}):d.createElement(s)}}t[rt]=a,t[Vt]=o;e:for(d=a.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break e;for(;d.sibling===null;){if(d.return===null||d.return===a)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a.stateNode=t;e:switch(Et(t,s,o),s){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ea(a)}}return Fe(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Ea(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(r(166));if(t=Dn.current,vs(a)){if(t=a.stateNode,s=a.memoizedProps,o=null,d=Lt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}t[rt]=a,t=!!(t.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||wy(t.nodeValue,s)),t||xr(a)}else t=qu(t).createTextNode(o),t[rt]=a,a.stateNode=t}return Fe(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=vs(a),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[rt]=a}else _s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Fe(a),d=!1}else Ln!==null&&(Ed(Ln),Ln=null),d=!0;if(!d)return a.flags&256?(pa(a),a):(pa(a),null)}if(pa(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=o!==null,t=t!==null&&t.memoizedState!==null,s){o=a.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var p=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==d&&(o.flags|=2048)}return s!==t&&s&&(a.child.flags|=8192),Mu(a,a.updateQueue),Fe(a),null;case 4:return en(),t===null&&kd(a.stateNode.containerInfo),Fe(a),null;case 10:return va(a.type),Fe(a),null;case 19:if(ze(ot),d=a.memoizedState,d===null)return Fe(a),null;if(o=(a.flags&128)!==0,p=d.rendering,p===null)if(o)$s(d,!1);else{if(We!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=pu(t),p!==null){for(a.flags|=128,$s(d,!1),t=p.updateQueue,a.updateQueue=t,Mu(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)Fg(s,t),s=s.sibling;return Ae(ot,ot.current&1|2),a.child}t=t.sibling}d.tail!==null&&tn()>ju&&(a.flags|=128,o=!0,$s(d,!1),a.lanes=4194304)}else{if(!o)if(t=pu(p),t!==null){if(a.flags|=128,o=!0,t=t.updateQueue,a.updateQueue=t,Mu(a,t),$s(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!je)return Fe(a),null}else 2*tn()-d.renderingStartTime>ju&&s!==536870912&&(a.flags|=128,o=!0,$s(d,!1),a.lanes=4194304);d.isBackwards?(p.sibling=a.child,a.child=p):(t=d.last,t!==null?t.sibling=p:a.child=p,d.last=p)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=tn(),a.sibling=null,t=ot.current,Ae(ot,o?t&1|2:t&1),a):(Fe(a),null);case 22:case 23:return pa(a),Ac(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(s&536870912)!==0&&(a.flags&128)===0&&(Fe(a),a.subtreeFlags&6&&(a.flags|=8192)):Fe(a),s=a.updateQueue,s!==null&&Mu(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==s&&(a.flags|=2048),t!==null&&ze(Dr),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),va(ct),Fe(a),null;case 25:return null}throw Error(r(156,a.tag))}function hw(t,a){switch(bc(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return va(ct),en(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return br(a),null;case 13:if(pa(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));_s()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ze(ot),null;case 4:return en(),null;case 10:return va(a.type),null;case 22:case 23:return pa(a),Ac(),t!==null&&ze(Dr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return va(ct),null;case 25:return null;default:return null}}function Jg(t,a){switch(bc(a),a.tag){case 3:va(ct),en();break;case 26:case 27:case 5:br(a);break;case 4:en();break;case 13:pa(a);break;case 19:ze(ot);break;case 10:va(a.type);break;case 22:case 23:pa(a),Ac(),t!==null&&ze(Dr);break;case 24:va(ct)}}var mw={getCacheForType:function(t){var a=Ct(ct),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s}},pw=typeof WeakMap=="function"?WeakMap:Map,Ke=0,Ze=null,Ce=null,De=0,Ve=0,un=null,Sa=!1,Ni=!1,gd=!1,Ta=0,We=0,Ka=0,$r=0,yd=0,Rn=0,Di=0,zs=null,aa=null,bd=!1,vd=0,ju=1/0,ku=null,Xa=null,Lu=!1,zr=null,Hs=0,_d=0,wd=null,qs=0,Ad=null;function on(){if((Ke&2)!==0&&De!==0)return De&-De;if(re.T!==null){var t=Ai;return t!==0?t:Nd()}return La()}function Wg(){Rn===0&&(Rn=(De&536870912)===0||je?Rt():536870912);var t=En.current;return t!==null&&(t.flags|=32),Rn}function Ut(t,a,s){(t===Ze&&Ve===2||t.cancelPendingCommit!==null)&&(Mi(t,0),Oa(t,De,Rn,!1)),Ye(t,s),((Ke&2)===0||t!==Ze)&&(t===Ze&&((Ke&2)===0&&($r|=s),We===4&&Oa(t,De,Rn,!1)),ra(t))}function ey(t,a,s){if((Ke&6)!==0)throw Error(r(327));var o=!s&&(a&60)===0&&(a&t.expiredLanes)===0||qt(t,a),d=o?bw(t,a):Od(t,a,!0),p=o;do{if(d===0){Ni&&!o&&Oa(t,a,0,!1);break}else if(d===6)Oa(t,a,0,!Sa);else{if(s=t.current.alternate,p&&!gw(s)){d=Od(t,a,!1),p=!1;continue}if(d===2){if(p=a,t.errorRecoveryDisabledLanes&p)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var w=t;d=zs;var S=w.current.memoizedState.isDehydrated;if(S&&(Mi(w,b).flags|=256),b=Od(w,b,!1),b!==2){if(gd&&!S){w.errorRecoveryDisabledLanes|=p,$r|=p,d=4;break e}p=aa,aa=d,p!==null&&Ed(p)}d=b}if(p=!1,d!==2)continue}}if(d===1){Mi(t,0),Oa(t,a,0,!0);break}e:{switch(o=t,d){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){Oa(o,a,Rn,!Sa);break e}break;case 2:aa=null;break;case 3:case 5:break;default:throw Error(r(329))}if(o.finishedWork=s,o.finishedLanes=a,(a&62914560)===a&&(p=vd+300-tn(),10<p)){if(Oa(o,a,Rn,!Sa),ht(o,0)!==0)break e;o.timeoutHandle=Sy(ty.bind(null,o,s,aa,ku,bd,a,Rn,$r,Di,Sa,2,-0,0),p);break e}ty(o,s,aa,ku,bd,a,Rn,$r,Di,Sa,0,-0,0)}}break}while(!0);ra(t)}function Ed(t){aa===null?aa=t:aa.push.apply(aa,t)}function ty(t,a,s,o,d,p,b,w,S,C,$,Z,j){var P=a.subtreeFlags;if((P&8192||(P&16785408)===16785408)&&(Fs={stylesheets:null,count:0,unsuspend:Xw},Zg(a),a=Ww(),a!==null)){t.cancelPendingCommit=a(uy.bind(null,t,s,o,d,b,w,S,1,Z,j)),Oa(t,p,b,!C);return}uy(t,s,o,d,b,w,S,$,Z,j)}function gw(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var d=s[o],p=d.getSnapshot;d=d.value;try{if(!rn(p(),d))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Oa(t,a,s,o){a&=~yd,a&=~$r,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var d=a;0<d;){var p=31-kt(d),b=1<<p;o[p]=-1,d&=~b}s!==0&&an(t,s,a)}function Uu(){return(Ke&6)===0?(Gs(0),!1):!0}function Sd(){if(Ce!==null){if(Ve===0)var t=Ce.return;else t=Ce,ba=Ur=null,Nc(t),_i=null,Ss=0,t=Ce;for(;t!==null;)Jg(t.alternate,t),t=t.return;Ce=null}}function Mi(t,a){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Lw(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Sd(),Ze=t,Ce=s=Fa(t.current,null),De=a,Ve=0,un=null,Sa=!1,Ni=qt(t,a),gd=!1,Di=Rn=yd=$r=Ka=We=0,aa=zs=null,bd=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var d=31-kt(o),p=1<<d;a|=t[d],o&=~p}return Ta=a,su(),s}function ny(t,a){Te=null,re.H=na,a===As?(a=yp(),Ve=3):a===mp?(a=yp(),Ve=4):Ve=a===pg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,un=a,Ce===null&&(We=1,Ou(t,_n(a,t.current)))}function ay(){var t=re.H;return re.H=na,t===null?na:t}function ry(){var t=re.A;return re.A=mw,t}function Td(){We=4,Sa||(De&4194176)!==De&&En.current!==null||(Ni=!0),(Ka&134217727)===0&&($r&134217727)===0||Ze===null||Oa(Ze,De,Rn,!1)}function Od(t,a,s){var o=Ke;Ke|=2;var d=ay(),p=ry();(Ze!==t||De!==a)&&(ku=null,Mi(t,a)),a=!1;var b=We;e:do try{if(Ve!==0&&Ce!==null){var w=Ce,S=un;switch(Ve){case 8:Sd(),b=6;break e;case 3:case 2:case 6:En.current===null&&(a=!0);var C=Ve;if(Ve=0,un=null,ji(t,w,S,C),s&&Ni){b=0;break e}break;default:C=Ve,Ve=0,un=null,ji(t,w,S,C)}}yw(),b=We;break}catch($){ny(t,$)}while(!0);return a&&t.shellSuspendCounter++,ba=Ur=null,Ke=o,re.H=d,re.A=p,Ce===null&&(Ze=null,De=0,su()),b}function yw(){for(;Ce!==null;)iy(Ce)}function bw(t,a){var s=Ke;Ke|=2;var o=ay(),d=ry();Ze!==t||De!==a?(ku=null,ju=tn()+500,Mi(t,a)):Ni=qt(t,a);e:do try{if(Ve!==0&&Ce!==null){a=Ce;var p=un;t:switch(Ve){case 1:Ve=0,un=null,ji(t,a,p,1);break;case 2:if(pp(p)){Ve=0,un=null,sy(a);break}a=function(){Ve===2&&Ze===t&&(Ve=7),ra(t)},p.then(a,a);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:pp(p)?(Ve=0,un=null,sy(a)):(Ve=0,un=null,ji(t,a,p,7));break;case 5:var b=null;switch(Ce.tag){case 26:b=Ce.memoizedState;case 5:case 27:var w=Ce;if(!b||Ly(b)){Ve=0,un=null;var S=w.sibling;if(S!==null)Ce=S;else{var C=w.return;C!==null?(Ce=C,Iu(C)):Ce=null}break t}}Ve=0,un=null,ji(t,a,p,5);break;case 6:Ve=0,un=null,ji(t,a,p,6);break;case 8:Sd(),We=6;break e;default:throw Error(r(462))}}vw();break}catch($){ny(t,$)}while(!0);return ba=Ur=null,re.H=o,re.A=d,Ke=s,Ce!==null?0:(Ze=null,De=0,su(),We)}function vw(){for(;Ce!==null&&!ai();)iy(Ce)}function iy(t){var a=Rg(t.alternate,t,Ta);t.memoizedProps=t.pendingProps,a===null?Iu(t):Ce=a}function sy(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=wg(s,a,a.pendingProps,a.type,void 0,De);break;case 11:a=wg(s,a,a.pendingProps,a.type.render,a.ref,De);break;case 5:Nc(a);default:Jg(s,a),a=Ce=Fg(a,Ta),a=Rg(s,a,Ta)}t.memoizedProps=t.pendingProps,a===null?Iu(t):Ce=a}function ji(t,a,s,o){ba=Ur=null,Nc(a),_i=null,Ss=0;var d=a.return;try{if(lw(t,d,a,s,De)){We=1,Ou(t,_n(s,t.current)),Ce=null;return}}catch(p){if(d!==null)throw Ce=d,p;We=1,Ou(t,_n(s,t.current)),Ce=null;return}a.flags&32768?(je||o===1?t=!0:Ni||(De&536870912)!==0?t=!1:(Sa=t=!0,(o===2||o===3||o===6)&&(o=En.current,o!==null&&o.tag===13&&(o.flags|=16384))),ly(a,t)):Iu(a)}function Iu(t){var a=t;do{if((a.flags&32768)!==0){ly(a,Sa);return}t=a.return;var s=fw(a.alternate,a,Ta);if(s!==null){Ce=s;return}if(a=a.sibling,a!==null){Ce=a;return}Ce=a=t}while(a!==null);We===0&&(We=5)}function ly(t,a){do{var s=hw(t.alternate,t);if(s!==null){s.flags&=32767,Ce=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Ce=t;return}Ce=t=s}while(t!==null);We=6,Ce=null}function uy(t,a,s,o,d,p,b,w,S,C){var $=re.T,Z=W.p;try{W.p=2,re.T=null,_w(t,a,s,o,Z,d,p,b,w,S,C)}finally{re.T=$,W.p=Z}}function _w(t,a,s,o,d,p,b,w){do ki();while(zr!==null);if((Ke&6)!==0)throw Error(r(327));var S=t.finishedWork;if(o=t.finishedLanes,S===null)return null;if(t.finishedWork=null,t.finishedLanes=0,S===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var C=S.lanes|S.childLanes;if(C|=pc,Jn(t,o,C,p,b,w),t===Ze&&(Ce=Ze=null,De=0),(S.subtreeFlags&10256)===0&&(S.flags&10256)===0||Lu||(Lu=!0,_d=C,wd=s,Sw(Mn,function(){return ki(),null})),s=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||s?(s=re.T,re.T=null,p=W.p,W.p=2,b=Ke,Ke|=4,ow(t,S),Hg(S,t),G0(Bd,t.containerInfo),Fu=!!Id,Bd=Id=null,t.current=S,Bg(t,S.alternate,S),Zl(),Ke=b,W.p=p,re.T=s):t.current=S,Lu?(Lu=!1,zr=t,Hs=o):oy(t,C),C=t.pendingLanes,C===0&&(Xa=null),ls(S.stateNode),ra(t),a!==null)for(d=t.onRecoverableError,S=0;S<a.length;S++)C=a[S],d(C.value,{componentStack:C.stack});return(Hs&3)!==0&&ki(),C=t.pendingLanes,(o&4194218)!==0&&(C&42)!==0?t===Ad?qs++:(qs=0,Ad=t):qs=0,Gs(0),null}function oy(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Os(a)))}function ki(){if(zr!==null){var t=zr,a=_d;_d=0;var s=ka(Hs),o=re.T,d=W.p;try{if(W.p=32>s?32:s,re.T=null,zr===null)var p=!1;else{s=wd,wd=null;var b=zr,w=Hs;if(zr=null,Hs=0,(Ke&6)!==0)throw Error(r(331));var S=Ke;if(Ke|=4,Qg(b.current),Gg(b,b.current,w,s),Ke=S,Gs(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(wr,b)}catch{}p=!0}return p}finally{W.p=d,re.T=o,oy(t,a)}}return!1}function cy(t,a,s){a=_n(s,a),a=Gc(t.stateNode,a,2),t=Za(t,a,2),t!==null&&(Ye(t,2),ra(t))}function He(t,a,s){if(t.tag===3)cy(t,t,s);else for(;a!==null;){if(a.tag===3){cy(a,t,s);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Xa===null||!Xa.has(o))){t=_n(s,t),s=hg(2),o=Za(a,s,2),o!==null&&(mg(s,o,a,t),Ye(o,2),ra(o));break}}a=a.return}}function Rd(t,a,s){var o=t.pingCache;if(o===null){o=t.pingCache=new pw;var d=new Set;o.set(a,d)}else d=o.get(a),d===void 0&&(d=new Set,o.set(a,d));d.has(s)||(gd=!0,d.add(s),t=ww.bind(null,t,a,s),a.then(t,t))}function ww(t,a,s){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Ze===t&&(De&s)===s&&(We===4||We===3&&(De&62914560)===De&&300>tn()-vd?(Ke&2)===0&&Mi(t,0):yd|=s,Di===De&&(Di=0)),ra(t)}function dy(t,a){a===0&&(a=nn()),t=Ia(t,a),t!==null&&(Ye(t,a),ra(t))}function Aw(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),dy(t,s)}function Ew(t,a){var s=0;switch(t.tag){case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(a),dy(t,s)}function Sw(t,a){return pn(t,a)}var Bu=null,Li=null,Cd=!1,Pu=!1,xd=!1,Hr=0;function ra(t){t!==Li&&t.next===null&&(Li===null?Bu=Li=t:Li=Li.next=t),Pu=!0,Cd||(Cd=!0,Ow(Tw))}function Gs(t,a){if(!xd&&Pu){xd=!0;do for(var s=!1,o=Bu;o!==null;){if(t!==0){var d=o.pendingLanes;if(d===0)var p=0;else{var b=o.suspendedLanes,w=o.pingedLanes;p=(1<<31-kt(42|t)+1)-1,p&=d&~(b&~w),p=p&201326677?p&201326677|1:p?p|2:0}p!==0&&(s=!0,my(o,p))}else p=De,p=ht(o,o===Ze?p:0),(p&3)===0||qt(o,p)||(s=!0,my(o,p));o=o.next}while(s);xd=!1}}function Tw(){Pu=Cd=!1;var t=0;Hr!==0&&(kw()&&(t=Hr),Hr=0);for(var a=tn(),s=null,o=Bu;o!==null;){var d=o.next,p=fy(o,a);p===0?(o.next=null,s===null?Bu=d:s.next=d,d===null&&(Li=s)):(s=o,(t!==0||(p&3)!==0)&&(Pu=!0)),o=d}Gs(t)}function fy(t,a){for(var s=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var b=31-kt(p),w=1<<b,S=d[b];S===-1?((w&s)===0||(w&o)!==0)&&(d[b]=Gt(w,a)):S<=a&&(t.expiredLanes|=w),p&=~w}if(a=Ze,s=De,s=ht(t,t===a?s:0),o=t.callbackNode,s===0||t===a&&Ve===2||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ja(o),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||qt(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(o!==null&&ja(o),ka(s)){case 2:case 8:s=ca;break;case 32:s=Mn;break;case 268435456:s=ss;break;default:s=Mn}return o=hy.bind(null,t),s=pn(s,o),t.callbackPriority=a,t.callbackNode=s,a}return o!==null&&o!==null&&ja(o),t.callbackPriority=2,t.callbackNode=null,2}function hy(t,a){var s=t.callbackNode;if(ki()&&t.callbackNode!==s)return null;var o=De;return o=ht(t,t===Ze?o:0),o===0?null:(ey(t,o,a),fy(t,tn()),t.callbackNode!=null&&t.callbackNode===s?hy.bind(null,t):null)}function my(t,a){if(ki())return null;ey(t,a,!0)}function Ow(t){Uw(function(){(Ke&6)!==0?pn(Vl,t):t()})}function Nd(){return Hr===0&&(Hr=Rt()),Hr}function py(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wl(""+t)}function gy(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function Rw(t,a,s,o,d){if(a==="submit"&&s&&s.stateNode===d){var p=py((d[Vt]||null).action),b=o.submitter;b&&(a=(a=b[Vt]||null)?py(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var w=new au("action","action",null,o,d);t.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Hr!==0){var S=b?gy(d,b):new FormData(d);Pc(s,{pending:!0,data:S,method:d.method,action:p},null,S)}}else typeof p=="function"&&(w.preventDefault(),S=b?gy(d,b):new FormData(d),Pc(s,{pending:!0,data:S,method:d.method,action:p},p,S))},currentTarget:d}]})}}for(var Dd=0;Dd<up.length;Dd++){var Md=up[Dd],Cw=Md.toLowerCase(),xw=Md[0].toUpperCase()+Md.slice(1);kn(Cw,"on"+xw)}kn(ap,"onAnimationEnd"),kn(rp,"onAnimationIteration"),kn(ip,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(V0,"onTransitionRun"),kn(Q0,"onTransitionStart"),kn(Y0,"onTransitionCancel"),kn(sp,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zs));function yy(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var o=t[s],d=o.event;o=o.listeners;e:{var p=void 0;if(a)for(var b=o.length-1;0<=b;b--){var w=o[b],S=w.instance,C=w.currentTarget;if(w=w.listener,S!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=C;try{p(d)}catch($){Tu($)}d.currentTarget=null,p=S}else for(b=0;b<o.length;b++){if(w=o[b],S=w.instance,C=w.currentTarget,w=w.listener,S!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=C;try{p(d)}catch($){Tu($)}d.currentTarget=null,p=S}}}}function Ne(t,a){var s=a[Yo];s===void 0&&(s=a[Yo]=new Set);var o=t+"__bubble";s.has(o)||(by(a,t,2,!1),s.add(o))}function jd(t,a,s){var o=0;a&&(o|=4),by(s,t,o,a)}var $u="_reactListening"+Math.random().toString(36).slice(2);function kd(t){if(!t[$u]){t[$u]=!0,wm.forEach(function(s){s!=="selectionchange"&&(Nw.has(s)||jd(s,!1,t),jd(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[$u]||(a[$u]=!0,jd("selectionchange",!1,a))}}function by(t,a,s,o){switch(zy(a)){case 2:var d=nA;break;case 8:d=aA;break;default:d=Qd}s=d.bind(null,a,s,t),d=void 0,!nc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),o?d!==void 0?t.addEventListener(a,s,{capture:!0,passive:d}):t.addEventListener(a,s,!0):d!==void 0?t.addEventListener(a,s,{passive:d}):t.addEventListener(a,s,!1)}function Ld(t,a,s,o,d){var p=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var w=o.stateNode.containerInfo;if(w===d||w.nodeType===8&&w.parentNode===d)break;if(b===4)for(b=o.return;b!==null;){var S=b.tag;if((S===3||S===4)&&(S=b.stateNode.containerInfo,S===d||S.nodeType===8&&S.parentNode===d))return;b=b.return}for(;w!==null;){if(b=Ar(w),b===null)return;if(S=b.tag,S===5||S===6||S===26||S===27){o=p=b;continue e}w=w.parentNode}}o=o.return}jm(function(){var C=p,$=ec(s),Z=[];e:{var j=lp.get(t);if(j!==void 0){var P=au,de=t;switch(t){case"keypress":if(tu(s)===0)break e;case"keydown":case"keyup":P=E0;break;case"focusin":de="focus",P=sc;break;case"focusout":de="blur",P=sc;break;case"beforeblur":case"afterblur":P=sc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=d0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=O0;break;case ap:case rp:case ip:P=m0;break;case sp:P=C0;break;case"scroll":case"scrollend":P=o0;break;case"wheel":P=N0;break;case"copy":case"cut":case"paste":P=g0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Bm;break;case"toggle":case"beforetoggle":P=M0}var ye=(a&4)!==0,et=!ye&&(t==="scroll"||t==="scrollend"),N=ye?j!==null?j+"Capture":null:j;ye=[];for(var R=C,D;R!==null;){var H=R;if(D=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||D===null||N===null||(H=cs(R,N),H!=null&&ye.push(Vs(R,H,D))),et)break;R=R.return}0<ye.length&&(j=new P(j,de,null,s,$),Z.push({event:j,listeners:ye}))}}if((a&7)===0){e:{if(j=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",j&&s!==Wo&&(de=s.relatedTarget||s.fromElement)&&(Ar(de)||de[ii]))break e;if((P||j)&&(j=$.window===$?$:(j=$.ownerDocument)?j.defaultView||j.parentWindow:window,P?(de=s.relatedTarget||s.toElement,P=C,de=de?Ar(de):null,de!==null&&(et=G(de),ye=de.tag,de!==et||ye!==5&&ye!==27&&ye!==6)&&(de=null)):(P=null,de=C),P!==de)){if(ye=Um,H="onMouseLeave",N="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(ye=Bm,H="onPointerLeave",N="onPointerEnter",R="pointer"),et=P==null?j:os(P),D=de==null?j:os(de),j=new ye(H,R+"leave",P,s,$),j.target=et,j.relatedTarget=D,H=null,Ar($)===C&&(ye=new ye(N,R+"enter",de,s,$),ye.target=D,ye.relatedTarget=et,H=ye),et=H,P&&de)t:{for(ye=P,N=de,R=0,D=ye;D;D=Ui(D))R++;for(D=0,H=N;H;H=Ui(H))D++;for(;0<R-D;)ye=Ui(ye),R--;for(;0<D-R;)N=Ui(N),D--;for(;R--;){if(ye===N||N!==null&&ye===N.alternate)break t;ye=Ui(ye),N=Ui(N)}ye=null}else ye=null;P!==null&&vy(Z,j,P,ye,!1),de!==null&&et!==null&&vy(Z,et,de,ye,!0)}}e:{if(j=C?os(C):window,P=j.nodeName&&j.nodeName.toLowerCase(),P==="select"||P==="input"&&j.type==="file")var le=Vm;else if(Gm(j))if(Qm)le=H0;else{le=$0;var Re=P0}else P=j.nodeName,!P||P.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?C&&Jo(C.elementType)&&(le=Vm):le=z0;if(le&&(le=le(t,C))){Zm(Z,le,s,$);break e}Re&&Re(t,j,C),t==="focusout"&&C&&j.type==="number"&&C.memoizedProps.value!=null&&Xo(j,"number",j.value)}switch(Re=C?os(C):window,t){case"focusin":(Gm(Re)||Re.contentEditable==="true")&&(mi=Re,fc=C,bs=null);break;case"focusout":bs=fc=mi=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,tp(Z,s,$);break;case"selectionchange":if(Z0)break;case"keydown":case"keyup":tp(Z,s,$)}var me;if(uc)e:{switch(t){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else hi?Hm(t,s)&&(pe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(pe="onCompositionStart");pe&&(Pm&&s.locale!=="ko"&&(hi||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&hi&&(me=km()):(Ua=$,ac="value"in Ua?Ua.value:Ua.textContent,hi=!0)),Re=zu(C,pe),0<Re.length&&(pe=new Im(pe,t,null,s,$),Z.push({event:pe,listeners:Re}),me?pe.data=me:(me=qm(s),me!==null&&(pe.data=me)))),(me=k0?L0(t,s):U0(t,s))&&(pe=zu(C,"onBeforeInput"),0<pe.length&&(Re=new Im("onBeforeInput","beforeinput",null,s,$),Z.push({event:Re,listeners:pe}),Re.data=me)),Rw(Z,t,C,s,$)}yy(Z,a)})}function Vs(t,a,s){return{instance:t,listener:a,currentTarget:s}}function zu(t,a){for(var s=a+"Capture",o=[];t!==null;){var d=t,p=d.stateNode;d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=cs(t,s),d!=null&&o.unshift(Vs(t,d,p)),d=cs(t,a),d!=null&&o.push(Vs(t,d,p))),t=t.return}return o}function Ui(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function vy(t,a,s,o,d){for(var p=a._reactName,b=[];s!==null&&s!==o;){var w=s,S=w.alternate,C=w.stateNode;if(w=w.tag,S!==null&&S===o)break;w!==5&&w!==26&&w!==27||C===null||(S=C,d?(C=cs(s,p),C!=null&&b.unshift(Vs(s,C,S))):d||(C=cs(s,p),C!=null&&b.push(Vs(s,C,S)))),s=s.return}b.length!==0&&t.push({event:a,listeners:b})}var Dw=/\r\n?/g,Mw=/\u0000|\uFFFD/g;function _y(t){return(typeof t=="string"?t:""+t).replace(Dw,`
`).replace(Mw,"")}function wy(t,a){return a=_y(a),_y(t)===a}function Hu(){}function Be(t,a,s,o,d,p){switch(s){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||ci(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&ci(t,""+o);break;case"className":Kl(t,"class",o);break;case"tabIndex":Kl(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Kl(t,s,o);break;case"style":Dm(t,o,p);break;case"data":if(a!=="object"){Kl(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=Wl(""+o),t.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(a!=="input"&&Be(t,a,"name",d.name,d,null),Be(t,a,"formEncType",d.formEncType,d,null),Be(t,a,"formMethod",d.formMethod,d,null),Be(t,a,"formTarget",d.formTarget,d,null)):(Be(t,a,"encType",d.encType,d,null),Be(t,a,"method",d.method,d,null),Be(t,a,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=Wl(""+o),t.setAttribute(s,o);break;case"onClick":o!=null&&(t.onclick=Hu);break;case"onScroll":o!=null&&Ne("scroll",t);break;case"onScrollEnd":o!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(s=o.__html,s!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}s=Wl(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""+o):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":o===!0?t.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,o):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(s,o):t.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(s):t.setAttribute(s,o);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),Fl(t,"popover",o);break;case"xlinkActuate":fa(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":fa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":fa(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":fa(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":fa(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":fa(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":fa(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":fa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":fa(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Fl(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=l0.get(s)||s,Fl(t,s,o))}}function Ud(t,a,s,o,d,p){switch(s){case"style":Dm(t,o,p);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(s=o.__html,s!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"children":typeof o=="string"?ci(t,o):(typeof o=="number"||typeof o=="bigint")&&ci(t,""+o);break;case"onScroll":o!=null&&Ne("scroll",t);break;case"onScrollEnd":o!=null&&Ne("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Hu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Am.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),a=s.slice(2,d?s.length-7:void 0),p=t[Vt]||null,p=p!=null?p[s]:null,typeof p=="function"&&t.removeEventListener(a,p,d),typeof o=="function")){typeof p!="function"&&p!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,o,d);break e}s in t?t[s]=o:o===!0?t.setAttribute(s,""):Fl(t,s,o)}}}function Et(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var o=!1,d=!1,p;for(p in s)if(s.hasOwnProperty(p)){var b=s[p];if(b!=null)switch(p){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Be(t,a,p,b,s,null)}}d&&Be(t,a,"srcSet",s.srcSet,s,null),o&&Be(t,a,"src",s.src,s,null);return;case"input":Ne("invalid",t);var w=p=b=d=null,S=null,C=null;for(o in s)if(s.hasOwnProperty(o)){var $=s[o];if($!=null)switch(o){case"name":d=$;break;case"type":b=$;break;case"checked":S=$;break;case"defaultChecked":C=$;break;case"value":p=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,a));break;default:Be(t,a,o,$,s,null)}}Rm(t,p,w,S,C,b,d,!1),Xl(t);return;case"select":Ne("invalid",t),o=b=p=null;for(d in s)if(s.hasOwnProperty(d)&&(w=s[d],w!=null))switch(d){case"value":p=w;break;case"defaultValue":b=w;break;case"multiple":o=w;default:Be(t,a,d,w,s,null)}a=p,s=b,t.multiple=!!o,a!=null?oi(t,!!o,a,!1):s!=null&&oi(t,!!o,s,!0);return;case"textarea":Ne("invalid",t),p=d=o=null;for(b in s)if(s.hasOwnProperty(b)&&(w=s[b],w!=null))switch(b){case"value":o=w;break;case"defaultValue":d=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:Be(t,a,b,w,s,null)}xm(t,o,d,p),Xl(t);return;case"option":for(S in s)if(s.hasOwnProperty(S)&&(o=s[S],o!=null))switch(S){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Be(t,a,S,o,s,null)}return;case"dialog":Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(o=0;o<Zs.length;o++)Ne(Zs[o],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(C in s)if(s.hasOwnProperty(C)&&(o=s[C],o!=null))switch(C){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Be(t,a,C,o,s,null)}return;default:if(Jo(a)){for($ in s)s.hasOwnProperty($)&&(o=s[$],o!==void 0&&Ud(t,a,$,o,s,void 0));return}}for(w in s)s.hasOwnProperty(w)&&(o=s[w],o!=null&&Be(t,a,w,o,s,null))}function jw(t,a,s,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,b=null,w=null,S=null,C=null,$=null;for(P in s){var Z=s[P];if(s.hasOwnProperty(P)&&Z!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":S=Z;default:o.hasOwnProperty(P)||Be(t,a,P,null,o,Z)}}for(var j in o){var P=o[j];if(Z=s[j],o.hasOwnProperty(j)&&(P!=null||Z!=null))switch(j){case"type":p=P;break;case"name":d=P;break;case"checked":C=P;break;case"defaultChecked":$=P;break;case"value":b=P;break;case"defaultValue":w=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(137,a));break;default:P!==Z&&Be(t,a,j,P,o,Z)}}Ko(t,b,w,S,C,$,p,d);return;case"select":P=b=w=j=null;for(p in s)if(S=s[p],s.hasOwnProperty(p)&&S!=null)switch(p){case"value":break;case"multiple":P=S;default:o.hasOwnProperty(p)||Be(t,a,p,null,o,S)}for(d in o)if(p=o[d],S=s[d],o.hasOwnProperty(d)&&(p!=null||S!=null))switch(d){case"value":j=p;break;case"defaultValue":w=p;break;case"multiple":b=p;default:p!==S&&Be(t,a,d,p,o,S)}a=w,s=b,o=P,j!=null?oi(t,!!s,j,!1):!!o!=!!s&&(a!=null?oi(t,!!s,a,!0):oi(t,!!s,s?[]:"",!1));return;case"textarea":P=j=null;for(w in s)if(d=s[w],s.hasOwnProperty(w)&&d!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Be(t,a,w,null,o,d)}for(b in o)if(d=o[b],p=s[b],o.hasOwnProperty(b)&&(d!=null||p!=null))switch(b){case"value":j=d;break;case"defaultValue":P=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&Be(t,a,b,d,o,p)}Cm(t,j,P);return;case"option":for(var de in s)if(j=s[de],s.hasOwnProperty(de)&&j!=null&&!o.hasOwnProperty(de))switch(de){case"selected":t.selected=!1;break;default:Be(t,a,de,null,o,j)}for(S in o)if(j=o[S],P=s[S],o.hasOwnProperty(S)&&j!==P&&(j!=null||P!=null))switch(S){case"selected":t.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Be(t,a,S,j,o,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in s)j=s[ye],s.hasOwnProperty(ye)&&j!=null&&!o.hasOwnProperty(ye)&&Be(t,a,ye,null,o,j);for(C in o)if(j=o[C],P=s[C],o.hasOwnProperty(C)&&j!==P&&(j!=null||P!=null))switch(C){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,a));break;default:Be(t,a,C,j,o,P)}return;default:if(Jo(a)){for(var et in s)j=s[et],s.hasOwnProperty(et)&&j!==void 0&&!o.hasOwnProperty(et)&&Ud(t,a,et,void 0,o,j);for($ in o)j=o[$],P=s[$],!o.hasOwnProperty($)||j===P||j===void 0&&P===void 0||Ud(t,a,$,j,o,P);return}}for(var N in s)j=s[N],s.hasOwnProperty(N)&&j!=null&&!o.hasOwnProperty(N)&&Be(t,a,N,null,o,j);for(Z in o)j=o[Z],P=s[Z],!o.hasOwnProperty(Z)||j===P||j==null&&P==null||Be(t,a,Z,j,o,P)}var Id=null,Bd=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function Ay(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ey(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Pd(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var $d=null;function kw(){var t=window.event;return t&&t.type==="popstate"?t===$d?!1:($d=t,!0):($d=null,!1)}var Sy=typeof setTimeout=="function"?setTimeout:void 0,Lw=typeof clearTimeout=="function"?clearTimeout:void 0,Ty=typeof Promise=="function"?Promise:void 0,Uw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ty<"u"?function(t){return Ty.resolve(null).then(t).catch(Iw)}:Sy;function Iw(t){setTimeout(function(){throw t})}function zd(t,a){var s=a,o=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(o===0){t.removeChild(d),el(a);return}o--}else s!=="$"&&s!=="$?"&&s!=="$!"||o++;s=d}while(s);el(a)}function Hd(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Hd(s),Fo(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Bw(t,a,s,o){for(;t.nodeType===1;){var d=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[us])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==d.rel||t.getAttribute("href")!==(d.href==null?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=In(t.nextSibling),t===null)break}return null}function Pw(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=In(t.nextSibling),t===null))return null;return t}function In(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}function Oy(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return t;a--}else s==="/$"&&a++}t=t.previousSibling}return null}function Ry(t,a,s){switch(a=qu(s),t){case"html":if(t=a.documentElement,!t)throw Error(r(452));return t;case"head":if(t=a.head,!t)throw Error(r(453));return t;case"body":if(t=a.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}var Cn=new Map,Cy=new Set;function Gu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var Ra=W.d;W.d={f:$w,r:zw,D:Hw,C:qw,L:Gw,m:Zw,X:Qw,S:Vw,M:Yw};function $w(){var t=Ra.f(),a=Uu();return t||a}function zw(t){var a=si(t);a!==null&&a.tag===5&&a.type==="form"?tg(a):Ra.r(t)}var Ii=typeof document>"u"?null:document;function xy(t,a,s){var o=Ii;if(o&&typeof a=="string"&&a){var d=bn(a);d='link[rel="'+t+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),Cy.has(d)||(Cy.add(d),t={rel:t,crossOrigin:s,href:a},o.querySelector(d)===null&&(a=o.createElement("link"),Et(a,"link",t),mt(a),o.head.appendChild(a)))}}function Hw(t){Ra.D(t),xy("dns-prefetch",t,null)}function qw(t,a){Ra.C(t,a),xy("preconnect",t,a)}function Gw(t,a,s){Ra.L(t,a,s);var o=Ii;if(o&&t&&a){var d='link[rel="preload"][as="'+bn(a)+'"]';a==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+bn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+bn(s.imageSizes)+'"]')):d+='[href="'+bn(t)+'"]';var p=d;switch(a){case"style":p=Bi(t);break;case"script":p=Pi(t)}Cn.has(p)||(t=he({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),Cn.set(p,t),o.querySelector(d)!==null||a==="style"&&o.querySelector(Qs(p))||a==="script"&&o.querySelector(Ys(p))||(a=o.createElement("link"),Et(a,"link",t),mt(a),o.head.appendChild(a)))}}function Zw(t,a){Ra.m(t,a);var s=Ii;if(s&&t){var o=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+bn(o)+'"][href="'+bn(t)+'"]',p=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Pi(t)}if(!Cn.has(p)&&(t=he({rel:"modulepreload",href:t},a),Cn.set(p,t),s.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ys(p)))return}o=s.createElement("link"),Et(o,"link",t),mt(o),s.head.appendChild(o)}}}function Vw(t,a,s){Ra.S(t,a,s);var o=Ii;if(o&&t){var d=li(o).hoistableStyles,p=Bi(t);a=a||"default";var b=d.get(p);if(!b){var w={loading:0,preload:null};if(b=o.querySelector(Qs(p)))w.loading=5;else{t=he({rel:"stylesheet",href:t,"data-precedence":a},s),(s=Cn.get(p))&&qd(t,s);var S=b=o.createElement("link");mt(S),Et(S,"link",t),S._p=new Promise(function(C,$){S.onload=C,S.onerror=$}),S.addEventListener("load",function(){w.loading|=1}),S.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Zu(b,a,o)}b={type:"stylesheet",instance:b,count:1,state:w},d.set(p,b)}}}function Qw(t,a){Ra.X(t,a);var s=Ii;if(s&&t){var o=li(s).hoistableScripts,d=Pi(t),p=o.get(d);p||(p=s.querySelector(Ys(d)),p||(t=he({src:t,async:!0},a),(a=Cn.get(d))&&Gd(t,a),p=s.createElement("script"),mt(p),Et(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(d,p))}}function Yw(t,a){Ra.M(t,a);var s=Ii;if(s&&t){var o=li(s).hoistableScripts,d=Pi(t),p=o.get(d);p||(p=s.querySelector(Ys(d)),p||(t=he({src:t,async:!0,type:"module"},a),(a=Cn.get(d))&&Gd(t,a),p=s.createElement("script"),mt(p),Et(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(d,p))}}function Ny(t,a,s,o){var d=(d=Dn.current)?Gu(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Bi(s.href),s=li(d).hoistableStyles,o=s.get(a),o||(o={type:"style",instance:null,count:0,state:null},s.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Bi(s.href);var p=li(d).hoistableStyles,b=p.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,b),(p=d.querySelector(Qs(t)))&&!p._p&&(b.instance=p,b.state.loading=5),Cn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Cn.set(t,s),p||Fw(d,t,s,b.state))),a&&o===null)throw Error(r(528,""));return b}if(a&&o!==null)throw Error(r(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Pi(s),s=li(d).hoistableScripts,o=s.get(a),o||(o={type:"script",instance:null,count:0,state:null},s.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Bi(t){return'href="'+bn(t)+'"'}function Qs(t){return'link[rel="stylesheet"]['+t+"]"}function Dy(t){return he({},t,{"data-precedence":t.precedence,precedence:null})}function Fw(t,a,s,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),Et(a,"link",s),mt(a),t.head.appendChild(a))}function Pi(t){return'[src="'+bn(t)+'"]'}function Ys(t){return"script[async]"+t}function My(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+bn(s.href)+'"]');if(o)return a.instance=o,mt(o),o;var d=he({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),mt(o),Et(o,"style",d),Zu(o,s.precedence,t),a.instance=o;case"stylesheet":d=Bi(s.href);var p=t.querySelector(Qs(d));if(p)return a.state.loading|=4,a.instance=p,mt(p),p;o=Dy(s),(d=Cn.get(d))&&qd(o,d),p=(t.ownerDocument||t).createElement("link"),mt(p);var b=p;return b._p=new Promise(function(w,S){b.onload=w,b.onerror=S}),Et(p,"link",o),a.state.loading|=4,Zu(p,s.precedence,t),a.instance=p;case"script":return p=Pi(s.src),(d=t.querySelector(Ys(p)))?(a.instance=d,mt(d),d):(o=s,(d=Cn.get(p))&&(o=he({},s),Gd(o,d)),t=t.ownerDocument||t,d=t.createElement("script"),mt(d),Et(d,"link",o),t.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,Zu(o,s.precedence,t));return a.instance}function Zu(t,a,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,p=d,b=0;b<o.length;b++){var w=o[b];if(w.dataset.precedence===a)p=w;else if(p!==d)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function qd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Gd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Vu=null;function jy(t,a,s){if(Vu===null){var o=new Map,d=Vu=new Map;d.set(s,o)}else d=Vu,o=d.get(s),o||(o=new Map,d.set(s,o));if(o.has(t))return o;for(o.set(t,null),s=s.getElementsByTagName(t),d=0;d<s.length;d++){var p=s[d];if(!(p[us]||p[rt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=t+b;var w=o.get(b);w?w.push(p):o.set(b,[p])}}return o}function ky(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function Kw(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ly(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Fs=null;function Xw(){}function Jw(t,a,s){if(Fs===null)throw Error(r(475));var o=Fs;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Bi(s.href),p=t.querySelector(Qs(d));if(p){t=p._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=Qu.bind(o),t.then(o,o)),a.state.loading|=4,a.instance=p,mt(p);return}p=t.ownerDocument||t,s=Dy(s),(d=Cn.get(d))&&qd(s,d),p=p.createElement("link"),mt(p);var b=p;b._p=new Promise(function(w,S){b.onload=w,b.onerror=S}),Et(p,"link",s),a.instance=p}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(o.count++,a=Qu.bind(o),t.addEventListener("load",a),t.addEventListener("error",a))}}function Ww(){if(Fs===null)throw Error(r(475));var t=Fs;return t.stylesheets&&t.count===0&&Zd(t,t.stylesheets),0<t.count?function(a){var s=setTimeout(function(){if(t.stylesheets&&Zd(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)Zd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yu=null;function Zd(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yu=new Map,a.forEach(eA,t),Yu=null,Qu.call(t))}function eA(t,a){if(!(a.state.loading&4)){var s=Yu.get(t);if(s)var o=s.get(null);else{s=new Map,Yu.set(t,s);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var b=d[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),o=b)}o&&s.set(null,o)}d=a.instance,b=d.getAttribute("data-precedence"),p=s.get(b)||o,p===o&&s.set(null,d),s.set(b,d),this.count++,o=Qu.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),p?p.parentNode.insertBefore(d,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),a.state.loading|=4}}var Ks={$$typeof:_,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function tA(t,a,s,o,d,p,b,w){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xn(0),this.hiddenUpdates=Xn(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Uy(t,a,s,o,d,p,b,w,S,C,$,Z){return t=new tA(t,a,s,b,w,S,C,Z),a=1,p===!0&&(a|=24),p=On(3,null,null,a),t.current=p,p.stateNode=t,a=Ec(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:o,isDehydrated:s,cache:a},ad(p),t}function Iy(t){return t?(t=yi,t):yi}function By(t,a,s,o,d,p){d=Iy(d),o.context===null?o.context=d:o.pendingContext=d,o=Ga(a),o.payload={element:s},p=p===void 0?null:p,p!==null&&(o.callback=p),s=Za(t,o,a),s!==null&&(Ut(s,t,a),js(s,t,a))}function Py(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Vd(t,a){Py(t,a),(t=t.alternate)&&Py(t,a)}function $y(t){if(t.tag===13){var a=Ia(t,67108864);a!==null&&Ut(a,t,67108864),Vd(t,67108864)}}var Fu=!0;function nA(t,a,s,o){var d=re.T;re.T=null;var p=W.p;try{W.p=2,Qd(t,a,s,o)}finally{W.p=p,re.T=d}}function aA(t,a,s,o){var d=re.T;re.T=null;var p=W.p;try{W.p=8,Qd(t,a,s,o)}finally{W.p=p,re.T=d}}function Qd(t,a,s,o){if(Fu){var d=Yd(o);if(d===null)Ld(t,a,o,Ku,s),Hy(t,o);else if(iA(d,t,a,s,o))o.stopPropagation();else if(Hy(t,o),a&4&&-1<rA.indexOf(t)){for(;d!==null;){var p=si(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=nt(p.pendingLanes);if(b!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var S=1<<31-kt(b);w.entanglements[1]|=S,b&=~S}ra(p),(Ke&6)===0&&(ju=tn()+500,Gs(0))}}break;case 13:w=Ia(p,2),w!==null&&Ut(w,p,2),Uu(),Vd(p,2)}if(p=Yd(o),p===null&&Ld(t,a,o,Ku,s),p===d)break;d=p}d!==null&&o.stopPropagation()}else Ld(t,a,o,null,s)}}function Yd(t){return t=ec(t),Fd(t)}var Ku=null;function Fd(t){if(Ku=null,t=Ar(t),t!==null){var a=G(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=K(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Ku=t,null}function zy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zo()){case Vl:return 2;case ca:return 8;case Mn:case _r:return 32;case ss:return 268435456;default:return 32}default:return 32}}var Kd=!1,Ja=null,Wa=null,er=null,Xs=new Map,Js=new Map,tr=[],rA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hy(t,a){switch(t){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Xs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Js.delete(a.pointerId)}}function Ws(t,a,s,o,d,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:s,eventSystemFlags:o,nativeEvent:p,targetContainers:[d]},a!==null&&(a=si(a),a!==null&&$y(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),t)}function iA(t,a,s,o,d){switch(a){case"focusin":return Ja=Ws(Ja,t,a,s,o,d),!0;case"dragenter":return Wa=Ws(Wa,t,a,s,o,d),!0;case"mouseover":return er=Ws(er,t,a,s,o,d),!0;case"pointerover":var p=d.pointerId;return Xs.set(p,Ws(Xs.get(p)||null,t,a,s,o,d)),!0;case"gotpointercapture":return p=d.pointerId,Js.set(p,Ws(Js.get(p)||null,t,a,s,o,d)),!0}return!1}function qy(t){var a=Ar(t.target);if(a!==null){var s=G(a);if(s!==null){if(a=s.tag,a===13){if(a=K(s),a!==null){t.blockedOn=a,Wn(t.priority,function(){if(s.tag===13){var o=on(),d=Ia(s,o);d!==null&&Ut(d,s,o),Vd(s,o)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=Yd(t.nativeEvent);if(s===null){s=t.nativeEvent;var o=new s.constructor(s.type,s);Wo=o,s.target.dispatchEvent(o),Wo=null}else return a=si(s),a!==null&&$y(a),t.blockedOn=s,!1;a.shift()}return!0}function Gy(t,a,s){Xu(t)&&s.delete(a)}function sA(){Kd=!1,Ja!==null&&Xu(Ja)&&(Ja=null),Wa!==null&&Xu(Wa)&&(Wa=null),er!==null&&Xu(er)&&(er=null),Xs.forEach(Gy),Js.forEach(Gy)}function Ju(t,a){t.blockedOn===a&&(t.blockedOn=null,Kd||(Kd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,sA)))}var Wu=null;function Zy(t){Wu!==t&&(Wu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Wu===t&&(Wu=null);for(var a=0;a<t.length;a+=3){var s=t[a],o=t[a+1],d=t[a+2];if(typeof o!="function"){if(Fd(o||s)===null)continue;break}var p=si(s);p!==null&&(t.splice(a,3),a-=3,Pc(p,{pending:!0,data:d,method:s.method,action:o},o,d))}}))}function el(t){function a(S){return Ju(S,t)}Ja!==null&&Ju(Ja,t),Wa!==null&&Ju(Wa,t),er!==null&&Ju(er,t),Xs.forEach(a),Js.forEach(a);for(var s=0;s<tr.length;s++){var o=tr[s];o.blockedOn===t&&(o.blockedOn=null)}for(;0<tr.length&&(s=tr[0],s.blockedOn===null);)qy(s),s.blockedOn===null&&tr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var d=s[o],p=s[o+1],b=d[Vt]||null;if(typeof p=="function")b||Zy(s);else if(b){var w=null;if(p&&p.hasAttribute("formAction")){if(d=p,b=p[Vt]||null)w=b.formAction;else if(Fd(d)!==null)continue}else w=b.action;typeof w=="function"?s[o+1]=w:(s.splice(o,3),o-=3),Zy(s)}}}function Xd(t){this._internalRoot=t}eo.prototype.render=Xd.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(r(409));var s=a.current,o=on();By(s,o,t,a,null,null)},eo.prototype.unmount=Xd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;t.tag===0&&ki(),By(t.current,2,null,t,null,null),Uu(),a[ii]=null}};function eo(t){this._internalRoot=t}eo.prototype.unstable_scheduleHydration=function(t){if(t){var a=La();t={blockedOn:null,target:t,priority:a};for(var s=0;s<tr.length&&a!==0&&a<tr[s].priority;s++);tr.splice(s,0,t),s===0&&qy(t)}};var Vy=e.version;if(Vy!=="19.0.0")throw Error(r(527,Vy,"19.0.0"));W.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=U(a),t=t!==null?V(t):null,t=t===null?null:t.stateNode,t};var lA={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:re,findFiberByHostInstance:Ar,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var to=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!to.isDisabled&&to.supportsFiber)try{wr=to.inject(lA),jt=to}catch{}}return tl.createRoot=function(t,a){if(!l(t))throw Error(r(299));var s=!1,o="",d=og,p=cg,b=dg,w=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks)),a=Uy(t,1,!1,null,null,s,o,d,p,b,w,null),t[ii]=a.current,kd(t.nodeType===8?t.parentNode:t),new Xd(a)},tl.hydrateRoot=function(t,a,s){if(!l(t))throw Error(r(299));var o=!1,d="",p=og,b=cg,w=dg,S=null,C=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks),s.formState!==void 0&&(C=s.formState)),a=Uy(t,1,!0,a,s??null,o,d,p,b,w,S,C),a.context=Iy(null),s=a.current,o=on(),d=Ga(o),d.callback=null,Za(s,d,o),a.current.lanes=o,Ye(a,o),ra(a),t[ii]=a.current,kd(t),new eo(a)},tl.version="19.0.0",tl}var eb;function gA(){if(eb)return Wd.exports;eb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Wd.exports=pA(),Wd.exports}var yA=gA();const bA=ti(yA);var sl=Kv();const ko=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ts(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function Gh(i){return"nodeType"in i}function Jt(i){var e,n;return i?ts(i)?i:Gh(i)&&(e=(n=i.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Zh(i){const{Document:e}=Jt(i);return i instanceof e}function Ll(i){return ts(i)?!1:i instanceof Jt(i).HTMLElement}function Xv(i){return i instanceof Jt(i).SVGElement}function ns(i){return i?ts(i)?i.document:Gh(i)?Zh(i)?i:Ll(i)||Xv(i)?i.ownerDocument:document:document:document}const cr=ko?z.useLayoutEffect:z.useEffect;function Vh(i){const e=z.useRef(i);return cr(()=>{e.current=i}),z.useCallback(function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e.current==null?void 0:e.current(...r)},[])}function vA(){const i=z.useRef(null),e=z.useCallback((r,l)=>{i.current=setInterval(r,l)},[]),n=z.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,n]}function Qh(i,e){e===void 0&&(e=[i]);const n=z.useRef(i);return cr(()=>{n.current!==i&&(n.current=i)},e),n}function Ul(i,e){const n=z.useRef();return z.useMemo(()=>{const r=i(n.current);return n.current=r,r},[...e])}function Th(i){const e=Vh(i),n=z.useRef(null),r=z.useCallback(l=>{l!==n.current&&(e==null||e(l,n.current)),n.current=l},[]);return[n,r]}function Oh(i){const e=z.useRef();return z.useEffect(()=>{e.current=i},[i]),e.current}let af={};function Yh(i,e){return z.useMemo(()=>{if(e)return e;const n=af[i]==null?0:af[i]+1;return af[i]=n,i+"-"+n},[i,e])}function Jv(i){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return r.reduce((u,c)=>{const f=Object.entries(c);for(const[h,m]of f){const g=u[h];g!=null&&(u[h]=g+i*m)}return u},{...e})}}const Qi=Jv(1),po=Jv(-1);function _A(i){return"clientX"in i&&"clientY"in i}function Wv(i){if(!i)return!1;const{KeyboardEvent:e}=Jt(i.target);return e&&i instanceof e}function wA(i){if(!i)return!1;const{TouchEvent:e}=Jt(i.target);return e&&i instanceof e}function Rh(i){if(wA(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:n}=i.touches[0];return{x:e,y:n}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:n}=i.changedTouches[0];return{x:e,y:n}}}return _A(i)?{x:i.clientX,y:i.clientY}:null}const tb="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function AA(i){return i.matches(tb)?i:i.querySelector(tb)}const EA={display:"none"};function SA(i){let{id:e,value:n}=i;return I.createElement("div",{id:e,style:EA},n)}function TA(i){let{id:e,announcement:n,ariaLiveType:r="assertive"}=i;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:e,style:l,role:"status","aria-live":r,"aria-atomic":!0},n)}function OA(){const[i,e]=z.useState("");return{announce:z.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const e_=z.createContext(null);function RA(i){const e=z.useContext(e_);z.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function CA(){const[i]=z.useState(()=>new Set),e=z.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[z.useCallback(r=>{let{type:l,event:u}=r;i.forEach(c=>{var f;return(f=c[l])==null?void 0:f.call(c,u)})},[i]),e]}const xA={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},NA={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:n}=i;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:n}=i;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function DA(i){let{announcements:e=NA,container:n,hiddenTextDescribedById:r,screenReaderInstructions:l=xA}=i;const{announce:u,announcement:c}=OA(),f=Yh("DndLiveRegion"),[h,m]=z.useState(!1);if(z.useEffect(()=>{m(!0)},[]),RA(z.useMemo(()=>({onDragStart(y){let{active:v}=y;u(e.onDragStart({active:v}))},onDragMove(y){let{active:v,over:_}=y;e.onDragMove&&u(e.onDragMove({active:v,over:_}))},onDragOver(y){let{active:v,over:_}=y;u(e.onDragOver({active:v,over:_}))},onDragEnd(y){let{active:v,over:_}=y;u(e.onDragEnd({active:v,over:_}))},onDragCancel(y){let{active:v,over:_}=y;u(e.onDragCancel({active:v,over:_}))}}),[u,e])),!h)return null;const g=I.createElement(I.Fragment,null,I.createElement(SA,{id:r,value:l.draggable}),I.createElement(TA,{id:f,announcement:c}));return n?sl.createPortal(g,n):g}var Nt;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(Nt||(Nt={}));function go(){}const Zn=Object.freeze({x:0,y:0});function MA(i,e){let{data:{value:n}}=i,{data:{value:r}}=e;return r-n}function jA(i,e){if(!i||i.length===0)return null;const[n]=i;return n[e]}function kA(i,e){const n=Math.max(e.top,i.top),r=Math.max(e.left,i.left),l=Math.min(e.left+e.width,i.left+i.width),u=Math.min(e.top+e.height,i.top+i.height),c=l-r,f=u-n;if(r<l&&n<u){const h=e.width*e.height,m=i.width*i.height,g=c*f,y=g/(h+m-g);return Number(y.toFixed(4))}return 0}const LA=i=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=i;const l=[];for(const u of r){const{id:c}=u,f=n.get(c);if(f){const h=kA(f,e);h>0&&l.push({id:c,data:{droppableContainer:u,value:h}})}}return l.sort(MA)};function UA(i,e,n){return{...i,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function t_(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:Zn}function IA(i){return function(n){for(var r=arguments.length,l=new Array(r>1?r-1:0),u=1;u<r;u++)l[u-1]=arguments[u];return l.reduce((c,f)=>({...c,top:c.top+i*f.y,bottom:c.bottom+i*f.y,left:c.left+i*f.x,right:c.right+i*f.x}),{...n})}}const BA=IA(1);function PA(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function $A(i,e,n){const r=PA(e);if(!r)return i;const{scaleX:l,scaleY:u,x:c,y:f}=r,h=i.left-c-(1-l)*parseFloat(n),m=i.top-f-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),g=l?i.width/l:i.width,y=u?i.height/u:i.height;return{width:g,height:y,top:m,right:h+g,bottom:m+y,left:h}}const zA={ignoreTransform:!1};function Il(i,e){e===void 0&&(e=zA);let n=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:g}=Jt(i).getComputedStyle(i);m&&(n=$A(n,m,g))}const{top:r,left:l,width:u,height:c,bottom:f,right:h}=n;return{top:r,left:l,width:u,height:c,bottom:f,right:h}}function nb(i){return Il(i,{ignoreTransform:!0})}function HA(i){const e=i.innerWidth,n=i.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function qA(i,e){return e===void 0&&(e=Jt(i).getComputedStyle(i)),e.position==="fixed"}function GA(i,e){e===void 0&&(e=Jt(i).getComputedStyle(i));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const u=e[l];return typeof u=="string"?n.test(u):!1})}function Fh(i,e){const n=[];function r(l){if(e!=null&&n.length>=e||!l)return n;if(Zh(l)&&l.scrollingElement!=null&&!n.includes(l.scrollingElement))return n.push(l.scrollingElement),n;if(!Ll(l)||Xv(l)||n.includes(l))return n;const u=Jt(i).getComputedStyle(l);return l!==i&&GA(l,u)&&n.push(l),qA(l,u)?n:r(l.parentNode)}return i?r(i):n}function n_(i){const[e]=Fh(i,1);return e??null}function rf(i){return!ko||!i?null:ts(i)?i:Gh(i)?Zh(i)||i===ns(i).scrollingElement?window:Ll(i)?i:null:null}function a_(i){return ts(i)?i.scrollX:i.scrollLeft}function r_(i){return ts(i)?i.scrollY:i.scrollTop}function Ch(i){return{x:a_(i),y:r_(i)}}var vt;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(vt||(vt={}));function i_(i){return!ko||!i?!1:i===document.scrollingElement}function s_(i){const e={x:0,y:0},n=i_(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-n.width,y:i.scrollHeight-n.height},l=i.scrollTop<=e.y,u=i.scrollLeft<=e.x,c=i.scrollTop>=r.y,f=i.scrollLeft>=r.x;return{isTop:l,isLeft:u,isBottom:c,isRight:f,maxScroll:r,minScroll:e}}const ZA={x:.2,y:.2};function VA(i,e,n,r,l){let{top:u,left:c,right:f,bottom:h}=n;r===void 0&&(r=10),l===void 0&&(l=ZA);const{isTop:m,isBottom:g,isLeft:y,isRight:v}=s_(i),_={x:0,y:0},A={x:0,y:0},E={height:e.height*l.y,width:e.width*l.x};return!m&&u<=e.top+E.height?(_.y=vt.Backward,A.y=r*Math.abs((e.top+E.height-u)/E.height)):!g&&h>=e.bottom-E.height&&(_.y=vt.Forward,A.y=r*Math.abs((e.bottom-E.height-h)/E.height)),!v&&f>=e.right-E.width?(_.x=vt.Forward,A.x=r*Math.abs((e.right-E.width-f)/E.width)):!y&&c<=e.left+E.width&&(_.x=vt.Backward,A.x=r*Math.abs((e.left+E.width-c)/E.width)),{direction:_,speed:A}}function QA(i){if(i===document.scrollingElement){const{innerWidth:u,innerHeight:c}=window;return{top:0,left:0,right:u,bottom:c,width:u,height:c}}const{top:e,left:n,right:r,bottom:l}=i.getBoundingClientRect();return{top:e,left:n,right:r,bottom:l,width:i.clientWidth,height:i.clientHeight}}function l_(i){return i.reduce((e,n)=>Qi(e,Ch(n)),Zn)}function YA(i){return i.reduce((e,n)=>e+a_(n),0)}function FA(i){return i.reduce((e,n)=>e+r_(n),0)}function KA(i,e){if(e===void 0&&(e=Il),!i)return;const{top:n,left:r,bottom:l,right:u}=e(i);n_(i)&&(l<=0||u<=0||n>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const XA=[["x",["left","right"],YA],["y",["top","bottom"],FA]];class Kh{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Fh(n),l=l_(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,c,f]of XA)for(const h of c)Object.defineProperty(this,h,{get:()=>{const m=f(r),g=l[u]-m;return this.rect[h]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ol{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var l;(l=this.target)==null||l.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function JA(i){const{EventTarget:e}=Jt(i);return i instanceof e?i:ns(i)}function sf(i,e){const n=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Nn;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Nn||(Nn={}));function ab(i){i.preventDefault()}function WA(i){i.stopPropagation()}var qe;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(qe||(qe={}));const u_={start:[qe.Space,qe.Enter],cancel:[qe.Esc],end:[qe.Space,qe.Enter,qe.Tab]},eE=(i,e)=>{let{currentCoordinates:n}=e;switch(i.code){case qe.Right:return{...n,x:n.x+25};case qe.Left:return{...n,x:n.x-25};case qe.Down:return{...n,y:n.y+25};case qe.Up:return{...n,y:n.y-25}}};class o_{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ol(ns(n)),this.windowListeners=new ol(Jt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Nn.Resize,this.handleCancel),this.windowListeners.add(Nn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Nn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&KA(r),n(Zn)}handleKeyDown(e){if(Wv(e)){const{active:n,context:r,options:l}=this.props,{keyboardCodes:u=u_,coordinateGetter:c=eE,scrollBehavior:f="smooth"}=l,{code:h}=e;if(u.end.includes(h)){this.handleEnd(e);return}if(u.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:m}=r.current,g=m?{x:m.left,y:m.top}:Zn;this.referenceCoordinates||(this.referenceCoordinates=g);const y=c(e,{active:n,context:r.current,currentCoordinates:g});if(y){const v=po(y,g),_={x:0,y:0},{scrollableAncestors:A}=r.current;for(const E of A){const O=e.code,{isTop:x,isRight:k,isLeft:M,isBottom:ae,maxScroll:B,minScroll:X}=s_(E),ne=QA(E),F={x:Math.min(O===qe.Right?ne.right-ne.width/2:ne.right,Math.max(O===qe.Right?ne.left:ne.left+ne.width/2,y.x)),y:Math.min(O===qe.Down?ne.bottom-ne.height/2:ne.bottom,Math.max(O===qe.Down?ne.top:ne.top+ne.height/2,y.y))},re=O===qe.Right&&!k||O===qe.Left&&!M,he=O===qe.Down&&!ae||O===qe.Up&&!x;if(re&&F.x!==y.x){const Oe=E.scrollLeft+v.x,Ge=O===qe.Right&&Oe<=B.x||O===qe.Left&&Oe>=X.x;if(Ge&&!v.y){E.scrollTo({left:Oe,behavior:f});return}Ge?_.x=E.scrollLeft-Oe:_.x=O===qe.Right?E.scrollLeft-B.x:E.scrollLeft-X.x,_.x&&E.scrollBy({left:-_.x,behavior:f});break}else if(he&&F.y!==y.y){const Oe=E.scrollTop+v.y,Ge=O===qe.Down&&Oe<=B.y||O===qe.Up&&Oe>=X.y;if(Ge&&!v.x){E.scrollTo({top:Oe,behavior:f});return}Ge?_.y=E.scrollTop-Oe:_.y=O===qe.Down?E.scrollTop-B.y:E.scrollTop-X.y,_.y&&E.scrollBy({top:-_.y,behavior:f});break}}this.handleMove(e,Qi(po(y,this.referenceCoordinates),_))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}o_.activators=[{eventName:"onKeyDown",handler:(i,e,n)=>{let{keyboardCodes:r=u_,onActivation:l}=e,{active:u}=n;const{code:c}=i.nativeEvent;if(r.start.includes(c)){const f=u.activatorNode.current;return f&&i.target!==f?!1:(i.preventDefault(),l==null||l({event:i.nativeEvent}),!0)}return!1}}];function rb(i){return!!(i&&"distance"in i)}function ib(i){return!!(i&&"delay"in i)}class Xh{constructor(e,n,r){var l;r===void 0&&(r=JA(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:u}=e,{target:c}=u;this.props=e,this.events=n,this.document=ns(c),this.documentListeners=new ol(this.document),this.listeners=new ol(r),this.windowListeners=new ol(Jt(c)),this.initialCoordinates=(l=Rh(u))!=null?l:Zn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Nn.Resize,this.handleCancel),this.windowListeners.add(Nn.DragStart,ab),this.windowListeners.add(Nn.VisibilityChange,this.handleCancel),this.windowListeners.add(Nn.ContextMenu,ab),this.documentListeners.add(Nn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ib(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(rb(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:l}=this.props;l(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Nn.Click,WA,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Nn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:l,props:u}=this,{onMove:c,options:{activationConstraint:f}}=u;if(!l)return;const h=(n=Rh(e))!=null?n:Zn,m=po(l,h);if(!r&&f){if(rb(f)){if(f.tolerance!=null&&sf(m,f.tolerance))return this.handleCancel();if(sf(m,f.distance))return this.handleStart()}if(ib(f)&&sf(m,f.tolerance))return this.handleCancel();this.handlePending(f,m);return}e.cancelable&&e.preventDefault(),c(h)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===qe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const tE={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class c_ extends Xh{constructor(e){const{event:n}=e,r=ns(n.target);super(e,tE,r)}}c_.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const nE={move:{name:"mousemove"},end:{name:"mouseup"}};var xh;(function(i){i[i.RightClick=2]="RightClick"})(xh||(xh={}));class aE extends Xh{constructor(e){super(e,nE,ns(e.event.target))}}aE.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:r}=e;return n.button===xh.RightClick?!1:(r==null||r({event:n}),!0)}}];const lf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class rE extends Xh{constructor(e){super(e,lf)}static setup(){return window.addEventListener(lf.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(lf.move.name,e)};function e(){}}}rE.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:r}=e;const{touches:l}=n;return l.length>1?!1:(r==null||r({event:n}),!0)}}];var cl;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(cl||(cl={}));var yo;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(yo||(yo={}));function iE(i){let{acceleration:e,activator:n=cl.Pointer,canScroll:r,draggingRect:l,enabled:u,interval:c=5,order:f=yo.TreeOrder,pointerCoordinates:h,scrollableAncestors:m,scrollableAncestorRects:g,delta:y,threshold:v}=i;const _=lE({delta:y,disabled:!u}),[A,E]=vA(),O=z.useRef({x:0,y:0}),x=z.useRef({x:0,y:0}),k=z.useMemo(()=>{switch(n){case cl.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case cl.DraggableRect:return l}},[n,l,h]),M=z.useRef(null),ae=z.useCallback(()=>{const X=M.current;if(!X)return;const ne=O.current.x*x.current.x,F=O.current.y*x.current.y;X.scrollBy(ne,F)},[]),B=z.useMemo(()=>f===yo.TreeOrder?[...m].reverse():m,[f,m]);z.useEffect(()=>{if(!u||!m.length||!k){E();return}for(const X of B){if((r==null?void 0:r(X))===!1)continue;const ne=m.indexOf(X),F=g[ne];if(!F)continue;const{direction:re,speed:he}=VA(X,F,k,e,v);for(const Oe of["x","y"])_[Oe][re[Oe]]||(he[Oe]=0,re[Oe]=0);if(he.x>0||he.y>0){E(),M.current=X,A(ae,c),O.current=he,x.current=re;return}}O.current={x:0,y:0},x.current={x:0,y:0},E()},[e,ae,r,E,u,c,JSON.stringify(k),JSON.stringify(_),A,m,B,g,JSON.stringify(v)])}const sE={x:{[vt.Backward]:!1,[vt.Forward]:!1},y:{[vt.Backward]:!1,[vt.Forward]:!1}};function lE(i){let{delta:e,disabled:n}=i;const r=Oh(e);return Ul(l=>{if(n||!r||!l)return sE;const u={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[vt.Backward]:l.x[vt.Backward]||u.x===-1,[vt.Forward]:l.x[vt.Forward]||u.x===1},y:{[vt.Backward]:l.y[vt.Backward]||u.y===-1,[vt.Forward]:l.y[vt.Forward]||u.y===1}}},[n,e,r])}function uE(i,e){const n=e!=null?i.get(e):void 0,r=n?n.node.current:null;return Ul(l=>{var u;return e==null?null:(u=r??l)!=null?u:null},[r,e])}function oE(i,e){return z.useMemo(()=>i.reduce((n,r)=>{const{sensor:l}=r,u=l.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,r)}));return[...n,...u]},[]),[i,e])}var bl;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(bl||(bl={}));var Nh;(function(i){i.Optimized="optimized"})(Nh||(Nh={}));const sb=new Map;function cE(i,e){let{dragging:n,dependencies:r,config:l}=e;const[u,c]=z.useState(null),{frequency:f,measure:h,strategy:m}=l,g=z.useRef(i),y=O(),v=Qh(y),_=z.useCallback(function(x){x===void 0&&(x=[]),!v.current&&c(k=>k===null?x:k.concat(x.filter(M=>!k.includes(M))))},[v]),A=z.useRef(null),E=Ul(x=>{if(y&&!n)return sb;if(!x||x===sb||g.current!==i||u!=null){const k=new Map;for(let M of i){if(!M)continue;if(u&&u.length>0&&!u.includes(M.id)&&M.rect.current){k.set(M.id,M.rect.current);continue}const ae=M.node.current,B=ae?new Kh(h(ae),ae):null;M.rect.current=B,B&&k.set(M.id,B)}return k}return x},[i,u,n,y,h]);return z.useEffect(()=>{g.current=i},[i]),z.useEffect(()=>{y||_()},[n,y]),z.useEffect(()=>{u&&u.length>0&&c(null)},[JSON.stringify(u)]),z.useEffect(()=>{y||typeof f!="number"||A.current!==null||(A.current=setTimeout(()=>{_(),A.current=null},f))},[f,y,_,...r]),{droppableRects:E,measureDroppableContainers:_,measuringScheduled:u!=null};function O(){switch(m){case bl.Always:return!1;case bl.BeforeDragging:return n;default:return!n}}}function d_(i,e){return Ul(n=>i?n||(typeof e=="function"?e(i):i):null,[e,i])}function dE(i,e){return d_(i,e)}function fE(i){let{callback:e,disabled:n}=i;const r=Vh(e),l=z.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(r)},[r,n]);return z.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function Jh(i){let{callback:e,disabled:n}=i;const r=Vh(e),l=z.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(r)},[n]);return z.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function hE(i){return new Kh(Il(i),i)}function lb(i,e,n){e===void 0&&(e=hE);const[r,l]=z.useState(null);function u(){l(h=>{if(!i)return null;if(i.isConnected===!1){var m;return(m=h??n)!=null?m:null}const g=e(i);return JSON.stringify(h)===JSON.stringify(g)?h:g})}const c=fE({callback(h){if(i)for(const m of h){const{type:g,target:y}=m;if(g==="childList"&&y instanceof HTMLElement&&y.contains(i)){u();break}}}}),f=Jh({callback:u});return cr(()=>{u(),i?(f==null||f.observe(i),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(f==null||f.disconnect(),c==null||c.disconnect())},[i]),r}function mE(i){const e=d_(i);return t_(i,e)}const ub=[];function pE(i){const e=z.useRef(i),n=Ul(r=>i?r&&r!==ub&&i&&e.current&&i.parentNode===e.current.parentNode?r:Fh(i):ub,[i]);return z.useEffect(()=>{e.current=i},[i]),n}function gE(i){const[e,n]=z.useState(null),r=z.useRef(i),l=z.useCallback(u=>{const c=rf(u.target);c&&n(f=>f?(f.set(c,Ch(c)),new Map(f)):null)},[]);return z.useEffect(()=>{const u=r.current;if(i!==u){c(u);const f=i.map(h=>{const m=rf(h);return m?(m.addEventListener("scroll",l,{passive:!0}),[m,Ch(m)]):null}).filter(h=>h!=null);n(f.length?new Map(f):null),r.current=i}return()=>{c(i),c(u)};function c(f){f.forEach(h=>{const m=rf(h);m==null||m.removeEventListener("scroll",l)})}},[l,i]),z.useMemo(()=>i.length?e?Array.from(e.values()).reduce((u,c)=>Qi(u,c),Zn):l_(i):Zn,[i,e])}function ob(i,e){e===void 0&&(e=[]);const n=z.useRef(null);return z.useEffect(()=>{n.current=null},e),z.useEffect(()=>{const r=i!==Zn;r&&!n.current&&(n.current=i),!r&&n.current&&(n.current=null)},[i]),n.current?po(i,n.current):Zn}function yE(i){z.useEffect(()=>{if(!ko)return;const e=i.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},i.map(e=>{let{sensor:n}=e;return n}))}function bE(i,e){return z.useMemo(()=>i.reduce((n,r)=>{let{eventName:l,handler:u}=r;return n[l]=c=>{u(c,e)},n},{}),[i,e])}function f_(i){return z.useMemo(()=>i?HA(i):null,[i])}const cb=[];function vE(i,e){e===void 0&&(e=Il);const[n]=i,r=f_(n?Jt(n):null),[l,u]=z.useState(cb);function c(){u(()=>i.length?i.map(h=>i_(h)?r:new Kh(e(h),h)):cb)}const f=Jh({callback:c});return cr(()=>{f==null||f.disconnect(),c(),i.forEach(h=>f==null?void 0:f.observe(h))},[i]),l}function _E(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return Ll(e)?e:i}function wE(i){let{measure:e}=i;const[n,r]=z.useState(null),l=z.useCallback(m=>{for(const{target:g}of m)if(Ll(g)){r(y=>{const v=e(g);return y?{...y,width:v.width,height:v.height}:v});break}},[e]),u=Jh({callback:l}),c=z.useCallback(m=>{const g=_E(m);u==null||u.disconnect(),g&&(u==null||u.observe(g)),r(g?e(g):null)},[e,u]),[f,h]=Th(c);return z.useMemo(()=>({nodeRef:f,rect:n,setRef:h}),[n,f,h])}const AE=[{sensor:c_,options:{}},{sensor:o_,options:{}}],EE={current:{}},fo={draggable:{measure:nb},droppable:{measure:nb,strategy:bl.WhileDragging,frequency:Nh.Optimized},dragOverlay:{measure:Il}};class dl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const SE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new dl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:go},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:fo,measureDroppableContainers:go,windowRect:null,measuringScheduled:!1},TE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:go,draggableNodes:new Map,over:null,measureDroppableContainers:go},Wh=z.createContext(TE),OE=z.createContext(SE);function RE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new dl}}}function CE(i,e){switch(e.type){case Nt.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Nt.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case Nt.DragEnd:case Nt.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Nt.RegisterDroppable:{const{element:n}=e,{id:r}=n,l=new dl(i.droppable.containers);return l.set(r,n),{...i,droppable:{...i.droppable,containers:l}}}case Nt.SetDroppableDisabled:{const{id:n,key:r,disabled:l}=e,u=i.droppable.containers.get(n);if(!u||r!==u.key)return i;const c=new dl(i.droppable.containers);return c.set(n,{...u,disabled:l}),{...i,droppable:{...i.droppable,containers:c}}}case Nt.UnregisterDroppable:{const{id:n,key:r}=e,l=i.droppable.containers.get(n);if(!l||r!==l.key)return i;const u=new dl(i.droppable.containers);return u.delete(n),{...i,droppable:{...i.droppable,containers:u}}}default:return i}}function xE(i){let{disabled:e}=i;const{active:n,activatorEvent:r,draggableNodes:l}=z.useContext(Wh),u=Oh(r),c=Oh(n==null?void 0:n.id);return z.useEffect(()=>{if(!e&&!r&&u&&c!=null){if(!Wv(u)||document.activeElement===u.target)return;const f=l.get(c);if(!f)return;const{activatorNode:h,node:m}=f;if(!h.current&&!m.current)return;requestAnimationFrame(()=>{for(const g of[h.current,m.current]){if(!g)continue;const y=AA(g);if(y){y.focus();break}}})}},[r,e,l,c,u]),null}function NE(i,e){let{transform:n,...r}=e;return i!=null&&i.length?i.reduce((l,u)=>u({transform:l,...r}),n):n}function DE(i){return z.useMemo(()=>({draggable:{...fo.draggable,...i==null?void 0:i.draggable},droppable:{...fo.droppable,...i==null?void 0:i.droppable},dragOverlay:{...fo.dragOverlay,...i==null?void 0:i.dragOverlay}}),[i==null?void 0:i.draggable,i==null?void 0:i.droppable,i==null?void 0:i.dragOverlay])}function ME(i){let{activeNode:e,measure:n,initialRect:r,config:l=!0}=i;const u=z.useRef(!1),{x:c,y:f}=typeof l=="boolean"?{x:l,y:l}:l;cr(()=>{if(!c&&!f||!e){u.current=!1;return}if(u.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const g=n(m),y=t_(g,r);if(c||(y.x=0),f||(y.y=0),u.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const v=n_(m);v&&v.scrollBy({top:y.y,left:y.x})}},[e,c,f,r,n])}const h_=z.createContext({...Zn,scaleX:1,scaleY:1});var sr;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(sr||(sr={}));const jE=z.memo(function(e){var n,r,l,u;let{id:c,accessibility:f,autoScroll:h=!0,children:m,sensors:g=AE,collisionDetection:y=LA,measuring:v,modifiers:_,...A}=e;const E=z.useReducer(CE,void 0,RE),[O,x]=E,[k,M]=CA(),[ae,B]=z.useState(sr.Uninitialized),X=ae===sr.Initialized,{draggable:{active:ne,nodes:F,translate:re},droppable:{containers:he}}=O,Oe=ne!=null?F.get(ne):null,Ge=z.useRef({initial:null,translated:null}),$e=z.useMemo(()=>{var tt;return ne!=null?{id:ne,data:(tt=Oe==null?void 0:Oe.data)!=null?tt:EE,rect:Ge}:null},[ne,Oe]),te=z.useRef(null),[Q,L]=z.useState(null),[q,G]=z.useState(null),K=Qh(A,Object.values(A)),T=Yh("DndDescribedBy",c),U=z.useMemo(()=>he.getEnabled(),[he]),V=DE(v),{droppableRects:ee,measureDroppableContainers:W,measuringScheduled:ue}=cE(U,{dragging:X,dependencies:[re.x,re.y],config:V.droppable}),oe=uE(F,ne),Qe=z.useMemo(()=>q?Rh(q):null,[q]),xe=ri(),ze=dE(oe,V.draggable.measure);ME({activeNode:ne!=null?F.get(ne):null,config:xe.layoutShiftCompensation,initialRect:ze,measure:V.draggable.measure});const Ae=lb(oe,V.draggable.measure,ze),Ot=lb(oe?oe.parentElement:null),Wt=z.useRef({activatorEvent:null,active:null,activeNode:oe,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:he,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Dn=he.getNodeFor((n=Wt.current.over)==null?void 0:n.id),mn=wE({measure:V.dragOverlay.measure}),oa=(r=mn.nodeRef.current)!=null?r:oe,en=X?(l=mn.rect)!=null?l:Ae:null,ni=!!(mn.nodeRef.current&&mn.rect),br=mE(ni?null:Ae),vr=f_(oa?Jt(oa):null),pn=pE(X?Dn??oe:null),ja=vE(pn),ai=NE(_,{transform:{x:re.x-br.x,y:re.y-br.y,scaleX:1,scaleY:1},activatorEvent:q,active:$e,activeNodeRect:Ae,containerNodeRect:Ot,draggingNodeRect:en,over:Wt.current.over,overlayNodeRect:mn.rect,scrollableAncestors:pn,scrollableAncestorRects:ja,windowRect:vr}),Zl=Qe?Qi(Qe,re):null,tn=gE(pn),Zo=ob(tn),Vl=ob(tn,[Ae]),ca=Qi(ai,Zo),Mn=en?BA(en,ai):null,_r=$e&&Mn?y({active:$e,collisionRect:Mn,droppableRects:ee,droppableContainers:U,pointerCoordinates:Zl}):null,ss=jA(_r,"id"),[Kn,Ql]=z.useState(null),wr=ni?ai:Qi(ai,Vl),jt=UA(wr,(u=Kn==null?void 0:Kn.rect)!=null?u:null,Ae),ls=z.useRef(null),jn=z.useCallback((tt,nt)=>{let{sensor:ht,options:qt}=nt;if(te.current==null)return;const Gt=F.get(te.current);if(!Gt)return;const Rt=tt.nativeEvent,nn=new ht({active:te.current,activeNode:Gt,event:Rt,options:qt,context:Wt,onAbort(Ye){if(!F.get(Ye))return;const{onDragAbort:an}=K.current,gn={id:Ye};an==null||an(gn),k({type:"onDragAbort",event:gn})},onPending(Ye,Jn,an,gn){if(!F.get(Ye))return;const{onDragPending:La}=K.current,Wn={id:Ye,constraint:Jn,initialCoordinates:an,offset:gn};La==null||La(Wn),k({type:"onDragPending",event:Wn})},onStart(Ye){const Jn=te.current;if(Jn==null)return;const an=F.get(Jn);if(!an)return;const{onDragStart:gn}=K.current,ka={activatorEvent:Rt,active:{id:Jn,data:an.data,rect:Ge}};sl.unstable_batchedUpdates(()=>{gn==null||gn(ka),B(sr.Initializing),x({type:Nt.DragStart,initialCoordinates:Ye,active:Jn}),k({type:"onDragStart",event:ka}),L(ls.current),G(Rt)})},onMove(Ye){x({type:Nt.DragMove,coordinates:Ye})},onEnd:Xn(Nt.DragEnd),onCancel:Xn(Nt.DragCancel)});ls.current=nn;function Xn(Ye){return async function(){const{active:an,collisions:gn,over:ka,scrollAdjustedTranslate:La}=Wt.current;let Wn=null;if(an&&La){const{cancelDrop:Zt}=K.current;Wn={activatorEvent:Rt,active:an,collisions:gn,delta:La,over:ka},Ye===Nt.DragEnd&&typeof Zt=="function"&&await Promise.resolve(Zt(Wn))&&(Ye=Nt.DragCancel)}te.current=null,sl.unstable_batchedUpdates(()=>{x({type:Ye}),B(sr.Uninitialized),Ql(null),L(null),G(null),ls.current=null;const Zt=Ye===Nt.DragEnd?"onDragEnd":"onDragCancel";if(Wn){const rt=K.current[Zt];rt==null||rt(Wn),k({type:Zt,event:Wn})}})}}},[F]),kt=z.useCallback((tt,nt)=>(ht,qt)=>{const Gt=ht.nativeEvent,Rt=F.get(qt);if(te.current!==null||!Rt||Gt.dndKit||Gt.defaultPrevented)return;const nn={active:Rt};tt(ht,nt.options,nn)===!0&&(Gt.dndKit={capturedBy:nt.sensor},te.current=qt,jn(ht,nt))},[F,jn]),Yl=oE(g,kt);yE(g),cr(()=>{Ae&&ae===sr.Initializing&&B(sr.Initialized)},[Ae,ae]),z.useEffect(()=>{const{onDragMove:tt}=K.current,{active:nt,activatorEvent:ht,collisions:qt,over:Gt}=Wt.current;if(!nt||!ht)return;const Rt={active:nt,activatorEvent:ht,collisions:qt,delta:{x:ca.x,y:ca.y},over:Gt};sl.unstable_batchedUpdates(()=>{tt==null||tt(Rt),k({type:"onDragMove",event:Rt})})},[ca.x,ca.y]),z.useEffect(()=>{const{active:tt,activatorEvent:nt,collisions:ht,droppableContainers:qt,scrollAdjustedTranslate:Gt}=Wt.current;if(!tt||te.current==null||!nt||!Gt)return;const{onDragOver:Rt}=K.current,nn=qt.get(ss),Xn=nn&&nn.rect.current?{id:nn.id,rect:nn.rect.current,data:nn.data,disabled:nn.disabled}:null,Ye={active:tt,activatorEvent:nt,collisions:ht,delta:{x:Gt.x,y:Gt.y},over:Xn};sl.unstable_batchedUpdates(()=>{Ql(Xn),Rt==null||Rt(Ye),k({type:"onDragOver",event:Ye})})},[ss]),cr(()=>{Wt.current={activatorEvent:q,active:$e,activeNode:oe,collisionRect:Mn,collisions:_r,droppableRects:ee,draggableNodes:F,draggingNode:oa,draggingNodeRect:en,droppableContainers:he,over:Kn,scrollableAncestors:pn,scrollAdjustedTranslate:ca},Ge.current={initial:en,translated:Mn}},[$e,oe,_r,Mn,F,oa,en,ee,he,Kn,pn,ca]),iE({...xe,delta:re,draggingRect:Mn,pointerCoordinates:Zl,scrollableAncestors:pn,scrollableAncestorRects:ja});const Vo=z.useMemo(()=>({active:$e,activeNode:oe,activeNodeRect:Ae,activatorEvent:q,collisions:_r,containerNodeRect:Ot,dragOverlay:mn,draggableNodes:F,droppableContainers:he,droppableRects:ee,over:Kn,measureDroppableContainers:W,scrollableAncestors:pn,scrollableAncestorRects:ja,measuringConfiguration:V,measuringScheduled:ue,windowRect:vr}),[$e,oe,Ae,q,_r,Ot,mn,F,he,ee,Kn,W,pn,ja,V,ue,vr]),Qo=z.useMemo(()=>({activatorEvent:q,activators:Yl,active:$e,activeNodeRect:Ae,ariaDescribedById:{draggable:T},dispatch:x,draggableNodes:F,over:Kn,measureDroppableContainers:W}),[q,Yl,$e,Ae,x,T,F,Kn,W]);return I.createElement(e_.Provider,{value:M},I.createElement(Wh.Provider,{value:Qo},I.createElement(OE.Provider,{value:Vo},I.createElement(h_.Provider,{value:jt},m)),I.createElement(xE,{disabled:(f==null?void 0:f.restoreFocus)===!1})),I.createElement(DA,{...f,hiddenTextDescribedById:T}));function ri(){const tt=(Q==null?void 0:Q.autoScrollEnabled)===!1,nt=typeof h=="object"?h.enabled===!1:h===!1,ht=X&&!tt&&!nt;return typeof h=="object"?{...h,enabled:ht}:{enabled:ht}}}),kE=z.createContext(null),db="button",LE="Draggable";function UE(i){let{id:e,data:n,disabled:r=!1,attributes:l}=i;const u=Yh(LE),{activators:c,activatorEvent:f,active:h,activeNodeRect:m,ariaDescribedById:g,draggableNodes:y,over:v}=z.useContext(Wh),{role:_=db,roleDescription:A="draggable",tabIndex:E=0}=l??{},O=(h==null?void 0:h.id)===e,x=z.useContext(O?h_:kE),[k,M]=Th(),[ae,B]=Th(),X=bE(c,e),ne=Qh(n);cr(()=>(y.set(e,{id:e,key:u,node:k,activatorNode:ae,data:ne}),()=>{const re=y.get(e);re&&re.key===u&&y.delete(e)}),[y,e]);const F=z.useMemo(()=>({role:_,tabIndex:E,"aria-disabled":r,"aria-pressed":O&&_===db?!0:void 0,"aria-roledescription":A,"aria-describedby":g.draggable}),[r,_,E,O,A,g.draggable]);return{active:h,activatorEvent:f,activeNodeRect:m,attributes:F,isDragging:O,listeners:r?void 0:X,node:k,over:v,setNodeRef:M,setActivatorNodeRef:B,transform:x}}function IE(i){const[e,n]=z.useState(5),[r,l]=z.useState(i),[u,c]=z.useState({music:{x:100,y:100,zIndex:1,isOpen:!1},settings:{x:120,y:120,zIndex:2,isOpen:!1},equalizer:{x:140,y:140,zIndex:3,isOpen:!1},assistant:{x:160,y:160,zIndex:4,isOpen:!1},cmd:{x:160,y:160,zIndex:5,isOpen:!1},bgedit:{x:160,y:160,zIndex:6,isOpen:!1}}),f=v=>{c(_=>({..._,[v]:{..._[v],isOpen:!0,zIndex:e}})),n(_=>_+1)},h=v=>{c(_=>({..._,[v]:{..._[v],isOpen:!1}}))};return{windowStates:u,repoUrl:r,handleRepoChange:v=>{l(v),h("settings"),alert("You have set the url to "+v)},handleDragEnd:v=>{const{delta:_,active:A}=v,E=A.id;c(O=>{const x=O[E];return{...O,[E]:{...x,x:x.x+_.x,y:x.y+_.y}}})},bringToFront:v=>{c(_=>({..._,[v]:{..._[v],zIndex:e}})),n(_=>_+1)},openWindow:f,closeWindow:h}}const BE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASQAAABzCAMAAAAG248lAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHOUExURf///wAAAN/f34CAgMDAwLe3t42NjVhYWCkpKRQUFAICAg0NDRoaGkFBQXBwcKCgoLy8vP8AAAD/AIaGhigoKEdHR7+/v76+vn19fRAQECoqKq2trVlZWZ2dnbm5uXZ2dnNzc7Kysj4+PmxsbLW1tVdXVwQEBAgICJqamn9/fxcXF2ZmZqurqycnJ2hoaAcHB46Ojh4eHjIyMmdnZwsLC1RUVIWFhYyMjKenpz09PSAgIK+vry8vL729vUJCQpeXl7S0tJ+fn29vb6amphISEmFhYYKCggMDA5OTk1xcXDU1NWpqant7e0REREtLS6ysrHJycqioqKOjo0hISE5OThsbG6qqqra2ti0tLbOzs3l5eRYWFkVFRbi4uJiYmExMTFNTU4iIiJWVlQUFBQwMDKGhoZmZmSIiImRkZA4ODi4uLouLi1JSUrGxsX5+fhwcHKmpqZSUlFFRUXV1dbq6upKSkjQ0NIGBgV9fXx0dHSQkJAAA////ADk5OWlpaaSkpIqKihEREZaWlm5ubk9PTwoKCpCQkHh4eEZGRjw8PDg4ODExMQEBAUBAQImJiV1dXVBQUJGRkQ8PD3x8fK6urm1tbRMTE0pKSiMjI01NTca/zt4AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAecSURBVHhe7Zr9XxRFGMCbXBCO07si7iTxDD3BEHw5fOtQETXwBQHFNDPKDIoS0YQMLF/K1DJ7f/9vm3n22ZnZ3dn1wc7P3cp8f+DzzDPD8Nkvu7Mzs/OCJRYmwNgSgZVEwEoiYCUR0CS9aAmzQmAlxWMlEbCSCFhJBIySHIsPK4mAlUTASiJgJRGwkghYSQSsJAJWEgEriYCVRMBKImAlEXg2kqDDAFiVRKwkAlYSASuJgJVEoJKSoBsC2Dw5WEkErCQCVhKBGpFUV7+yoTElKpvSq1ZnspiuEciSoA3GYaBW8ZIAY87LAow98BcF2eZXMOmRasnksLIWqL6k/JpWTPl4NYP1Qda2rcOoghTWv4aRiapLat+AiSCpjXlsolPc1NG5GeOKkX+9i23B2ES1JXX3YNnAptDQVNi6jbFKS8pt38H/WA1LKpawaKTXPzDl1+wU2QpLyrgDYoUlBaIA4AfABAckAZjgQAe5XVgyk9oNrVzye9JutqKS9r7hdlrDkjZ3YimCch80A2TbSkqq24ed1q6k/QewwGlt6z/IU3UDbfrL7pBo5rJcJR0+ggXW0VuAHgWFNzHJaShicvlKGsSYpQahPyTXi2nGho5iLhmSFNA6EjTEwQQHDXEwwRE9HcOYHVf3kaBdzcBPYGr5SmrBmB2DjhXDmGfspJwFLHtJI9CxQg1W++owFSspNzp8Mt0Eta3pVWOn4hZ+p8d5R41n+mE+nyRJb52FniXn3sYK1nNelJuxpKOuqvAOzqAkret9z6/3d7jxbBvGbMeKCxhpqP+JTlUljWDM2LsT0HUUsZLWiVVFkPR7WCtQkrLvY8i52IWBxv+UBNeNcRjoAYB2GPswSBrDmJPeY1rOesRJ+sB7DP10aC9MKamo3ptsaHcyJF36EAuC1l5teh0gRlL/JJaDTPa7DThSUr0mtGcqGZKKDVhAGts+Mu9JRkvSZgtBDuyHFhxPUvljDATH1iZDkvaql5Snp8IPXrSkLVgy8MkUtOB4knSGjiZFUvFTLPnoOHA5cENFSuqTg/bO3m4ut25gpgMTjMlRySSpfOWZSgpEAPSwJKCDyBHFsMltnCfNYo5dvYYZ5zM57kxjxihpBmoqPE8CF6YIgB6WBHTAl2/wicREcJPbJGm/t/fbqUbp3HXMsRbM+CTtnCs685/fSNVDTTIkOYPq8Qgy45s8Ge+kfN/AFwsti00jcpDWls0bvKQmybvjRt3ZZkIkOZmbmAnT041tBOS129EhbCgHGCUptQdTSFIkOdlh4zclQVmONEuQJBsaJAW2G57d2g29+IAeFF8KMOZ8JcDYAzsDwl8nPW6pi6JJyp2alsoNksYw45EgSZy+24tY4Udd1ZMlZe+MlfQRLixpm76iEyRLEqfu7vjXWKnYIdcqsZJyoyvGQ9OesKSutZjxSJwkQd/w8cCcYBZrYiTl+8UWUZiwJHfjRSORkjjZb1p0T/I9HiWpcC9q3A9LkhmPCkuC68Y4DPQAQDsAExyQBGCCg79opP1bbMRJe89bhKQp026SS1iSNO6RYEn695L73hkSs6TInRJOWJKcg3vUvqSD3ZdnV7Ystu4753aiUTiOzdRHJaOka1cx6dF1sf6B17DkzdgTLEnucqg9DcUJrGOsGTMmSb6zBJ0bHt4RuweyYXjtljxJav9jGHvRUJVxkvY2Yo6x7+S2QU1ICkQA9ABggoMJDhriYILjOOvuYxhaLHDknRT7uMlNu9Ss2lmRfp8HSefl+a3gslMfk+SzaJIkP7d8r+3SPVeSnBkM9S0zRG0zyfmfQdL8I0z5LnEac8+HJLmnwdgP7dChh/Ziv+49R/LpVJLUJbr7jID6NECQNCFP2tWqJPVM8TnjdjWoZOfUMvXxXUw6akvaG8q1O0kt8bTPj4R5UlyVgixJgQ58QA9AoKgIS3IGH2NBkF59Z56/1Nv7fae41JiuJKmTXeFPwEV51UuUZHh5SKoqKfsjFiLRhvQrZcyxyZ/y2UzbRp7TPkmVd8872cyubVgUyOEsRpIaF3+eyI3OjahDYxpVlRSeMAc5oxZb6tlyEReszZMMNHq7vzGStC/tgtBeClBdSbFLL05J/8fKI18uj8TDGXt6V26xxUjSXh4C0+S/6pKc+jhL/ndevT6C4YhjuhWvbsRAbmvGSFIPMaDNwTTIkqANxmGgdkngLzqnoz+W/OI/j1O4hXkX98kI34o93fIImDcYx0gKPm/yzalTdUlO4R6c8w9x89fgN1z/bXPkMCQv/YZlZFNBjV6TA9AkVpJ+YoljWEbWgiSu6ffQ3dQxvjmoiPOHd3xf0IQbTUX5xZZzAz77HsIS2+V2EifJyW7VPx78iVkftSCJM/9goXTBXXf8tfj3w8NRJ7rOLvwjLqm1YUE7pNM+VxJTq86G24FThUQmhkvivGXn4r/NxhlArUiqbZ5CUiAyAbUBsMoDs4nASiJgJRGwkghYSQTIkhTQ2gTWP5ElNa4FrCQCVhIBK4mAlUTgKSQtP6wkAlYSASuJgJVEwEoiYCURsJIIWEkErCQCVhIBK4lAUBKULQasJAJWEgEriYCVRMCVBD8tsVhJBKwkAlYSASvpiTD2H3G1RveWuZGKAAAAAElFTkSuQmCC",PE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAACWBAMAAAAvaLvFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURQAAgICAgMDAwP///wAA/82czywAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFmSURBVGje7ZddcsIwDITd4gNUhQOAeoEWcwCY6v5naryV/5PhgTc5+2Q7/mBmZ6UobteuXa+L6JMXnWekDuFfei1todmoEK7MuvohYv4KgehD+S0jTVJvRCF85y3sW1DdvjPXT6ekmms7tfV0p6aiXMxMarHabp/Xl2GK6JjfOwAOsfeeROouPA2F4MSZhEXucQvnoGs+m4gaJfIg2rbPOoVrXOkcz+4zUiVCjZ7M8zYpdBvmS4zQUdsLvm6ATkV5EZ3nlxVO0IA1TOk13WfLIIVr3RyynMFIbFBz/XvZKgWNU5nIb84RHL6pueYpdQnnKVFaZKfWYV+hBiktmVJfSXWPQVO+NX9jkyrCoIoeo7MsxljfTrC+R61RBUdwkjRM+LlL7sJZVimnsSrZKkD3oK9Km9TqUdwWqkbtUiUp3Y3BOV/5apVqF42lo1crObRG+aGW1u1rQ2eVcr2jG7661a8AQ5Rzfxe/BDyHDpFeAAAAAElFTkSuQmCC",$E=({icons:i})=>{const[e,n]=z.useState(!1),r=()=>{n(l=>!l)};return I.createElement("div",{className:"TaskbarContainer"},e&&I.createElement("div",{className:"StartMenu"},I.createElement(qE,{icons:i})),I.createElement("div",{className:"Taskbar"},I.createElement(zE,{onClick:r}),I.createElement(HE,null)))},zE=({onClick:i})=>I.createElement("div",{className:"StartButton",onClick:i},I.createElement("img",{className:"TaskbarImg",src:BE,alt:"Start Button"})),HE=()=>{const[i,e]=z.useState(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}));return z.useEffect(()=>{const n=setInterval(()=>{const r=new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date);e(r)},6e4);return e(new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date)),()=>clearInterval(n)},[]),I.createElement("div",{className:"TaskbarClock"},I.createElement("p",null,i))},qE=({icons:i})=>I.createElement("div",{className:"StartMenu"},I.createElement("div",{className:"leftBar"},I.createElement("img",{className:"TaskbarImg",src:PE,alt:"image of button"})),I.createElement("div",{className:"StartMenuContent"},i.map(({id:e,name:n,icon:r,onClick:l})=>I.createElement(GE,{key:e,menuItemName:n,StartMenuIcon:r,onClick:l})))),GE=({menuItemName:i,StartMenuIcon:e,onClick:n})=>I.createElement("div",{className:"StartMenuItem",onClick:n}," ",I.createElement("img",{className:"StartMenuIcon",src:e,alt:i}),I.createElement("p",null,i)),ZE=({icons:i,bgColor:e})=>I.createElement("div",{className:"Desktop",style:{backgroundColor:e}},I.createElement("div",{className:"iconBox"},i.map(({id:n,icon:r,name:l,onClick:u})=>I.createElement(VE,{key:n,icon:r,iconName:l,onClick:u})))),VE=({icon:i,iconName:e,onClick:n})=>I.createElement("div",{className:"DesktopIcon",onClick:n},I.createElement("div",{className:"item"},I.createElement("img",{src:i,alt:e}),I.createElement("div",{className:"iconName"},I.createElement("p",null,e)))),QE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURf///wAAAN/f34CAgMDAwJsNYssAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABDSURBVEjH7cq5DQAgDANAngm8AhugrMD+M1FTQNIRS776SkgFSGIbDrPJFNeToqKiouKviJNimnjFFLu5WCKC8kdgAxXv7NbkSsdOAAAAAElFTkSuQmCC",YE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURf///wAAAN/f34CAgMDAwJsNYssAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABMSURBVEjHYyAKMAoKDhGFTEoEgLGx4VBS6OLiKIgVuIDAqMIBVuiCDhxHFY4qHFU4qnAoKhw+RTM+MJQUMhsTBENFoSCRYPArFBQEAP2asDHDoFEZAAAAAElFTkSuQmCC",FE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAVUExURf///wAAAN/f34CAgMDAwL+/vwEBAXn373wAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABmSURBVEjHYyAKMAoKDhGFTEoEgLGx4VBS6IIXDEWFgiCAkEZwh6JCFxdHkJwIKmvIKoT5FQxC4GJDViGah4e2wuETM8Moz4D9ivB/Ipw7FBXiBKMKB0ghszFBMFQUChIJBr9CQUEAjhbMKR8UtOYAAAAASUVORK5CYII=",$i=({id:i,title:e,width:n,height:r,children:l,onClose:u,position:c,zIndex:f,onFocus:h})=>{const{attributes:m,listeners:g,setNodeRef:y,transform:v}=UE({id:i}),_={width:n,height:r,zIndex:f,transform:v?`translate3d(${c.x+v.x}px, ${c.y+v.y}px, 0)`:`translate3d(${c.x}px, ${c.y}px, 0)`};return I.createElement("div",{ref:y,className:"Menu98",style:_,onMouseDown:h},I.createElement("div",{className:"titlebar",...g,...m},I.createElement("p",null,e),I.createElement("div",{className:"buttonContainer"},I.createElement("button",{className:"button",style:{backgroundImage:`url(${QE})`},onClick:()=>console.log("Minimize clicked"),onPointerDown:A=>A.stopPropagation()}),I.createElement("button",{className:"button",style:{backgroundImage:`url(${YE})`},onClick:()=>console.log("Maximize clicked"),onPointerDown:A=>A.stopPropagation()}),I.createElement("button",{className:"button",style:{backgroundImage:`url(${FE})`},onClick:()=>{console.log("Close clicked"),u()},onPointerDown:A=>A.stopPropagation()}))),I.createElement(KE,null,l))},KE=({children:i})=>I.createElement("div",{className:"Body"},i),qr={githubRepo:"",artistName:"",songName:"",albumCover:"",printTest:()=>{console.log("well")}},XE=({songName:i,songArtist:e,albumCover:n})=>I.createElement("div",{className:"song-info"},I.createElement("div",{className:"album-info"},I.createElement("img",{src:n,alt:"Album cover",className:"album-cover"}),I.createElement("div",{className:"song-details"},I.createElement("h2",{className:"song-name"},i),I.createElement("h3",{className:"song-artist"},e)))),JE="/assets/playbutton-CnN6bRpu.png",WE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAAAAAKVnuc8AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOwwAADsMBx2+oZAAABdBJREFUeF7t0TGKQwEMxND8+186jcodAllQXOjVZlzo9eSUghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMb8K8voHJj7j/itM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCE7meP87eCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTnled689/8oyFpbvgAAAABJRU5ErkJggg==",eS="/assets/forwardbutton-CgiMt0Yj.png",tS="/assets/rewindbutton-DPVTxBor.png",nS=({isPlaying:i,togglePlayPause:e,playNextSong:n,playPreviousSong:r})=>{const l={backgroundImage:`url(${WE})`},u={backgroundImage:`url(${JE})`},c={backgroundImage:`url(${eS})`},f={backgroundImage:`url(${tS})`};return I.createElement("div",{className:"buttonContainer"},I.createElement("div",{className:"Button",style:f,onClick:r}),I.createElement("div",{className:"Button",onClick:e,style:i?l:u}),I.createElement("div",{className:"Button",style:c,onClick:n}))},aS=i=>{const e=Math.floor(i/60),n=Math.floor(i%60);return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}`},rS=({sliderValue:i,currentTime:e,handleSliderChange:n})=>I.createElement("div",{className:"audioSlider"},I.createElement("p",null,aS(e)),I.createElement("input",{type:"range",min:"0",max:"100",value:i,className:"slider",onChange:r=>n(r.target.value)})),iS="/assets/defaultalbumcover-C1o72Qwd.png",sS=({repoUrl:i})=>{const[e,n]=z.useState(0),[r,l]=z.useState(0);qr.songName="Fuck with Dre Day",qr.artistName="Dr Dre",qr.albumCover=iS;const u=h=>{n(h)},c=()=>{console.log(qr)},f=()=>{};return I.createElement("div",{className:"MusicPlayer"},I.createElement(XE,{songName:qr.songName,songArtist:qr.artistName,albumCover:qr.albumCover}),I.createElement(nS,{playNextSong:c,playPreviousSong:f}),I.createElement(rS,{sliderValue:e,currentTime:r,handleSliderChange:u}))},lS=({onSubmitRepo:i})=>{const[e,n]=z.useState(""),r=l=>{l.preventDefault(),e&&i(e)};return I.createElement("div",{className:"Settings"},I.createElement("form",{onSubmit:r},I.createElement("input",{type:"text",placeholder:"Enter GitHub Repo URL",value:e,onChange:l=>n(l.target.value),className:"settings-input"}),I.createElement("button",{type:"submit",className:"settings-button"},"Submit")))};function uS(i){if(typeof i>"u")return null;try{return JSON.parse(i)}catch{}let e="";const n=[];let r=!1,l=!1;for(let u of i){if(r)u==='"'&&!l?r=!1:u===`
`&&!l?u="\\n":u==="\\"?l=!l:l=!1;else if(u==='"')r=!0,l=!1;else if(u==="{")n.push("}");else if(u==="[")n.push("]");else if(u==="}"||u==="]")if(n&&n[n.length-1]===u)n.pop();else return null;e+=u}r&&(e+='"');for(let u=n.length-1;u>=0;u-=1)e+=n[u];try{return JSON.parse(e)}catch{return null}}var uf,fb;function oS(){return fb||(fb=1,uf=function(i,e){if(typeof i!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,i.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),uf}var cS=oS();const dS=ti(cS);var no={exports:{}},hb;function fS(){if(hb)return no.exports;hb=1;const i=/[\p{Lu}]/u,e=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,l=/[_.\- ]+/,u=new RegExp("^"+l.source),c=new RegExp(l.source+r.source,"gu"),f=new RegExp("\\d+"+r.source,"gu"),h=(v,_,A)=>{let E=!1,O=!1,x=!1;for(let k=0;k<v.length;k++){const M=v[k];E&&i.test(M)?(v=v.slice(0,k)+"-"+v.slice(k),E=!1,x=O,O=!0,k++):O&&x&&e.test(M)?(v=v.slice(0,k-1)+"-"+v.slice(k-1),x=O,O=!1,E=!0):(E=_(M)===M&&A(M)!==M,x=O,O=A(M)===M&&_(M)!==M)}return v},m=(v,_)=>(n.lastIndex=0,v.replace(n,A=>_(A))),g=(v,_)=>(c.lastIndex=0,f.lastIndex=0,v.replace(c,(A,E)=>_(E)).replace(f,A=>_(A))),y=(v,_)=>{if(!(typeof v=="string"||Array.isArray(v)))throw new TypeError("Expected the input to be `string | string[]`");if(_={pascalCase:!1,preserveConsecutiveUppercase:!1,..._},Array.isArray(v)?v=v.map(x=>x.trim()).filter(x=>x.length).join("-"):v=v.trim(),v.length===0)return"";const A=_.locale===!1?x=>x.toLowerCase():x=>x.toLocaleLowerCase(_.locale),E=_.locale===!1?x=>x.toUpperCase():x=>x.toLocaleUpperCase(_.locale);return v.length===1?_.pascalCase?E(v):A(v):(v!==A(v)&&(v=h(v,A,E)),v=v.replace(u,""),_.preserveConsecutiveUppercase?v=m(v,A):v=A(v),_.pascalCase&&(v=E(v.charAt(0))+v.slice(1)),g(v,E))};return no.exports=y,no.exports.default=y,no.exports}fS();function hS(i,e){return(e==null?void 0:e[i])||dS(i)}function mS(i,e,n){const r={};for(const l in i)Object.hasOwn(i,l)&&(r[e(l,n)]=i[l]);return r}function mb(i){return Array.isArray(i)?[...i]:{...i}}function pS(i,e){const n=mb(i);for(const[r,l]of Object.entries(e)){const[u,...c]=r.split(".").reverse();let f=n;for(const h of c.reverse()){if(f[h]===void 0)break;f[h]=mb(f[h]),f=f[h]}f[u]!==void 0&&(f[u]={lc:1,type:"secret",id:[l]})}return n}function m_(i){const e=Object.getPrototypeOf(i);return typeof i.lc_name=="function"&&(typeof e.lc_name!="function"||i.lc_name()!==e.lc_name())?i.lc_name():i.name}class dr{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,m_(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var l;return(l=this.lc_serializable_keys)==null?void 0:l.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof dr||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((l,u)=>(l[u]=u in this?this[u]:this.lc_kwargs[u],l),{});for(let l=Object.getPrototypeOf(this);l;l=Object.getPrototypeOf(l))Object.assign(e,Reflect.get(l,"lc_aliases",this)),Object.assign(n,Reflect.get(l,"lc_secrets",this)),Object.assign(r,Reflect.get(l,"lc_attributes",this));return Object.keys(n).forEach(l=>{let u=this,c=r;const[f,...h]=l.split(".").reverse();for(const m of h.reverse()){if(!(m in u)||u[m]===void 0)return;(!(m in c)||c[m]===void 0)&&(typeof u[m]=="object"&&u[m]!=null?c[m]={}:Array.isArray(u[m])&&(c[m]=[])),u=u[m],c=c[m]}f in u&&u[f]!==void 0&&(c[f]=c[f]||u[f])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:mS(Object.keys(n).length?pS(r,n):r,hS,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function gS(i,e){return typeof i=="string"?i===""?e:typeof e=="string"?i+e:[{type:"text",text:i},...e]:Array.isArray(e)?em(i,e)??[...i,...e]:e===""?i:[...i,{type:"text",text:e}]}function yS(i,e){function n(r,l){if(typeof r!="object"||r===null||r===void 0)return r;if(l>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(c=>n(c,l+1));const u={};for(const c of Object.keys(r))u[c]=n(r[c],l+1);return u}return JSON.stringify(n(i,0),null,2)}class Bl extends dr{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=yS(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function bo(i,e){const n={...i};for(const[r,l]of Object.entries(e))if(n[r]==null)n[r]=l;else{if(l==null)continue;if(typeof n[r]!=typeof l||Array.isArray(n[r])!==Array.isArray(l))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;n[r]+=l}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=bo(n[r],l);else if(Array.isArray(n[r]))n[r]=em(n[r],l);else{if(n[r]===l)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function em(i,e){if(!(i===void 0&&e===void 0)){if(i===void 0||e===void 0)return i||e;{const n=[...i];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const l=n.findIndex(u=>u.index===r.index);l!==-1?n[l]=bo(n[l],r):n.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}class bS extends Bl{}function vS(i){return typeof i.role=="string"}function _S(i){return typeof(i==null?void 0:i._getType)=="function"}class wS extends Bl{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function AS(i){const e=[],n=[];for(const r of i)if(r.function){const l=r.function.name;try{const u=JSON.parse(r.function.arguments),c={name:l||"",args:u||{},id:r.id};e.push(c)}catch{n.push({name:l,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class Fi extends Bl{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var l;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{r=e;const u=(l=r.additional_kwargs)==null?void 0:l.tool_calls,c=r.tool_calls;u!=null&&u.length>0&&(c===void 0||c.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(u!=null&&c===void 0){const[f,h]=AS(u);r.tool_calls=f??[],r.invalid_tool_calls=h??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}class Lo extends bS{constructor(e){let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],l=[];for(const u of e.tool_call_chunks){let c={};try{if(c=uS(u.args||"{}"),c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");r.push({name:u.name??"",args:c,id:u.id,type:"tool_call"})}catch{l.push({name:u.name,args:u.args,id:u.id,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:r,invalid_tool_calls:l,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,l,u,c,f,h,m,g,y,v,_,A,E,O,x,k,M,ae,B,X,ne,F,re,he,Oe,Ge,$e,te,Q,L,q,G,K,T,U,V,ee,W,ue,oe;const n={content:gS(this.content,e.content),additional_kwargs:bo(this.additional_kwargs,e.additional_kwargs),response_metadata:bo(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Qe=em(this.tool_call_chunks,e.tool_call_chunks);Qe!==void 0&&Qe.length>0&&(n.tool_call_chunks=Qe)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Qe={...(((l=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:l.audio)!==void 0||((c=(u=e.usage_metadata)==null?void 0:u.input_token_details)==null?void 0:c.audio)!==void 0)&&{audio:(((h=(f=this.usage_metadata)==null?void 0:f.input_token_details)==null?void 0:h.audio)??0)+(((g=(m=e.usage_metadata)==null?void 0:m.input_token_details)==null?void 0:g.audio)??0)},...(((v=(y=this.usage_metadata)==null?void 0:y.input_token_details)==null?void 0:v.cache_read)!==void 0||((A=(_=e.usage_metadata)==null?void 0:_.input_token_details)==null?void 0:A.cache_read)!==void 0)&&{cache_read:(((O=(E=this.usage_metadata)==null?void 0:E.input_token_details)==null?void 0:O.cache_read)??0)+(((k=(x=e.usage_metadata)==null?void 0:x.input_token_details)==null?void 0:k.cache_read)??0)},...(((ae=(M=this.usage_metadata)==null?void 0:M.input_token_details)==null?void 0:ae.cache_creation)!==void 0||((X=(B=e.usage_metadata)==null?void 0:B.input_token_details)==null?void 0:X.cache_creation)!==void 0)&&{cache_creation:(((F=(ne=this.usage_metadata)==null?void 0:ne.input_token_details)==null?void 0:F.cache_creation)??0)+(((he=(re=e.usage_metadata)==null?void 0:re.input_token_details)==null?void 0:he.cache_creation)??0)}},xe={...(((Ge=(Oe=this.usage_metadata)==null?void 0:Oe.output_token_details)==null?void 0:Ge.audio)!==void 0||((te=($e=e.usage_metadata)==null?void 0:$e.output_token_details)==null?void 0:te.audio)!==void 0)&&{audio:(((L=(Q=this.usage_metadata)==null?void 0:Q.output_token_details)==null?void 0:L.audio)??0)+(((G=(q=e.usage_metadata)==null?void 0:q.output_token_details)==null?void 0:G.audio)??0)},...(((T=(K=this.usage_metadata)==null?void 0:K.output_token_details)==null?void 0:T.reasoning)!==void 0||((V=(U=e.usage_metadata)==null?void 0:U.output_token_details)==null?void 0:V.reasoning)!==void 0)&&{reasoning:(((W=(ee=this.usage_metadata)==null?void 0:ee.output_token_details)==null?void 0:W.reasoning)??0)+(((oe=(ue=e.usage_metadata)==null?void 0:ue.output_token_details)==null?void 0:oe.reasoning)??0)}},ze=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Ae=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Ot={input_tokens:ze.input_tokens+Ae.input_tokens,output_tokens:ze.output_tokens+Ae.output_tokens,total_tokens:ze.total_tokens+Ae.total_tokens,...Object.keys(Qe).length>0&&{input_token_details:Qe},...Object.keys(xe).length>0&&{output_token_details:xe}};n.usage_metadata=Ot}return new Lo(n)}}class Pl extends Bl{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class pb extends Bl{static lc_name(){return"SystemMessage"}_getType(){return"system"}}function ES(i,e){return i.lc_error_code=e,i.message=`${i.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,i}function p_(i){return!!(i&&typeof i=="object"&&"type"in i&&i.type==="tool_call")}class SS extends Error{constructor(e,n){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}function TS(i){return p_(i)?i:typeof i.id=="string"&&i.type==="function"&&typeof i.function=="object"&&i.function!==null&&"arguments"in i.function&&typeof i.function.arguments=="string"&&"name"in i.function&&typeof i.function.name=="string"?{id:i.id,args:JSON.parse(i.function.arguments),name:i.function.name,type:"tool_call"}:i}function OS(i){return typeof i=="object"&&i!=null&&i.lc===1&&Array.isArray(i.id)&&i.kwargs!=null&&typeof i.kwargs=="object"}function of(i){let e,n;if(OS(i)){const r=i.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=i.kwargs}else{const{type:r,...l}=i;e=r,n=l}if(e==="human"||e==="user")return new Pl(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...l}=n;if(!Array.isArray(r))return new Fi(n);const u=r.map(TS);return new Fi({...l,tool_calls:u})}else{if(e==="system")return new pb(n);if(e==="developer")return new pb({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new wS({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});throw ES(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(i,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function RS(i){if(typeof i=="string")return new Pl(i);if(_S(i))return i;if(Array.isArray(i)){const[e,n]=i;return of({type:e,content:n})}else if(vS(i)){const{role:e,...n}=i;return of({...n,type:e})}else return of(i)}function tm(i,e="Human",n="AI"){const r=[];for(const l of i){let u;if(l._getType()==="human")u=e;else if(l._getType()==="ai")u=n;else if(l._getType()==="system")u="System";else if(l._getType()==="function")u="Function";else if(l._getType()==="tool")u="Tool";else if(l._getType()==="generic")u=l.role;else throw new Error(`Got unsupported message type: ${l._getType()}`);const c=l.name?`${l.name}, `:"",f=typeof l.content=="string"?l.content:JSON.stringify(l.content,null,2);r.push(`${u}: ${c}${f}`)}return r.join(`
`)}var Me;(function(i){i.assertEqual=l=>l;function e(l){}i.assertIs=e;function n(l){throw new Error}i.assertNever=n,i.arrayToEnum=l=>{const u={};for(const c of l)u[c]=c;return u},i.getValidEnumValues=l=>{const u=i.objectKeys(l).filter(f=>typeof l[l[f]]!="number"),c={};for(const f of u)c[f]=l[f];return i.objectValues(c)},i.objectValues=l=>i.objectKeys(l).map(function(u){return l[u]}),i.objectKeys=typeof Object.keys=="function"?l=>Object.keys(l):l=>{const u=[];for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&u.push(c);return u},i.find=(l,u)=>{for(const c of l)if(u(c))return c},i.isInteger=typeof Number.isInteger=="function"?l=>Number.isInteger(l):l=>typeof l=="number"&&isFinite(l)&&Math.floor(l)===l;function r(l,u=" | "){return l.map(c=>typeof c=="string"?`'${c}'`:c).join(u)}i.joinValues=r,i.jsonStringifyReplacer=(l,u)=>typeof u=="bigint"?u.toString():u})(Me||(Me={}));var Dh;(function(i){i.mergeShapes=(e,n)=>({...e,...n})})(Dh||(Dh={}));const se=Me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Na=i=>{switch(typeof i){case"undefined":return se.undefined;case"string":return se.string;case"number":return isNaN(i)?se.nan:se.number;case"boolean":return se.boolean;case"function":return se.function;case"bigint":return se.bigint;case"symbol":return se.symbol;case"object":return Array.isArray(i)?se.array:i===null?se.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?se.promise:typeof Map<"u"&&i instanceof Map?se.map:typeof Set<"u"&&i instanceof Set?se.set:typeof Date<"u"&&i instanceof Date?se.date:se.object;default:return se.unknown}},Y=Me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),CS=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class fn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(u){return u.message},r={_errors:[]},l=u=>{for(const c of u.issues)if(c.code==="invalid_union")c.unionErrors.map(l);else if(c.code==="invalid_return_type")l(c.returnTypeError);else if(c.code==="invalid_arguments")l(c.argumentsError);else if(c.path.length===0)r._errors.push(n(c));else{let f=r,h=0;for(;h<c.path.length;){const m=c.path[h];h===c.path.length-1?(f[m]=f[m]||{_errors:[]},f[m]._errors.push(n(c))):f[m]=f[m]||{_errors:[]},f=f[m],h++}}};return l(this),r}static assert(e){if(!(e instanceof fn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const l of this.issues)l.path.length>0?(n[l.path[0]]=n[l.path[0]]||[],n[l.path[0]].push(e(l))):r.push(e(l));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}fn.create=i=>new fn(i);const Ki=(i,e)=>{let n;switch(i.code){case Y.invalid_type:i.received===se.undefined?n="Required":n=`Expected ${i.expected}, received ${i.received}`;break;case Y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(i.expected,Me.jsonStringifyReplacer)}`;break;case Y.unrecognized_keys:n=`Unrecognized key(s) in object: ${Me.joinValues(i.keys,", ")}`;break;case Y.invalid_union:n="Invalid input";break;case Y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Me.joinValues(i.options)}`;break;case Y.invalid_enum_value:n=`Invalid enum value. Expected ${Me.joinValues(i.options)}, received '${i.received}'`;break;case Y.invalid_arguments:n="Invalid function arguments";break;case Y.invalid_return_type:n="Invalid function return type";break;case Y.invalid_date:n="Invalid date";break;case Y.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(n=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?n=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?n=`Invalid input: must end with "${i.validation.endsWith}"`:Me.assertNever(i.validation):i.validation!=="regex"?n=`Invalid ${i.validation}`:n="Invalid";break;case Y.too_small:i.type==="array"?n=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?n=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?n=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?n=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:n="Invalid input";break;case Y.too_big:i.type==="array"?n=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?n=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?n=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?n=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?n=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:n="Invalid input";break;case Y.custom:n="Invalid input";break;case Y.invalid_intersection_types:n="Intersection results could not be merged";break;case Y.not_multiple_of:n=`Number must be a multiple of ${i.multipleOf}`;break;case Y.not_finite:n="Number must be finite";break;default:n=e.defaultError,Me.assertNever(i)}return{message:n}};let g_=Ki;function xS(i){g_=i}function vo(){return g_}const _o=i=>{const{data:e,path:n,errorMaps:r,issueData:l}=i,u=[...n,...l.path||[]],c={...l,path:u};if(l.message!==void 0)return{...l,path:u,message:l.message};let f="";const h=r.filter(m=>!!m).slice().reverse();for(const m of h)f=m(c,{data:e,defaultError:f}).message;return{...l,path:u,message:f}},NS=[];function ie(i,e){const n=vo(),r=_o({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,n,n===Ki?void 0:Ki].filter(l=>!!l)});i.common.issues.push(r)}class Mt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const l of n){if(l.status==="aborted")return ge;l.status==="dirty"&&e.dirty(),r.push(l.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const l of n){const u=await l.key,c=await l.value;r.push({key:u,value:c})}return Mt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const l of n){const{key:u,value:c}=l;if(u.status==="aborted"||c.status==="aborted")return ge;u.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),u.value!=="__proto__"&&(typeof c.value<"u"||l.alwaysSet)&&(r[u.value]=c.value)}return{status:e.value,value:r}}}const ge=Object.freeze({status:"aborted"}),qi=i=>({status:"dirty",value:i}),zt=i=>({status:"valid",value:i}),Mh=i=>i.status==="aborted",jh=i=>i.status==="dirty",Kr=i=>i.status==="valid",vl=i=>typeof Promise<"u"&&i instanceof Promise;function wo(i,e,n,r){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(i)}function y_(i,e,n,r,l){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,n),n}var ce;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ce||(ce={}));var ll,ul;class sa{constructor(e,n,r,l){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=l}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const gb=(i,e)=>{if(Kr(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new fn(i.common.issues);return this._error=n,this._error}}};function ve(i){if(!i)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:l}=i;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:l}:{errorMap:(c,f)=>{var h,m;const{message:g}=i;return c.code==="invalid_enum_value"?{message:g??f.defaultError}:typeof f.data>"u"?{message:(h=g??r)!==null&&h!==void 0?h:f.defaultError}:c.code!=="invalid_type"?{message:f.defaultError}:{message:(m=g??n)!==null&&m!==void 0?m:f.defaultError}},description:l}}class Se{get description(){return this._def.description}_getType(e){return Na(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Na(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Mt,ctx:{common:e.parent.common,data:e.data,parsedType:Na(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(vl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const l={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Na(e)},u=this._parseSync({data:e,path:l.path,parent:l});return gb(l,u)}"~validate"(e){var n,r;const l={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Na(e)};if(!this["~standard"].async)try{const u=this._parseSync({data:e,path:[],parent:l});return Kr(u)?{value:u.value}:{issues:l.common.issues}}catch(u){!((r=(n=u==null?void 0:u.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),l.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:l}).then(u=>Kr(u)?{value:u.value}:{issues:l.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Na(e)},l=this._parse({data:e,path:r.path,parent:r}),u=await(vl(l)?l:Promise.resolve(l));return gb(r,u)}refine(e,n){const r=l=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(l):n;return this._refinement((l,u)=>{const c=e(l),f=()=>u.addIssue({code:Y.custom,...r(l)});return typeof Promise<"u"&&c instanceof Promise?c.then(h=>h?!0:(f(),!1)):c?!0:(f(),!1)})}refinement(e,n){return this._refinement((r,l)=>e(r)?!0:(l.addIssue(typeof n=="function"?n(r,l):n),!1))}_refinement(e){return new Vn({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return qn.create(this,this._def)}nullable(){return pr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hn.create(this)}promise(){return Ji.create(this,this._def)}or(e){return El.create([this,e],this._def)}and(e){return Sl.create(this,e,this._def)}transform(e){return new Vn({...ve(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new xl({...ve(this._def),innerType:this,defaultValue:n,typeName:J.ZodDefault})}brand(){return new nm({typeName:J.ZodBranded,type:this,...ve(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Nl({...ve(this._def),innerType:this,catchValue:n,typeName:J.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return $l.create(this,e)}readonly(){return Dl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const DS=/^c[^\s-]{8,}$/i,MS=/^[0-9a-z]+$/,jS=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,LS=/^[a-z0-9_-]{21}$/i,US=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,IS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,BS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,PS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let cf;const $S=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,HS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ZS=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,b_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",VS=new RegExp(`^${b_}$`);function v_(i){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`),e}function QS(i){return new RegExp(`^${v_(i)}$`)}function __(i){let e=`${b_}T${v_(i)}`;const n=[];return n.push(i.local?"Z?":"Z"),i.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function YS(i,e){return!!((e==="v4"||!e)&&$S.test(i)||(e==="v6"||!e)&&HS.test(i))}function FS(i,e){if(!US.test(i))return!1;try{const[n]=i.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),l=JSON.parse(atob(r));return!(typeof l!="object"||l===null||!l.typ||!l.alg||e&&l.alg!==e)}catch{return!1}}function KS(i,e){return!!((e==="v4"||!e)&&zS.test(i)||(e==="v6"||!e)&&qS.test(i))}class zn extends Se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==se.string){const u=this._getOrReturnCtx(e);return ie(u,{code:Y.invalid_type,expected:se.string,received:u.parsedType}),ge}const r=new Mt;let l;for(const u of this._def.checks)if(u.kind==="min")e.data.length<u.value&&(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),r.dirty());else if(u.kind==="max")e.data.length>u.value&&(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),r.dirty());else if(u.kind==="length"){const c=e.data.length>u.value,f=e.data.length<u.value;(c||f)&&(l=this._getOrReturnCtx(e,l),c?ie(l,{code:Y.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):f&&ie(l,{code:Y.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),r.dirty())}else if(u.kind==="email")BS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"email",code:Y.invalid_string,message:u.message}),r.dirty());else if(u.kind==="emoji")cf||(cf=new RegExp(PS,"u")),cf.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"emoji",code:Y.invalid_string,message:u.message}),r.dirty());else if(u.kind==="uuid")kS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"uuid",code:Y.invalid_string,message:u.message}),r.dirty());else if(u.kind==="nanoid")LS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"nanoid",code:Y.invalid_string,message:u.message}),r.dirty());else if(u.kind==="cuid")DS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"cuid",code:Y.invalid_string,message:u.message}),r.dirty());else if(u.kind==="cuid2")MS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"cuid2",code:Y.invalid_string,message:u.message}),r.dirty());else if(u.kind==="ulid")jS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"ulid",code:Y.invalid_string,message:u.message}),r.dirty());else if(u.kind==="url")try{new URL(e.data)}catch{l=this._getOrReturnCtx(e,l),ie(l,{validation:"url",code:Y.invalid_string,message:u.message}),r.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"regex",code:Y.invalid_string,message:u.message}),r.dirty())):u.kind==="trim"?e.data=e.data.trim():u.kind==="includes"?e.data.includes(u.value,u.position)||(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),r.dirty()):u.kind==="toLowerCase"?e.data=e.data.toLowerCase():u.kind==="toUpperCase"?e.data=e.data.toUpperCase():u.kind==="startsWith"?e.data.startsWith(u.value)||(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.invalid_string,validation:{startsWith:u.value},message:u.message}),r.dirty()):u.kind==="endsWith"?e.data.endsWith(u.value)||(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.invalid_string,validation:{endsWith:u.value},message:u.message}),r.dirty()):u.kind==="datetime"?__(u).test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.invalid_string,validation:"datetime",message:u.message}),r.dirty()):u.kind==="date"?VS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.invalid_string,validation:"date",message:u.message}),r.dirty()):u.kind==="time"?QS(u).test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.invalid_string,validation:"time",message:u.message}),r.dirty()):u.kind==="duration"?IS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"duration",code:Y.invalid_string,message:u.message}),r.dirty()):u.kind==="ip"?YS(e.data,u.version)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"ip",code:Y.invalid_string,message:u.message}),r.dirty()):u.kind==="jwt"?FS(e.data,u.alg)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"jwt",code:Y.invalid_string,message:u.message}),r.dirty()):u.kind==="cidr"?KS(e.data,u.version)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"cidr",code:Y.invalid_string,message:u.message}),r.dirty()):u.kind==="base64"?GS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"base64",code:Y.invalid_string,message:u.message}),r.dirty()):u.kind==="base64url"?ZS.test(e.data)||(l=this._getOrReturnCtx(e,l),ie(l,{validation:"base64url",code:Y.invalid_string,message:u.message}),r.dirty()):Me.assertNever(u);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(l=>e.test(l),{validation:n,code:Y.invalid_string,...ce.errToObj(r)})}_addCheck(e){return new zn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ce.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ce.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ce.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ce.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ce.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ce.errToObj(n)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new zn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zn.create=i=>{var e;return new zn({checks:[],typeName:J.ZodString,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...ve(i)})};function XS(i,e){const n=(i.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,l=n>r?n:r,u=parseInt(i.toFixed(l).replace(".","")),c=parseInt(e.toFixed(l).replace(".",""));return u%c/Math.pow(10,l)}class fr extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==se.number){const u=this._getOrReturnCtx(e);return ie(u,{code:Y.invalid_type,expected:se.number,received:u.parsedType}),ge}let r;const l=new Mt;for(const u of this._def.checks)u.kind==="int"?Me.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:Y.invalid_type,expected:"integer",received:"float",message:u.message}),l.dirty()):u.kind==="min"?(u.inclusive?e.data<u.value:e.data<=u.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:Y.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),l.dirty()):u.kind==="max"?(u.inclusive?e.data>u.value:e.data>=u.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:Y.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),l.dirty()):u.kind==="multipleOf"?XS(e.data,u.value)!==0&&(r=this._getOrReturnCtx(e,r),ie(r,{code:Y.not_multiple_of,multipleOf:u.value,message:u.message}),l.dirty()):u.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:Y.not_finite,message:u.message}),l.dirty()):Me.assertNever(u);return{status:l.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ce.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ce.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ce.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ce.toString(n))}setLimit(e,n,r,l){return new fr({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ce.toString(l)}]})}_addCheck(e){return new fr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Me.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}fr.create=i=>new fr({checks:[],typeName:J.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...ve(i)});class hr extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==se.bigint)return this._getInvalidInput(e);let r;const l=new Mt;for(const u of this._def.checks)u.kind==="min"?(u.inclusive?e.data<u.value:e.data<=u.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:Y.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),l.dirty()):u.kind==="max"?(u.inclusive?e.data>u.value:e.data>=u.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:Y.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),l.dirty()):u.kind==="multipleOf"?e.data%u.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:Y.not_multiple_of,multipleOf:u.value,message:u.message}),l.dirty()):Me.assertNever(u);return{status:l.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ie(n,{code:Y.invalid_type,expected:se.bigint,received:n.parsedType}),ge}gte(e,n){return this.setLimit("min",e,!0,ce.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ce.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ce.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ce.toString(n))}setLimit(e,n,r,l){return new hr({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ce.toString(l)}]})}_addCheck(e){return new hr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hr.create=i=>{var e;return new hr({checks:[],typeName:J.ZodBigInt,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...ve(i)})};class _l extends Se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==se.boolean){const r=this._getOrReturnCtx(e);return ie(r,{code:Y.invalid_type,expected:se.boolean,received:r.parsedType}),ge}return zt(e.data)}}_l.create=i=>new _l({typeName:J.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...ve(i)});class Xr extends Se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==se.date){const u=this._getOrReturnCtx(e);return ie(u,{code:Y.invalid_type,expected:se.date,received:u.parsedType}),ge}if(isNaN(e.data.getTime())){const u=this._getOrReturnCtx(e);return ie(u,{code:Y.invalid_date}),ge}const r=new Mt;let l;for(const u of this._def.checks)u.kind==="min"?e.data.getTime()<u.value&&(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),r.dirty()):u.kind==="max"?e.data.getTime()>u.value&&(l=this._getOrReturnCtx(e,l),ie(l,{code:Y.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),r.dirty()):Me.assertNever(u);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xr({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Xr.create=i=>new Xr({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:J.ZodDate,...ve(i)});class Ao extends Se{_parse(e){if(this._getType(e)!==se.symbol){const r=this._getOrReturnCtx(e);return ie(r,{code:Y.invalid_type,expected:se.symbol,received:r.parsedType}),ge}return zt(e.data)}}Ao.create=i=>new Ao({typeName:J.ZodSymbol,...ve(i)});class wl extends Se{_parse(e){if(this._getType(e)!==se.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:Y.invalid_type,expected:se.undefined,received:r.parsedType}),ge}return zt(e.data)}}wl.create=i=>new wl({typeName:J.ZodUndefined,...ve(i)});class Al extends Se{_parse(e){if(this._getType(e)!==se.null){const r=this._getOrReturnCtx(e);return ie(r,{code:Y.invalid_type,expected:se.null,received:r.parsedType}),ge}return zt(e.data)}}Al.create=i=>new Al({typeName:J.ZodNull,...ve(i)});class Xi extends Se{constructor(){super(...arguments),this._any=!0}_parse(e){return zt(e.data)}}Xi.create=i=>new Xi({typeName:J.ZodAny,...ve(i)});class Qr extends Se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return zt(e.data)}}Qr.create=i=>new Qr({typeName:J.ZodUnknown,...ve(i)});class Ma extends Se{_parse(e){const n=this._getOrReturnCtx(e);return ie(n,{code:Y.invalid_type,expected:se.never,received:n.parsedType}),ge}}Ma.create=i=>new Ma({typeName:J.ZodNever,...ve(i)});class Eo extends Se{_parse(e){if(this._getType(e)!==se.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:Y.invalid_type,expected:se.void,received:r.parsedType}),ge}return zt(e.data)}}Eo.create=i=>new Eo({typeName:J.ZodVoid,...ve(i)});class Hn extends Se{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),l=this._def;if(n.parsedType!==se.array)return ie(n,{code:Y.invalid_type,expected:se.array,received:n.parsedType}),ge;if(l.exactLength!==null){const c=n.data.length>l.exactLength.value,f=n.data.length<l.exactLength.value;(c||f)&&(ie(n,{code:c?Y.too_big:Y.too_small,minimum:f?l.exactLength.value:void 0,maximum:c?l.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:l.exactLength.message}),r.dirty())}if(l.minLength!==null&&n.data.length<l.minLength.value&&(ie(n,{code:Y.too_small,minimum:l.minLength.value,type:"array",inclusive:!0,exact:!1,message:l.minLength.message}),r.dirty()),l.maxLength!==null&&n.data.length>l.maxLength.value&&(ie(n,{code:Y.too_big,maximum:l.maxLength.value,type:"array",inclusive:!0,exact:!1,message:l.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((c,f)=>l.type._parseAsync(new sa(n,c,n.path,f)))).then(c=>Mt.mergeArray(r,c));const u=[...n.data].map((c,f)=>l.type._parseSync(new sa(n,c,n.path,f)));return Mt.mergeArray(r,u)}get element(){return this._def.type}min(e,n){return new Hn({...this._def,minLength:{value:e,message:ce.toString(n)}})}max(e,n){return new Hn({...this._def,maxLength:{value:e,message:ce.toString(n)}})}length(e,n){return new Hn({...this._def,exactLength:{value:e,message:ce.toString(n)}})}nonempty(e){return this.min(1,e)}}Hn.create=(i,e)=>new Hn({type:i,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...ve(e)});function Hi(i){if(i instanceof Xe){const e={};for(const n in i.shape){const r=i.shape[n];e[n]=qn.create(Hi(r))}return new Xe({...i._def,shape:()=>e})}else return i instanceof Hn?new Hn({...i._def,type:Hi(i.element)}):i instanceof qn?qn.create(Hi(i.unwrap())):i instanceof pr?pr.create(Hi(i.unwrap())):i instanceof la?la.create(i.items.map(e=>Hi(e))):i}class Xe extends Se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Me.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==se.object){const m=this._getOrReturnCtx(e);return ie(m,{code:Y.invalid_type,expected:se.object,received:m.parsedType}),ge}const{status:r,ctx:l}=this._processInputParams(e),{shape:u,keys:c}=this._getCached(),f=[];if(!(this._def.catchall instanceof Ma&&this._def.unknownKeys==="strip"))for(const m in l.data)c.includes(m)||f.push(m);const h=[];for(const m of c){const g=u[m],y=l.data[m];h.push({key:{status:"valid",value:m},value:g._parse(new sa(l,y,l.path,m)),alwaysSet:m in l.data})}if(this._def.catchall instanceof Ma){const m=this._def.unknownKeys;if(m==="passthrough")for(const g of f)h.push({key:{status:"valid",value:g},value:{status:"valid",value:l.data[g]}});else if(m==="strict")f.length>0&&(ie(l,{code:Y.unrecognized_keys,keys:f}),r.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const g of f){const y=l.data[g];h.push({key:{status:"valid",value:g},value:m._parse(new sa(l,y,l.path,g)),alwaysSet:g in l.data})}}return l.common.async?Promise.resolve().then(async()=>{const m=[];for(const g of h){const y=await g.key,v=await g.value;m.push({key:y,value:v,alwaysSet:g.alwaysSet})}return m}).then(m=>Mt.mergeObjectSync(r,m)):Mt.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new Xe({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var l,u,c,f;const h=(c=(u=(l=this._def).errorMap)===null||u===void 0?void 0:u.call(l,n,r).message)!==null&&c!==void 0?c:r.defaultError;return n.code==="unrecognized_keys"?{message:(f=ce.errToObj(e).message)!==null&&f!==void 0?f:h}:{message:h}}}:{}})}strip(){return new Xe({...this._def,unknownKeys:"strip"})}passthrough(){return new Xe({...this._def,unknownKeys:"passthrough"})}extend(e){return new Xe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Xe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Xe({...this._def,catchall:e})}pick(e){const n={};return Me.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Xe({...this._def,shape:()=>n})}omit(e){const n={};return Me.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Xe({...this._def,shape:()=>n})}deepPartial(){return Hi(this)}partial(e){const n={};return Me.objectKeys(this.shape).forEach(r=>{const l=this.shape[r];e&&!e[r]?n[r]=l:n[r]=l.optional()}),new Xe({...this._def,shape:()=>n})}required(e){const n={};return Me.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let u=this.shape[r];for(;u instanceof qn;)u=u._def.innerType;n[r]=u}}),new Xe({...this._def,shape:()=>n})}keyof(){return w_(Me.objectKeys(this.shape))}}Xe.create=(i,e)=>new Xe({shape:()=>i,unknownKeys:"strip",catchall:Ma.create(),typeName:J.ZodObject,...ve(e)});Xe.strictCreate=(i,e)=>new Xe({shape:()=>i,unknownKeys:"strict",catchall:Ma.create(),typeName:J.ZodObject,...ve(e)});Xe.lazycreate=(i,e)=>new Xe({shape:i,unknownKeys:"strip",catchall:Ma.create(),typeName:J.ZodObject,...ve(e)});class El extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function l(u){for(const f of u)if(f.result.status==="valid")return f.result;for(const f of u)if(f.result.status==="dirty")return n.common.issues.push(...f.ctx.common.issues),f.result;const c=u.map(f=>new fn(f.ctx.common.issues));return ie(n,{code:Y.invalid_union,unionErrors:c}),ge}if(n.common.async)return Promise.all(r.map(async u=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await u._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(l);{let u;const c=[];for(const h of r){const m={...n,common:{...n.common,issues:[]},parent:null},g=h._parseSync({data:n.data,path:n.path,parent:m});if(g.status==="valid")return g;g.status==="dirty"&&!u&&(u={result:g,ctx:m}),m.common.issues.length&&c.push(m.common.issues)}if(u)return n.common.issues.push(...u.ctx.common.issues),u.result;const f=c.map(h=>new fn(h));return ie(n,{code:Y.invalid_union,unionErrors:f}),ge}}get options(){return this._def.options}}El.create=(i,e)=>new El({options:i,typeName:J.ZodUnion,...ve(e)});const xa=i=>i instanceof Ol?xa(i.schema):i instanceof Vn?xa(i.innerType()):i instanceof Rl?[i.value]:i instanceof mr?i.options:i instanceof Cl?Me.objectValues(i.enum):i instanceof xl?xa(i._def.innerType):i instanceof wl?[void 0]:i instanceof Al?[null]:i instanceof qn?[void 0,...xa(i.unwrap())]:i instanceof pr?[null,...xa(i.unwrap())]:i instanceof nm||i instanceof Dl?xa(i.unwrap()):i instanceof Nl?xa(i._def.innerType):[];class Uo extends Se{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.object)return ie(n,{code:Y.invalid_type,expected:se.object,received:n.parsedType}),ge;const r=this.discriminator,l=n.data[r],u=this.optionsMap.get(l);return u?n.common.async?u._parseAsync({data:n.data,path:n.path,parent:n}):u._parseSync({data:n.data,path:n.path,parent:n}):(ie(n,{code:Y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const l=new Map;for(const u of n){const c=xa(u.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const f of c){if(l.has(f))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(f)}`);l.set(f,u)}}return new Uo({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:l,...ve(r)})}}function kh(i,e){const n=Na(i),r=Na(e);if(i===e)return{valid:!0,data:i};if(n===se.object&&r===se.object){const l=Me.objectKeys(e),u=Me.objectKeys(i).filter(f=>l.indexOf(f)!==-1),c={...i,...e};for(const f of u){const h=kh(i[f],e[f]);if(!h.valid)return{valid:!1};c[f]=h.data}return{valid:!0,data:c}}else if(n===se.array&&r===se.array){if(i.length!==e.length)return{valid:!1};const l=[];for(let u=0;u<i.length;u++){const c=i[u],f=e[u],h=kh(c,f);if(!h.valid)return{valid:!1};l.push(h.data)}return{valid:!0,data:l}}else return n===se.date&&r===se.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class Sl extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),l=(u,c)=>{if(Mh(u)||Mh(c))return ge;const f=kh(u.value,c.value);return f.valid?((jh(u)||jh(c))&&n.dirty(),{status:n.value,value:f.data}):(ie(r,{code:Y.invalid_intersection_types}),ge)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([u,c])=>l(u,c)):l(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Sl.create=(i,e,n)=>new Sl({left:i,right:e,typeName:J.ZodIntersection,...ve(n)});class la extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.array)return ie(r,{code:Y.invalid_type,expected:se.array,received:r.parsedType}),ge;if(r.data.length<this._def.items.length)return ie(r,{code:Y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ge;!this._def.rest&&r.data.length>this._def.items.length&&(ie(r,{code:Y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const u=[...r.data].map((c,f)=>{const h=this._def.items[f]||this._def.rest;return h?h._parse(new sa(r,c,r.path,f)):null}).filter(c=>!!c);return r.common.async?Promise.all(u).then(c=>Mt.mergeArray(n,c)):Mt.mergeArray(n,u)}get items(){return this._def.items}rest(e){return new la({...this._def,rest:e})}}la.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new la({items:i,typeName:J.ZodTuple,rest:null,...ve(e)})};class Tl extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.object)return ie(r,{code:Y.invalid_type,expected:se.object,received:r.parsedType}),ge;const l=[],u=this._def.keyType,c=this._def.valueType;for(const f in r.data)l.push({key:u._parse(new sa(r,f,r.path,f)),value:c._parse(new sa(r,r.data[f],r.path,f)),alwaysSet:f in r.data});return r.common.async?Mt.mergeObjectAsync(n,l):Mt.mergeObjectSync(n,l)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Se?new Tl({keyType:e,valueType:n,typeName:J.ZodRecord,...ve(r)}):new Tl({keyType:zn.create(),valueType:e,typeName:J.ZodRecord,...ve(n)})}}class So extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.map)return ie(r,{code:Y.invalid_type,expected:se.map,received:r.parsedType}),ge;const l=this._def.keyType,u=this._def.valueType,c=[...r.data.entries()].map(([f,h],m)=>({key:l._parse(new sa(r,f,r.path,[m,"key"])),value:u._parse(new sa(r,h,r.path,[m,"value"]))}));if(r.common.async){const f=new Map;return Promise.resolve().then(async()=>{for(const h of c){const m=await h.key,g=await h.value;if(m.status==="aborted"||g.status==="aborted")return ge;(m.status==="dirty"||g.status==="dirty")&&n.dirty(),f.set(m.value,g.value)}return{status:n.value,value:f}})}else{const f=new Map;for(const h of c){const m=h.key,g=h.value;if(m.status==="aborted"||g.status==="aborted")return ge;(m.status==="dirty"||g.status==="dirty")&&n.dirty(),f.set(m.value,g.value)}return{status:n.value,value:f}}}}So.create=(i,e,n)=>new So({valueType:e,keyType:i,typeName:J.ZodMap,...ve(n)});class Jr extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.set)return ie(r,{code:Y.invalid_type,expected:se.set,received:r.parsedType}),ge;const l=this._def;l.minSize!==null&&r.data.size<l.minSize.value&&(ie(r,{code:Y.too_small,minimum:l.minSize.value,type:"set",inclusive:!0,exact:!1,message:l.minSize.message}),n.dirty()),l.maxSize!==null&&r.data.size>l.maxSize.value&&(ie(r,{code:Y.too_big,maximum:l.maxSize.value,type:"set",inclusive:!0,exact:!1,message:l.maxSize.message}),n.dirty());const u=this._def.valueType;function c(h){const m=new Set;for(const g of h){if(g.status==="aborted")return ge;g.status==="dirty"&&n.dirty(),m.add(g.value)}return{status:n.value,value:m}}const f=[...r.data.values()].map((h,m)=>u._parse(new sa(r,h,r.path,m)));return r.common.async?Promise.all(f).then(h=>c(h)):c(f)}min(e,n){return new Jr({...this._def,minSize:{value:e,message:ce.toString(n)}})}max(e,n){return new Jr({...this._def,maxSize:{value:e,message:ce.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Jr.create=(i,e)=>new Jr({valueType:i,minSize:null,maxSize:null,typeName:J.ZodSet,...ve(e)});class Yi extends Se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.function)return ie(n,{code:Y.invalid_type,expected:se.function,received:n.parsedType}),ge;function r(f,h){return _o({data:f,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vo(),Ki].filter(m=>!!m),issueData:{code:Y.invalid_arguments,argumentsError:h}})}function l(f,h){return _o({data:f,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vo(),Ki].filter(m=>!!m),issueData:{code:Y.invalid_return_type,returnTypeError:h}})}const u={errorMap:n.common.contextualErrorMap},c=n.data;if(this._def.returns instanceof Ji){const f=this;return zt(async function(...h){const m=new fn([]),g=await f._def.args.parseAsync(h,u).catch(_=>{throw m.addIssue(r(h,_)),m}),y=await Reflect.apply(c,this,g);return await f._def.returns._def.type.parseAsync(y,u).catch(_=>{throw m.addIssue(l(y,_)),m})})}else{const f=this;return zt(function(...h){const m=f._def.args.safeParse(h,u);if(!m.success)throw new fn([r(h,m.error)]);const g=Reflect.apply(c,this,m.data),y=f._def.returns.safeParse(g,u);if(!y.success)throw new fn([l(g,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Yi({...this._def,args:la.create(e).rest(Qr.create())})}returns(e){return new Yi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Yi({args:e||la.create([]).rest(Qr.create()),returns:n||Qr.create(),typeName:J.ZodFunction,...ve(r)})}}class Ol extends Se{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ol.create=(i,e)=>new Ol({getter:i,typeName:J.ZodLazy,...ve(e)});class Rl extends Se{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ie(n,{received:n.data,code:Y.invalid_literal,expected:this._def.value}),ge}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rl.create=(i,e)=>new Rl({value:i,typeName:J.ZodLiteral,...ve(e)});function w_(i,e){return new mr({values:i,typeName:J.ZodEnum,...ve(e)})}class mr extends Se{constructor(){super(...arguments),ll.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ie(n,{expected:Me.joinValues(r),received:n.parsedType,code:Y.invalid_type}),ge}if(wo(this,ll)||y_(this,ll,new Set(this._def.values)),!wo(this,ll).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ie(n,{received:n.data,code:Y.invalid_enum_value,options:r}),ge}return zt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return mr.create(e,{...this._def,...n})}exclude(e,n=this._def){return mr.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ll=new WeakMap;mr.create=w_;class Cl extends Se{constructor(){super(...arguments),ul.set(this,void 0)}_parse(e){const n=Me.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==se.string&&r.parsedType!==se.number){const l=Me.objectValues(n);return ie(r,{expected:Me.joinValues(l),received:r.parsedType,code:Y.invalid_type}),ge}if(wo(this,ul)||y_(this,ul,new Set(Me.getValidEnumValues(this._def.values))),!wo(this,ul).has(e.data)){const l=Me.objectValues(n);return ie(r,{received:r.data,code:Y.invalid_enum_value,options:l}),ge}return zt(e.data)}get enum(){return this._def.values}}ul=new WeakMap;Cl.create=(i,e)=>new Cl({values:i,typeName:J.ZodNativeEnum,...ve(e)});class Ji extends Se{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.promise&&n.common.async===!1)return ie(n,{code:Y.invalid_type,expected:se.promise,received:n.parsedType}),ge;const r=n.parsedType===se.promise?n.data:Promise.resolve(n.data);return zt(r.then(l=>this._def.type.parseAsync(l,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ji.create=(i,e)=>new Ji({type:i,typeName:J.ZodPromise,...ve(e)});class Vn extends Se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),l=this._def.effect||null,u={addIssue:c=>{ie(r,c),c.fatal?n.abort():n.dirty()},get path(){return r.path}};if(u.addIssue=u.addIssue.bind(u),l.type==="preprocess"){const c=l.transform(r.data,u);if(r.common.async)return Promise.resolve(c).then(async f=>{if(n.value==="aborted")return ge;const h=await this._def.schema._parseAsync({data:f,path:r.path,parent:r});return h.status==="aborted"?ge:h.status==="dirty"||n.value==="dirty"?qi(h.value):h});{if(n.value==="aborted")return ge;const f=this._def.schema._parseSync({data:c,path:r.path,parent:r});return f.status==="aborted"?ge:f.status==="dirty"||n.value==="dirty"?qi(f.value):f}}if(l.type==="refinement"){const c=f=>{const h=l.refinement(f,u);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(r.common.async===!1){const f=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return f.status==="aborted"?ge:(f.status==="dirty"&&n.dirty(),c(f.value),{status:n.value,value:f.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(f=>f.status==="aborted"?ge:(f.status==="dirty"&&n.dirty(),c(f.value).then(()=>({status:n.value,value:f.value}))))}if(l.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Kr(c))return c;const f=l.transform(c.value,u);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:f}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>Kr(c)?Promise.resolve(l.transform(c.value,u)).then(f=>({status:n.value,value:f})):c);Me.assertNever(l)}}Vn.create=(i,e,n)=>new Vn({schema:i,typeName:J.ZodEffects,effect:e,...ve(n)});Vn.createWithPreprocess=(i,e,n)=>new Vn({schema:e,effect:{type:"preprocess",transform:i},typeName:J.ZodEffects,...ve(n)});class qn extends Se{_parse(e){return this._getType(e)===se.undefined?zt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qn.create=(i,e)=>new qn({innerType:i,typeName:J.ZodOptional,...ve(e)});class pr extends Se{_parse(e){return this._getType(e)===se.null?zt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pr.create=(i,e)=>new pr({innerType:i,typeName:J.ZodNullable,...ve(e)});class xl extends Se{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===se.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}xl.create=(i,e)=>new xl({innerType:i,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ve(e)});class Nl extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},l=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return vl(l)?l.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new fn(r.common.issues)},input:r.data})})):{status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new fn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Nl.create=(i,e)=>new Nl({innerType:i,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ve(e)});class To extends Se{_parse(e){if(this._getType(e)!==se.nan){const r=this._getOrReturnCtx(e);return ie(r,{code:Y.invalid_type,expected:se.nan,received:r.parsedType}),ge}return{status:"valid",value:e.data}}}To.create=i=>new To({typeName:J.ZodNaN,...ve(i)});const JS=Symbol("zod_brand");class nm extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class $l extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const u=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?ge:u.status==="dirty"?(n.dirty(),qi(u.value)):this._def.out._parseAsync({data:u.value,path:r.path,parent:r})})();{const l=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?ge:l.status==="dirty"?(n.dirty(),{status:"dirty",value:l.value}):this._def.out._parseSync({data:l.value,path:r.path,parent:r})}}static create(e,n){return new $l({in:e,out:n,typeName:J.ZodPipeline})}}class Dl extends Se{_parse(e){const n=this._def.innerType._parse(e),r=l=>(Kr(l)&&(l.value=Object.freeze(l.value)),l);return vl(n)?n.then(l=>r(l)):r(n)}unwrap(){return this._def.innerType}}Dl.create=(i,e)=>new Dl({innerType:i,typeName:J.ZodReadonly,...ve(e)});function yb(i,e){const n=typeof i=="function"?i(e):typeof i=="string"?{message:i}:i;return typeof n=="string"?{message:n}:n}function A_(i,e={},n){return i?Xi.create().superRefine((r,l)=>{var u,c;const f=i(r);if(f instanceof Promise)return f.then(h=>{var m,g;if(!h){const y=yb(e,r),v=(g=(m=y.fatal)!==null&&m!==void 0?m:n)!==null&&g!==void 0?g:!0;l.addIssue({code:"custom",...y,fatal:v})}});if(!f){const h=yb(e,r),m=(c=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&c!==void 0?c:!0;l.addIssue({code:"custom",...h,fatal:m})}}):Xi.create()}const WS={object:Xe.lazycreate};var J;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(J||(J={}));const eT=(i,e={message:`Input not instance of ${i.name}`})=>A_(n=>n instanceof i,e),E_=zn.create,S_=fr.create,tT=To.create,nT=hr.create,T_=_l.create,aT=Xr.create,rT=Ao.create,iT=wl.create,sT=Al.create,lT=Xi.create,uT=Qr.create,oT=Ma.create,cT=Eo.create,dT=Hn.create,fT=Xe.create,hT=Xe.strictCreate,mT=El.create,pT=Uo.create,gT=Sl.create,yT=la.create,bT=Tl.create,vT=So.create,_T=Jr.create,wT=Yi.create,AT=Ol.create,ET=Rl.create,ST=mr.create,TT=Cl.create,OT=Ji.create,bb=Vn.create,RT=qn.create,CT=pr.create,xT=Vn.createWithPreprocess,NT=$l.create,DT=()=>E_().optional(),MT=()=>S_().optional(),jT=()=>T_().optional(),kT={string:i=>zn.create({...i,coerce:!0}),number:i=>fr.create({...i,coerce:!0}),boolean:i=>_l.create({...i,coerce:!0}),bigint:i=>hr.create({...i,coerce:!0}),date:i=>Xr.create({...i,coerce:!0})},LT=ge;var fl=Object.freeze({__proto__:null,defaultErrorMap:Ki,setErrorMap:xS,getErrorMap:vo,makeIssue:_o,EMPTY_PATH:NS,addIssueToContext:ie,ParseStatus:Mt,INVALID:ge,DIRTY:qi,OK:zt,isAborted:Mh,isDirty:jh,isValid:Kr,isAsync:vl,get util(){return Me},get objectUtil(){return Dh},ZodParsedType:se,getParsedType:Na,ZodType:Se,datetimeRegex:__,ZodString:zn,ZodNumber:fr,ZodBigInt:hr,ZodBoolean:_l,ZodDate:Xr,ZodSymbol:Ao,ZodUndefined:wl,ZodNull:Al,ZodAny:Xi,ZodUnknown:Qr,ZodNever:Ma,ZodVoid:Eo,ZodArray:Hn,ZodObject:Xe,ZodUnion:El,ZodDiscriminatedUnion:Uo,ZodIntersection:Sl,ZodTuple:la,ZodRecord:Tl,ZodMap:So,ZodSet:Jr,ZodFunction:Yi,ZodLazy:Ol,ZodLiteral:Rl,ZodEnum:mr,ZodNativeEnum:Cl,ZodPromise:Ji,ZodEffects:Vn,ZodTransformer:Vn,ZodOptional:qn,ZodNullable:pr,ZodDefault:xl,ZodCatch:Nl,ZodNaN:To,BRAND:JS,ZodBranded:nm,ZodPipeline:$l,ZodReadonly:Dl,custom:A_,Schema:Se,ZodSchema:Se,late:WS,get ZodFirstPartyTypeKind(){return J},coerce:kT,any:lT,array:dT,bigint:nT,boolean:T_,date:aT,discriminatedUnion:pT,effect:bb,enum:ST,function:wT,instanceof:eT,intersection:gT,lazy:AT,literal:ET,map:vT,nan:tT,nativeEnum:TT,never:oT,null:sT,nullable:CT,number:S_,object:fT,oboolean:jT,onumber:MT,optional:RT,ostring:DT,pipeline:NT,preprocess:xT,promise:OT,record:bT,set:_T,strictObject:hT,string:E_,symbol:rT,transformer:bb,tuple:yT,undefined:iT,union:mT,unknown:uT,void:cT,NEVER:LT,ZodIssueCode:Y,quotelessJson:CS,ZodError:fn}),nl={exports:{}},df={},ff,vb;function UT(){if(vb)return ff;vb=1;function i(e,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return ff=i,i.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},i.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},i.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var n=new Date().getTime();if(e&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var l=this;return this._timer=setTimeout(function(){l._attempts++,l._operationTimeoutCb&&(l._timeout=setTimeout(function(){l._operationTimeoutCb(l._attempts)},l._operationTimeout),l._options.unref&&l._timeout.unref()),l._fn(l._attempts)},r),this._options.unref&&this._timer.unref(),!0},i.prototype.attempt=function(e,n){this._fn=e,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},i.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},i.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},i.prototype.start=i.prototype.try,i.prototype.errors=function(){return this._errors},i.prototype.attempts=function(){return this._attempts},i.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},n=null,r=0,l=0;l<this._errors.length;l++){var u=this._errors[l],c=u.message,f=(e[c]||0)+1;e[c]=f,f>=r&&(n=u,r=f)}return n},ff}var _b;function IT(){return _b||(_b=1,function(i){var e=UT();i.operation=function(n){var r=i.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},i.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var l in n)r[l]=n[l];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var u=[],c=0;c<r.retries;c++)u.push(this.createTimeout(c,r));return n&&n.forever&&!u.length&&u.push(this.createTimeout(c,r)),u.sort(function(f,h){return f-h}),u},i.createTimeout=function(n,r){var l=r.randomize?Math.random()+1:1,u=Math.round(l*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return u=Math.min(u,r.maxTimeout),u},i.wrap=function(n,r,l){if(r instanceof Array&&(l=r,r=null),!l){l=[];for(var u in n)typeof n[u]=="function"&&l.push(u)}for(var c=0;c<l.length;c++){var f=l[c],h=n[f];n[f]=(function(g){var y=i.operation(r),v=Array.prototype.slice.call(arguments,1),_=v.pop();v.push(function(A){y.retry(A)||(A&&(arguments[0]=y.mainError()),_.apply(this,arguments))}),y.attempt(function(){g.apply(n,v)})}).bind(n,h),n[f].options=r}}}(df)),df}var hf,wb;function BT(){return wb||(wb=1,hf=IT()),hf}var Ab;function PT(){if(Ab)return nl.exports;Ab=1;const i=BT(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(f){super(),f instanceof Error?(this.originalError=f,{message:f}=f):(this.originalError=new Error(f),this.originalError.stack=this.stack),this.name="AbortError",this.message=f}}const r=(c,f,h)=>{const m=h.retries-(f-1);return c.attemptNumber=f,c.retriesLeft=m,c},l=c=>e.includes(c),u=(c,f)=>new Promise((h,m)=>{f={onFailedAttempt:()=>{},retries:10,...f};const g=i.operation(f);g.attempt(async y=>{try{h(await c(y))}catch(v){if(!(v instanceof Error)){m(new TypeError(`Non-error was thrown: "${v}". You should only throw errors.`));return}if(v instanceof n)g.stop(),m(v.originalError);else if(v instanceof TypeError&&!l(v.message))g.stop(),m(v);else{r(v,y,f);try{await f.onFailedAttempt(v)}catch(_){m(_);return}g.retry(v)||m(g.mainError())}}})});return nl.exports=u,nl.exports.default=u,nl.exports.AbortError=n,nl.exports}var $T=PT();const Oo=ti($T),zT=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function hl(i){return typeof i=="string"&&zT.test(i)}var St=[];for(var mf=0;mf<256;++mf)St.push((mf+256).toString(16).slice(1));function HT(i,e=0){return(St[i[e+0]]+St[i[e+1]]+St[i[e+2]]+St[i[e+3]]+"-"+St[i[e+4]]+St[i[e+5]]+"-"+St[i[e+6]]+St[i[e+7]]+"-"+St[i[e+8]]+St[i[e+9]]+"-"+St[i[e+10]]+St[i[e+11]]+St[i[e+12]]+St[i[e+13]]+St[i[e+14]]+St[i[e+15]]).toLowerCase()}var ao,qT=new Uint8Array(16);function GT(){if(!ao&&(ao=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ao))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ao(qT)}var ZT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Eb={randomUUID:ZT};function Kt(i,e,n){if(Eb.randomUUID&&!i)return Eb.randomUUID();i=i||{};var r=i.random||(i.rng||GT)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,HT(r)}var ro={},pf={exports:{}},Sb;function VT(){return Sb||(Sb=1,function(i){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function l(h,m,g){this.fn=h,this.context=m,this.once=g||!1}function u(h,m,g,y,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var _=new l(g,y||h,v),A=n?n+m:m;return h._events[A]?h._events[A].fn?h._events[A]=[h._events[A],_]:h._events[A].push(_):(h._events[A]=_,h._eventsCount++),h}function c(h,m){--h._eventsCount===0?h._events=new r:delete h._events[m]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)e.call(g,y)&&m.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},f.prototype.listeners=function(m){var g=n?n+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,_=y.length,A=new Array(_);v<_;v++)A[v]=y[v].fn;return A},f.prototype.listenerCount=function(m){var g=n?n+m:m,y=this._events[g];return y?y.fn?1:y.length:0},f.prototype.emit=function(m,g,y,v,_,A){var E=n?n+m:m;if(!this._events[E])return!1;var O=this._events[E],x=arguments.length,k,M;if(O.fn){switch(O.once&&this.removeListener(m,O.fn,void 0,!0),x){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,g),!0;case 3:return O.fn.call(O.context,g,y),!0;case 4:return O.fn.call(O.context,g,y,v),!0;case 5:return O.fn.call(O.context,g,y,v,_),!0;case 6:return O.fn.call(O.context,g,y,v,_,A),!0}for(M=1,k=new Array(x-1);M<x;M++)k[M-1]=arguments[M];O.fn.apply(O.context,k)}else{var ae=O.length,B;for(M=0;M<ae;M++)switch(O[M].once&&this.removeListener(m,O[M].fn,void 0,!0),x){case 1:O[M].fn.call(O[M].context);break;case 2:O[M].fn.call(O[M].context,g);break;case 3:O[M].fn.call(O[M].context,g,y);break;case 4:O[M].fn.call(O[M].context,g,y,v);break;default:if(!k)for(B=1,k=new Array(x-1);B<x;B++)k[B-1]=arguments[B];O[M].fn.apply(O[M].context,k)}}return!0},f.prototype.on=function(m,g,y){return u(this,m,g,y,!1)},f.prototype.once=function(m,g,y){return u(this,m,g,y,!0)},f.prototype.removeListener=function(m,g,y,v){var _=n?n+m:m;if(!this._events[_])return this;if(!g)return c(this,_),this;var A=this._events[_];if(A.fn)A.fn===g&&(!v||A.once)&&(!y||A.context===y)&&c(this,_);else{for(var E=0,O=[],x=A.length;E<x;E++)(A[E].fn!==g||v&&!A[E].once||y&&A[E].context!==y)&&O.push(A[E]);O.length?this._events[_]=O.length===1?O[0]:O:c(this,_)}return this},f.prototype.removeAllListeners=function(m){var g;return m?(g=n?n+m:m,this._events[g]&&c(this,g)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=n,f.EventEmitter=f,i.exports=f}(pf)),pf.exports}var al={exports:{}},gf,Tb;function QT(){return Tb||(Tb=1,gf=(i,e)=>(e=e||(()=>{}),i.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})))),gf}var Ob;function YT(){if(Ob)return al.exports;Ob=1;const i=QT();class e extends Error{constructor(l){super(l),this.name="TimeoutError"}}const n=(r,l,u)=>new Promise((c,f)=>{if(typeof l!="number"||l<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(l===1/0){c(r);return}const h=setTimeout(()=>{if(typeof u=="function"){try{c(u())}catch(y){f(y)}return}const m=typeof u=="string"?u:`Promise timed out after ${l} milliseconds`,g=u instanceof Error?u:new e(m);typeof r.cancel=="function"&&r.cancel(),f(g)},l);i(r.then(c,f),()=>{clearTimeout(h)})});return al.exports=n,al.exports.default=n,al.exports.TimeoutError=e,al.exports}var io={},so={},Rb;function FT(){if(Rb)return so;Rb=1,Object.defineProperty(so,"__esModule",{value:!0});function i(e,n,r){let l=0,u=e.length;for(;u>0;){const c=u/2|0;let f=l+c;r(e[f],n)<=0?(l=++f,u-=c+1):u=c}return l}return so.default=i,so}var Cb;function KT(){if(Cb)return io;Cb=1,Object.defineProperty(io,"__esModule",{value:!0});const i=FT();class e{constructor(){this._queue=[]}enqueue(r,l){l=Object.assign({priority:0},l);const u={priority:l.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=l.priority){this._queue.push(u);return}const c=i.default(this._queue,u,(f,h)=>h.priority-f.priority);this._queue.splice(c,0,u)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(l=>l.priority===r.priority).map(l=>l.run)}get size(){return this._queue.length}}return io.default=e,io}var xb;function XT(){if(xb)return ro;xb=1,Object.defineProperty(ro,"__esModule",{value:!0});const i=VT(),e=YT(),n=KT(),r=()=>{},l=new e.TimeoutError;class u extends i{constructor(f){var h,m,g,y;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,f=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},f),!(typeof f.intervalCap=="number"&&f.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(m=(h=f.intervalCap)===null||h===void 0?void 0:h.toString())!==null&&m!==void 0?m:""}\` (${typeof f.intervalCap})`);if(f.interval===void 0||!(Number.isFinite(f.interval)&&f.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(y=(g=f.interval)===null||g===void 0?void 0:g.toString())!==null&&y!==void 0?y:""}\` (${typeof f.interval})`);this._carryoverConcurrencyCount=f.carryoverConcurrencyCount,this._isIntervalIgnored=f.intervalCap===1/0||f.interval===0,this._intervalCap=f.intervalCap,this._interval=f.interval,this._queue=new f.queueClass,this._queueClass=f.queueClass,this.concurrency=f.concurrency,this._timeout=f.timeout,this._throwOnTimeout=f.throwOnTimeout===!0,this._isPaused=f.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const f=Date.now();if(this._intervalId===void 0){const h=this._intervalEnd-f;if(h<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},h)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const f=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const h=this._queue.dequeue();return h?(this.emit("active"),h(),f&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(f){if(!(typeof f=="number"&&f>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${f}\` (${typeof f})`);this._concurrency=f,this._processQueue()}async add(f,h={}){return new Promise((m,g)=>{const y=async()=>{this._pendingCount++,this._intervalCount++;try{const v=this._timeout===void 0&&h.timeout===void 0?f():e.default(Promise.resolve(f()),h.timeout===void 0?this._timeout:h.timeout,()=>{(h.throwOnTimeout===void 0?this._throwOnTimeout:h.throwOnTimeout)&&g(l)});m(await v)}catch(v){g(v)}this._next()};this._queue.enqueue(y,h),this._tryToStartAnother(),this.emit("add")})}async addAll(f,h){return Promise.all(f.map(async m=>this.add(m,h)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(f=>{const h=this._resolveEmpty;this._resolveEmpty=()=>{h(),f()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(f=>{const h=this._resolveIdle;this._resolveIdle=()=>{h(),f()}})}get size(){return this._queue.size}sizeBy(f){return this._queue.filter(f).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(f){this._timeout=f}}return ro.default=u,ro}var JT=XT();const Da=ti(JT),WT=(...i)=>fetch(...i),e1=Symbol.for("ls:fetch_implementation"),fe=()=>globalThis[e1]??WT,t1=[400,401,403,404,405,406,407,408],n1=[409];let Nb=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in Da?this.queue=new Da.default({concurrency:this.maxConcurrency}):this.queue=new Da({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){const r=this.onFailedResponseHook;return this.queue.add(()=>Oo(()=>e(...n).catch(l=>{throw l instanceof Error?l:new Error(l)}),{async onFailedAttempt(l){if(l.message.startsWith("Cancel")||l.message.startsWith("TimeoutError")||l.message.startsWith("AbortError")||(l==null?void 0:l.code)==="ECONNABORTED")throw l;const u=l==null?void 0:l.response,c=u==null?void 0:u.status;if(c){if(t1.includes(+c))throw l;if(n1.includes(+c))return;r&&await r(u)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((l,u)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{u(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fe()(...e).then(n=>n.ok?n:Promise.reject(n)))}};function Db(i){return typeof(i==null?void 0:i._getType)=="function"}function Mb(i){const e={type:i._getType(),data:{content:i.content}};return i!=null&&i.additional_kwargs&&Object.keys(i.additional_kwargs).length>0&&(e.data.additional_kwargs={...i.additional_kwargs}),e}function we(i,e){if(!hl(i)){const n=e!==void 0?`Invalid UUID for ${e}: ${i}`:`Invalid UUID: ${i}`;throw new Error(n)}return i}const jb={};function O_(i){jb[i]||(console.warn(i),jb[i]=!0)}var lo={exports:{}},yf,kb;function Io(){if(kb)return yf;kb=1;const i="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,l=e-6;return yf={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:l,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:i,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},yf}var bf,Lb;function Bo(){if(Lb)return bf;Lb=1;var i={};return bf=typeof process=="object"&&i&&i.NODE_DEBUG&&/\bsemver\b/i.test(i.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},bf}var Ub;function zl(){return Ub||(Ub=1,function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:l}=Io(),u=Bo();e=i.exports={};const c=e.re=[],f=e.safeRe=[],h=e.src=[],m=e.safeSrc=[],g=e.t={};let y=0;const v="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",l],[v,r]],A=O=>{for(const[x,k]of _)O=O.split(`${x}*`).join(`${x}{0,${k}}`).split(`${x}+`).join(`${x}{1,${k}}`);return O},E=(O,x,k)=>{const M=A(x),ae=y++;u(O,ae,x),g[O]=ae,h[ae]=x,m[ae]=M,c[ae]=new RegExp(x,k?"g":void 0),f[ae]=new RegExp(M,k?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),E("MAINVERSION",`(${h[g.NUMERICIDENTIFIER]})\\.(${h[g.NUMERICIDENTIFIER]})\\.(${h[g.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${h[g.NUMERICIDENTIFIERLOOSE]})\\.(${h[g.NUMERICIDENTIFIERLOOSE]})\\.(${h[g.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${h[g.NUMERICIDENTIFIER]}|${h[g.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${h[g.NUMERICIDENTIFIERLOOSE]}|${h[g.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${h[g.PRERELEASEIDENTIFIER]}(?:\\.${h[g.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${h[g.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[g.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${v}+`),E("BUILD",`(?:\\+(${h[g.BUILDIDENTIFIER]}(?:\\.${h[g.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${h[g.MAINVERSION]}${h[g.PRERELEASE]}?${h[g.BUILD]}?`),E("FULL",`^${h[g.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${h[g.MAINVERSIONLOOSE]}${h[g.PRERELEASELOOSE]}?${h[g.BUILD]}?`),E("LOOSE",`^${h[g.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${h[g.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${h[g.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${h[g.XRANGEIDENTIFIER]})(?:\\.(${h[g.XRANGEIDENTIFIER]})(?:\\.(${h[g.XRANGEIDENTIFIER]})(?:${h[g.PRERELEASE]})?${h[g.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${h[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[g.XRANGEIDENTIFIERLOOSE]})(?:${h[g.PRERELEASELOOSE]})?${h[g.BUILD]}?)?)?`),E("XRANGE",`^${h[g.GTLT]}\\s*${h[g.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${h[g.GTLT]}\\s*${h[g.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),E("COERCE",`${h[g.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",h[g.COERCEPLAIN]+`(?:${h[g.PRERELEASE]})?(?:${h[g.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",h[g.COERCE],!0),E("COERCERTLFULL",h[g.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${h[g.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",E("TILDE",`^${h[g.LONETILDE]}${h[g.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${h[g.LONETILDE]}${h[g.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${h[g.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",E("CARET",`^${h[g.LONECARET]}${h[g.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${h[g.LONECARET]}${h[g.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${h[g.GTLT]}\\s*(${h[g.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${h[g.GTLT]}\\s*(${h[g.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${h[g.GTLT]}\\s*(${h[g.LOOSEPLAIN]}|${h[g.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${h[g.XRANGEPLAIN]})\\s+-\\s+(${h[g.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${h[g.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[g.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(lo,lo.exports)),lo.exports}var vf,Ib;function am(){if(Ib)return vf;Ib=1;const i=Object.freeze({loose:!0}),e=Object.freeze({});return vf=r=>r?typeof r!="object"?i:r:e,vf}var _f,Bb;function R_(){if(Bb)return _f;Bb=1;const i=/^[0-9]+$/,e=(r,l)=>{const u=i.test(r),c=i.test(l);return u&&c&&(r=+r,l=+l),r===l?0:u&&!c?-1:c&&!u?1:r<l?-1:1};return _f={compareIdentifiers:e,rcompareIdentifiers:(r,l)=>e(l,r)},_f}var wf,Pb;function Ht(){if(Pb)return wf;Pb=1;const i=Bo(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=Io(),{safeRe:r,safeSrc:l,t:u}=zl(),c=am(),{compareIdentifiers:f}=R_();class h{constructor(g,y){if(y=c(y),g instanceof h){if(g.loose===!!y.loose&&g.includePrerelease===!!y.includePrerelease)return g;g=g.version}else if(typeof g!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof g}".`);if(g.length>e)throw new TypeError(`version is longer than ${e} characters`);i("SemVer",g,y),this.options=y,this.loose=!!y.loose,this.includePrerelease=!!y.includePrerelease;const v=g.trim().match(y.loose?r[u.LOOSE]:r[u.FULL]);if(!v)throw new TypeError(`Invalid Version: ${g}`);if(this.raw=g,this.major=+v[1],this.minor=+v[2],this.patch=+v[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");v[4]?this.prerelease=v[4].split(".").map(_=>{if(/^[0-9]+$/.test(_)){const A=+_;if(A>=0&&A<n)return A}return _}):this.prerelease=[],this.build=v[5]?v[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(g){if(i("SemVer.compare",this.version,this.options,g),!(g instanceof h)){if(typeof g=="string"&&g===this.version)return 0;g=new h(g,this.options)}return g.version===this.version?0:this.compareMain(g)||this.comparePre(g)}compareMain(g){return g instanceof h||(g=new h(g,this.options)),f(this.major,g.major)||f(this.minor,g.minor)||f(this.patch,g.patch)}comparePre(g){if(g instanceof h||(g=new h(g,this.options)),this.prerelease.length&&!g.prerelease.length)return-1;if(!this.prerelease.length&&g.prerelease.length)return 1;if(!this.prerelease.length&&!g.prerelease.length)return 0;let y=0;do{const v=this.prerelease[y],_=g.prerelease[y];if(i("prerelease compare",y,v,_),v===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(v===void 0)return-1;if(v===_)continue;return f(v,_)}while(++y)}compareBuild(g){g instanceof h||(g=new h(g,this.options));let y=0;do{const v=this.build[y],_=g.build[y];if(i("build compare",y,v,_),v===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(v===void 0)return-1;if(v===_)continue;return f(v,_)}while(++y)}inc(g,y,v){if(g.startsWith("pre")){if(!y&&v===!1)throw new Error("invalid increment argument: identifier is empty");if(y){const _=new RegExp(`^${this.options.loose?l[u.PRERELEASELOOSE]:l[u.PRERELEASE]}$`),A=`-${y}`.match(_);if(!A||A[1]!==y)throw new Error(`invalid identifier: ${y}`)}}switch(g){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",y,v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",y,v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",y,v),this.inc("pre",y,v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",y,v),this.inc("pre",y,v);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const _=Number(v)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let A=this.prerelease.length;for(;--A>=0;)typeof this.prerelease[A]=="number"&&(this.prerelease[A]++,A=-2);if(A===-1){if(y===this.prerelease.join(".")&&v===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if(y){let A=[y,_];v===!1&&(A=[y]),f(this.prerelease[0],y)===0?isNaN(this.prerelease[1])&&(this.prerelease=A):this.prerelease=A}break}default:throw new Error(`invalid increment argument: ${g}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return wf=h,wf}var Af,$b;function as(){if($b)return Af;$b=1;const i=Ht();return Af=(n,r,l=!1)=>{if(n instanceof i)return n;try{return new i(n,r)}catch(u){if(!l)return null;throw u}},Af}var Ef,zb;function a1(){if(zb)return Ef;zb=1;const i=as();return Ef=(n,r)=>{const l=i(n,r);return l?l.version:null},Ef}var Sf,Hb;function r1(){if(Hb)return Sf;Hb=1;const i=as();return Sf=(n,r)=>{const l=i(n.trim().replace(/^[=v]+/,""),r);return l?l.version:null},Sf}var Tf,qb;function i1(){if(qb)return Tf;qb=1;const i=Ht();return Tf=(n,r,l,u,c)=>{typeof l=="string"&&(c=u,u=l,l=void 0);try{return new i(n instanceof i?n.version:n,l).inc(r,u,c).version}catch{return null}},Tf}var Of,Gb;function s1(){if(Gb)return Of;Gb=1;const i=as();return Of=(n,r)=>{const l=i(n,null,!0),u=i(r,null,!0),c=l.compare(u);if(c===0)return null;const f=c>0,h=f?l:u,m=f?u:l,g=!!h.prerelease.length;if(!!m.prerelease.length&&!g){if(!m.patch&&!m.minor)return"major";if(m.compareMain(h)===0)return m.minor&&!m.patch?"minor":"patch"}const v=g?"pre":"";return l.major!==u.major?v+"major":l.minor!==u.minor?v+"minor":l.patch!==u.patch?v+"patch":"prerelease"},Of}var Rf,Zb;function l1(){if(Zb)return Rf;Zb=1;const i=Ht();return Rf=(n,r)=>new i(n,r).major,Rf}var Cf,Vb;function u1(){if(Vb)return Cf;Vb=1;const i=Ht();return Cf=(n,r)=>new i(n,r).minor,Cf}var xf,Qb;function o1(){if(Qb)return xf;Qb=1;const i=Ht();return xf=(n,r)=>new i(n,r).patch,xf}var Nf,Yb;function c1(){if(Yb)return Nf;Yb=1;const i=as();return Nf=(n,r)=>{const l=i(n,r);return l&&l.prerelease.length?l.prerelease:null},Nf}var Df,Fb;function Yn(){if(Fb)return Df;Fb=1;const i=Ht();return Df=(n,r,l)=>new i(n,l).compare(new i(r,l)),Df}var Mf,Kb;function d1(){if(Kb)return Mf;Kb=1;const i=Yn();return Mf=(n,r,l)=>i(r,n,l),Mf}var jf,Xb;function f1(){if(Xb)return jf;Xb=1;const i=Yn();return jf=(n,r)=>i(n,r,!0),jf}var kf,Jb;function rm(){if(Jb)return kf;Jb=1;const i=Ht();return kf=(n,r,l)=>{const u=new i(n,l),c=new i(r,l);return u.compare(c)||u.compareBuild(c)},kf}var Lf,Wb;function h1(){if(Wb)return Lf;Wb=1;const i=rm();return Lf=(n,r)=>n.sort((l,u)=>i(l,u,r)),Lf}var Uf,ev;function m1(){if(ev)return Uf;ev=1;const i=rm();return Uf=(n,r)=>n.sort((l,u)=>i(u,l,r)),Uf}var If,tv;function Po(){if(tv)return If;tv=1;const i=Yn();return If=(n,r,l)=>i(n,r,l)>0,If}var Bf,nv;function im(){if(nv)return Bf;nv=1;const i=Yn();return Bf=(n,r,l)=>i(n,r,l)<0,Bf}var Pf,av;function C_(){if(av)return Pf;av=1;const i=Yn();return Pf=(n,r,l)=>i(n,r,l)===0,Pf}var $f,rv;function x_(){if(rv)return $f;rv=1;const i=Yn();return $f=(n,r,l)=>i(n,r,l)!==0,$f}var zf,iv;function sm(){if(iv)return zf;iv=1;const i=Yn();return zf=(n,r,l)=>i(n,r,l)>=0,zf}var Hf,sv;function lm(){if(sv)return Hf;sv=1;const i=Yn();return Hf=(n,r,l)=>i(n,r,l)<=0,Hf}var qf,lv;function N_(){if(lv)return qf;lv=1;const i=C_(),e=x_(),n=Po(),r=sm(),l=im(),u=lm();return qf=(f,h,m,g)=>{switch(h){case"===":return typeof f=="object"&&(f=f.version),typeof m=="object"&&(m=m.version),f===m;case"!==":return typeof f=="object"&&(f=f.version),typeof m=="object"&&(m=m.version),f!==m;case"":case"=":case"==":return i(f,m,g);case"!=":return e(f,m,g);case">":return n(f,m,g);case">=":return r(f,m,g);case"<":return l(f,m,g);case"<=":return u(f,m,g);default:throw new TypeError(`Invalid operator: ${h}`)}},qf}var Gf,uv;function p1(){if(uv)return Gf;uv=1;const i=Ht(),e=as(),{safeRe:n,t:r}=zl();return Gf=(u,c)=>{if(u instanceof i)return u;if(typeof u=="number"&&(u=String(u)),typeof u!="string")return null;c=c||{};let f=null;if(!c.rtl)f=u.match(c.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const _=c.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let A;for(;(A=_.exec(u))&&(!f||f.index+f[0].length!==u.length);)(!f||A.index+A[0].length!==f.index+f[0].length)&&(f=A),_.lastIndex=A.index+A[1].length+A[2].length;_.lastIndex=-1}if(f===null)return null;const h=f[2],m=f[3]||"0",g=f[4]||"0",y=c.includePrerelease&&f[5]?`-${f[5]}`:"",v=c.includePrerelease&&f[6]?`+${f[6]}`:"";return e(`${h}.${m}.${g}${y}${v}`,c)},Gf}var Zf,ov;function g1(){if(ov)return Zf;ov=1;class i{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const u=this.map.keys().next().value;this.delete(u)}this.map.set(n,r)}return this}}return Zf=i,Zf}var Vf,cv;function Fn(){if(cv)return Vf;cv=1;const i=/\s+/g;class e{constructor(Q,L){if(L=l(L),Q instanceof e)return Q.loose===!!L.loose&&Q.includePrerelease===!!L.includePrerelease?Q:new e(Q.raw,L);if(Q instanceof u)return this.raw=Q.value,this.set=[[Q]],this.formatted=void 0,this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=Q.trim().replace(i," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(G=>!E(G[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&O(G[0])){this.set=[G];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let Q=0;Q<this.set.length;Q++){Q>0&&(this.formatted+="||");const L=this.set[Q];for(let q=0;q<L.length;q++)q>0&&(this.formatted+=" "),this.formatted+=L[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(Q){const q=((this.options.includePrerelease&&_)|(this.options.loose&&A))+":"+Q,G=r.get(q);if(G)return G;const K=this.options.loose,T=K?h[m.HYPHENRANGELOOSE]:h[m.HYPHENRANGE];Q=Q.replace(T,Ge(this.options.includePrerelease)),c("hyphen replace",Q),Q=Q.replace(h[m.COMPARATORTRIM],g),c("comparator trim",Q),Q=Q.replace(h[m.TILDETRIM],y),c("tilde trim",Q),Q=Q.replace(h[m.CARETTRIM],v),c("caret trim",Q);let U=Q.split(" ").map(ue=>k(ue,this.options)).join(" ").split(/\s+/).map(ue=>Oe(ue,this.options));K&&(U=U.filter(ue=>(c("loose invalid filter",ue,this.options),!!ue.match(h[m.COMPARATORLOOSE])))),c("range list",U);const V=new Map,ee=U.map(ue=>new u(ue,this.options));for(const ue of ee){if(E(ue))return[ue];V.set(ue.value,ue)}V.size>1&&V.has("")&&V.delete("");const W=[...V.values()];return r.set(q,W),W}intersects(Q,L){if(!(Q instanceof e))throw new TypeError("a Range is required");return this.set.some(q=>x(q,L)&&Q.set.some(G=>x(G,L)&&q.every(K=>G.every(T=>K.intersects(T,L)))))}test(Q){if(!Q)return!1;if(typeof Q=="string")try{Q=new f(Q,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if($e(this.set[L],Q,this.options))return!0;return!1}}Vf=e;const n=g1(),r=new n,l=am(),u=$o(),c=Bo(),f=Ht(),{safeRe:h,t:m,comparatorTrimReplace:g,tildeTrimReplace:y,caretTrimReplace:v}=zl(),{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:A}=Io(),E=te=>te.value==="<0.0.0-0",O=te=>te.value==="",x=(te,Q)=>{let L=!0;const q=te.slice();let G=q.pop();for(;L&&q.length;)L=q.every(K=>G.intersects(K,Q)),G=q.pop();return L},k=(te,Q)=>(c("comp",te,Q),te=X(te,Q),c("caret",te),te=ae(te,Q),c("tildes",te),te=F(te,Q),c("xrange",te),te=he(te,Q),c("stars",te),te),M=te=>!te||te.toLowerCase()==="x"||te==="*",ae=(te,Q)=>te.trim().split(/\s+/).map(L=>B(L,Q)).join(" "),B=(te,Q)=>{const L=Q.loose?h[m.TILDELOOSE]:h[m.TILDE];return te.replace(L,(q,G,K,T,U)=>{c("tilde",te,q,G,K,T,U);let V;return M(G)?V="":M(K)?V=`>=${G}.0.0 <${+G+1}.0.0-0`:M(T)?V=`>=${G}.${K}.0 <${G}.${+K+1}.0-0`:U?(c("replaceTilde pr",U),V=`>=${G}.${K}.${T}-${U} <${G}.${+K+1}.0-0`):V=`>=${G}.${K}.${T} <${G}.${+K+1}.0-0`,c("tilde return",V),V})},X=(te,Q)=>te.trim().split(/\s+/).map(L=>ne(L,Q)).join(" "),ne=(te,Q)=>{c("caret",te,Q);const L=Q.loose?h[m.CARETLOOSE]:h[m.CARET],q=Q.includePrerelease?"-0":"";return te.replace(L,(G,K,T,U,V)=>{c("caret",te,G,K,T,U,V);let ee;return M(K)?ee="":M(T)?ee=`>=${K}.0.0${q} <${+K+1}.0.0-0`:M(U)?K==="0"?ee=`>=${K}.${T}.0${q} <${K}.${+T+1}.0-0`:ee=`>=${K}.${T}.0${q} <${+K+1}.0.0-0`:V?(c("replaceCaret pr",V),K==="0"?T==="0"?ee=`>=${K}.${T}.${U}-${V} <${K}.${T}.${+U+1}-0`:ee=`>=${K}.${T}.${U}-${V} <${K}.${+T+1}.0-0`:ee=`>=${K}.${T}.${U}-${V} <${+K+1}.0.0-0`):(c("no pr"),K==="0"?T==="0"?ee=`>=${K}.${T}.${U}${q} <${K}.${T}.${+U+1}-0`:ee=`>=${K}.${T}.${U}${q} <${K}.${+T+1}.0-0`:ee=`>=${K}.${T}.${U} <${+K+1}.0.0-0`),c("caret return",ee),ee})},F=(te,Q)=>(c("replaceXRanges",te,Q),te.split(/\s+/).map(L=>re(L,Q)).join(" ")),re=(te,Q)=>{te=te.trim();const L=Q.loose?h[m.XRANGELOOSE]:h[m.XRANGE];return te.replace(L,(q,G,K,T,U,V)=>{c("xRange",te,q,G,K,T,U,V);const ee=M(K),W=ee||M(T),ue=W||M(U),oe=ue;return G==="="&&oe&&(G=""),V=Q.includePrerelease?"-0":"",ee?G===">"||G==="<"?q="<0.0.0-0":q="*":G&&oe?(W&&(T=0),U=0,G===">"?(G=">=",W?(K=+K+1,T=0,U=0):(T=+T+1,U=0)):G==="<="&&(G="<",W?K=+K+1:T=+T+1),G==="<"&&(V="-0"),q=`${G+K}.${T}.${U}${V}`):W?q=`>=${K}.0.0${V} <${+K+1}.0.0-0`:ue&&(q=`>=${K}.${T}.0${V} <${K}.${+T+1}.0-0`),c("xRange return",q),q})},he=(te,Q)=>(c("replaceStars",te,Q),te.trim().replace(h[m.STAR],"")),Oe=(te,Q)=>(c("replaceGTE0",te,Q),te.trim().replace(h[Q.includePrerelease?m.GTE0PRE:m.GTE0],"")),Ge=te=>(Q,L,q,G,K,T,U,V,ee,W,ue,oe)=>(M(q)?L="":M(G)?L=`>=${q}.0.0${te?"-0":""}`:M(K)?L=`>=${q}.${G}.0${te?"-0":""}`:T?L=`>=${L}`:L=`>=${L}${te?"-0":""}`,M(ee)?V="":M(W)?V=`<${+ee+1}.0.0-0`:M(ue)?V=`<${ee}.${+W+1}.0-0`:oe?V=`<=${ee}.${W}.${ue}-${oe}`:te?V=`<${ee}.${W}.${+ue+1}-0`:V=`<=${V}`,`${L} ${V}`.trim()),$e=(te,Q,L)=>{for(let q=0;q<te.length;q++)if(!te[q].test(Q))return!1;if(Q.prerelease.length&&!L.includePrerelease){for(let q=0;q<te.length;q++)if(c(te[q].semver),te[q].semver!==u.ANY&&te[q].semver.prerelease.length>0){const G=te[q].semver;if(G.major===Q.major&&G.minor===Q.minor&&G.patch===Q.patch)return!0}return!1}return!0};return Vf}var Qf,dv;function $o(){if(dv)return Qf;dv=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(g,y){if(y=n(y),g instanceof e){if(g.loose===!!y.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),c("comparator",g,y),this.options=y,this.loose=!!y.loose,this.parse(g),this.semver===i?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(g){const y=this.options.loose?r[l.COMPARATORLOOSE]:r[l.COMPARATOR],v=g.match(y);if(!v)throw new TypeError(`Invalid comparator: ${g}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new f(v[2],this.options.loose):this.semver=i}toString(){return this.value}test(g){if(c("Comparator.test",g,this.options.loose),this.semver===i||g===i)return!0;if(typeof g=="string")try{g=new f(g,this.options)}catch{return!1}return u(g,this.operator,this.semver,this.options)}intersects(g,y){if(!(g instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new h(g.value,y).test(this.value):g.operator===""?g.value===""?!0:new h(this.value,y).test(g.semver):(y=n(y),y.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||u(this.semver,"<",g.semver,y)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||u(this.semver,">",g.semver,y)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}Qf=e;const n=am(),{safeRe:r,t:l}=zl(),u=N_(),c=Bo(),f=Ht(),h=Fn();return Qf}var Yf,fv;function zo(){if(fv)return Yf;fv=1;const i=Fn();return Yf=(n,r,l)=>{try{r=new i(r,l)}catch{return!1}return r.test(n)},Yf}var Ff,hv;function y1(){if(hv)return Ff;hv=1;const i=Fn();return Ff=(n,r)=>new i(n,r).set.map(l=>l.map(u=>u.value).join(" ").trim().split(" ")),Ff}var Kf,mv;function b1(){if(mv)return Kf;mv=1;const i=Ht(),e=Fn();return Kf=(r,l,u)=>{let c=null,f=null,h=null;try{h=new e(l,u)}catch{return null}return r.forEach(m=>{h.test(m)&&(!c||f.compare(m)===-1)&&(c=m,f=new i(c,u))}),c},Kf}var Xf,pv;function v1(){if(pv)return Xf;pv=1;const i=Ht(),e=Fn();return Xf=(r,l,u)=>{let c=null,f=null,h=null;try{h=new e(l,u)}catch{return null}return r.forEach(m=>{h.test(m)&&(!c||f.compare(m)===1)&&(c=m,f=new i(c,u))}),c},Xf}var Jf,gv;function _1(){if(gv)return Jf;gv=1;const i=Ht(),e=Fn(),n=Po();return Jf=(l,u)=>{l=new e(l,u);let c=new i("0.0.0");if(l.test(c)||(c=new i("0.0.0-0"),l.test(c)))return c;c=null;for(let f=0;f<l.set.length;++f){const h=l.set[f];let m=null;h.forEach(g=>{const y=new i(g.semver.version);switch(g.operator){case">":y.prerelease.length===0?y.patch++:y.prerelease.push(0),y.raw=y.format();case"":case">=":(!m||n(y,m))&&(m=y);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${g.operator}`)}}),m&&(!c||n(c,m))&&(c=m)}return c&&l.test(c)?c:null},Jf}var Wf,yv;function w1(){if(yv)return Wf;yv=1;const i=Fn();return Wf=(n,r)=>{try{return new i(n,r).range||"*"}catch{return null}},Wf}var eh,bv;function um(){if(bv)return eh;bv=1;const i=Ht(),e=$o(),{ANY:n}=e,r=Fn(),l=zo(),u=Po(),c=im(),f=lm(),h=sm();return eh=(g,y,v,_)=>{g=new i(g,_),y=new r(y,_);let A,E,O,x,k;switch(v){case">":A=u,E=f,O=c,x=">",k=">=";break;case"<":A=c,E=h,O=u,x="<",k="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(l(g,y,_))return!1;for(let M=0;M<y.set.length;++M){const ae=y.set[M];let B=null,X=null;if(ae.forEach(ne=>{ne.semver===n&&(ne=new e(">=0.0.0")),B=B||ne,X=X||ne,A(ne.semver,B.semver,_)?B=ne:O(ne.semver,X.semver,_)&&(X=ne)}),B.operator===x||B.operator===k||(!X.operator||X.operator===x)&&E(g,X.semver))return!1;if(X.operator===k&&O(g,X.semver))return!1}return!0},eh}var th,vv;function A1(){if(vv)return th;vv=1;const i=um();return th=(n,r,l)=>i(n,r,">",l),th}var nh,_v;function E1(){if(_v)return nh;_v=1;const i=um();return nh=(n,r,l)=>i(n,r,"<",l),nh}var ah,wv;function S1(){if(wv)return ah;wv=1;const i=Fn();return ah=(n,r,l)=>(n=new i(n,l),r=new i(r,l),n.intersects(r,l)),ah}var rh,Av;function T1(){if(Av)return rh;Av=1;const i=zo(),e=Yn();return rh=(n,r,l)=>{const u=[];let c=null,f=null;const h=n.sort((v,_)=>e(v,_,l));for(const v of h)i(v,r,l)?(f=v,c||(c=v)):(f&&u.push([c,f]),f=null,c=null);c&&u.push([c,null]);const m=[];for(const[v,_]of u)v===_?m.push(v):!_&&v===h[0]?m.push("*"):_?v===h[0]?m.push(`<=${_}`):m.push(`${v} - ${_}`):m.push(`>=${v}`);const g=m.join(" || "),y=typeof r.raw=="string"?r.raw:String(r);return g.length<y.length?g:r},rh}var ih,Ev;function O1(){if(Ev)return ih;Ev=1;const i=Fn(),e=$o(),{ANY:n}=e,r=zo(),l=Yn(),u=(y,v,_={})=>{if(y===v)return!0;y=new i(y,_),v=new i(v,_);let A=!1;e:for(const E of y.set){for(const O of v.set){const x=h(E,O,_);if(A=A||x!==null,x)continue e}if(A)return!1}return!0},c=[new e(">=0.0.0-0")],f=[new e(">=0.0.0")],h=(y,v,_)=>{if(y===v)return!0;if(y.length===1&&y[0].semver===n){if(v.length===1&&v[0].semver===n)return!0;_.includePrerelease?y=c:y=f}if(v.length===1&&v[0].semver===n){if(_.includePrerelease)return!0;v=f}const A=new Set;let E,O;for(const F of y)F.operator===">"||F.operator===">="?E=m(E,F,_):F.operator==="<"||F.operator==="<="?O=g(O,F,_):A.add(F.semver);if(A.size>1)return null;let x;if(E&&O){if(x=l(E.semver,O.semver,_),x>0)return null;if(x===0&&(E.operator!==">="||O.operator!=="<="))return null}for(const F of A){if(E&&!r(F,String(E),_)||O&&!r(F,String(O),_))return null;for(const re of v)if(!r(F,String(re),_))return!1;return!0}let k,M,ae,B,X=O&&!_.includePrerelease&&O.semver.prerelease.length?O.semver:!1,ne=E&&!_.includePrerelease&&E.semver.prerelease.length?E.semver:!1;X&&X.prerelease.length===1&&O.operator==="<"&&X.prerelease[0]===0&&(X=!1);for(const F of v){if(B=B||F.operator===">"||F.operator===">=",ae=ae||F.operator==="<"||F.operator==="<=",E){if(ne&&F.semver.prerelease&&F.semver.prerelease.length&&F.semver.major===ne.major&&F.semver.minor===ne.minor&&F.semver.patch===ne.patch&&(ne=!1),F.operator===">"||F.operator===">="){if(k=m(E,F,_),k===F&&k!==E)return!1}else if(E.operator===">="&&!r(E.semver,String(F),_))return!1}if(O){if(X&&F.semver.prerelease&&F.semver.prerelease.length&&F.semver.major===X.major&&F.semver.minor===X.minor&&F.semver.patch===X.patch&&(X=!1),F.operator==="<"||F.operator==="<="){if(M=g(O,F,_),M===F&&M!==O)return!1}else if(O.operator==="<="&&!r(O.semver,String(F),_))return!1}if(!F.operator&&(O||E)&&x!==0)return!1}return!(E&&ae&&!O&&x!==0||O&&B&&!E&&x!==0||ne||X)},m=(y,v,_)=>{if(!y)return v;const A=l(y.semver,v.semver,_);return A>0?y:A<0||v.operator===">"&&y.operator===">="?v:y},g=(y,v,_)=>{if(!y)return v;const A=l(y.semver,v.semver,_);return A<0?y:A>0||v.operator==="<"&&y.operator==="<="?v:y};return ih=u,ih}var sh,Sv;function R1(){if(Sv)return sh;Sv=1;const i=zl(),e=Io(),n=Ht(),r=R_(),l=as(),u=a1(),c=r1(),f=i1(),h=s1(),m=l1(),g=u1(),y=o1(),v=c1(),_=Yn(),A=d1(),E=f1(),O=rm(),x=h1(),k=m1(),M=Po(),ae=im(),B=C_(),X=x_(),ne=sm(),F=lm(),re=N_(),he=p1(),Oe=$o(),Ge=Fn(),$e=zo(),te=y1(),Q=b1(),L=v1(),q=_1(),G=w1(),K=um(),T=A1(),U=E1(),V=S1(),ee=T1(),W=O1();return sh={parse:l,valid:u,clean:c,inc:f,diff:h,major:m,minor:g,patch:y,prerelease:v,compare:_,rcompare:A,compareLoose:E,compareBuild:O,sort:x,rsort:k,gt:M,lt:ae,eq:B,neq:X,gte:ne,lte:F,cmp:re,coerce:he,Comparator:Oe,Range:Ge,satisfies:$e,toComparators:te,maxSatisfying:Q,minSatisfying:L,minVersion:q,validRange:G,outside:K,gtr:T,ltr:U,intersects:V,simplifyRange:ee,subset:W,SemVer:n,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},sh}R1();function rr(i){if(!i||i.split("/").length>2||i.startsWith("/")||i.endsWith("/")||i.split(":").length>2)throw new Error(`Invalid identifier format: ${i}`);const[e,n]=i.split(":"),r=n||"latest";if(e.includes("/")){const[l,u]=e.split("/",2);if(!l||!u)throw new Error(`Invalid identifier format: ${i}`);return[l,u,r]}else{if(!e)throw new Error(`Invalid identifier format: ${i}`);return["-",e,r]}}class C1 extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function be(i,e,n){let r;if(i.ok){n&&(r=await i.text());return}r=await i.text();const l=`Failed to ${e}. Received status [${i.status}]: ${i.statusText}. Server response: ${r}`;throw i.status===409?new C1(l):new Error(l)}var Tv="[...]",x1={result:"[Circular]"},Ro=[],Gi=[];const N1=new TextEncoder;function D1(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function uo(i){return N1.encode(i)}function cn(i,e,n,r){var l;try{const u=JSON.stringify(i,e,n);return uo(u)}catch(u){if(!((l=u.message)!=null&&l.includes("Converting circular structure to JSON")))return console.warn("[WARNING]: LangSmith received unserializable value."),uo("[Unserializable]");console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof r>"u"&&(r=D1()),Lh(i,"",0,[],void 0,0,r);let c;try{Gi.length===0?c=JSON.stringify(i,e,n):c=JSON.stringify(i,M1(e),n)}catch{return uo("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Ro.length!==0;){const f=Ro.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return uo(c)}}function lh(i,e,n,r){var l=Object.getOwnPropertyDescriptor(r,n);l.get!==void 0?l.configurable?(Object.defineProperty(r,n,{value:i}),Ro.push([r,n,e,l])):Gi.push([e,n,i]):(r[n]=i,Ro.push([r,n,e]))}function Lh(i,e,n,r,l,u,c){u+=1;var f;if(typeof i=="object"&&i!==null){for(f=0;f<r.length;f++)if(r[f]===i){lh(x1,i,e,l);return}if(typeof c.depthLimit<"u"&&u>c.depthLimit){lh(Tv,i,e,l);return}if(typeof c.edgesLimit<"u"&&n+1>c.edgesLimit){lh(Tv,i,e,l);return}if(r.push(i),Array.isArray(i))for(f=0;f<i.length;f++)Lh(i[f],f,f,r,i,u,c);else{var h=Object.keys(i);for(f=0;f<h.length;f++){var m=h[f];Lh(i[m],m,f,r,i,u,c)}}r.pop()}}function M1(i){return i=typeof i<"u"?i:function(e,n){return n},function(e,n){if(Gi.length>0)for(var r=0;r<Gi.length;r++){var l=Gi[r];if(l[1]===e&&l[0]===n){n=l[2],Gi.splice(r,1);break}}return i.call(this,e,n)}}function Ov(i){const e=j_(),n=Z1(),r=i.extra??{},l=r.metadata;return i.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...n,...n.revision_id||i.revision_id?{revision_id:i.revision_id??n.revision_id}:{},...l}},i}const j1=()=>{const i=ur("TRACING_SAMPLING_RATE");if(i===void 0)return;const e=parseFloat(i);if(e<0||e>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},k1=i=>{const n=i.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function L1(i){const e=[];for await(const n of i)e.push(n);return e}function uh(i){if(i!==void 0)return i.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const U1=async i=>{if((i==null?void 0:i.status)===429){const e=parseInt(i.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};class I1{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let n;const r=new Promise(u=>{n=u}),l=cn(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:n,itemPromise:r,size:l}),this.sizeBytes+=l,r}pop(e){var l;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const n=[];let r=0;for(;r+(((l=this.peek())==null?void 0:l.size)??0)<e&&this.items.length>0;){const u=this.items.shift();u&&(n.push(u),r+=u.size,this.sizeBytes-=u.size)}if(n.length===0&&this.items.length>0){const u=this.items.shift();n.push(u),r+=u.size,this.sizeBytes-=u.size}return[n.map(u=>({action:u.action,item:u.payload})),()=>n.forEach(u=>u.itemPromiseResolve())]}}const B1=20971520,P1=2500;class Ml{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new I1}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Yr("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1});const n=Ml.getDefaultClientConfig();if(this.tracingSampleRate=j1(),this.apiUrl=uh(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=uh(e.apiKey??n.apiKey),this.webUrl=uh(e.webUrl??n.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new Nb(e.callerOptions??{}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.batchIngestCaller=new Nb({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:U1}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=ur("API_KEY"),n=ur("ENDPOINT")??"https://api.smith.langchain.com",r=ur("HIDE_INPUTS")==="true",l=ur("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:l}}getHostUrl(){return this.webUrl?this.webUrl:k1(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${D_}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",l=`${this.apiUrl}${e}?${r}`,u=await this.caller.call(fe(),l,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(u,`Failed to fetch ${e}`),u}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let l=Number(n.get("offset"))||0;const u=Number(n.get("limit"))||100;for(;;){n.set("offset",String(l)),n.set("limit",String(u));const c=`${this.apiUrl}${e}?${n}`,f=await this.caller.call(fe(),c,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(f,`Failed to fetch ${e}`);const h=r?r(await f.json()):await f.json();if(h.length===0||(yield h,h.length<u))break;l+=h.length}}async*_getCursorPaginatedList(e,n=null,r="POST",l="runs"){const u=n?{...n}:{};for(;;){const f=await(await this.caller.call(fe(),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(u)})).json();if(!f||!f[l])break;yield f[l];const h=f.cursors;if(!h||!h.next)break;u.cursor=h.next}}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const l of e)this.filteredPostUuids.has(l.id)?this.filteredPostUuids.delete(l.id):r.push(l);return r}else{const r=[];for(const l of e)l.id!==l.trace_id&&!this.filteredPostUuids.has(l.trace_id)||Math.random()<this.tracingSampleRate?r.push(l):this.filteredPostUuids.add(l.id);return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??B1}async _getMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const n=[];for(;this.autoBatchQueue.items.length>0;){const[r,l]=this.autoBatchQueue.pop(e);if(!r.length){l();break}const u=this._processBatch(r,l).catch(console.error);n.push(u)}return Promise.all(n)}async _processBatch(e,n){var r;if(!e.length){n();return}try{const l={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},u=await this._ensureServerInfo();(r=u==null?void 0:u.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(l):await this.batchIngestRuns(l)}finally{n()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=Ov(e.item));const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const e=await fe()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(P1),...this.fetchOptions});return await be(e,"get server info"),e.json()}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch{console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to batch operations and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const n={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const l=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&l.trace_id!==void 0&&l.dotted_order!==void 0){this.processRunOperation({action:"create",item:l}).catch(console.error);return}const u=Ov(l),c=await this.caller.call(fe(),`${this.apiUrl}/runs`,{method:"POST",headers:n,body:cn(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(c,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;let r=(e==null?void 0:e.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[],l=(n==null?void 0:n.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[];if(r.length>0&&l.length>0){const f=r.reduce((m,g)=>(g.id&&(m[g.id]=g),m),{}),h=[];for(const m of l)m.id!==void 0&&f[m.id]?f[m.id]={...f[m.id],...m}:h.push(m);r=Object.values(f),l=h}const u={post:this._filterForSampling(r),patch:this._filterForSampling(l,!0)};if(!u.post.length&&!u.patch.length)return;const c={post:[],patch:[]};for(const f of["post","patch"]){const h=f,m=u[h].reverse();let g=m.pop();for(;g!==void 0;)c[h].push(g),g=m.pop()}(c.post.length>0||c.patch.length>0)&&await this._postBatchIngestRuns(cn(c))}async _postBatchIngestRuns(e){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(fe(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:n,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;const r={};let l=[];for(const g of e??[]){const y=this.prepareRunCreateOrUpdateInputs(g);y.id!==void 0&&y.attachments!==void 0&&(r[y.id]=y.attachments),delete y.attachments,l.push(y)}let u=[];for(const g of n??[])u.push(this.prepareRunCreateOrUpdateInputs(g));if(l.find(g=>g.trace_id===void 0||g.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(u.find(g=>g.trace_id===void 0||g.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(l.length>0&&u.length>0){const g=l.reduce((v,_)=>(_.id&&(v[_.id]=_),v),{}),y=[];for(const v of u)v.id!==void 0&&g[v.id]?g[v.id]={...g[v.id],...v}:y.push(v);l=Object.values(g),u=y}if(l.length===0&&u.length===0)return;const h=[],m=[];for(const[g,y]of[["post",l],["patch",u]])for(const v of y){const{inputs:_,outputs:A,events:E,attachments:O,...x}=v,k={inputs:_,outputs:A,events:E},M=cn(x);m.push({name:`${g}.${x.id}`,payload:new Blob([M],{type:`application/json; length=${M.length}`})});for(const[ae,B]of Object.entries(k)){if(B===void 0)continue;const X=cn(B);m.push({name:`${g}.${x.id}.${ae}`,payload:new Blob([X],{type:`application/json; length=${X.length}`})})}if(x.id!==void 0){const ae=r[x.id];if(ae){delete r[x.id];for(const[B,X]of Object.entries(ae)){let ne,F;if(Array.isArray(X)?[ne,F]=X:(ne=X.mimeType,F=X.data),B.includes(".")){console.warn(`Skipping attachment '${B}' for run ${x.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}m.push({name:`attachment.${x.id}.${B}`,payload:new Blob([F],{type:`${ne}; length=${F.byteLength}`})})}}}h.push(`trace=${x.trace_id},id=${x.id}`)}await this._sendMultipartRequest(m,h.join("; "))}async _sendMultipartRequest(e,n){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),l=[];for(const h of e)l.push(new Blob([`--${r}\r
`])),l.push(new Blob([`Content-Disposition: form-data; name="${h.name}"\r
`,`Content-Type: ${h.payload.type}\r
\r
`])),l.push(h.payload),l.push(new Blob([`\r
`]));l.push(new Blob([`--${r}--\r
`]));const c=await new Blob(l).arrayBuffer(),f=await this.batchIngestCaller.call(fe(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:c,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(f,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${n}`)}}async updateRun(e,n){we(e),n.inputs&&(n.inputs=this.processInputs(n.inputs)),n.outputs&&(n.outputs=this.processOutputs(n.outputs));const r={...n,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(n.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const l={...this.headers,"Content-Type":"application/json"},u=await this.caller.call(fe(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:l,body:cn(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(u,"update run",!0)}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){we(e);let r=await this._get(`/runs/${e}`);return n&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let l;n.session_id?l=n.session_id:r!=null&&r.projectName?l=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?l=r==null?void 0:r.projectId:l=(await this.readProject({projectName:ur("PROJECT")||"default"})).id;const u=await this._getTenantId();return`${this.getHostUrl()}/o/${u}/projects/p/${l}/r/${n.id}?poll=true`}else if(e!==void 0){const l=await this.readRun(e);if(!l.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${l.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const n=await L1(this.listRuns({id:e.child_run_ids})),r={},l={};n.sort((u,c)=>((u==null?void 0:u.dotted_order)??"").localeCompare((c==null?void 0:c.dotted_order)??""));for(const u of n){if(u.parent_run_id===null||u.parent_run_id===void 0)throw new Error(`Child run ${u.id} has no parent`);u.parent_run_id in r||(r[u.parent_run_id]=[]),r[u.parent_run_id].push(u),l[u.id]=u}e.child_runs=r[e.id]||[];for(const u in r)u!==e.id&&(l[u].child_runs=r[u]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:l,traceId:u,referenceExampleId:c,startTime:f,executionOrder:h,isRoot:m,runType:g,error:y,id:v,query:_,filter:A,traceFilter:E,treeFilter:O,limit:x,select:k}=e;let M=[];if(n&&(M=Array.isArray(n)?n:[n]),r){const ne=Array.isArray(r)?r:[r],F=await Promise.all(ne.map(re=>this.readProject({projectName:re}).then(he=>he.id)));M.push(...F)}const ae=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],B={session:M.length?M:null,run_type:g,reference_example:c,query:_,filter:A,trace_filter:E,tree_filter:O,execution_order:h,parent_run:l,start_time:f?f.toISOString():null,error:y,id:v,limit:x,trace:u,select:k||ae,is_root:m};let X=0;for await(const ne of this._getCursorPaginatedList("/runs/query",B))if(x){if(X>=x)break;if(ne.length+X>x){yield*ne.slice(0,x-X);break}X+=ne.length,yield*ne}else yield*ne}async getRunStats({id:e,trace:n,parentRun:r,runType:l,projectNames:u,projectIds:c,referenceExampleIds:f,startTime:h,endTime:m,error:g,query:y,filter:v,traceFilter:_,treeFilter:A,isRoot:E,dataSourceType:O}){let x=c||[];u&&(x=[...c||[],...await Promise.all(u.map(X=>this.readProject({projectName:X}).then(ne=>ne.id)))]);const M=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:l,session:x,reference_example:f,start_time:h,end_time:m,error:g,query:y,filter:v,trace_filter:_,tree_filter:A,is_root:E,data_source_type:O}).filter(([X,ne])=>ne!==void 0));return await(await this.caller.call(fe(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(M),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||Kt()};we(e);const u=await(await this.caller.call(fe(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(u===null||!("share_token"in u))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${u.share_token}/r`}async unshareRun(e){we(e);const n=await this.caller.call(fe(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(n,"unshare run",!0)}async readRunSharedLink(e){we(e);const r=await(await this.caller.call(fe(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const c of n)r.append("id",c);return we(e),await(await this.caller.call(fe(),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),we(e);const l=await(await this.caller.call(fe(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return l.url=`${this.getHostUrl()}/public/${l.share_token}/d`,l}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};we(e);const u=await(await this.caller.call(fe(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return u.url=`${this.getHostUrl()}/public/${u.share_token}/d`,u}async unshareDataset(e){we(e);const n=await this.caller.call(fe(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(n,"unshare dataset",!0)}async readSharedDataset(e){return we(e),await(await this.caller.call(fe(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const l=new URLSearchParams;Object.entries(r).forEach(([f,h])=>{Array.isArray(h)?h.forEach(m=>l.append(f,m)):l.append(f,h)});const u=await this.caller.call(fe(),`${this.apiUrl}/public/${e}/examples?${l.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),c=await u.json();if(!u.ok)throw"detail"in c?new Error(`Failed to list shared examples.
Status: ${u.status}
Message: ${c.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${u.status} ${u.statusText}`);return c.map(f=>({...f,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:l=!1,projectExtra:u=null,referenceDatasetId:c=null}){const f=l?"?upsert=true":"",h=`${this.apiUrl}/sessions${f}`,m=u||{};r&&(m.metadata=r);const g={name:e,extra:m,description:n};c!==null&&(g.reference_dataset_id=c);const y=await this.caller.call(fe(),h,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(y,"create project"),await y.json()}async updateProject(e,{name:n=null,description:r=null,metadata:l=null,projectExtra:u=null,endTime:c=null}){const f=`${this.apiUrl}/sessions/${e}`;let h=u;l&&(h={...h||{},metadata:l});const m={name:n,extra:h,description:r,end_time:c?new Date(c).toISOString():null},g=await this.caller.call(fe(),f,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(g,"update project"),await g.json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const l=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)we(e),r+=`/${e}`;else if(n!==void 0)l.append("name",n);else throw new Error("Must provide projectName or projectId");const u=await this.caller.call(fe(),`${this.apiUrl}${r}?${l}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const c=await u.json();return u.ok?Array.isArray(c)?c.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let l="/sessions";const u=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)we(e),l+=`/${e}`;else if(n!==void 0)u.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&u.append("include_stats",r.toString());const c=await this._get(l,u);let f;if(Array.isArray(c)){if(c.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);f=c[0]}else f=c;return f}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),l=await this._getTenantId();return`${this.getHostUrl()}/o/${l}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),l=await this._getTenantId();return`${this.getHostUrl()}/o/${l}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:l,referenceDatasetName:u,referenceFree:c,metadata:f}={}){const h=new URLSearchParams;if(e!==void 0)for(const m of e)h.append("id",m);if(n!==void 0&&h.append("name",n),r!==void 0&&h.append("name_contains",r),l!==void 0)h.append("reference_dataset",l);else if(u!==void 0){const m=await this.readDataset({datasetName:u});h.append("reference_dataset",m.id)}c!==void 0&&h.append("reference_free",c.toString()),f!==void 0&&h.append("metadata",JSON.stringify(f));for await(const m of this._getPaginated("/sessions",h))yield*m}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,we(r);const l=await this.caller.call(fe(),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(l,`delete session ${r} (${n})`,!0)}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:l,description:u,dataType:c,name:f}){const h=`${this.apiUrl}/datasets/upload`,m=new FormData;m.append("file",e,n),r.forEach(v=>{m.append("input_keys",v)}),l.forEach(v=>{m.append("output_keys",v)}),u&&m.append("description",u),c&&m.append("data_type",c),f&&m.append("name",f);const g=await this.caller.call(fe(),h,{method:"POST",headers:this.headers,body:m,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(g,"upload CSV"),await g.json()}async createDataset(e,{description:n,dataType:r,inputsSchema:l,outputsSchema:u,metadata:c}={}){const f={name:e,description:n,extra:c?{metadata:c}:void 0};r&&(f.data_type=r),l&&(f.inputs_schema_definition=l),u&&(f.outputs_schema_definition=u);const h=await this.caller.call(fe(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(h,"create dataset"),await h.json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const l=new URLSearchParams({limit:"1"});if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)we(e),r+=`/${e}`;else if(n!==void 0)l.append("name",n);else throw new Error("Must provide datasetName or datasetId");const u=await this._get(r,l);let c;if(Array.isArray(u)){if(u.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);c=u[0]}else c=u;return c}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:l}){let u=e;if(u===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(u!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");u===void 0&&(u=(await this.readDataset({datasetName:n})).id);const c=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof l=="string"?l:l.toISOString()});return await this._get(`/datasets/${u}/versions/diff`,c)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(f=>JSON.parse(f))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:l,datasetNameContains:u,metadata:c}={}){const f="/datasets",h=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const m of r)h.append("id",m);l!==void 0&&h.append("name",l),u!==void 0&&h.append("name_contains",u),c!==void 0&&h.append("metadata",JSON.stringify(c));for await(const m of this._getPaginated(f,h))yield*m}async updateDataset(e){const{datasetId:n,datasetName:r,...l}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const u=n??(await this.readDataset({datasetName:r})).id;we(u);const c=await this.caller.call(fe(),`${this.apiUrl}/datasets/${u}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(c,"update dataset"),await c.json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:l,tag:u}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const c=n??(await this.readDataset({datasetName:r})).id;we(c);const f=await this.caller.call(fe(),`${this.apiUrl}/datasets/${c}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof l=="string"?l:l.toISOString(),tag:u}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(f,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",l=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(l=(await this.readDataset({datasetName:n})).id),l!==void 0)we(l),r+=`/${l}`;else throw new Error("Must provide datasetName or datasetId");const u=await this.caller.call(fe(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(u,`delete ${r}`),await u.json()}async indexDataset({datasetId:e,datasetName:n,tag:r}){let l=e;if(!l&&!n)throw new Error("Must provide either datasetName or datasetId");if(l&&n)throw new Error("Must provide either datasetName or datasetId, not both");l||(l=(await this.readDataset({datasetName:n})).id),we(l);const u={tag:r},c=await this.caller.call(fe(),`${this.apiUrl}/datasets/${l}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(c,"index dataset"),await c.json()}async similarExamples(e,n,r,{filter:l}={}){const u={limit:r,inputs:e};l!==void 0&&(u.filter=l),we(n);const c=await this.caller.call(fe(),`${this.apiUrl}/datasets/${n}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(c,"fetch similar examples"),(await c.json()).examples}async createExample(e,n,{datasetId:r,datasetName:l,createdAt:u,exampleId:c,metadata:f,split:h,sourceRunId:m}){let g=r;if(g===void 0&&l===void 0)throw new Error("Must provide either datasetName or datasetId");if(g!==void 0&&l!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");g===void 0&&(g=(await this.readDataset({datasetName:l})).id);const y=u||new Date,v={dataset_id:g,inputs:e,outputs:n,created_at:y==null?void 0:y.toISOString(),id:c,metadata:f,split:h,source_run_id:m},_=await this.caller.call(fe(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(_,"create example"),await _.json()}async createExamples(e){const{inputs:n,outputs:r,metadata:l,sourceRunIds:u,exampleIds:c,datasetId:f,datasetName:h}=e;let m=f;if(m===void 0&&h===void 0)throw new Error("Must provide either datasetName or datasetId");if(m!==void 0&&h!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");m===void 0&&(m=(await this.readDataset({datasetName:h})).id);const g=n.map((_,A)=>({dataset_id:m,inputs:_,outputs:r?r[A]:void 0,metadata:l?l[A]:void 0,split:e.splits?e.splits[A]:void 0,id:c?c[A]:void 0,source_run_id:u?u[A]:void 0})),y=await this.caller.call(fe(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(y,"create examples"),await y.json()}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const l=e.map(c=>Db(c)?Mb(c):c),u=Db(n)?Mb(n):n;return this.createExample({input:l},{output:u},r)}async readExample(e){we(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:l,...u}=r,c=u;return l&&(c.attachments=Object.entries(l).reduce((f,[h,m])=>(f[h.slice(11)]={presigned_url:m.presigned_url,mime_type:m.mime_type},f),{})),c}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:l,splits:u,inlineS3Urls:c,metadata:f,limit:h,offset:m,filter:g,includeAttachments:y}={}){let v;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)v=e;else if(n!==void 0)v=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const _=new URLSearchParams({dataset:v}),A=l?typeof l=="string"?l:l==null?void 0:l.toISOString():void 0;A&&_.append("as_of",A);const E=c??!0;if(_.append("inline_s3_urls",E.toString()),r!==void 0)for(const x of r)_.append("id",x);if(u!==void 0)for(const x of u)_.append("splits",x);if(f!==void 0){const x=JSON.stringify(f);_.append("metadata",x)}h!==void 0&&_.append("limit",h.toString()),m!==void 0&&_.append("offset",m.toString()),g!==void 0&&_.append("filter",g),y===!0&&["attachment_urls","outputs","metadata"].forEach(x=>_.append("select",x));let O=0;for await(const x of this._getPaginated("/examples",_)){for(const k of x){const{attachment_urls:M,...ae}=k,B=ae;M&&(B.attachments=Object.entries(M).reduce((X,[ne,F])=>(X[ne.slice(11)]={presigned_url:F.presigned_url,mime_type:F.mime_type||void 0},X),{})),yield B,O++}if(h!==void 0&&O>=h)break}}async deleteExample(e){we(e);const n=`/examples/${e}`,r=await this.caller.call(fe(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(r,`delete ${n}`),await r.json()}async updateExample(e,n){we(e);const r=await this.caller.call(fe(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(r,"update example"),await r.json()}async updateExamples(e){const n=await this.caller.call(fe(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(n,"update examples"),await n.json()}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:l}){let u;if(e?u=e:u=(await this.readDataset({datasetName:n})).id,we(u),r&&l||!r&&!l)throw new Error("Exactly one of asOf and tag must be specified.");const c=new URLSearchParams;r!==void 0&&c.append("as_of",typeof r=="string"?r:r.toISOString()),l!==void 0&&c.append("tag",l);const f=await this.caller.call(fe(),`${this.apiUrl}/datasets/${u}/version?${c.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(f,"read dataset version"),await f.json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let l;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?l=(await this.readDataset({datasetName:n})).id:l=e,we(l);const u=new URLSearchParams,c=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return c&&u.append("as_of",c),await this._get(`/datasets/${l}/splits`,u)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:l,remove:u=!1}){let c;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?c=(await this.readDataset({datasetName:n})).id:c=e,we(c);const f={split_name:r,examples:l.map(m=>(we(m),m)),remove:u},h=await this.caller.call(fe(),`${this.apiUrl}/datasets/${c}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(h,"update dataset splits",!0)}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:l,referenceExample:u}={loadChildRuns:!1}){O_("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let c;if(typeof e=="string")c=await this.readRun(e,{loadChildRuns:l});else if(typeof e=="object"&&"id"in e)c=e;else throw new Error(`Invalid run type: ${typeof e}`);c.reference_example_id!==null&&c.reference_example_id!==void 0&&(u=await this.readExample(c.reference_example_id));const f=await n.evaluateRun(c,u),[h,m]=await this._logEvaluationFeedback(f,c,r);return m[0]}async createFeedback(e,n,{score:r,value:l,correction:u,comment:c,sourceInfo:f,feedbackSourceType:h="api",sourceRunId:m,feedbackId:g,feedbackConfig:y,projectId:v,comparativeExperimentId:_}){var k;if(!e&&!v)throw new Error("One of runId or projectId must be provided");if(e&&v)throw new Error("Only one of runId or projectId can be provided");const A={type:h??"api",metadata:f??{}};m!==void 0&&(A==null?void 0:A.metadata)!==void 0&&!A.metadata.__run&&(A.metadata.__run={run_id:m}),(A==null?void 0:A.metadata)!==void 0&&((k=A.metadata.__run)==null?void 0:k.run_id)!==void 0&&we(A.metadata.__run.run_id);const E={id:g??Kt(),run_id:e,key:n,score:r,value:l,correction:u,comment:c,feedback_source:A,comparative_experiment_id:_,feedbackConfig:y,session_id:v},O=`${this.apiUrl}/feedback`,x=await this.caller.call(fe(),O,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(E),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(x,"create feedback",!0),E}async updateFeedback(e,{score:n,value:r,correction:l,comment:u}){const c={};n!=null&&(c.score=n),r!=null&&(c.value=r),l!=null&&(c.correction=l),u!=null&&(c.comment=u),we(e);const f=await this.caller.call(fe(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(f,"update feedback",!0)}async readFeedback(e){we(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){we(e);const n=`/feedback/${e}`,r=await this.caller.call(fe(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(r,`delete ${n}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const l=new URLSearchParams;if(e&&l.append("run",e.join(",")),n)for(const u of n)l.append("key",u);if(r)for(const u of r)l.append("source",u);for await(const u of this._getPaginated("/feedback",l))yield*u}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:l}={}){const u={run_id:e,feedback_key:n,feedback_config:l};return r?typeof r=="string"?u.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(u.expires_in=r):u.expires_in={hours:3},await(await this.caller.call(fe(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:l,description:u,metadata:c,id:f}){var g;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const h={id:f,name:e,experiment_ids:n,reference_dataset_id:r,description:u,created_at:(g=l??new Date)==null?void 0:g.toISOString(),extra:{}};return c&&(h.extra.metadata=c),await(await this.caller.call(fe(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){we(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const l=this._selectEvalResults(e),u=[];for(const c of l){let f=r||{};c.evaluatorInfo&&(f={...c.evaluatorInfo,...f});let h=null;c.targetRunId?h=c.targetRunId:n&&(h=n.id),u.push(await this.createFeedback(h,c.key,{score:c.score,value:c.value,comment:c.comment,correction:c.correction,sourceInfo:f,sourceRunId:c.sourceRunId,feedbackConfig:c.feedbackConfig,feedbackSourceType:"model"}))}return[l,u]}async logEvaluationFeedback(e,n,r){const[l]=await this._logEvaluationFeedback(e,n,r);return l}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:l,limit:u}=e,c=new URLSearchParams;n&&n.forEach((h,m)=>{we(h,`queueIds[${m}]`),c.append("ids",h)}),r&&c.append("name",r),l&&c.append("name_contains",l),c.append("limit",(u!==void 0?Math.min(u,100):100).toString());let f=0;for await(const h of this._getPaginated("/annotation-queues",c))if(yield*h,f++,u!==void 0&&f>=u)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:l}=e,u={name:n,description:r,id:l||Kt()},c=await this.caller.call(fe(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(u).filter(([h,m])=>m!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(c,"create annotation queue"),await c.json()}async readAnnotationQueue(e){const n=await this.listAnnotationQueues({queueIds:[e]}).next();if(n.done)throw new Error(`Annotation queue with ID ${e} not found`);return n.value}async updateAnnotationQueue(e,n){const{name:r,description:l}=n,u=await this.caller.call(fe(),`${this.apiUrl}/annotation-queues/${we(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:l}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(u,"update annotation queue")}async deleteAnnotationQueue(e){const n=await this.caller.call(fe(),`${this.apiUrl}/annotation-queues/${we(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(n,"delete annotation queue")}async addRunsToAnnotationQueue(e,n){const r=await this.caller.call(fe(),`${this.apiUrl}/annotation-queues/${we(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n.map((l,u)=>we(l,`runIds[${u}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${we(e,"queueId")}/run`,l=await this.caller.call(fe(),`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(l,"get run from annotation queue"),await l.json()}async deleteRunFromAnnotationQueue(e,n){const r=await this.caller.call(fe(),`${this.apiUrl}/annotation-queues/${we(e,"queueId")}/runs/${we(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const n=await this.caller.call(fe(),`${this.apiUrl}/annotation-queues/${we(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(n,"get size from annotation queue"),await n.json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const n=await this.caller.call(fe(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();if(!n.ok){const l=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),u=new Error(`Error ${n.status}: ${n.statusText}
${l}`);throw u.statusCode=n.status,u}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,l,u]=rr(e),c=await this.caller.call(fe(),`${this.apiUrl}/likes/${r}/${l}`,{method:"POST",body:JSON.stringify({like:n}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(c,`${n?"like":"unlike"} prompt`),await c.json()}async _getPromptUrl(e){const[n,r,l]=rr(e);if(await this._currentTenantIsOwner(n)){const u=await this._getSettings();return l!=="latest"?`${this.getHostUrl()}/prompts/${r}/${l.substring(0,8)}?organizationId=${u.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${u.id}`}else return l!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${l.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,l=>l.repos))yield*r}async getPrompt(e){const[n,r,l]=rr(e),u=await this.caller.call(fe(),`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(u.status===404)return null;await be(u,"get prompt");const c=await u.json();return c.repo?c.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[l,u,c]=rr(e);if(!await this._currentTenantIsOwner(l))throw await this._ownerConflictError("create a prompt",l);const f={repo_handle:u,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},h=await this.caller.call(fe(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(h,"create prompt");const{repo:m}=await h.json();return m}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[l,u,c]=rr(e),f=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${l}/${u}`):r==null?void 0:r.parentCommitHash,h={manifest:JSON.parse(JSON.stringify(n)),parent_commit:f},m=await this.caller.call(fe(),`${this.apiUrl}/commits/${l}/${u}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(m,"create commit");const g=await m.json();return this._getPromptUrl(`${l}/${u}${g.commit_hash?`:${g.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const r=new FormData;for(const c of n){const f=c.id,h={...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},m=cn(h),g=new Blob([m],{type:"application/json"});if(r.append(f,g),c.inputs){const y=cn(c.inputs),v=new Blob([y],{type:"application/json"});r.append(`${f}.inputs`,v)}if(c.outputs){const y=cn(c.outputs),v=new Blob([y],{type:"application/json"});r.append(`${f}.outputs`,v)}if(c.attachments)for(const[y,v]of Object.entries(c.attachments)){let _,A;Array.isArray(v)?[_,A]=v:(_=v.mimeType,A=v.data);const E=new Blob([A],{type:`${_}; length=${A.byteLength}`});r.append(`${f}.attachment.${y}`,E)}if(c.attachments_operations){const y=cn(c.attachments_operations),v=new Blob([y],{type:"application/json"});r.append(`${f}.attachments_operations`,v)}}return await(await this.caller.call(fe(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(e,n=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const r=new FormData;for(const c of n){const f=(c.id??Kt()).toString(),h={created_at:c.created_at,...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},m=cn(h),g=new Blob([m],{type:"application/json"});r.append(f,g);const y=cn(c.inputs),v=new Blob([y],{type:"application/json"});if(r.append(`${f}.inputs`,v),c.outputs){const _=cn(c.outputs),A=new Blob([_],{type:"application/json"});r.append(`${f}.outputs`,A)}if(c.attachments)for(const[_,A]of Object.entries(c.attachments)){let E,O;Array.isArray(A)?[E,O]=A:(E=A.mimeType,O=A.data);const x=new Blob([O],{type:`${E}; length=${O.byteLength}`});r.append(`${f}.attachment.${_}`,x)}}return await(await this.caller.call(fe(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,l]=rr(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const u={};if((n==null?void 0:n.description)!==void 0&&(u.description=n.description),(n==null?void 0:n.readme)!==void 0&&(u.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(u.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(u.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(u.is_archived=n.isArchived),Object.keys(u).length===0)throw new Error("No valid update options provided");const c=await this.caller.call(fe(),`${this.apiUrl}/repos/${r}/${l}`,{method:"PATCH",body:JSON.stringify(u),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await be(c,"update prompt"),c.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,l]=rr(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return await(await this.caller.call(fe(),`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,n){const[r,l,u]=rr(e),c=await this.caller.call(fe(),`${this.apiUrl}/commits/${r}/${l}/${u}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await be(c,"pull prompt commit");const f=await c.json();return{owner:r,repo:l,commit_hash:f.commit_hash,manifest:f.manifest,examples:f.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(l=>l!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:l}=n,[u,c]=this.parseTokenOrUrl(e,r),f=new Ml({apiUrl:u,apiKey:"placeholder"}),h=await f.readSharedDataset(c),m=l||h.name;try{if(await this.hasDataset({datasetId:m})){console.log(`Dataset ${m} already exists in your tenant. Skipping.`);return}}catch{}const g=await f.listSharedExamples(c),y=await this.createDataset(m,{description:h.description,dataType:h.data_type||"kv",inputsSchema:h.inputs_schema_definition??void 0,outputsSchema:h.outputs_schema_definition??void 0});try{await this.createExamples({inputs:g.map(v=>v.inputs),outputs:g.flatMap(v=>v.outputs?[v.outputs]:[]),datasetId:y.id})}catch(v){throw console.error(`An error occurred while creating dataset ${m}. You should delete it manually.`),v}}parseTokenOrUrl(e,n,r=2,l="dataset"){try{return we(e),[n,e]}catch{}try{const c=new URL(e).pathname.split("/").filter(f=>f!=="");if(c.length>=r){const f=c[c.length-r];return[n,f]}else throw new Error(`Invalid public ${l} URL: ${e}`)}catch{throw new Error(`Invalid public ${l} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}const D_="0.3.11";var ml={};let Ca;const $1=()=>typeof window<"u"&&typeof window.document<"u",z1=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",H1=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),M_=()=>typeof Deno<"u",q1=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!M_(),G1=()=>Ca||($1()?Ca="browser":q1()?Ca="node":z1()?Ca="webworker":H1()?Ca="jsdom":M_()?Ca="deno":Ca="other",Ca);let oh;function j_(){if(oh===void 0){const i=G1(),e=Q1();oh={library:"langsmith",runtime:i,sdk:"langsmith-js",sdk_version:D_,...e}}return oh}function Z1(){const i=V1()||{},e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,l]of Object.entries(i))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof l=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=l:e[r]=l);return e}function V1(){try{return typeof process<"u"&&ml?Object.entries(ml).reduce((i,[e,n])=>(i[e]=String(n),i),{}):void 0}catch{return}}function Yr(i){try{return typeof process<"u"?ml==null?void 0:ml[i]:void 0}catch{return}}function ur(i){return Yr(`LANGSMITH_${i}`)||Yr(`LANGCHAIN_${i}`)}let ch;function Q1(){if(ch!==void 0)return ch;const i=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of i){const r=Yr(n);r!==void 0&&(e[n]=r)}return ch=e,e}const Y1=i=>!!["TRACING_V2","TRACING"].find(n=>ur(n)==="true"),dh=Symbol.for("lc:context_variables");function F1(i){return i.replace(/[-:.]/g,"")}function K1(i,e,n=1){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return F1(`${new Date(i).toISOString().slice(0,-1)}${r}Z`)+e}class Co{constructor(e,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n}static fromHeader(e){const n=e.split(",");let r={},l=[];for(const u of n){const[c,f]=u.split("="),h=decodeURIComponent(f);c==="langsmith-metadata"?r=JSON.parse(h):c==="langsmith-tags"&&(l=h.split(","))}return new Co(r,l)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class dn{constructor(e){var f;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),k_(e)){Object.assign(this,{...e});return}const n=dn.getDefaultConfig(),{metadata:r,...l}=e,u=l.client??dn.getSharedClient(),c={...r,...(f=l==null?void 0:l.extra)==null?void 0:f.metadata};if(l.extra={...l.extra,metadata:c},Object.assign(this,{...n,...l,client:u}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const h=K1(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+h:this.dotted_order=h}}static getDefaultConfig(){return{id:Kt(),run_type:"chain",project_name:ur("PROJECT")??Yr("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:Yr("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Yr("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return dn.sharedClient||(dn.sharedClient=new Ml),dn.sharedClient}createChild(e){var h,m,g,y,v,_;const n=this.child_execution_order+1,r=new dn({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});dh in this&&(r[dh]=this[dh]);const l=Symbol.for("lc:child_config"),u=((h=e.extra)==null?void 0:h[l])??this.extra[l];if(J1(u)){const A={...u},E=X1(A.callbacks)?(g=(m=A.callbacks).copy)==null?void 0:g.call(m):void 0;E&&(Object.assign(E,{_parentRunId:r.id}),(_=(v=(y=E.handlers)==null?void 0:y.find(L_))==null?void 0:v.updateFromRunTree)==null||_.call(v,r),A.callbacks=E),r.extra[l]=A}const c=new Set;let f=this;for(;f!=null&&!c.has(f.id);)c.add(f.id),f.child_execution_order=Math.max(f.child_execution_order,n),f=f.parent_run;return this.child_runs.push(r),r}async end(e,n,r=Date.now(),l){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,l&&Object.keys(l).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...l}}:{metadata:l})}_convertToCreate(e,n,r=!0){var h;const l=e.extra??{};if(l.runtime||(l.runtime={}),n)for(const[m,g]of Object.entries(n))l.runtime[m]||(l.runtime[m]=g);let u,c;return r?(c=(h=e.parent_run)==null?void 0:h.id,u=[]):(u=e.child_runs.map(m=>this._convertToCreate(m,n,r)),c=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:l,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:u,parent_run_id:c,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const n=j_(),r=await this._convertToCreate(this,n,!0);if(await this.client.createRun(r),!e){O_("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const l of this.child_runs)await l.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(){var e;try{const n={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments};await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var m,g,y,v;const r=e==null?void 0:e.callbacks;let l,u,c,f=Y1();if(r){const _=((m=r==null?void 0:r.getParentRunId)==null?void 0:m.call(r))??"",A=(g=r==null?void 0:r.handlers)==null?void 0:g.find(E=>(E==null?void 0:E.name)=="langchain_tracer");l=(y=A==null?void 0:A.getRun)==null?void 0:y.call(A,_),u=A==null?void 0:A.projectName,c=A==null?void 0:A.client,f=f||!!A}return l?new dn({name:l.name,id:l.id,trace_id:l.trace_id,dotted_order:l.dotted_order,client:c,tracingEnabled:f,project_name:u,tags:[...new Set(((l==null?void 0:l.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(v=l==null?void 0:l.extra)==null?void 0:v.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new dn({...n,client:c,tracingEnabled:f,project_name:u})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var m;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,l=r["langsmith-trace"];if(!l||typeof l!="string")return;const u=l.trim(),c=u.split(".").map(g=>{const[y,v]=g.split("Z");return{strTime:y,time:Date.parse(y+"Z"),uuid:v}}),f=c[0].uuid,h={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(m=c.at(-1))==null?void 0:m.uuid,trace_id:f,dotted_order:u};if(r.baggage&&typeof r.baggage=="string"){const g=Co.fromHeader(r.baggage);h.metadata=g.metadata,h.tags=g.tags}return new dn(h)}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new Co((r=this.extra)==null?void 0:r.metadata,this.tags).toHeader()};if(e)for(const[l,u]of Object.entries(n))e.set(l,u);return n}}Object.defineProperty(dn,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function k_(i){return i!==void 0&&typeof i.createChild=="function"&&typeof i.postRun=="function"}function L_(i){return typeof i=="object"&&i!=null&&typeof i.name=="string"&&i.name==="langchain_tracer"}function Rv(i){return Array.isArray(i)&&i.some(e=>L_(e))}function X1(i){return typeof i=="object"&&i!=null&&Array.isArray(i.handlers)}function J1(i){var e;return i!==void 0&&typeof i.callbacks=="object"&&(Rv((e=i.callbacks)==null?void 0:e.handlers)||Rv(i.callbacks))}let W1=class{getStore(){}run(e,n){return n()}};const fh=Symbol.for("ls:tracing_async_local_storage"),eO=new W1;let tO=class{getInstance(){return globalThis[fh]??eO}initializeGlobalInstance(e){globalThis[fh]===void 0&&(globalThis[fh]=e)}};const nO=new tO,aO=()=>{const i=nO.getInstance().getStore();if(!k_(i))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join(`
`));return i};function om(i){return typeof i=="function"&&"langsmith:traceable"in i}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const rO=Object.prototype.hasOwnProperty;function iO(i,e){return rO.call(i,e)}function sO(i){if(Array.isArray(i)){const n=new Array(i.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(i);let e=[];for(let n in i)iO(i,n)&&e.push(n);return e}function Wi(i){switch(typeof i){case"object":return JSON.parse(JSON.stringify(i));case"undefined":return null;default:return i}}function Uh(i){let e=0;const n=i.length;let r;for(;e<n;){if(r=i.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function lO(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}function Ih(i){if(i===void 0)return!0;if(i){if(Array.isArray(i)){for(let n=0,r=i.length;n<r;n++)if(Ih(i[n]))return!0}else if(typeof i=="object"){const n=sO(i),r=n.length;for(var e=0;e<r;e++)if(Ih(i[n[e]]))return!0}}return!1}function Cv(i,e){const n=[i];for(const r in e){const l=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof l<"u"&&n.push(`${r}: ${l}`)}return n.join(`
`)}class uO extends Error{constructor(e,n,r,l,u){super(Cv(e,{name:n,index:r,operation:l,tree:u})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.setPrototypeOf(this,new.target.prototype),this.message=Cv(e,{name:n,index:r,operation:l,tree:u})}}const ut=uO,Zi={add:function(i,e,n){return i[e]=this.value,{newDocument:n}},remove:function(i,e,n){var r=i[e];return delete i[e],{newDocument:n,removed:r}},replace:function(i,e,n){var r=i[e];return i[e]=this.value,{newDocument:n,removed:r}},move:function(i,e,n){let r=Bh(n,this.path);r&&(r=Wi(r));const l=pl(n,{op:"remove",path:this.from}).removed;return pl(n,{op:"add",path:this.path,value:l}),{newDocument:n,removed:r}},copy:function(i,e,n){const r=Bh(n,this.from);return pl(n,{op:"add",path:this.path,value:Wi(r)}),{newDocument:n}},test:function(i,e,n){return{newDocument:n,test:No(i[e],this.value)}},_get:function(i,e,n){return this.value=i[e],{newDocument:n}}};var oO={add:function(i,e,n){return Uh(e)?i.splice(e,0,this.value):i[e]=this.value,{newDocument:n,index:e}},remove:function(i,e,n){var r=i.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(i,e,n){var r=i[e];return i[e]=this.value,{newDocument:n,removed:r}},move:Zi.move,copy:Zi.copy,test:Zi.test,_get:Zi._get};function Bh(i,e){if(e=="")return i;var n={op:"_get",path:e};return pl(i,n),n.value}function pl(i,e,n=!1,r=!0,l=!0,u=0){if(n&&(typeof n=="function"?n(e,0,i,e.path):Ph(e,0)),e.path===""){let c={newDocument:i};if(e.op==="add")return c.newDocument=e.value,c;if(e.op==="replace")return c.newDocument=e.value,c.removed=i,c;if(e.op==="move"||e.op==="copy")return c.newDocument=Bh(i,e.from),e.op==="move"&&(c.removed=i),c;if(e.op==="test"){if(c.test=No(i,e.value),c.test===!1)throw new ut("Test operation failed","TEST_OPERATION_FAILED",u,e,i);return c.newDocument=i,c}else{if(e.op==="remove")return c.removed=i,c.newDocument=null,c;if(e.op==="_get")return e.value=i,c;if(n)throw new ut("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",u,e,i);return c}}else{r||(i=Wi(i));const f=(e.path||"").split("/");let h=i,m=1,g=f.length,y,v,_;for(typeof n=="function"?_=n:_=Ph;;){if(v=f[m],v&&v.indexOf("~")!=-1&&(v=lO(v)),l&&(v=="__proto__"||v=="prototype"&&m>0&&f[m-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&y===void 0&&(h[v]===void 0?y=f.slice(0,m).join("/"):m==g-1&&(y=e.path),y!==void 0&&_(e,0,i,y)),m++,Array.isArray(h)){if(v==="-")v=h.length;else{if(n&&!Uh(v))throw new ut("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",u,e,i);Uh(v)&&(v=~~v)}if(m>=g){if(n&&e.op==="add"&&v>h.length)throw new ut("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",u,e,i);const A=oO[e.op].call(e,h,v,i);if(A.test===!1)throw new ut("Test operation failed","TEST_OPERATION_FAILED",u,e,i);return A}}else if(m>=g){const A=Zi[e.op].call(e,h,v,i);if(A.test===!1)throw new ut("Test operation failed","TEST_OPERATION_FAILED",u,e,i);return A}if(h=h[v],n&&m<g&&(!h||typeof h!="object"))throw new ut("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",u,e,i)}}}function xo(i,e,n,r=!0,l=!0){if(n&&!Array.isArray(e))throw new ut("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(i=Wi(i));const u=new Array(e.length);for(let c=0,f=e.length;c<f;c++)u[c]=pl(i,e[c],n,!0,l,c),i=u[c].newDocument;return u.newDocument=i,u}function Ph(i,e,n,r){if(typeof i!="object"||i===null||Array.isArray(i))throw new ut("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,i,n);if(Zi[i.op]){if(typeof i.path!="string")throw new ut("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,i,n);if(i.path.indexOf("/")!==0&&i.path.length>0)throw new ut('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,i,n);if((i.op==="move"||i.op==="copy")&&typeof i.from!="string")throw new ut("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,i,n);if((i.op==="add"||i.op==="replace"||i.op==="test")&&i.value===void 0)throw new ut("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,i,n);if((i.op==="add"||i.op==="replace"||i.op==="test")&&Ih(i.value))throw new ut("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,i,n);if(n){if(i.op=="add"){var l=i.path.split("/").length,u=r.split("/").length;if(l!==u+1&&l!==u)throw new ut("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,i,n)}else if(i.op==="replace"||i.op==="remove"||i.op==="_get"){if(i.path!==r)throw new ut("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,i,n)}else if(i.op==="move"||i.op==="copy"){var c={op:"_get",path:i.from,value:void 0},f=cO([c],n);if(f&&f.name==="OPERATION_PATH_UNRESOLVABLE")throw new ut("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,i,n)}}}else throw new ut("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,i,n)}function cO(i,e,n){try{if(!Array.isArray(i))throw new ut("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)xo(Wi(e),Wi(i),n||!0);else{n=n||Ph;for(var r=0;r<i.length;r++)n(i[r],r,e,void 0)}}catch(l){if(l instanceof ut)return l;throw l}}function No(i,e){if(i===e)return!0;if(i&&e&&typeof i=="object"&&typeof e=="object"){var n=Array.isArray(i),r=Array.isArray(e),l,u,c;if(n&&r){if(u=i.length,u!=e.length)return!1;for(l=u;l--!==0;)if(!No(i[l],e[l]))return!1;return!0}if(n!=r)return!1;var f=Object.keys(i);if(u=f.length,u!==Object.keys(e).length)return!1;for(l=u;l--!==0;)if(!e.hasOwnProperty(f[l]))return!1;for(l=u;l--!==0;)if(c=f[l],!No(i[c],e[c]))return!1;return!0}return i!==i&&e!==e}var hh={};const dO=()=>typeof window<"u"&&typeof window.document<"u",fO=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",hO=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),cm=()=>typeof Deno<"u",mO=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!cm(),pO=()=>{let i;return dO()?i="browser":mO()?i="node":fO()?i="webworker":hO()?i="jsdom":cm()?i="deno":i="other",i};let mh;async function gO(){return mh===void 0&&(mh={library:"langchain-js",runtime:pO()}),mh}function or(i){try{return typeof process<"u"?hh==null?void 0:hh[i]:cm()?Deno==null?void 0:Deno.env.get(i):void 0}catch{return}}class yO{}function bO(i){return"lc_prefer_streaming"in i&&i.lc_prefer_streaming}class Hl extends yO{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,m_(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:or("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return dr.prototype.toJSON.call(this)}toJSONNotImplemented(){return dr.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends Hl{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Kt()}),Object.assign(this,e)}}return new n}}const vO=i=>{const e=i;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function ph(i,e){return i&&!Array.isArray(i)&&typeof i=="object"?i:{[e]:i}}function _O(i){return i.replace(/[-:.]/g,"")}function wO(i,e,n){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return _O(`${new Date(i).toISOString().slice(0,-1)}${r}Z`)+e}function rl(i){return typeof i._addRunToRunMap=="function"}class ql extends Hl{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const n=wO(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const l=this.runMap.get(r.parent_run_id);l&&(this._addChildRun(l,r),l.child_execution_order=Math.max(l.child_execution_order,r.child_execution_order),r.trace_id=l.trace_id,l.dotted_order!==void 0&&(r.dotted_order=[l.dotted_order,n].join(".")))}else r.trace_id=r.id,r.dotted_order=n;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const n=e!==void 0&&this.runMap.get(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,l,u,c,f,h){const m=this._getExecutionOrder(l),g=Date.now(),y=f?{...u,metadata:f}:u,v={id:r,name:h??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:{prompts:n},execution_order:m,child_runs:[],child_execution_order:m,run_type:"llm",extra:y??{},tags:c||[]};return this._addRunToRunMap(v)}async handleLLMStart(e,n,r,l,u,c,f,h){var g,y;const m=this.runMap.get(r)??this._createRunForLLMStart(e,n,r,l,u,c,f,h);return await((g=this.onRunCreate)==null?void 0:g.call(this,m)),await((y=this.onLLMStart)==null?void 0:y.call(this,m)),m}_createRunForChatModelStart(e,n,r,l,u,c,f,h){const m=this._getExecutionOrder(l),g=Date.now(),y=f?{...u,metadata:f}:u,v={id:r,name:h??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:{messages:n},execution_order:m,child_runs:[],child_execution_order:m,run_type:"llm",extra:y??{},tags:c||[]};return this._addRunToRunMap(v)}async handleChatModelStart(e,n,r,l,u,c,f,h){var g,y;const m=this.runMap.get(r)??this._createRunForChatModelStart(e,n,r,l,u,c,f,h);return await((g=this.onRunCreate)==null?void 0:g.call(this,m)),await((y=this.onLLMStart)==null?void 0:y.call(this,m)),m}async handleLLMEnd(e,n,r,l,u){var f;const c=this.runMap.get(n);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.outputs=e,c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...u},await((f=this.onLLMEnd)==null?void 0:f.call(this,c)),await this._endTrace(c),c}async handleLLMError(e,n,r,l,u){var f;const c=this.runMap.get(n);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...u},await((f=this.onLLMError)==null?void 0:f.call(this,c)),await this._endTrace(c),c}_createRunForChainStart(e,n,r,l,u,c,f,h){const m=this._getExecutionOrder(l),g=Date.now(),y={id:r,name:h??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:n,execution_order:m,child_execution_order:m,run_type:f??"chain",child_runs:[],extra:c?{metadata:c}:{},tags:u||[]};return this._addRunToRunMap(y)}async handleChainStart(e,n,r,l,u,c,f,h){var g,y;const m=this.runMap.get(r)??this._createRunForChainStart(e,n,r,l,u,c,f,h);return await((g=this.onRunCreate)==null?void 0:g.call(this,m)),await((y=this.onChainStart)==null?void 0:y.call(this,m)),m}async handleChainEnd(e,n,r,l,u){var f;const c=this.runMap.get(n);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.outputs=ph(e,"output"),c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),(u==null?void 0:u.inputs)!==void 0&&(c.inputs=ph(u.inputs,"input")),await((f=this.onChainEnd)==null?void 0:f.call(this,c)),await this._endTrace(c),c}async handleChainError(e,n,r,l,u){var f;const c=this.runMap.get(n);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),(u==null?void 0:u.inputs)!==void 0&&(c.inputs=ph(u.inputs,"input")),await((f=this.onChainError)==null?void 0:f.call(this,c)),await this._endTrace(c),c}_createRunForToolStart(e,n,r,l,u,c,f){const h=this._getExecutionOrder(l),m=Date.now(),g={id:r,name:f??e.id[e.id.length-1],parent_run_id:l,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{input:n},execution_order:h,child_execution_order:h,run_type:"tool",child_runs:[],extra:c?{metadata:c}:{},tags:u||[]};return this._addRunToRunMap(g)}async handleToolStart(e,n,r,l,u,c,f){var m,g;const h=this.runMap.get(r)??this._createRunForToolStart(e,n,r,l,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((g=this.onToolStart)==null?void 0:g.call(this,h)),h}async handleToolEnd(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((l=this.onToolEnd)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((l=this.onToolError)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var u;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const l=r;l.actions=l.actions||[],l.actions.push(e),l.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((u=this.onAgentAction)==null?void 0:u.call(this,r))}async handleAgentEnd(e,n){var l;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((l=this.onAgentEnd)==null?void 0:l.call(this,r)))}_createRunForRetrieverStart(e,n,r,l,u,c,f){const h=this._getExecutionOrder(l),m=Date.now(),g={id:r,name:f??e.id[e.id.length-1],parent_run_id:l,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{query:n},execution_order:h,child_execution_order:h,run_type:"retriever",child_runs:[],extra:c?{metadata:c}:{},tags:u||[]};return this._addRunToRunMap(g)}async handleRetrieverStart(e,n,r,l,u,c,f){var m,g;const h=this.runMap.get(r)??this._createRunForRetrieverStart(e,n,r,l,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((g=this.onRetrieverStart)==null?void 0:g.call(this,h)),h}async handleRetrieverEnd(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((l=this.onRetrieverEnd)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((l=this.onRetrieverError)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var l;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((l=this.onText)==null?void 0:l.call(this,r)))}async handleLLMNewToken(e,n,r,l,u,c){var h;const f=this.runMap.get(r);if(!f||(f==null?void 0:f.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return f.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:c==null?void 0:c.chunk}}),await((h=this.onLLMNewToken)==null?void 0:h.call(this,f,e,{chunk:c==null?void 0:c.chunk})),f}}var ho={exports:{}};ho.exports;var xv;function AO(){return xv||(xv=1,function(i){const n=(u=0)=>c=>`\x1B[${38+u};5;${c}m`,r=(u=0)=>(c,f,h)=>`\x1B[${38+u};2;${c};${f};${h}m`;function l(){const u=new Map,c={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};c.color.gray=c.color.blackBright,c.bgColor.bgGray=c.bgColor.bgBlackBright,c.color.grey=c.color.blackBright,c.bgColor.bgGrey=c.bgColor.bgBlackBright;for(const[f,h]of Object.entries(c)){for(const[m,g]of Object.entries(h))c[m]={open:`\x1B[${g[0]}m`,close:`\x1B[${g[1]}m`},h[m]=c[m],u.set(g[0],g[1]);Object.defineProperty(c,f,{value:h,enumerable:!1})}return Object.defineProperty(c,"codes",{value:u,enumerable:!1}),c.color.close="\x1B[39m",c.bgColor.close="\x1B[49m",c.color.ansi256=n(),c.color.ansi16m=r(),c.bgColor.ansi256=n(10),c.bgColor.ansi16m=r(10),Object.defineProperties(c,{rgbToAnsi256:{value:(f,h,m)=>f===h&&h===m?f<8?16:f>248?231:Math.round((f-8)/247*24)+232:16+36*Math.round(f/255*5)+6*Math.round(h/255*5)+Math.round(m/255*5),enumerable:!1},hexToRgb:{value:f=>{const h=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(f.toString(16));if(!h)return[0,0,0];let{colorString:m}=h.groups;m.length===3&&(m=m.split("").map(y=>y+y).join(""));const g=Number.parseInt(m,16);return[g>>16&255,g>>8&255,g&255]},enumerable:!1},hexToAnsi256:{value:f=>c.rgbToAnsi256(...c.hexToRgb(f)),enumerable:!1}}),c}Object.defineProperty(i,"exports",{enumerable:!0,get:l})}(ho)),ho.exports}var EO=AO();const U_=ti(EO);function It(i,e){return`${i.open}${e}${i.close}`}function xn(i,e){try{return JSON.stringify(i,null,2)}catch{return e}}function Nv(i){return typeof i=="string"?i.trim():i==null?i:xn(i,i.toString())}function ir(i){if(!i.end_time)return"";const e=i.end_time-i.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:Ft}=U_;class Dv extends ql{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const l=this.runMap.get(r.parent_run_id);if(l)n.push(l),r=l;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((l,u,c)=>{const f=`${l.execution_order}:${l.run_type}:${l.name}`;return u===c.length-1?It(U_.bold,f):f}).join(" > ");return It(Ft.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.green,"[chain/start]")} [${n}] Entering Chain run with input: ${xn(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.cyan,"[chain/end]")} [${n}] [${ir(e)}] Exiting Chain run with output: ${xn(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.red,"[chain/error]")} [${n}] [${ir(e)}] Chain run errored with error: ${xn(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(l=>l.trim())}:e.inputs;console.log(`${It(Ft.green,"[llm/start]")} [${n}] Entering LLM run with input: ${xn(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.cyan,"[llm/end]")} [${n}] [${ir(e)}] Exiting LLM run with output: ${xn(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.red,"[llm/error]")} [${n}] [${ir(e)}] LLM run errored with error: ${xn(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.green,"[tool/start]")} [${n}] Entering Tool run with input: "${Nv(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${It(Ft.cyan,"[tool/end]")} [${n}] [${ir(e)}] Exiting Tool run with output: "${Nv((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.red,"[tool/error]")} [${n}] [${ir(e)}] Tool run errored with error: ${xn(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${xn(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.cyan,"[retriever/end]")} [${n}] [${ir(e)}] Exiting Retriever run with output: ${xn(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${It(Ft.red,"[retriever/error]")} [${n}] [${ir(e)}] Retriever run errored with error: ${xn(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${It(Ft.blue,"[agent/action]")} [${r}] Agent selected action: ${xn(n.actions[n.actions.length-1],"[action]")}`)}}let gh;const SO=()=>{if(gh===void 0){const i=or("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};gh=new Ml(i)}return gh};class gl extends ql{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:l}=e;this.projectName=r??or("LANGCHAIN_PROJECT")??or("LANGCHAIN_SESSION"),this.exampleId=n,this.client=l??SO();const u=gl.getTraceableRunTree();u&&this.updateFromRunTree(u)}async _convertToCreate(e,n=void 0){return{...e,extra:{...e.extra,runtime:await gO()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:n}}async persistRun(e){}async onRunCreate(e){const n=await this._convertToCreate(e,this.exampleId);await this.client.createRun(n)}async onRunUpdate(e){const n={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra};await this.client.updateRun(e.id,n)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let n=e;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const l=[n];for(;l.length>0;){const u=l.shift();!u||r.has(u.id)||(r.add(u.id),this.runMap.set(u.id,u),u.child_runs&&l.push(...u.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const n={},r=[];for(const[l,u]of this.runMap){const c=new dn({...u,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});n[l]=c,r.push([l,u.dotted_order])}r.sort((l,u)=>!l[1]||!u[1]?0:l[1].localeCompare(u[1]));for(const[l]of r){const u=this.runMap.get(l),c=n[l];if(!(!u||!c)&&u.parent_run_id){const f=n[u.parent_run_id];f&&(f.child_runs.push(c),c.parent_run=f)}}return n[e]}static getTraceableRunTree(){try{return aO()}catch{return}}}const I_=Symbol.for("ls:tracing_async_local_storage"),mo=Symbol.for("lc:context_variables"),TO=i=>{globalThis[I_]=i},jl=()=>globalThis[I_];let yl;function OO(){const i="default"in Da?Da.default:Da;return new i({autoStart:!0,concurrency:1})}function RO(){return typeof yl>"u"&&(yl=OO()),yl}async function dt(i,e){if(e===!0){const n=jl();n!==void 0?await n.run(void 0,async()=>i()):await i()}else yl=RO(),yl.add(async()=>{const n=jl();n!==void 0?await n.run(void 0,async()=>i()):await i()})}const CO=i=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>or(n)==="true");function B_(i){var r;const e=jl();if(e===void 0)return;const n=e.getStore();return(r=n==null?void 0:n[mo])==null?void 0:r[i]}const xO=Symbol("lc:configure_hooks"),NO=()=>B_(xO)||[];class DO{setHandler(e){return this.setHandlers([e])}}class Ho{constructor(e,n,r,l,u,c,f,h){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:f}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:h})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(n=>dt(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleCustomEvent(e,n,r,l,u){await Promise.all(this.handlers.map(c=>dt(async()=>{var f;try{await((f=c.handleCustomEvent)==null?void 0:f.call(c,e,n,this.runId,this.tags,this.metadata))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}}class MO extends Ho{getChild(e){const n=new Xt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>dt(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw l}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>dt(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${l}`),n.raiseError)throw e}},n.awaitHandlers)))}}class Mv extends Ho{async handleLLMNewToken(e,n,r,l,u,c){await Promise.all(this.handlers.map(f=>dt(async()=>{var h;if(!f.ignoreLLM)try{await((h=f.handleLLMNewToken)==null?void 0:h.call(f,e,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,c))}catch(m){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMNewToken: ${m}`),f.raiseError)throw m}},f.awaitHandlers)))}async handleLLMError(e,n,r,l,u){await Promise.all(this.handlers.map(c=>dt(async()=>{var f;if(!c.ignoreLLM)try{await((f=c.handleLLMError)==null?void 0:f.call(c,e,this.runId,this._parentRunId,this.tags,u))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMError: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}async handleLLMEnd(e,n,r,l,u){await Promise.all(this.handlers.map(c=>dt(async()=>{var f;if(!c.ignoreLLM)try{await((f=c.handleLLMEnd)==null?void 0:f.call(c,e,this.runId,this._parentRunId,this.tags,u))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMEnd: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}}class jO extends Ho{getChild(e){const n=new Xt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,l,u){await Promise.all(this.handlers.map(c=>dt(async()=>{var f;if(!c.ignoreChain)try{await((f=c.handleChainError)==null?void 0:f.call(c,e,this.runId,this._parentRunId,this.tags,u))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainError: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}async handleChainEnd(e,n,r,l,u){await Promise.all(this.handlers.map(c=>dt(async()=>{var f;if(!c.ignoreChain)try{await((f=c.handleChainEnd)==null?void 0:f.call(c,e,this.runId,this._parentRunId,this.tags,u))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainEnd: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>dt(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>dt(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}}class kO extends Ho{getChild(e){const n=new Xt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>dt(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>dt(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}}class Xt extends DO{constructor(e,n){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,n,r=void 0,l=void 0,u=void 0,c=void 0,f=void 0,h=void 0){return Promise.all(n.map(async(m,g)=>{const y=g===0&&r?r:Kt();return await Promise.all(this.handlers.map(v=>{if(!v.ignoreLLM)return rl(v)&&v._createRunForLLMStart(e,[m],y,this._parentRunId,u,this.tags,this.metadata,h),dt(async()=>{var _;try{await((_=v.handleLLMStart)==null?void 0:_.call(v,e,[m],y,this._parentRunId,u,this.tags,this.metadata,h))}catch(A){if((v.raiseError?console.error:console.warn)(`Error in handler ${v.constructor.name}, handleLLMStart: ${A}`),v.raiseError)throw A}},v.awaitHandlers)})),new Mv(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,l=void 0,u=void 0,c=void 0,f=void 0,h=void 0){return Promise.all(n.map(async(m,g)=>{const y=g===0&&r?r:Kt();return await Promise.all(this.handlers.map(v=>{if(!v.ignoreLLM)return rl(v)&&v._createRunForChatModelStart(e,[m],y,this._parentRunId,u,this.tags,this.metadata,h),dt(async()=>{var _,A;try{if(v.handleChatModelStart)await((_=v.handleChatModelStart)==null?void 0:_.call(v,e,[m],y,this._parentRunId,u,this.tags,this.metadata,h));else if(v.handleLLMStart){const E=tm(m);await((A=v.handleLLMStart)==null?void 0:A.call(v,e,[E],y,this._parentRunId,u,this.tags,this.metadata,h))}}catch(E){if((v.raiseError?console.error:console.warn)(`Error in handler ${v.constructor.name}, handleLLMStart: ${E}`),v.raiseError)throw E}},v.awaitHandlers)})),new Mv(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=Kt(),l=void 0,u=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(h=>{if(!h.ignoreChain)return rl(h)&&h._createRunForChainStart(e,n,r,this._parentRunId,this.tags,this.metadata,l,f),dt(async()=>{var m;try{await((m=h.handleChainStart)==null?void 0:m.call(h,e,n,r,this._parentRunId,this.tags,this.metadata,l,f))}catch(g){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleChainStart: ${g}`),h.raiseError)throw g}},h.awaitHandlers)})),new jO(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=Kt(),l=void 0,u=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(h=>{if(!h.ignoreAgent)return rl(h)&&h._createRunForToolStart(e,n,r,this._parentRunId,this.tags,this.metadata,f),dt(async()=>{var m;try{await((m=h.handleToolStart)==null?void 0:m.call(h,e,n,r,this._parentRunId,this.tags,this.metadata,f))}catch(g){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleToolStart: ${g}`),h.raiseError)throw g}},h.awaitHandlers)})),new kO(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=Kt(),l=void 0,u=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(h=>{if(!h.ignoreRetriever)return rl(h)&&h._createRunForRetrieverStart(e,n,r,this._parentRunId,this.tags,this.metadata,f),dt(async()=>{var m;try{await((m=h.handleRetrieverStart)==null?void 0:m.call(h,e,n,r,this._parentRunId,this.tags,this.metadata,f))}catch(g){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleRetrieverStart: ${g}`),h.raiseError)throw g}},h.awaitHandlers)})),new MO(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,n,r,l,u){await Promise.all(this.handlers.map(c=>dt(async()=>{var f;if(!c.ignoreCustomEvent)try{await((f=c.handleCustomEvent)==null?void 0:f.call(c,e,n,r,this.tags,this.metadata))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new Xt(this._parentRunId);for(const l of this.handlers){const u=this.inheritableHandlers.includes(l);r.addHandler(l,u)}for(const l of this.tags){const u=this.inheritableTags.includes(l);r.addTags([l],u)}for(const l of Object.keys(this.metadata)){const u=Object.keys(this.inheritableMetadata).includes(l);r.addMetadata({[l]:this.metadata[l]},u)}for(const l of e)r.handlers.filter(u=>u.name==="console_callback_handler").some(u=>u.name===l.name)||r.addHandler(l,n);return r}static fromHandlers(e){class n extends Hl{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Kt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static configure(e,n,r,l,u,c,f){return this._configureSync(e,n,r,l,u,c,f)}static _configureSync(e,n,r,l,u,c,f){var v,_;let h;(e||n)&&(Array.isArray(e)||!e?(h=new Xt,h.setHandlers((e==null?void 0:e.map(Do))??[],!0)):h=e,h=h.copy(Array.isArray(n)?n.map(Do):n==null?void 0:n.handlers,!1));const m=or("LANGCHAIN_VERBOSE")==="true"||(f==null?void 0:f.verbose),g=((v=gl.getTraceableRunTree())==null?void 0:v.tracingEnabled)||CO(),y=g||(or("LANGCHAIN_TRACING")??!1);if(m||y){if(h||(h=new Xt),m&&!h.handlers.some(A=>A.name===Dv.prototype.name)){const A=new Dv;h.addHandler(A,!0)}if(y&&!h.handlers.some(A=>A.name==="langchain_tracer")&&g){const A=new gl;h.addHandler(A,!0),h._parentRunId=((_=gl.getTraceableRunTree())==null?void 0:_.id)??h._parentRunId}}for(const{contextVar:A,inheritable:E=!0,handlerClass:O,envVar:x}of NO()){const k=x&&or(x)==="true"&&O;let M;const ae=A!==void 0?B_(A):void 0;ae&&vO(ae)?M=ae:k&&(M=new O({})),M!==void 0&&(h||(h=new Xt),h.handlers.some(B=>B.name===M.name)||h.addHandler(M,E))}return(r||l)&&h&&(h.addTags(r??[]),h.addTags(l??[],!1)),(u||c)&&h&&(h.addMetadata(u??{}),h.addMetadata(c??{},!1)),h}}function Do(i){return"name"in i?i:Hl.fromMethods(i)}class LO{getStore(){}run(e,n){return n()}enterWith(e){}}const UO=new LO,jv=Symbol.for("lc:child_config");class IO{getInstance(){return jl()??UO}getRunnableConfig(){var n,r;return(r=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:r[jv]}runWithConfig(e,n,r){var g;const l=Xt._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),u=this.getInstance(),c=u.getStore(),f=l==null?void 0:l.getParentRunId(),h=(g=l==null?void 0:l.handlers)==null?void 0:g.find(y=>(y==null?void 0:y.name)==="langchain_tracer");let m;return h&&f?m=h.convertToRunTree(f):r||(m=new dn({name:"<runnable_lambda>",tracingEnabled:!1})),m&&(m.extra={...m.extra,[jv]:e}),c!==void 0&&c[mo]!==void 0&&(m[mo]=c[mo]),u.run(m,n)}initializeGlobalInstance(e){jl()===void 0&&TO(e)}}const gr=new IO,yh=25;async function Gn(i){return Xt._configureSync(i==null?void 0:i.callbacks,void 0,i==null?void 0:i.tags,void 0,i==null?void 0:i.metadata)}function kv(...i){const e={};for(const n of i.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const l=e[r]??[];e[r]=[...new Set(l.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const l=e.callbacks,u=n.callbacks;if(Array.isArray(u))if(!l)e.callbacks=u;else if(Array.isArray(l))e.callbacks=l.concat(u);else{const c=l.copy();for(const f of u)c.addHandler(Do(f),!0);e.callbacks=c}else if(u)if(!l)e.callbacks=u;else if(Array.isArray(l)){const c=u.copy();for(const f of l)c.addHandler(Do(f),!0);e.callbacks=c}else e.callbacks=new Xt(u._parentRunId,{handlers:l.handlers.concat(u.handlers),inheritableHandlers:l.inheritableHandlers.concat(u.inheritableHandlers),tags:Array.from(new Set(l.tags.concat(u.tags))),inheritableTags:Array.from(new Set(l.inheritableTags.concat(u.inheritableTags))),metadata:{...l.metadata,...u.metadata}})}else{const l=r;e[l]=n[l]??e[l]}return e}const BO=new Set(["string","number","boolean"]);function Pe(i){var r;const e=gr.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:l,runName:u,...c}=e;n=Object.entries(c).reduce((f,[h,m])=>(m!==void 0&&(f[h]=m),f),n)}if(i&&(n=Object.entries(i).reduce((l,[u,c])=>(c!==void 0&&(l[u]=c),l),n)),n!=null&&n.configurable)for(const l of Object.keys(n.configurable))BO.has(typeof n.configurable[l])&&!((r=n.metadata)!=null&&r[l])&&(n.metadata||(n.metadata={}),n.metadata[l]=n.configurable[l]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const l=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,l])):n.signal=l,delete n.timeout}return n}function Dt(i={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:l,configurable:u,runId:c}={}){const f=Pe(i);return e!==void 0&&(delete f.runName,f.callbacks=e),r!==void 0&&(f.recursionLimit=r),n!==void 0&&(f.maxConcurrency=n),l!==void 0&&(f.runName=l),u!==void 0&&(f.configurable={...f.configurable,...u}),c!==void 0&&delete f.runId,f}function es(i){return i?{configurable:i.configurable,recursionLimit:i.recursionLimit,callbacks:i.callbacks,tags:i.tags,metadata:i.metadata,maxConcurrency:i.maxConcurrency,timeout:i.timeout,signal:i.signal}:void 0}async function yr(i,e){if(e===void 0)return i;let n;return Promise.race([i.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,l)=>{n=()=>{l(new Error("Aborted"))},e.addEventListener("abort",n),e.aborted&&l(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",n))}class hn extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const n=e.getReader();return new hn({start(r){return l();function l(){return n.read().then(({done:u,value:c})=>{if(u){r.close();return}return r.enqueue(c),l()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new hn({async pull(n){const{value:r,done:l}=await e.next();l&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function P_(i,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(l){for(;;)if(l.length===0){const u=await i.next();for(const c of n)c.push(u)}else{if(l[0].done)return;yield l.shift().value}})}function ia(i,e){if(Array.isArray(i)&&Array.isArray(e))return i.concat(e);if(typeof i=="string"&&typeof e=="string")return i+e;if(typeof i=="number"&&typeof e=="number")return i+e;if("concat"in i&&typeof i.concat=="function")return i.concat(e);if(typeof i=="object"&&typeof e=="object"){const n={...i};for(const[r,l]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=ia(n[r],l):n[r]=l;return n}else throw new Error(`Cannot concat ${typeof i} and ${typeof e}`)}class rs{constructor(e){var n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((n=this.config)==null?void 0:n.signal),this.setup=new Promise((r,l)=>{gr.runWithConfig(es(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,l):this.firstResult.then(u=>r(void 0),l)},!0)})}async next(...e){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?gr.runWithConfig(es(this.config),this.signal?async()=>yr(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function PO(i,e,n,r,...l){const u=new rs({generator:e,startSetup:n,signal:r}),c=await u.setup;return{output:i(u,c,...l),setup:c}}class lr{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const n=this.ops.concat(e.ops),r=xo({},n);return new kl({ops:n,state:r[r.length-1].newDocument})}}class kl extends lr{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=xo(this.state,e.ops);return new kl({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const n=xo({},e.ops);return new kl({ops:e.ops,state:n[n.length-1].newDocument})}}const $O=i=>i.name==="log_stream_tracer";async function Lv(i,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=i;if(["retriever","llm","prompt"].includes(i.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function Uv(i,e){const{outputs:n}=i;return e==="original"||["retriever","llm","prompt"].includes(i.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function zO(i){return i!==void 0&&i.message!==void 0}class Iv extends ql{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=hn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(l=>{var u;return(u=this.includeTags)==null?void 0:u.includes(l)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(l=>{var u;return!((u=this.excludeTags)!=null&&u.includes(l))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const l=this.keyMapByRunId[e];l&&await this.writer.write(new lr({ops:[{op:"add",path:`/logs/${l}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var l;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new lr({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await Lv(e,this._schemaFormat)),await this.writer.write(new lr({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await Lv(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await Uv(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const l=new lr({ops:r});await this.writer.write(l)}finally{if(e.id===this.rootId){const n=new lr({ops:[{op:"replace",path:"/final_output",value:await Uv(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const l=this.keyMapByRunId[e.id];if(l===void 0)return;const u=e.inputs.messages!==void 0;let c;u?zO(r==null?void 0:r.chunk)?c=r==null?void 0:r.chunk:c=new Lo({id:`run-${e.id}`,content:n}):c=n;const f=new lr({ops:[{op:"add",path:`/logs/${l}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${l}/streamed_output/-`,value:c}]});await this.writer.write(f)}}const Bv="__run";class Wr{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Wr({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}function oo({name:i,serialized:e}){return i!==void 0?i:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const HO=i=>i.name==="event_stream_tracer";class qO extends ql{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=hn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(l=>{var u;return(u=this.includeTags)==null?void 0:u.includes(l)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(l=>{var u;return!((u=this.excludeTags)!=null&&u.includes(l))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const l=this.runInfoMap.get(e);if(l===void 0){yield r.value;return}function u(f,h){return f==="llm"&&typeof h=="string"?new Wr({text:h}):h}let c=this.tappedPromises.get(e);if(c===void 0){let f;c=new Promise(h=>{f=h}),this.tappedPromises.set(e,c);try{const h={event:`on_${l.runType}_stream`,run_id:e,name:l.name,tags:l.tags,metadata:l.metadata,data:{}};await this.send({...h,data:{chunk:u(l.runType,r.value)}},l),yield r.value;for await(const m of n)l.runType!=="tool"&&l.runType!=="retriever"&&await this.send({...h,data:{chunk:u(l.runType,m)}},l),yield m}finally{f()}}else{yield r.value;for await(const f of n)yield f}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var c,f;const n=oo(e),r=e.inputs.messages!==void 0?"chat_model":"llm",l={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,l);const u=`on_${r}_start`;await this.send({event:u,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((f=e.extra)==null?void 0:f.metadata)??{}},l)}async onLLMNewToken(e,n,r){const l=this.runInfoMap.get(e.id);let u,c;if(l===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(l.runType==="chat_model")c="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?u=new Lo({content:n,id:`run-${e.id}`}):u=r.chunk.message;else if(l.runType==="llm")c="on_llm_stream",(r==null?void 0:r.chunk)===void 0?u=new Wr({text:n}):u=r.chunk;else throw new Error(`Unexpected run type ${l.runType}`);await this.send({event:c,data:{chunk:u},run_id:e.id,name:l.name,tags:l.tags,metadata:l.metadata},l)}}async onLLMEnd(e){var c,f,h;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const l=(c=e.outputs)==null?void 0:c.generations;let u;if(n.runType==="chat_model"){for(const m of l??[]){if(u!==void 0)break;u=(f=m[0])==null?void 0:f.message}r="on_chat_model_end"}else if(n.runType==="llm")u={generations:l==null?void 0:l.map(m=>m.map(g=>({text:g.text,generationInfo:g.generationInfo}))),llmOutput:((h=e.outputs)==null?void 0:h.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:u,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var c,f;const n=oo(e),r=e.run_type??"chain",l={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:n,runType:e.run_type};let u={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(u={},l.inputs={}):e.inputs.input!==void 0?(u.input=e.inputs.input,l.inputs=e.inputs.input):(u.input=e.inputs,l.inputs=e.inputs),this.runInfoMap.set(e.id,l),await this.send({event:`on_${r}_start`,data:u,name:n,tags:e.tags??[],run_id:e.id,metadata:((f=e.extra)==null?void 0:f.metadata)??{}},l)}async onChainEnd(e){var f;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,l=e.inputs??n.inputs??{},c={output:((f=e.outputs)==null?void 0:f.output)??e.outputs,input:l};l.input&&Object.keys(l).length===1&&(c.input=l.input,n.inputs=l.input),await this.sendEndEvent({event:r,data:c,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var l,u;const n=oo(e),r={tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{}},r)}async onToolEnd(e){var l;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((l=e.outputs)==null?void 0:l.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var u,c;const n=oo(e),l={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,l),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},l)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const l=this.runInfoMap.get(r);if(l===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:l.tags,metadata:l.metadata,data:n},l)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const GO=[400,401,402,403,404,405,406,407,409],ZO=i=>{var n,r;if(i.message.startsWith("Cancel")||i.message.startsWith("AbortError")||i.name==="AbortError"||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const e=((n=i==null?void 0:i.response)==null?void 0:n.status)??(i==null?void 0:i.status);if(e&&GO.includes(+e))throw i;if(((r=i==null?void 0:i.error)==null?void 0:r.code)==="insufficient_quota"){const l=new Error(i==null?void 0:i.message);throw l.name="InsufficientQuotaError",l}};class dm{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??ZO;const n="default"in Da?Da.default:Da;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>Oo(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((l,u)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{u(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}class $_ extends ql{constructor({config:e,onStart:n,onEnd:r,onError:l}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=l}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function fm(i){return i?i.lc_runnable:!1}class VO{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,n){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const l=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(n)),this.includeTags!==void 0&&(r=r||l.some(u=>{var c;return(c=this.includeTags)==null?void 0:c.includes(u)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(r=r&&l.every(u=>{var c;return!((c=this.excludeTags)!=null&&c.includes(u))})),r}}const QO=Symbol("Let zodToJsonSchema decide on which parser to use"),YO={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},FO=i=>({...YO,...i}),KO=i=>{const e=FO(i),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,l])=>[l._def,{def:l._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function z_(i,e,n,r){r!=null&&r.errorMessages&&n&&(i.errorMessage={...i.errorMessage,[e]:n})}function Ue(i,e,n,r,l){i[e]=n,z_(i,e,r,l)}function XO(){return{}}function JO(i,e){var r,l,u;const n={type:"array"};return(r=i.type)!=null&&r._def&&((u=(l=i.type)==null?void 0:l._def)==null?void 0:u.typeName)!==J.ZodAny&&(n.items=Le(i.type._def,{...e,currentPath:[...e.currentPath,"items"]})),i.minLength&&Ue(n,"minItems",i.minLength.value,i.minLength.message,e),i.maxLength&&Ue(n,"maxItems",i.maxLength.value,i.maxLength.message,e),i.exactLength&&(Ue(n,"minItems",i.exactLength.value,i.exactLength.message,e),Ue(n,"maxItems",i.exactLength.value,i.exactLength.message,e)),n}function WO(i,e){const n={type:"integer",format:"int64"};if(!i.checks)return n;for(const r of i.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Ue(n,"minimum",r.value,r.message,e):Ue(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ue(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ue(n,"maximum",r.value,r.message,e):Ue(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ue(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ue(n,"multipleOf",r.value,r.message,e);break}return n}function eR(){return{type:"boolean"}}function H_(i,e){return Le(i.type._def,e)}const tR=(i,e)=>Le(i.innerType._def,e);function q_(i,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((l,u)=>q_(i,e,l))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return nR(i,e)}}const nR=(i,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of i.checks)switch(r.kind){case"min":Ue(n,"minimum",r.value,r.message,e);break;case"max":Ue(n,"maximum",r.value,r.message,e);break}return n};function aR(i,e){return{...Le(i.innerType._def,e),default:i.defaultValue()}}function rR(i,e){return e.effectStrategy==="input"?Le(i.schema._def,e):{}}function iR(i){return{type:"string",enum:Array.from(i.values)}}const sR=i=>"type"in i&&i.type==="string"?!1:"allOf"in i;function lR(i,e){const n=[Le(i.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Le(i.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(u=>!!u);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const l=[];return n.forEach(u=>{if(sR(u))l.push(...u.allOf),u.unevaluatedProperties===void 0&&(r=void 0);else{let c=u;if("additionalProperties"in u&&u.additionalProperties===!1){const{additionalProperties:f,...h}=u;c=h}else r=void 0;l.push(c)}}),l.length?{allOf:l,...r}:void 0}function uR(i,e){const n=typeof i.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(i.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[i.value]}:{type:n==="bigint"?"integer":n,const:i.value}}let bh;const Bn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(bh===void 0&&(bh=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),bh),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function G_(i,e){const n={type:"string"};if(i.checks)for(const r of i.checks)switch(r.kind){case"min":Ue(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Ue(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Pn(n,"email",r.message,e);break;case"format:idn-email":Pn(n,"idn-email",r.message,e);break;case"pattern:zod":Bt(n,Bn.email,r.message,e);break}break;case"url":Pn(n,"uri",r.message,e);break;case"uuid":Pn(n,"uuid",r.message,e);break;case"regex":Bt(n,r.regex,r.message,e);break;case"cuid":Bt(n,Bn.cuid,r.message,e);break;case"cuid2":Bt(n,Bn.cuid2,r.message,e);break;case"startsWith":Bt(n,RegExp(`^${vh(r.value,e)}`),r.message,e);break;case"endsWith":Bt(n,RegExp(`${vh(r.value,e)}$`),r.message,e);break;case"datetime":Pn(n,"date-time",r.message,e);break;case"date":Pn(n,"date",r.message,e);break;case"time":Pn(n,"time",r.message,e);break;case"duration":Pn(n,"duration",r.message,e);break;case"length":Ue(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Ue(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{Bt(n,RegExp(vh(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&Pn(n,"ipv4",r.message,e),r.version!=="v4"&&Pn(n,"ipv6",r.message,e);break}case"base64url":Bt(n,Bn.base64url,r.message,e);break;case"jwt":Bt(n,Bn.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Bt(n,Bn.ipv4Cidr,r.message,e),r.version!=="v4"&&Bt(n,Bn.ipv6Cidr,r.message,e);break}case"emoji":Bt(n,Bn.emoji(),r.message,e);break;case"ulid":{Bt(n,Bn.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Pn(n,"binary",r.message,e);break}case"contentEncoding:base64":{Ue(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Bt(n,Bn.base64,r.message,e);break}}break}case"nanoid":Bt(n,Bn.nanoid,r.message,e)}return n}function vh(i,e){return e.patternStrategy==="escape"?cR(i):i}const oR=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function cR(i){let e="";for(let n=0;n<i.length;n++)oR.has(i[n])||(e+="\\"),e+=i[n];return e}function Pn(i,e,n,r){var l;i.format||(l=i.anyOf)!=null&&l.some(u=>u.format)?(i.anyOf||(i.anyOf=[]),i.format&&(i.anyOf.push({format:i.format,...i.errorMessage&&r.errorMessages&&{errorMessage:{format:i.errorMessage.format}}}),delete i.format,i.errorMessage&&(delete i.errorMessage.format,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Ue(i,"format",e,n,r)}function Bt(i,e,n,r){var l;i.pattern||(l=i.allOf)!=null&&l.some(u=>u.pattern)?(i.allOf||(i.allOf=[]),i.pattern&&(i.allOf.push({pattern:i.pattern,...i.errorMessage&&r.errorMessages&&{errorMessage:{pattern:i.errorMessage.pattern}}}),delete i.pattern,i.errorMessage&&(delete i.errorMessage.pattern,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.allOf.push({pattern:Pv(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Ue(i,"pattern",Pv(e,r),n,r)}function Pv(i,e){var h;if(!e.applyRegexFlags||!i.flags)return i.source;const n={i:i.flags.includes("i"),m:i.flags.includes("m"),s:i.flags.includes("s")},r=n.i?i.source.toLowerCase():i.source;let l="",u=!1,c=!1,f=!1;for(let m=0;m<r.length;m++){if(u){l+=r[m],u=!1;continue}if(n.i){if(c){if(r[m].match(/[a-z]/)){f?(l+=r[m],l+=`${r[m-2]}-${r[m]}`.toUpperCase(),f=!1):r[m+1]==="-"&&((h=r[m+2])!=null&&h.match(/[a-z]/))?(l+=r[m],f=!0):l+=`${r[m]}${r[m].toUpperCase()}`;continue}}else if(r[m].match(/[a-z]/)){l+=`[${r[m]}${r[m].toUpperCase()}]`;continue}}if(n.m){if(r[m]==="^"){l+=`(^|(?<=[\r
]))`;continue}else if(r[m]==="$"){l+=`($|(?=[\r
]))`;continue}}if(n.s&&r[m]==="."){l+=c?`${r[m]}\r
`:`[${r[m]}\r
]`;continue}l+=r[m],r[m]==="\\"?u=!0:c&&r[m]==="]"?c=!1:!c&&r[m]==="["&&(c=!0)}try{new RegExp(l)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),i.source}return l}function Z_(i,e){var r,l,u,c,f,h;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=i.keyType)==null?void 0:r._def.typeName)===J.ZodEnum)return{type:"object",required:i.keyType._def.values,properties:i.keyType._def.values.reduce((m,g)=>({...m,[g]:Le(i.valueType._def,{...e,currentPath:[...e.currentPath,"properties",g]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:Le(i.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((l=i.keyType)==null?void 0:l._def.typeName)===J.ZodString&&((u=i.keyType._def.checks)!=null&&u.length)){const{type:m,...g}=G_(i.keyType._def,e);return{...n,propertyNames:g}}else{if(((c=i.keyType)==null?void 0:c._def.typeName)===J.ZodEnum)return{...n,propertyNames:{enum:i.keyType._def.values}};if(((f=i.keyType)==null?void 0:f._def.typeName)===J.ZodBranded&&i.keyType._def.type._def.typeName===J.ZodString&&((h=i.keyType._def.type._def.checks)!=null&&h.length)){const{type:m,...g}=H_(i.keyType._def,e);return{...n,propertyNames:g}}}return n}function dR(i,e){if(e.mapStrategy==="record")return Z_(i,e);const n=Le(i.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Le(i.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function fR(i){const e=i.values,r=Object.keys(i.values).filter(u=>typeof e[e[u]]!="number").map(u=>e[u]),l=Array.from(new Set(r.map(u=>typeof u)));return{type:l.length===1?l[0]==="string"?"string":"number":["string","number"],enum:r}}function hR(){return{not:{}}}function mR(i){return i.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Mo={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function pR(i,e){if(e.target==="openApi3")return $v(i,e);const n=i.options instanceof Map?Array.from(i.options.values()):i.options;if(n.every(r=>r._def.typeName in Mo&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((l,u)=>{const c=Mo[u._def.typeName];return c&&!l.includes(c)?[...l,c]:l},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((l,u)=>{const c=typeof u._def.value;switch(c){case"string":case"number":case"boolean":return[...l,c];case"bigint":return[...l,"integer"];case"object":if(u._def.value===null)return[...l,"null"];case"symbol":case"undefined":case"function":default:return l}},[]);if(r.length===n.length){const l=r.filter((u,c,f)=>f.indexOf(u)===c);return{type:l.length>1?l:l[0],enum:n.reduce((u,c)=>u.includes(c._def.value)?u:[...u,c._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,l)=>[...r,...l._def.values.filter(u=>!r.includes(u))],[])};return $v(i,e)}const $v=(i,e)=>{const n=(i.options instanceof Map?Array.from(i.options.values()):i.options).map((r,l)=>Le(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${l}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function gR(i,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(i.innerType._def.typeName)&&(!i.innerType._def.checks||!i.innerType._def.checks.length))return e.target==="openApi3"?{type:Mo[i.innerType._def.typeName],nullable:!0}:{type:[Mo[i.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Le(i.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Le(i.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function yR(i,e){const n={type:"number"};if(!i.checks)return n;for(const r of i.checks)switch(r.kind){case"int":n.type="integer",z_(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Ue(n,"minimum",r.value,r.message,e):Ue(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ue(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ue(n,"maximum",r.value,r.message,e):Ue(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ue(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ue(n,"multipleOf",r.value,r.message,e);break}return n}function bR(i,e){return e.removeAdditionalStrategy==="strict"?i.catchall._def.typeName==="ZodNever"?i.unknownKeys!=="strict":Le(i.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:i.catchall._def.typeName==="ZodNever"?i.unknownKeys==="passthrough":Le(i.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function vR(i,e){const n=e.target==="openAi",r={type:"object",...Object.entries(i.shape()).reduce((l,[u,c])=>{if(c===void 0||c._def===void 0)return l;let f=c.isOptional();f&&n&&(c instanceof qn&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),f=!1);const h=Le(c._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});return h===void 0?l:{properties:{...l.properties,[u]:h},required:f?l.required:[...l.required,u]}},{properties:{},required:[]}),additionalProperties:bR(i,e)};return r.required.length||delete r.required,r}const _R=(i,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Le(i.innerType._def,e);const n=Le(i.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},wR=(i,e)=>{if(e.pipeStrategy==="input")return Le(i.in._def,e);if(e.pipeStrategy==="output")return Le(i.out._def,e);const n=Le(i.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Le(i.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(l=>l!==void 0)}};function AR(i,e){return Le(i.type._def,e)}function ER(i,e){const r={type:"array",uniqueItems:!0,items:Le(i.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return i.minSize&&Ue(r,"minItems",i.minSize.value,i.minSize.message,e),i.maxSize&&Ue(r,"maxItems",i.maxSize.value,i.maxSize.message,e),r}function SR(i,e){return i.rest?{type:"array",minItems:i.items.length,items:i.items.map((n,r)=>Le(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Le(i.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:i.items.length,maxItems:i.items.length,items:i.items.map((n,r)=>Le(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function TR(){return{not:{}}}function OR(){return{}}const RR=(i,e)=>Le(i.innerType._def,e),CR=(i,e,n)=>{switch(e){case J.ZodString:return G_(i,n);case J.ZodNumber:return yR(i,n);case J.ZodObject:return vR(i,n);case J.ZodBigInt:return WO(i,n);case J.ZodBoolean:return eR();case J.ZodDate:return q_(i,n);case J.ZodUndefined:return TR();case J.ZodNull:return mR(n);case J.ZodArray:return JO(i,n);case J.ZodUnion:case J.ZodDiscriminatedUnion:return pR(i,n);case J.ZodIntersection:return lR(i,n);case J.ZodTuple:return SR(i,n);case J.ZodRecord:return Z_(i,n);case J.ZodLiteral:return uR(i,n);case J.ZodEnum:return iR(i);case J.ZodNativeEnum:return fR(i);case J.ZodNullable:return gR(i,n);case J.ZodOptional:return _R(i,n);case J.ZodMap:return dR(i,n);case J.ZodSet:return ER(i,n);case J.ZodLazy:return()=>i.getter()._def;case J.ZodPromise:return AR(i,n);case J.ZodNaN:case J.ZodNever:return hR();case J.ZodEffects:return rR(i,n);case J.ZodAny:return XO();case J.ZodUnknown:return OR();case J.ZodDefault:return aR(i,n);case J.ZodBranded:return H_(i,n);case J.ZodReadonly:return RR(i,n);case J.ZodCatch:return tR(i,n);case J.ZodPipeline:return wR(i,n);case J.ZodFunction:case J.ZodVoid:case J.ZodSymbol:return;default:return(r=>{})()}};function Le(i,e,n=!1){var f;const r=e.seen.get(i);if(e.override){const h=(f=e.override)==null?void 0:f.call(e,i,e,r,n);if(h!==QO)return h}if(r&&!n){const h=xR(r,e);if(h!==void 0)return h}const l={def:i,path:e.currentPath,jsonSchema:void 0};e.seen.set(i,l);const u=CR(i,i.typeName,e),c=typeof u=="function"?Le(u(),e):u;if(c&&DR(i,e,c),e.postProcess){const h=e.postProcess(c,i,e);return l.jsonSchema=c,h}return l.jsonSchema=c,c}const xR=(i,e)=>{switch(e.$refStrategy){case"root":return{$ref:i.path.join("/")};case"relative":return{$ref:NR(e.currentPath,i.path)};case"none":case"seen":return i.path.length<e.currentPath.length&&i.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},NR=(i,e)=>{let n=0;for(;n<i.length&&n<e.length&&i[n]===e[n];n++);return[(i.length-n).toString(),...e.slice(n)].join("/")},DR=(i,e,n)=>(i.description&&(n.description=i.description,e.markdownDescription&&(n.markdownDescription=i.description)),n),MR=(i,e)=>{const n=KO(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((f,[h,m])=>({...f,[h]:Le(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,h]},!0)??{}}),{}):void 0,l=e==null?void 0:e.name,u=Le(i._def,n,!1)??{},c=l===void 0?r?{...u,[n.definitionPath]:r}:u:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,l].join("/"),[n.definitionPath]:{...r,[l]:u}};return n.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c};function _h(i){return i.replace(/[^a-zA-Z-_0-9]/g,"_")}const jR=["*","_","`"];function kR(i){let e="";for(const[n,r]of Object.entries(i))e+=`	classDef ${n} ${r};
`;return e}function LR(i,e,n){const{firstNode:r,lastNode:l,nodeColors:u,withStyles:c=!0,curveStyle:f="linear",wrapLabelNWords:h=9}=n??{};let m=c?`%%{init: {'flowchart': {'curve': '${f}'}}}%%
graph TD;
`:`graph TD;
`;if(c){const _="default",A={[_]:"{0}({1})"};r!==void 0&&(A[r]="{0}([{1}]):::first"),l!==void 0&&(A[l]="{0}([{1}]):::last");for(const[E,O]of Object.entries(i)){const x=O.name.split(":").pop()??"";let M=jR.some(B=>x.startsWith(B)&&x.endsWith(B))?`<p>${x}</p>`:x;Object.keys(O.metadata??{}).length&&(M+=`<hr/><small><em>${Object.entries(O.metadata??{}).map(([B,X])=>`${B} = ${X}`).join(`
`)}</em></small>`);const ae=(A[E]??A[_]).replace("{0}",_h(E)).replace("{1}",M);m+=`	${ae}
`}}const g={};for(const _ of e){const A=_.source.split(":"),E=_.target.split(":"),O=A.filter((x,k)=>x===E[k]).join(":");g[O]||(g[O]=[]),g[O].push(_)}const y=new Set;function v(_,A){const E=_.length===1&&_[0].source===_[0].target;if(A&&!E){const O=A.split(":").pop();if(y.has(O))throw new Error(`Found duplicate subgraph '${O}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);y.add(O),m+=`	subgraph ${O}
`}for(const O of _){const{source:x,target:k,data:M,conditional:ae}=O;let B="";if(M!==void 0){let X=M;const ne=X.split(" ");ne.length>h&&(X=Array.from({length:Math.ceil(ne.length/h)},(F,re)=>ne.slice(re*h,(re+1)*h).join(" ")).join("&nbsp;<br>&nbsp;")),B=ae?` -. &nbsp;${X}&nbsp; .-> `:` -- &nbsp;${X}&nbsp; --> `}else B=ae?" -.-> ":" --> ";m+=`	${_h(x)}${B}${_h(k)};
`}for(const O in g)O.startsWith(`${A}:`)&&O!==A&&v(g[O],O);A&&!E&&(m+=`	end
`)}v(g[""]??[],"");for(const _ in g)!_.includes(":")&&_!==""&&v(g[_],_);return c&&(m+=kR(u??{})),m}async function UR(i,e){let{backgroundColor:n="white"}=e??{};const r=btoa(i);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const l=`https://mermaid.ink/img/${r}?bgColor=${n}`,u=await fetch(l);if(!u.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${u.status}`,`Status text: ${u.statusText}`].join(`
`));return await u.blob()}function IR(i,e){if(i!==void 0&&!hl(i))return i;if(fm(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function BR(i){return fm(i.data)?{type:"runnable",data:{id:i.data.lc_id,name:i.data.getName()}}:{type:"schema",data:{...MR(i.data.schema),title:i.data.name}}}class qo{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=hl(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...BR(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const l=n??Kt(),u={id:l,data:e,name:IR(n,e),metadata:r};return this.nodes[l]=u,u}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,l){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const u={source:e.id,target:n.id,data:r,conditional:l};return this.edges.push(u),u}firstNode(){return zv(this)}lastNode(){return Hv(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(m=>m.id).every(hl)&&(r="");const u=m=>r?`${r}:${m}`:m;Object.entries(e.nodes).forEach(([m,g])=>{this.nodes[u(m)]={...g,id:u(m)}});const c=e.edges.map(m=>({...m,source:u(m.source),target:u(m.target)}));this.edges=[...this.edges,...c];const f=e.firstNode(),h=e.lastNode();return[f?{id:u(f.id),data:f.data}:void 0,h?{id:u(h.id),data:h.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&zv(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&Hv(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(l=>[l.id,l.name])),n=new Map;Object.values(e).forEach(l=>{n.set(l,(n.get(l)||0)+1)});const r=l=>{const u=e[l];return hl(l)&&n.get(u)===1?u:l};return new qo({nodes:Object.fromEntries(Object.entries(this.nodes).map(([l,u])=>[r(l),{...u,id:r(l)}])),edges:this.edges.map(l=>({...l,source:r(l.source),target:r(l.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:l={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:u}=e??{},c=this.reid(),f=c.firstNode(),h=c.lastNode();return LR(c.nodes,c.edges,{firstNode:f==null?void 0:f.id,lastNode:h==null?void 0:h.id,withStyles:n,curveStyle:r,nodeColors:l,wrapLabelNWords:u})}async drawMermaidPng(e){const n=this.drawMermaid(e);return UR(n,{backgroundColor:e==null?void 0:e.backgroundColor})}}function zv(i,e=[]){const n=new Set(i.edges.filter(l=>!e.includes(l.source)).map(l=>l.target)),r=[];for(const l of Object.values(i.nodes))!e.includes(l.id)&&!n.has(l.id)&&r.push(l);return r.length===1?r[0]:void 0}function Hv(i,e=[]){const n=new Set(i.edges.filter(l=>!e.includes(l.target)).map(l=>l.source)),r=[];for(const l of Object.values(i.nodes))!e.includes(l.id)&&!n.has(l.id)&&r.push(l);return r.length===1?r[0]:void 0}function PR(i){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const l of i)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(l)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return hn.fromReadableStream(n)}function qv(i){return typeof i=="object"&&i!==null&&typeof i[Symbol.iterator]=="function"&&typeof i.next=="function"}const $R=i=>i!=null&&typeof i=="object"&&"next"in i&&typeof i.next=="function";function $h(i){return typeof i=="object"&&i!==null&&typeof i[Symbol.asyncIterator]=="function"}function*Gv(i,e){for(;;){const{value:n,done:r}=gr.runWithConfig(es(i),e.next.bind(e),!0);if(r)break;yield n}}async function*zh(i,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:l}=await gr.runWithConfig(es(i),n.next.bind(e),!0);if(l)break;yield r}}function _t(i,e){return i&&!Array.isArray(i)&&!(i instanceof Date)&&typeof i=="object"?i:{[e]:i}}class $t extends dr{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}bind(e){return new Fr({bound:this,kwargs:e,config:{}})}map(){return new jo({bound:this})}withRetry(e){return new zR({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Fr({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new qR({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(Pe);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([l])=>l!=="runId"));return Array.from({length:n},(l,u)=>Pe(u===0?e:r))}return Array.from({length:n},()=>Pe(e))}async batch(e,n,r){var h;const l=this._getOptionsList(n??{},e.length),u=((h=l[0])==null?void 0:h.maxConcurrency)??(r==null?void 0:r.maxConcurrency),c=new dm({maxConcurrency:u,onFailedAttempt:m=>{throw m}}),f=e.map((m,g)=>c.call(async()=>{try{return await this.invoke(m,l[g])}catch(y){if(r!=null&&r.returnExceptions)return y;throw y}}));return Promise.all(f)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=Pe(n),l=new rs({generator:this._streamIterator(e,r),config:r});return await l.setup,hn.fromAsyncGenerator(l)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=Pe(e):n=Pe({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const l=Pe(r),u=await Gn(l),c=await(u==null?void 0:u.handleChainStart(this.toJSON(),_t(n,"input"),l.runId,l==null?void 0:l.runType,void 0,void 0,(l==null?void 0:l.runName)??this.getName()));delete l.runId;let f;try{const h=e.call(this,n,l,c);f=await yr(h,r==null?void 0:r.signal)}catch(h){throw await(c==null?void 0:c.handleChainError(h)),h}return await(c==null?void 0:c.handleChainEnd(_t(f,"output"))),f}async _batchWithConfig(e,n,r,l){var m;const u=this._getOptionsList(r??{},n.length),c=await Promise.all(u.map(Gn)),f=await Promise.all(c.map(async(g,y)=>{const v=await(g==null?void 0:g.handleChainStart(this.toJSON(),_t(n[y],"input"),u[y].runId,u[y].runType,void 0,void 0,u[y].runName??this.getName()));return delete u[y].runId,v}));let h;try{const g=e.call(this,n,u,f,l);h=await yr(g,(m=u==null?void 0:u[0])==null?void 0:m.signal)}catch(g){throw await Promise.all(f.map(y=>y==null?void 0:y.handleChainError(g))),g}return await Promise.all(f.map(g=>g==null?void 0:g.handleChainEnd(_t(h,"output")))),h}async*_transformStreamWithConfig(e,n,r){let l,u=!0,c,f=!0;const h=Pe(r),m=await Gn(h);async function*g(){for await(const v of e){if(u)if(l===void 0)l=v;else try{l=ia(l,v)}catch{l=void 0,u=!1}yield v}}let y;try{const v=await PO(n.bind(this),g(),async()=>m==null?void 0:m.handleChainStart(this.toJSON(),{input:""},h.runId,h.runType,void 0,void 0,h.runName??this.getName()),r==null?void 0:r.signal,h);delete h.runId,y=v.setup;const _=y==null?void 0:y.handlers.find(HO);let A=v.output;_!==void 0&&y!==void 0&&(A=_.tapOutputIterable(y.runId,A));const E=y==null?void 0:y.handlers.find($O);E!==void 0&&y!==void 0&&(A=E.tapOutputIterable(y.runId,A));for await(const O of A)if(yield O,f)if(c===void 0)c=O;else try{c=ia(c,O)}catch{c=void 0,f=!1}}catch(v){throw await(y==null?void 0:y.handleChainError(v,void 0,void 0,void 0,{inputs:_t(l,"input")})),v}await(y==null?void 0:y.handleChainEnd(c??{},void 0,void 0,void 0,{inputs:_t(l,"input")}))}getGraph(e){const n=new qo,r=n.addNode({name:`${this.getName()}Input`,schema:fl.any()}),l=n.addNode(this),u=n.addNode({name:`${this.getName()}Output`,schema:fl.any()});return n.addEdge(r,l),n.addEdge(l,u),n}pipe(e){return new Zr({first:this,last:Vr(e)})}pick(e){return this.pipe(new ZR(e))}assign(e){return this.pipe(new GR(new Gl({steps:e})))}async*transform(e,n){let r;for await(const l of e)r===void 0?r=l:r=ia(r,l);yield*this._streamIterator(r,Pe(n))}async*streamLog(e,n,r){const l=new Iv({...r,autoClose:!1,_schemaFormat:"original"}),u=Pe(n);yield*this._streamLog(e,l,u)}async*_streamLog(e,n,r){const{callbacks:l}=r;if(l===void 0)r.callbacks=[n];else if(Array.isArray(l))r.callbacks=l.concat([n]);else{const h=l.copy();h.addHandler(n,!0),r.callbacks=h}const u=this.stream(e,r);async function c(){try{const h=await u;for await(const m of h){const g=new lr({ops:[{op:"add",path:"/streamed_output/-",value:m}]});await n.writer.write(g)}}finally{await n.writer.close()}}const f=c();try{for await(const h of n)yield h}finally{await f}}streamEvents(e,n,r){let l;if(n.version==="v1")l=this._streamEventsV1(e,n,r);else if(n.version==="v2")l=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?PR(l):hn.fromAsyncGenerator(l)}async*_streamEventsV2(e,n,r){var A;const l=new qO({...r,autoClose:!1}),u=Pe(n),c=u.runId??Kt();u.runId=c;const f=u.callbacks;if(f===void 0)u.callbacks=[l];else if(Array.isArray(f))u.callbacks=f.concat(l);else{const E=f.copy();E.addHandler(l,!0),u.callbacks=E}const h=new AbortController,m=this;async function g(){try{let E;n!=null&&n.signal?"any"in AbortSignal?E=AbortSignal.any([h.signal,n.signal]):(E=n.signal,n.signal.addEventListener("abort",()=>{h.abort()},{once:!0})):E=h.signal;const O=await m.stream(e,{...u,signal:E}),x=l.tapOutputIterable(c,O);for await(const k of x)if(h.signal.aborted)break}finally{await l.finish()}}const y=g();let v=!1,_;try{for await(const E of l){if(!v){E.data.input=e,v=!0,_=E.run_id,yield E;continue}E.run_id===_&&E.event.endsWith("_end")&&(A=E.data)!=null&&A.input&&delete E.data.input,yield E}}finally{h.abort(),await y}}async*_streamEventsV1(e,n,r){let l,u=!1;const c=Pe(n),f=c.tags??[],h=c.metadata??{},m=c.runName??this.getName(),g=new Iv({...r,autoClose:!1,_schemaFormat:"streaming_events"}),y=new VO({...r}),v=this._streamLog(e,g,c);for await(const A of v){if(l?l=l.concat(A):l=kl.fromRunLogPatch(A),l.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!u){u=!0;const k={...l.state},M={run_id:k.id,event:`on_${k.type}_start`,name:m,tags:f,metadata:h,data:{input:e}};y.includeEvent(M,k.type)&&(yield M)}const E=A.ops.filter(k=>k.path.startsWith("/logs/")).map(k=>k.path.split("/")[2]),O=[...new Set(E)];for(const k of O){let M,ae={};const B=l.state.logs[k];if(B.end_time===void 0?B.streamed_output.length>0?M="stream":M="start":M="end",M==="start")B.inputs!==void 0&&(ae.input=B.inputs);else if(M==="end")B.inputs!==void 0&&(ae.input=B.inputs),ae.output=B.final_output;else if(M==="stream"){const X=B.streamed_output.length;if(X!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${X} instead. Encountered in: "${B.name}"`);ae={chunk:B.streamed_output[0]},B.streamed_output=[]}yield{event:`on_${B.type}_${M}`,name:B.name,run_id:B.id,tags:B.tags,metadata:B.metadata,data:ae}}const{state:x}=l;if(x.streamed_output.length>0){const k=x.streamed_output.length;if(k!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${k} instead. Encountered in: "${x.name}"`);const M={chunk:x.streamed_output[0]};x.streamed_output=[];const ae={event:`on_${x.type}_stream`,run_id:x.id,tags:f,metadata:h,name:m,data:M};y.includeEvent(ae,x.type)&&(yield ae)}}const _=l==null?void 0:l.state;if(_!==void 0){const A={event:`on_${_.type}_end`,name:m,run_id:_.id,tags:f,metadata:h,data:{output:_.final_output}};y.includeEvent(A,_.type)&&(yield A)}}static isRunnable(e){return fm(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new Fr({bound:this,config:{},configFactories:[l=>({callbacks:[new $_({config:l,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return VR(this,e)}}class Fr extends $t{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const n=kv(this.config,...e);return kv(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,n){return this.bound.invoke(e,await this._mergeConfig(Pe(n),this.kwargs))}async batch(e,n,r){const l=Array.isArray(n)?await Promise.all(n.map(async u=>this._mergeConfig(Pe(u),this.kwargs))):await this._mergeConfig(Pe(n),this.kwargs);return this.bound.batch(e,l,r)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,await this._mergeConfig(Pe(n),this.kwargs))}async stream(e,n){return this.bound.stream(e,await this._mergeConfig(Pe(n),this.kwargs))}async*transform(e,n){yield*this.bound.transform(e,await this._mergeConfig(Pe(n),this.kwargs))}streamEvents(e,n,r){const l=this,u=async function*(){yield*l.bound.streamEvents(e,{...await l._mergeConfig(Pe(n),l.kwargs),version:n.version},r)};return hn.fromAsyncGenerator(u())}static isRunnableBinding(e){return e.bound&&$t.isRunnable(e.bound)}withListeners({onStart:e,onEnd:n,onError:r}){return new Fr({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[l=>({callbacks:[new $_({config:l,onStart:e,onEnd:n,onError:r})]})]})}}class jo extends $t{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new jo({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _invoke(e,n,r){return this.bound.batch(e,Dt(n,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:n,onError:r}){return new jo({bound:this.bound.withListeners({onStart:e,onEnd:n,onError:r})})}}class zR extends Fr{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,n,r){const l=e>1?`retry:attempt:${e}`:void 0;return Dt(n,{callbacks:r==null?void 0:r.getChild(l)})}async _invoke(e,n,r){return Oo(l=>super.invoke(e,this._patchConfigForRetry(l,n,r)),{onFailedAttempt:l=>this.onFailedAttempt(l,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,l){const u={};try{await Oo(async c=>{const f=e.map((v,_)=>_).filter(v=>u[v.toString()]===void 0||u[v.toString()]instanceof Error),h=f.map(v=>e[v]),m=f.map(v=>this._patchConfigForRetry(c,n==null?void 0:n[v],r==null?void 0:r[v])),g=await super.batch(h,m,{...l,returnExceptions:!0});let y;for(let v=0;v<g.length;v+=1){const _=g[v],A=f[v];_ instanceof Error&&y===void 0&&(y=_,y.input=h[v]),u[A.toString()]=_}if(y)throw y;return g},{onFailedAttempt:c=>this.onFailedAttempt(c,c.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(c){if((l==null?void 0:l.returnExceptions)!==!0)throw c}return Object.keys(u).sort((c,f)=>parseInt(c,10)-parseInt(f,10)).map(c=>u[parseInt(c,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class Zr extends $t{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){var h;const r=Pe(n),l=await Gn(r),u=await(l==null?void 0:l.handleChainStart(this.toJSON(),_t(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let c=e,f;try{const m=[this.first,...this.middle];for(let g=0;g<m.length;g+=1){const v=m[g].invoke(c,Dt(r,{callbacks:u==null?void 0:u.getChild(this.omitSequenceTags?void 0:`seq:step:${g+1}`)}));c=await yr(v,n==null?void 0:n.signal)}if((h=n==null?void 0:n.signal)!=null&&h.aborted)throw new Error("Aborted");f=await this.last.invoke(c,Dt(r,{callbacks:u==null?void 0:u.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(m){throw await(u==null?void 0:u.handleChainError(m)),m}return await(u==null?void 0:u.handleChainEnd(_t(f,"output"))),f}async batch(e,n,r){var h;const l=this._getOptionsList(n??{},e.length),u=await Promise.all(l.map(Gn)),c=await Promise.all(u.map(async(m,g)=>{const y=await(m==null?void 0:m.handleChainStart(this.toJSON(),_t(e[g],"input"),l[g].runId,void 0,void 0,void 0,l[g].runName));return delete l[g].runId,y}));let f=e;try{for(let m=0;m<this.steps.length;m+=1){const y=this.steps[m].batch(f,c.map((v,_)=>{const A=v==null?void 0:v.getChild(this.omitSequenceTags?void 0:`seq:step:${m+1}`);return Dt(l[_],{callbacks:A})}),r);f=await yr(y,(h=l[0])==null?void 0:h.signal)}}catch(m){throw await Promise.all(c.map(g=>g==null?void 0:g.handleChainError(m))),m}return await Promise.all(c.map(m=>m==null?void 0:m.handleChainEnd(_t(f,"output")))),f}async*_streamIterator(e,n){var y;const r=await Gn(n),{runId:l,...u}=n??{},c=await(r==null?void 0:r.handleChainStart(this.toJSON(),_t(e,"input"),l,void 0,void 0,void 0,u==null?void 0:u.runName)),f=[this.first,...this.middle,this.last];let h=!0,m;async function*g(){yield e}try{let v=f[0].transform(g(),Dt(u,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let _=1;_<f.length;_+=1)v=await f[_].transform(v,Dt(u,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:`seq:step:${_+1}`)}));for await(const _ of v)if((y=n==null?void 0:n.signal)==null||y.throwIfAborted(),yield _,h)if(m===void 0)m=_;else try{m=ia(m,_)}catch{m=void 0,h=!1}}catch(v){throw await(c==null?void 0:c.handleChainError(v)),v}await(c==null?void 0:c.handleChainEnd(_t(m,"output")))}getGraph(e){const n=new qo;let r=null;return this.steps.forEach((l,u)=>{const c=l.getGraph(e);u!==0&&c.trimFirstNode(),u!==this.steps.length-1&&c.trimLastNode(),n.extend(c);const f=c.firstNode();if(!f)throw new Error(`Runnable ${l} has no first node`);r&&n.addEdge(r,f),r=c.lastNode()}),n}pipe(e){return Zr.isRunnableSequence(e)?new Zr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new Zr({first:this.first,middle:[...this.middle,this.last],last:Vr(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&$t.isRunnable(e)}static from([e,...n],r){let l={};return typeof r=="string"?l.name=r:r!==void 0&&(l=r),new Zr({...l,first:Vr(e),middle:n.slice(0,-1).map(Vr),last:Vr(n[n.length-1])})}}class Gl extends $t{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=Vr(r)}static from(e){return new Gl({steps:e})}async invoke(e,n){const r=Pe(n),l=await Gn(r),u=await(l==null?void 0:l.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const c={};try{const f=Object.entries(this.steps).map(async([h,m])=>{c[h]=await m.invoke(e,Dt(r,{callbacks:u==null?void 0:u.getChild(`map:key:${h}`)}))});await yr(Promise.all(f),n==null?void 0:n.signal)}catch(f){throw await(u==null?void 0:u.handleChainError(f)),f}return await(u==null?void 0:u.handleChainEnd(c)),c}async*_transform(e,n,r){const l={...this.steps},u=P_(e,Object.keys(l).length),c=new Map(Object.entries(l).map(([f,h],m)=>{const g=h.transform(u[m],Dt(r,{callbacks:n==null?void 0:n.getChild(`map:key:${f}`)}));return[f,g.next().then(y=>({key:f,gen:g,result:y}))]}));for(;c.size;){const f=Promise.race(c.values()),{key:h,result:m,gen:g}=await yr(f,r==null?void 0:r.signal);c.delete(h),m.done||(yield{[h]:m.value},c.set(h,g.next().then(y=>({key:h,gen:g,result:y}))))}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Pe(n),u=new rs({generator:this.transform(r(),l),config:l});return await u.setup,hn.fromAsyncGenerator(u)}}class hm extends $t{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!om(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,n){const[r]=this._getOptionsList(n??{},1),l=await Gn(r),u=this.func(Dt(r,{callbacks:l}),e);return yr(u,r==null?void 0:r.signal)}async*_streamIterator(e,n){var u,c;const[r]=this._getOptionsList(n??{},1),l=await this.invoke(e,n);if($h(l)){for await(const f of l)(u=r==null?void 0:r.signal)==null||u.throwIfAborted(),yield f;return}if($R(l)){for(;;){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();const f=l.next();if(f.done)break;yield f.value}return}yield l}static from(e){return new hm({func:e})}}function HR(i){if(om(i))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class Go extends $t{static lc_name(){return"RunnableLambda"}constructor(e){if(om(e.func))return hm.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),HR(e.func),this.func=e.func}static from(e){return new Go({func:e})}async _invoke(e,n,r){return new Promise((l,u)=>{const c=Dt(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??yh)-1});gr.runWithConfig(es(c),async()=>{var f,h;try{let m=await this.func(e,{...c});if(m&&$t.isRunnable(m)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");m=await m.invoke(e,{...c,recursionLimit:(c.recursionLimit??yh)-1})}else if($h(m)){let g;for await(const y of zh(c,m))if((f=n==null?void 0:n.signal)==null||f.throwIfAborted(),g===void 0)g=y;else try{g=ia(g,y)}catch{g=y}m=g}else if(qv(m)){let g;for(const y of Gv(c,m))if((h=n==null?void 0:n.signal)==null||h.throwIfAborted(),g===void 0)g=y;else try{g=ia(g,y)}catch{g=y}m=g}l(m)}catch(m){u(m)}})})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async*_transform(e,n,r){var f,h;let l;for await(const m of e)if(l===void 0)l=m;else try{l=ia(l,m)}catch{l=m}const u=Dt(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??yh)-1}),c=await new Promise((m,g)=>{gr.runWithConfig(es(u),async()=>{try{const y=await this.func(l,{...u,config:u});m(y)}catch(y){g(y)}})});if(c&&$t.isRunnable(c)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const m=await c.stream(l,u);for await(const g of m)yield g}else if($h(c))for await(const m of zh(u,c))(f=r==null?void 0:r.signal)==null||f.throwIfAborted(),yield m;else if(qv(c))for(const m of Gv(u,c))(h=r==null?void 0:r.signal)==null||h.throwIfAborted(),yield m;else yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Pe(n),u=new rs({generator:this.transform(r(),l),config:l});return await u.setup,hn.fromAsyncGenerator(u)}}class qR extends $t{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=Pe(n),l=await Gn(r),{runId:u,...c}=r,f=await(l==null?void 0:l.handleChainStart(this.toJSON(),_t(e,"input"),u,void 0,void 0,void 0,c==null?void 0:c.runName)),h=Dt(c,{callbacks:f==null?void 0:f.getChild()});return await gr.runWithConfig(h,async()=>{var y;let g;for(const v of this.runnables()){(y=r==null?void 0:r.signal)==null||y.throwIfAborted();try{const _=await v.invoke(e,h);return await(f==null?void 0:f.handleChainEnd(_t(_,"output"))),_}catch(_){g===void 0&&(g=_)}}throw g===void 0?new Error("No error stored at end of fallback."):(await(f==null?void 0:f.handleChainError(g)),g)})}async*_streamIterator(e,n){var y;const r=Pe(n),l=await Gn(r),{runId:u,...c}=r,f=await(l==null?void 0:l.handleChainStart(this.toJSON(),_t(e,"input"),u,void 0,void 0,void 0,c==null?void 0:c.runName));let h,m;for(const v of this.runnables()){(y=r==null?void 0:r.signal)==null||y.throwIfAborted();const _=Dt(c,{callbacks:f==null?void 0:f.getChild()});try{const A=await v.stream(e,_);m=zh(_,A);break}catch(A){h===void 0&&(h=A)}}if(m===void 0){const v=h??new Error("No error stored at end of fallback.");throw await(f==null?void 0:f.handleChainError(v)),v}let g;try{for await(const v of m){yield v;try{g=g===void 0?g:ia(g,v)}catch{g=void 0}}}catch(v){throw await(f==null?void 0:f.handleChainError(v)),v}await(f==null?void 0:f.handleChainEnd(_t(g,"output")))}async batch(e,n,r){var h;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const l=this._getOptionsList(n??{},e.length),u=await Promise.all(l.map(m=>Gn(m))),c=await Promise.all(u.map(async(m,g)=>{const y=await(m==null?void 0:m.handleChainStart(this.toJSON(),_t(e[g],"input"),l[g].runId,void 0,void 0,void 0,l[g].runName));return delete l[g].runId,y}));let f;for(const m of this.runnables()){(h=l[0].signal)==null||h.throwIfAborted();try{const g=await m.batch(e,c.map((y,v)=>Dt(l[v],{callbacks:y==null?void 0:y.getChild()})),r);return await Promise.all(c.map((y,v)=>y==null?void 0:y.handleChainEnd(_t(g[v],"output")))),g}catch(g){f===void 0&&(f=g)}}throw f?(await Promise.all(c.map(m=>m==null?void 0:m.handleChainError(f))),f):new Error("No error stored at end of fallbacks.")}}function Vr(i){if(typeof i=="function")return new Go({func:i});if($t.isRunnable(i))return i;if(!Array.isArray(i)&&typeof i=="object"){const e={};for(const[n,r]of Object.entries(i))e[n]=Vr(r);return new Gl({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class GR extends $t{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Gl&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const l=this.mapper.getStepsKeys(),[u,c]=P_(e),f=this.mapper.transform(c,Dt(r,{callbacks:n==null?void 0:n.getChild()})),h=f.next();for await(const m of u){if(typeof m!="object"||Array.isArray(m))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof m}`);const g=Object.fromEntries(Object.entries(m).filter(([y])=>!l.includes(y)));Object.keys(g).length>0&&(yield g)}yield(await h).value;for await(const m of f)yield m}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Pe(n),u=new rs({generator:this.transform(r(),l),config:l});return await u.setup,hn.fromAsyncGenerator(u)}}class ZR extends $t{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Pe(n),u=new rs({generator:this.transform(r(),l),config:l});return await u.setup,hn.fromAsyncGenerator(u)}}class Zv extends Fr{constructor(e){const n=Zr.from([Go.from(async r=>{let l;if(p_(r))try{l=await this.schema.parseAsync(r.args)}catch{throw new SS("Received tool input did not match expected schema",JSON.stringify(r.args))}else l=r;return l}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function VR(i,e){var l;const n=e.name??i.getName(),r=e.description??((l=e.schema)==null?void 0:l.description);return e.schema.constructor===fl.ZodString?new Zv({name:n,description:r,schema:fl.object({input:fl.string()}).transform(u=>u.input),bound:i}):new Zv({name:n,description:r,schema:e.schema,bound:i})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var QR=typeof window=="object"?window:{},Ee="0123456789abcdef".split(""),YR=[-2147483648,8388608,32768,128],$n=[24,16,8,0],bt=[];function Qn(i){i?(bt[0]=bt[16]=bt[1]=bt[2]=bt[3]=bt[4]=bt[5]=bt[6]=bt[7]=bt[8]=bt[9]=bt[10]=bt[11]=bt[12]=bt[13]=bt[14]=bt[15]=0,this.blocks=bt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Qn.prototype.update=function(i){if(!this.finalized){var e=typeof i!="string";e&&i.constructor===QR.ArrayBuffer&&(i=new Uint8Array(i));for(var n,r=0,l,u=i.length||0,c=this.blocks;r<u;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(l=this.start;r<u&&l<64;++r)c[l>>2]|=i[r]<<$n[l++&3];else for(l=this.start;r<u&&l<64;++r)n=i.charCodeAt(r),n<128?c[l>>2]|=n<<$n[l++&3]:n<2048?(c[l>>2]|=(192|n>>6)<<$n[l++&3],c[l>>2]|=(128|n&63)<<$n[l++&3]):n<55296||n>=57344?(c[l>>2]|=(224|n>>12)<<$n[l++&3],c[l>>2]|=(128|n>>6&63)<<$n[l++&3],c[l>>2]|=(128|n&63)<<$n[l++&3]):(n=65536+((n&1023)<<10|i.charCodeAt(++r)&1023),c[l>>2]|=(240|n>>18)<<$n[l++&3],c[l>>2]|=(128|n>>12&63)<<$n[l++&3],c[l>>2]|=(128|n>>6&63)<<$n[l++&3],c[l>>2]|=(128|n&63)<<$n[l++&3]);this.lastByteIndex=l,this.bytes+=l-this.start,l>=64?(this.block=c[16],this.start=l-64,this.hash(),this.hashed=!0):this.start=l}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Qn.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var i=this.blocks,e=this.lastByteIndex;i[16]=this.block,i[e>>2]|=YR[e&3],this.block=i[16],e>=56&&(this.hashed||this.hash(),i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),i[14]=this.hBytes<<3|this.bytes>>>29,i[15]=this.bytes<<3,this.hash()}};Qn.prototype.hash=function(){var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4,u,c,f,h=this.blocks;for(c=16;c<80;++c)f=h[c-3]^h[c-8]^h[c-14]^h[c-16],h[c]=f<<1|f>>>31;for(c=0;c<20;c+=5)u=e&n|~e&r,f=i<<5|i>>>27,l=f+u+l+1518500249+h[c]<<0,e=e<<30|e>>>2,u=i&e|~i&n,f=l<<5|l>>>27,r=f+u+r+1518500249+h[c+1]<<0,i=i<<30|i>>>2,u=l&i|~l&e,f=r<<5|r>>>27,n=f+u+n+1518500249+h[c+2]<<0,l=l<<30|l>>>2,u=r&l|~r&i,f=n<<5|n>>>27,e=f+u+e+1518500249+h[c+3]<<0,r=r<<30|r>>>2,u=n&r|~n&l,f=e<<5|e>>>27,i=f+u+i+1518500249+h[c+4]<<0,n=n<<30|n>>>2;for(;c<40;c+=5)u=e^n^r,f=i<<5|i>>>27,l=f+u+l+1859775393+h[c]<<0,e=e<<30|e>>>2,u=i^e^n,f=l<<5|l>>>27,r=f+u+r+1859775393+h[c+1]<<0,i=i<<30|i>>>2,u=l^i^e,f=r<<5|r>>>27,n=f+u+n+1859775393+h[c+2]<<0,l=l<<30|l>>>2,u=r^l^i,f=n<<5|n>>>27,e=f+u+e+1859775393+h[c+3]<<0,r=r<<30|r>>>2,u=n^r^l,f=e<<5|e>>>27,i=f+u+i+1859775393+h[c+4]<<0,n=n<<30|n>>>2;for(;c<60;c+=5)u=e&n|e&r|n&r,f=i<<5|i>>>27,l=f+u+l-1894007588+h[c]<<0,e=e<<30|e>>>2,u=i&e|i&n|e&n,f=l<<5|l>>>27,r=f+u+r-1894007588+h[c+1]<<0,i=i<<30|i>>>2,u=l&i|l&e|i&e,f=r<<5|r>>>27,n=f+u+n-1894007588+h[c+2]<<0,l=l<<30|l>>>2,u=r&l|r&i|l&i,f=n<<5|n>>>27,e=f+u+e-1894007588+h[c+3]<<0,r=r<<30|r>>>2,u=n&r|n&l|r&l,f=e<<5|e>>>27,i=f+u+i-1894007588+h[c+4]<<0,n=n<<30|n>>>2;for(;c<80;c+=5)u=e^n^r,f=i<<5|i>>>27,l=f+u+l-899497514+h[c]<<0,e=e<<30|e>>>2,u=i^e^n,f=l<<5|l>>>27,r=f+u+r-899497514+h[c+1]<<0,i=i<<30|i>>>2,u=l^i^e,f=r<<5|r>>>27,n=f+u+n-899497514+h[c+2]<<0,l=l<<30|l>>>2,u=r^l^i,f=n<<5|n>>>27,e=f+u+e-899497514+h[c+3]<<0,r=r<<30|r>>>2,u=n^r^l,f=e<<5|e>>>27,i=f+u+i-899497514+h[c+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+i<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+l<<0};Qn.prototype.hex=function(){this.finalize();var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4;return Ee[i>>28&15]+Ee[i>>24&15]+Ee[i>>20&15]+Ee[i>>16&15]+Ee[i>>12&15]+Ee[i>>8&15]+Ee[i>>4&15]+Ee[i&15]+Ee[e>>28&15]+Ee[e>>24&15]+Ee[e>>20&15]+Ee[e>>16&15]+Ee[e>>12&15]+Ee[e>>8&15]+Ee[e>>4&15]+Ee[e&15]+Ee[n>>28&15]+Ee[n>>24&15]+Ee[n>>20&15]+Ee[n>>16&15]+Ee[n>>12&15]+Ee[n>>8&15]+Ee[n>>4&15]+Ee[n&15]+Ee[r>>28&15]+Ee[r>>24&15]+Ee[r>>20&15]+Ee[r>>16&15]+Ee[r>>12&15]+Ee[r>>8&15]+Ee[r>>4&15]+Ee[r&15]+Ee[l>>28&15]+Ee[l>>24&15]+Ee[l>>20&15]+Ee[l>>16&15]+Ee[l>>12&15]+Ee[l>>8&15]+Ee[l>>4&15]+Ee[l&15]};Qn.prototype.toString=Qn.prototype.hex;Qn.prototype.digest=function(){this.finalize();var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4;return[i>>24&255,i>>16&255,i>>8&255,i&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,l>>24&255,l>>16&255,l>>8&255,l&255]};Qn.prototype.array=Qn.prototype.digest;Qn.prototype.arrayBuffer=function(){this.finalize();var i=new ArrayBuffer(20),e=new DataView(i);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),i};const FR=i=>new Qn(!0).update(i).hex(),Vv=(...i)=>FR(i.join("_"));class KR{}const XR=new Map;class mm extends KR{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,n){return Promise.resolve(this.cache.get(Vv(e,n))??null)}async update(e,n,r){this.cache.set(Vv(e,n),r)}static global(){return new mm(XR)}}class V_ extends dr{}class JR extends V_{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Pl(this.value)]}}class WR extends V_{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return tm(this.messages)}toChatMessages(){return this.messages}}var il={},Qv;function eC(){if(Qv)return il;Qv=1,il.byteLength=f,il.toByteArray=m,il.fromByteArray=v;for(var i=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=r.length;l<u;++l)i[l]=r[l],e[r.charCodeAt(l)]=l;e[45]=62,e[95]=63;function c(_){var A=_.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=_.indexOf("=");E===-1&&(E=A);var O=E===A?0:4-E%4;return[E,O]}function f(_){var A=c(_),E=A[0],O=A[1];return(E+O)*3/4-O}function h(_,A,E){return(A+E)*3/4-E}function m(_){var A,E=c(_),O=E[0],x=E[1],k=new n(h(_,O,x)),M=0,ae=x>0?O-4:O,B;for(B=0;B<ae;B+=4)A=e[_.charCodeAt(B)]<<18|e[_.charCodeAt(B+1)]<<12|e[_.charCodeAt(B+2)]<<6|e[_.charCodeAt(B+3)],k[M++]=A>>16&255,k[M++]=A>>8&255,k[M++]=A&255;return x===2&&(A=e[_.charCodeAt(B)]<<2|e[_.charCodeAt(B+1)]>>4,k[M++]=A&255),x===1&&(A=e[_.charCodeAt(B)]<<10|e[_.charCodeAt(B+1)]<<4|e[_.charCodeAt(B+2)]>>2,k[M++]=A>>8&255,k[M++]=A&255),k}function g(_){return i[_>>18&63]+i[_>>12&63]+i[_>>6&63]+i[_&63]}function y(_,A,E){for(var O,x=[],k=A;k<E;k+=3)O=(_[k]<<16&16711680)+(_[k+1]<<8&65280)+(_[k+2]&255),x.push(g(O));return x.join("")}function v(_){for(var A,E=_.length,O=E%3,x=[],k=16383,M=0,ae=E-O;M<ae;M+=k)x.push(y(_,M,M+k>ae?ae:M+k));return O===1?(A=_[E-1],x.push(i[A>>2]+i[A<<4&63]+"==")):O===2&&(A=(_[E-2]<<8)+_[E-1],x.push(i[A>>10]+i[A>>4&63]+i[A<<2&63]+"=")),x.join("")}return il}var tC=eC();const nC=ti(tC);var aC=Object.defineProperty,rC=(i,e,n)=>e in i?aC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,iC=(i,e,n)=>(rC(i,e+"",n),n);function sC(i,e){let n=Array.from({length:i.length},(r,l)=>({start:l,end:l+1}));for(;n.length>1;){let r=null;for(let l=0;l<n.length-1;l++){const u=i.slice(n[l].start,n[l+1].end),c=e.get(u.join(","));c!=null&&(r==null||c<r[0])&&(r=[c,l])}if(r!=null){const l=r[1];n[l]={start:n[l].start,end:n[l+1].end},n.splice(l+1,1)}else break}return n}function lC(i,e){return i.length===1?[e.get(i.join(","))]:sC(i,e).map(n=>e.get(i.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function uC(i){return i.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Hh=class{constructor(i,e){ar(this,"specialTokens");ar(this,"inverseSpecialTokens");ar(this,"patStr");ar(this,"textEncoder",new TextEncoder);ar(this,"textDecoder",new TextDecoder("utf-8"));ar(this,"rankMap",new Map);ar(this,"textMap",new Map);this.patStr=i.pat_str;const n=i.bpe_ranks.split(`
`).filter(Boolean).reduce((r,l)=>{const[u,c,...f]=l.split(" "),h=Number.parseInt(c,10);return f.forEach((m,g)=>r[m]=h+g),r},{});for(const[r,l]of Object.entries(n)){const u=nC.toByteArray(r);this.rankMap.set(u.join(","),l),this.textMap.set(l,u)}this.specialTokens={...i.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[l,u])=>(r[u]=this.textEncoder.encode(l),r),{})}encode(i,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),l=Hh.specialTokenRegex(Object.keys(this.specialTokens)),u=[],c=new Set(e==="all"?Object.keys(this.specialTokens):e),f=new Set(n==="all"?Object.keys(this.specialTokens).filter(m=>!c.has(m)):n);if(f.size>0){const m=Hh.specialTokenRegex([...f]),g=i.match(m);if(g!=null)throw new Error(`The text contains a special token that is not allowed: ${g[0]}`)}let h=0;for(;;){let m=null,g=h;for(;l.lastIndex=g,m=l.exec(i),!(m==null||c.has(m[0]));)g=m.index+1;const y=(m==null?void 0:m.index)??i.length;for(const _ of i.substring(h,y).matchAll(r)){const A=this.textEncoder.encode(_[0]),E=this.rankMap.get(A.join(","));if(E!=null){u.push(E);continue}u.push(...lC(A,this.rankMap))}if(m==null)break;let v=this.specialTokens[m[0]];u.push(v),h=m.index+m[0].length}return u}decode(i){const e=[];let n=0;for(let u=0;u<i.length;++u){const c=i[u],f=this.textMap.get(c)??this.inverseSpecialTokens[c];f!=null&&(e.push(f),n+=f.length)}const r=new Uint8Array(n);let l=0;for(const u of e)r.set(u,l),l+=u.length;return this.textDecoder.decode(r)}},Q_=Hh;iC(Q_,"specialTokenRegex",i=>new RegExp(i.map(e=>uC(e)).join("|"),"g"));function oC(i){switch(i){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"o3-mini":case"o3-mini-2025-01-31":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw new Error("Unknown model")}}const co={},cC=new dm({});async function dC(i){return i in co||(co[i]=cC.fetch(`https://tiktoken.pages.dev/js/${i}.json`).then(e=>e.json()).then(e=>new Q_(e)).catch(e=>{throw delete co[i],e})),await co[i]}async function fC(i){return dC(oC(i))}const hC=i=>i.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":i.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":i.startsWith("gpt-4-32k")?"gpt-4-32k":i.startsWith("gpt-4-")?"gpt-4":i.startsWith("gpt-4o")?"gpt-4o":i,mC=()=>!1;class pC extends $t{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??mC(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class gC extends pC{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:n,...r}){const{cache:l,...u}=r;super({callbacks:e??n,...u}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof l=="object"?this.cache=l:l?this.cache=mm.global():this.cache=void 0,this.caller=new dm(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let n=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await fC("modelName"in this?hC(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{n=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new JR(e):Array.isArray(e)?new WR(e.map(RS)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([c,f])=>f!==void 0).map(([c,f])=>`${c}:${JSON.stringify(f)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}var Tt=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},Pt={searchParams:"URLSearchParams"in Tt,iterable:"Symbol"in Tt&&"iterator"in Symbol,blob:"FileReader"in Tt&&"Blob"in Tt&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Tt,arrayBuffer:"ArrayBuffer"in Tt};function yC(i){return i&&DataView.prototype.isPrototypeOf(i)}if(Pt.arrayBuffer)var bC=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],vC=ArrayBuffer.isView||function(i){return i&&bC.indexOf(Object.prototype.toString.call(i))>-1};function is(i){if(typeof i!="string"&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(i)||i==="")throw new TypeError('Invalid character in header field name: "'+i+'"');return i.toLowerCase()}function pm(i){return typeof i!="string"&&(i=String(i)),i}function gm(i){var e={next:function(){var n=i.shift();return{done:n===void 0,value:n}}};return Pt.iterable&&(e[Symbol.iterator]=function(){return e}),e}function ft(i){this.map={},i instanceof ft?i.forEach(function(e,n){this.append(n,e)},this):Array.isArray(i)?i.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):i&&Object.getOwnPropertyNames(i).forEach(function(e){this.append(e,i[e])},this)}ft.prototype.append=function(i,e){i=is(i),e=pm(e);var n=this.map[i];this.map[i]=n?n+", "+e:e};ft.prototype.delete=function(i){delete this.map[is(i)]};ft.prototype.get=function(i){return i=is(i),this.has(i)?this.map[i]:null};ft.prototype.has=function(i){return this.map.hasOwnProperty(is(i))};ft.prototype.set=function(i,e){this.map[is(i)]=pm(e)};ft.prototype.forEach=function(i,e){for(var n in this.map)this.map.hasOwnProperty(n)&&i.call(e,this.map[n],n,this)};ft.prototype.keys=function(){var i=[];return this.forEach(function(e,n){i.push(n)}),gm(i)};ft.prototype.values=function(){var i=[];return this.forEach(function(e){i.push(e)}),gm(i)};ft.prototype.entries=function(){var i=[];return this.forEach(function(e,n){i.push([n,e])}),gm(i)};Pt.iterable&&(ft.prototype[Symbol.iterator]=ft.prototype.entries);function wh(i){if(!i._noBody){if(i.bodyUsed)return Promise.reject(new TypeError("Already read"));i.bodyUsed=!0}}function Y_(i){return new Promise(function(e,n){i.onload=function(){e(i.result)},i.onerror=function(){n(i.error)}})}function _C(i){var e=new FileReader,n=Y_(e);return e.readAsArrayBuffer(i),n}function wC(i){var e=new FileReader,n=Y_(e),r=/charset=([A-Za-z0-9_-]+)/.exec(i.type),l=r?r[1]:"utf-8";return e.readAsText(i,l),n}function AC(i){for(var e=new Uint8Array(i),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function Yv(i){if(i.slice)return i.slice(0);var e=new Uint8Array(i.byteLength);return e.set(new Uint8Array(i)),e.buffer}function F_(){return this.bodyUsed=!1,this._initBody=function(i){this.bodyUsed=this.bodyUsed,this._bodyInit=i,i?typeof i=="string"?this._bodyText=i:Pt.blob&&Blob.prototype.isPrototypeOf(i)?this._bodyBlob=i:Pt.formData&&FormData.prototype.isPrototypeOf(i)?this._bodyFormData=i:Pt.searchParams&&URLSearchParams.prototype.isPrototypeOf(i)?this._bodyText=i.toString():Pt.arrayBuffer&&Pt.blob&&yC(i)?(this._bodyArrayBuffer=Yv(i.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Pt.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(i)||vC(i))?this._bodyArrayBuffer=Yv(i):this._bodyText=i=Object.prototype.toString.call(i):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof i=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Pt.searchParams&&URLSearchParams.prototype.isPrototypeOf(i)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Pt.blob&&(this.blob=function(){var i=wh(this);if(i)return i;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var i=wh(this);return i||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(Pt.blob)return this.blob().then(_C);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var i=wh(this);if(i)return i;if(this._bodyBlob)return wC(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(AC(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Pt.formData&&(this.formData=function(){return this.text().then(TC)}),this.json=function(){return this.text().then(JSON.parse)},this}var EC=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function SC(i){var e=i.toUpperCase();return EC.indexOf(e)>-1?e:i}function ei(i,e){if(!(this instanceof ei))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(i instanceof ei){if(i.bodyUsed)throw new TypeError("Already read");this.url=i.url,this.credentials=i.credentials,e.headers||(this.headers=new ft(i.headers)),this.method=i.method,this.mode=i.mode,this.signal=i.signal,!n&&i._bodyInit!=null&&(n=i._bodyInit,i.bodyUsed=!0)}else this.url=String(i);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new ft(e.headers)),this.method=SC(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in Tt){var u=new AbortController;return u.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var l=/\?/;this.url+=(l.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}ei.prototype.clone=function(){return new ei(this,{body:this._bodyInit})};function TC(i){var e=new FormData;return i.trim().split("&").forEach(function(n){if(n){var r=n.split("="),l=r.shift().replace(/\+/g," "),u=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(l),decodeURIComponent(u))}}),e}function OC(i){var e=new ft,n=i.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var l=r.split(":"),u=l.shift().trim();if(u){var c=l.join(":").trim();try{e.append(u,c)}catch(f){console.warn("Response "+f.message)}}}),e}F_.call(ei.prototype);function ua(i,e){if(!(this instanceof ua))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new ft(e.headers),this.url=e.url||"",this._initBody(i)}F_.call(ua.prototype);ua.prototype.clone=function(){return new ua(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ft(this.headers),url:this.url})};ua.error=function(){var i=new ua(null,{status:200,statusText:""});return i.ok=!1,i.status=0,i.type="error",i};var RC=[301,302,303,307,308];ua.redirect=function(i,e){if(RC.indexOf(e)===-1)throw new RangeError("Invalid status code");return new ua(null,{status:e,headers:{location:i}})};var Gr=Tt.DOMException;try{new Gr}catch{Gr=function(e,n){this.message=e,this.name=n;var r=Error(e);this.stack=r.stack},Gr.prototype=Object.create(Error.prototype),Gr.prototype.constructor=Gr}function K_(i,e){return new Promise(function(n,r){var l=new ei(i,e);if(l.signal&&l.signal.aborted)return r(new Gr("Aborted","AbortError"));var u=new XMLHttpRequest;function c(){u.abort()}u.onload=function(){var m={statusText:u.statusText,headers:OC(u.getAllResponseHeaders()||"")};l.url.indexOf("file://")===0&&(u.status<200||u.status>599)?m.status=200:m.status=u.status,m.url="responseURL"in u?u.responseURL:m.headers.get("X-Request-URL");var g="response"in u?u.response:u.responseText;setTimeout(function(){n(new ua(g,m))},0)},u.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request timed out"))},0)},u.onabort=function(){setTimeout(function(){r(new Gr("Aborted","AbortError"))},0)};function f(m){try{return m===""&&Tt.location.href?Tt.location.href:m}catch{return m}}if(u.open(l.method,f(l.url),!0),l.credentials==="include"?u.withCredentials=!0:l.credentials==="omit"&&(u.withCredentials=!1),"responseType"in u&&(Pt.blob?u.responseType="blob":Pt.arrayBuffer&&(u.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof ft||Tt.Headers&&e.headers instanceof Tt.Headers)){var h=[];Object.getOwnPropertyNames(e.headers).forEach(function(m){h.push(is(m)),u.setRequestHeader(m,pm(e.headers[m]))}),l.headers.forEach(function(m,g){h.indexOf(g)===-1&&u.setRequestHeader(g,m)})}else l.headers.forEach(function(m,g){u.setRequestHeader(g,m)});l.signal&&(l.signal.addEventListener("abort",c),u.onreadystatechange=function(){u.readyState===4&&l.signal.removeEventListener("abort",c)}),u.send(typeof l._bodyInit>"u"?null:l._bodyInit)})}K_.polyfill=!0;Tt.fetch||(Tt.fetch=K_,Tt.Headers=ft,Tt.Request=ei,Tt.Response=ua);const CC="0.5.14",X_="11434",J_=`http://127.0.0.1:${X_}`;var xC=Object.defineProperty,NC=(i,e,n)=>e in i?xC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,Ah=(i,e,n)=>(NC(i,typeof e!="symbol"?e+"":e,n),n);class ym extends Error{constructor(e,n){super(e),this.error=e,this.status_code=n,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,ym)}}class DC{constructor(e,n,r){Ah(this,"abortController"),Ah(this,"itr"),Ah(this,"doneCallback"),this.abortController=e,this.itr=n,this.doneCallback=r}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(const e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}}const bm=async i=>{var r;if(i.ok)return;let e=`Error ${i.status}: ${i.statusText}`,n=null;if((r=i.headers.get("content-type"))!=null&&r.includes("application/json"))try{n=await i.json(),e=n.error||e}catch{console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await i.text()||e}catch{console.log("Failed to get text from error response")}throw new ym(e,i.status)};function MC(){var i;if(typeof window<"u"&&window.navigator){const e=navigator;return"userAgentData"in e&&((i=e.userAgentData)!=null&&i.platform)?`${e.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process<"u")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function jC(i){if(i instanceof Headers){const e={};return i.forEach((n,r)=>{e[r]=n}),e}else return Array.isArray(i)?Object.fromEntries(i):i||{}}const vm=async(i,e,n={})=>{const r={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${CC} (${MC()})`};n.headers=jC(n.headers);const l=Object.fromEntries(Object.entries(n.headers).filter(([u])=>!Object.keys(r).some(c=>c.toLowerCase()===u.toLowerCase())));return n.headers={...r,...l},i(e,n)},Fv=async(i,e,n)=>{const r=await vm(i,e,{headers:n==null?void 0:n.headers});return await bm(r),r},zi=async(i,e,n,r)=>{const u=(f=>f!==null&&typeof f=="object"&&!Array.isArray(f))(n)?JSON.stringify(n):n,c=await vm(i,e,{method:"POST",body:u,signal:r==null?void 0:r.signal,headers:r==null?void 0:r.headers});return await bm(c),c},kC=async(i,e,n,r)=>{const l=await vm(i,e,{method:"DELETE",body:JSON.stringify(n),headers:r==null?void 0:r.headers});return await bm(l),l},LC=async function*(i){const e=new TextDecoder("utf-8");let n="";const r=i.getReader();for(;;){const{done:l,value:u}=await r.read();if(l)break;n+=e.decode(u);const c=n.split(`
`);n=c.pop()??"";for(const f of c)try{yield JSON.parse(f)}catch{console.warn("invalid json: ",f)}}for(const l of n.split(`
`).filter(u=>u!==""))try{yield JSON.parse(l)}catch{console.warn("invalid json: ",l)}},UC=i=>{if(!i)return J_;let e=i.includes("://");i.startsWith(":")&&(i=`http://127.0.0.1${i}`,e=!0),e||(i=`http://${i}`);const n=new URL(i);let r=n.port;r||(e?r=n.protocol==="https:"?"443":"80":r=X_);let l=`${n.protocol}//${n.hostname}:${r}${n.pathname}`;return l.endsWith("/")&&(l=l.slice(0,-1)),l};var IC=Object.defineProperty,BC=(i,e,n)=>e in i?IC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,Eh=(i,e,n)=>(BC(i,typeof e!="symbol"?e+"":e,n),n);let W_=class{constructor(e){Eh(this,"config"),Eh(this,"fetch"),Eh(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e==null?void 0:e.headers},e!=null&&e.proxy||(this.config.host=UC((e==null?void 0:e.host)??J_)),this.fetch=(e==null?void 0:e.fetch)??fetch}abort(){for(const e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,n){n.stream=n.stream??!1;const r=`${this.config.host}/api/${e}`;if(n.stream){const u=new AbortController,c=await zi(this.fetch,r,n,{signal:u.signal,headers:this.config.headers});if(!c.body)throw new Error("Missing body");const f=LC(c.body),h=new DC(u,f,()=>{const m=this.ongoingStreamedRequests.indexOf(h);m>-1&&this.ongoingStreamedRequests.splice(m,1)});return this.ongoingStreamedRequests.push(h),h}return await(await zi(this.fetch,r,n,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){const n=new Uint8Array(e);let r="";const l=n.byteLength;for(let u=0;u<l;u++)r+=String.fromCharCode(n[u]);return btoa(r)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(const n of e.messages)n.images&&(n.images=await Promise.all(n.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await kC(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await zi(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await Fv(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await zi(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await zi(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await zi(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await Fv(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}};new W_;class Vi extends gC{constructor({concurrency:e,...n}){super(e?{maxConcurrency:e,...n}:n),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}async invoke(e,n){const r=Vi._convertInputToPromptValue(e);return(await this.generatePrompt([r],n,n==null?void 0:n.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,n,r){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){const[n,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=n.signal,[n,r]}async*_streamIterator(e,n){if(this._streamResponseChunks===Vi.prototype._streamResponseChunks)yield this.invoke(e,n);else{const r=Vi._convertInputToPromptValue(e),[l,u]=this._separateRunnableConfigFromCallOptionsCompat(n),c=await Xt.configure(l.callbacks,this.callbacks,l.tags,this.tags,l.metadata,this.metadata,{verbose:this.verbose}),f={options:u,invocation_params:this==null?void 0:this.invocationParams(u),batch_size:1},h=await(c==null?void 0:c.handleLLMStart(this.toJSON(),[r.toString()],l.runId,void 0,f,void 0,void 0,l.runName));let m=new Wr({text:""});try{for await(const g of this._streamResponseChunks(r.toString(),u,h==null?void 0:h[0]))m?m=m.concat(g):m=g,typeof g.text=="string"&&(yield g.text)}catch(g){throw await Promise.all((h??[]).map(y=>y==null?void 0:y.handleLLMError(g))),g}await Promise.all((h??[]).map(g=>g==null?void 0:g.handleLLMEnd({generations:[[m]]})))}}async generatePrompt(e,n,r){const l=e.map(u=>u.toString());return this.generate(l,n,r)}invocationParams(e){return{}}_flattenLLMResult(e){const n=[];for(let r=0;r<e.generations.length;r+=1){const l=e.generations[r];if(r===0)n.push({generations:[l],llmOutput:e.llmOutput});else{const u=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;n.push({generations:[l],llmOutput:u})}}return n}async _generateUncached(e,n,r,l){let u;if(l!==void 0&&l.length===e.length)u=l;else{const m=await Xt.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),g={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:e.length};u=await(m==null?void 0:m.handleLLMStart(this.toJSON(),e,r.runId,void 0,g,void 0,void 0,r==null?void 0:r.runName))}const c=!!(u!=null&&u[0].handlers.find(bO));let f;if(c&&e.length===1&&this._streamResponseChunks!==Vi.prototype._streamResponseChunks)try{const m=await this._streamResponseChunks(e[0],n,u==null?void 0:u[0]);let g;for await(const y of m)g===void 0?g=y:g=ia(g,y);if(g===void 0)throw new Error("Received empty response from chat model call.");f={generations:[[g]],llmOutput:{}},await(u==null?void 0:u[0].handleLLMEnd(f))}catch(m){throw await(u==null?void 0:u[0].handleLLMError(m)),m}else{try{f=await this._generate(e,n,u==null?void 0:u[0])}catch(g){throw await Promise.all((u??[]).map(y=>y==null?void 0:y.handleLLMError(g))),g}const m=this._flattenLLMResult(f);await Promise.all((u??[]).map((g,y)=>g==null?void 0:g.handleLLMEnd(m[y])))}const h=(u==null?void 0:u.map(m=>m.runId))||void 0;return Object.defineProperty(f,Bv,{value:h?{runIds:h}:void 0,configurable:!0}),f}async _generateCached({prompts:e,cache:n,llmStringKey:r,parsedOptions:l,handledOptions:u,runId:c}){const f=await Xt.configure(u.callbacks,this.callbacks,u.tags,this.tags,u.metadata,this.metadata,{verbose:this.verbose}),h={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:e.length},m=await(f==null?void 0:f.handleLLMStart(this.toJSON(),e,c,void 0,h,void 0,void 0,u==null?void 0:u.runName)),g=[],v=(await Promise.allSettled(e.map(async(E,O)=>{const x=await n.lookup(E,r);return x==null&&g.push(O),x}))).map((E,O)=>({result:E,runManager:m==null?void 0:m[O]})).filter(({result:E})=>E.status==="fulfilled"&&E.value!=null||E.status==="rejected"),_=[];await Promise.all(v.map(async({result:E,runManager:O},x)=>{if(E.status==="fulfilled"){const k=E.value;return _[x]=k.map(M=>(M.generationInfo={...M.generationInfo,tokenUsage:{}},M)),k.length&&await(O==null?void 0:O.handleLLMNewToken(k[0].text)),O==null?void 0:O.handleLLMEnd({generations:[k]},void 0,void 0,void 0,{cached:!0})}else return await(O==null?void 0:O.handleLLMError(E.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(E.reason)}));const A={generations:_,missingPromptIndices:g,startedRunManagers:m};return Object.defineProperty(A,Bv,{value:m?{runIds:m==null?void 0:m.map(E=>E.runId)}:void 0,configurable:!0}),A}async generate(e,n,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let l;Array.isArray(n)?l={stop:n}:l=n;const[u,c]=this._separateRunnableConfigFromCallOptionsCompat(l);if(u.callbacks=u.callbacks??r,!this.cache)return this._generateUncached(e,c,u);const{cache:f}=this,h=this._getSerializedCacheKeyParametersForCall(c),{generations:m,missingPromptIndices:g,startedRunManagers:y}=await this._generateCached({prompts:e,cache:f,llmStringKey:h,parsedOptions:c,handledOptions:u,runId:u.runId});let v={};if(g.length>0){const _=await this._generateUncached(g.map(A=>e[A]),c,u,y!==void 0?g.map(A=>y==null?void 0:y[A]):void 0);await Promise.all(_.generations.map(async(A,E)=>{const O=g[E];return m[O]=A,f.update(e[O],h,A)})),v=_.llmOutput??{}}return{generations:m,llmOutput:v}}async call(e,n,r){const{generations:l}=await this.generate([e],n,r);return l[0][0].text}async predict(e,n,r){return this.call(e,n,r)}async predictMessages(e,n,r){const l=tm(e),u=await this.call(l,n,r);return new Fi(u)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}}class PC extends Vi{async _generate(e,n,r){return{generations:await Promise.all(e.map((u,c)=>this._call(u,{...n,promptIndex:c},r).then(f=>[{text:f}])))}}}class $C extends PC{static lc_name(){return"Ollama"}constructor(e){var n;super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16KV",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMLock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.baseUrl=(n=e==null?void 0:e.baseUrl)!=null&&n.endsWith("/")?e==null?void 0:e.baseUrl.slice(0,-1):(e==null?void 0:e.baseUrl)??this.baseUrl,this.client=new W_({host:this.baseUrl,headers:e==null?void 0:e.headers}),this.keepAlive=e==null?void 0:e.keepAlive,this.embeddingOnly=e==null?void 0:e.embeddingOnly,this.f16KV=e==null?void 0:e.f16Kv,this.frequencyPenalty=e==null?void 0:e.frequencyPenalty,this.logitsAll=e==null?void 0:e.logitsAll,this.lowVram=e==null?void 0:e.lowVram,this.mainGpu=e==null?void 0:e.mainGpu,this.mirostat=e==null?void 0:e.mirostat,this.mirostatEta=e==null?void 0:e.mirostatEta,this.mirostatTau=e==null?void 0:e.mirostatTau,this.numBatch=e==null?void 0:e.numBatch,this.numCtx=e==null?void 0:e.numCtx,this.numGpu=e==null?void 0:e.numGpu,this.numKeep=e==null?void 0:e.numKeep,this.numPredict=e==null?void 0:e.numPredict,this.numThread=e==null?void 0:e.numThread,this.penalizeNewline=e==null?void 0:e.penalizeNewline,this.presencePenalty=e==null?void 0:e.presencePenalty,this.repeatLastN=e==null?void 0:e.repeatLastN,this.repeatPenalty=e==null?void 0:e.repeatPenalty,this.temperature=e==null?void 0:e.temperature,this.stop=e==null?void 0:e.stop,this.tfsZ=e==null?void 0:e.tfsZ,this.topK=e==null?void 0:e.topK,this.topP=e==null?void 0:e.topP,this.typicalP=e==null?void 0:e.typicalP,this.useMLock=e==null?void 0:e.useMlock,this.useMMap=e==null?void 0:e.useMmap,this.vocabOnly=e==null?void 0:e.vocabOnly,this.format=e==null?void 0:e.format}_llmType(){return"ollama"}invocationParams(e){return{model:this.model,format:this.format,keep_alive:this.keepAlive,images:e==null?void 0:e.images,options:{embedding_only:this.embeddingOnly,f16_kv:this.f16KV,frequency_penalty:this.frequencyPenalty,logits_all:this.logitsAll,low_vram:this.lowVram,main_gpu:this.mainGpu,mirostat:this.mirostat,mirostat_eta:this.mirostatEta,mirostat_tau:this.mirostatTau,num_batch:this.numBatch,num_ctx:this.numCtx,num_gpu:this.numGpu,num_keep:this.numKeep,num_predict:this.numPredict,num_thread:this.numThread,penalize_newline:this.penalizeNewline,presence_penalty:this.presencePenalty,repeat_last_n:this.repeatLastN,repeat_penalty:this.repeatPenalty,temperature:this.temperature,stop:(e==null?void 0:e.stop)??this.stop,tfs_z:this.tfsZ,top_k:this.topK,top_p:this.topP,typical_p:this.typicalP,use_mlock:this.useMLock,use_mmap:this.useMMap,vocab_only:this.vocabOnly}}}async*_streamResponseChunks(e,n,r){var u;const l=await this.caller.call(async()=>this.client.generate({...this.invocationParams(n),prompt:e,stream:!0}));for await(const c of l){if((u=n.signal)!=null&&u.aborted)throw new Error("This operation was aborted");c.done?yield new Wr({text:"",generationInfo:{model:c.model,total_duration:c.total_duration,load_duration:c.load_duration,prompt_eval_count:c.prompt_eval_count,prompt_eval_duration:c.prompt_eval_duration,eval_count:c.eval_count,eval_duration:c.eval_duration}}):(yield new Wr({text:c.response,generationInfo:{...c,response:void 0}}),await(r==null?void 0:r.handleLLMNewToken(c.response??"")))}}async _call(e,n,r){const l=[];for await(const u of this._streamResponseChunks(e,n,r))l.push(u.text);return l.join("")}}class zC extends dr{addUserMessage(e){return this.addMessage(new Pl(e))}addAIChatMessage(e){return this.addMessage(new Fi(e))}addAIMessage(e){return this.addMessage(new Fi(e))}async addMessages(e){for(const n of e)await this.addMessage(n)}clear(){throw new Error("Not implemented.")}}class HC extends zC{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}}const qC=new $C({model:"llama3.2"}),Sh=new HC,GC=async({input_message:i})=>{await Sh.addMessage(new Pl(i));const e=await Sh.getMessages(),n=await qC.invoke(e);return await Sh.addMessage(new Fi(n)),n},ZC="/assets/tick-JVtJza_6.png",VC=()=>I.createElement("div",{className:"AiSettings"},I.createElement("div",{className:"inputContainer"},I.createElement("input",{placeholder:"Server IP"}),I.createElement("div",{className:"ipSubmitButton"},I.createElement("img",{src:ZC,alt:""})))),QC=()=>{const[i,e]=z.useState([]),[n,r]=z.useState("chat"),l=(u,c)=>{u.trim()!==""&&e(f=>[...f,{text:u,sender:c}])};return I.createElement("div",{className:"Chatbot"},I.createElement("div",{className:"titleBar"},I.createElement("div",{className:"settingsButton",onClick:()=>r(n==="settings"?"chat":"settings")}," "),I.createElement("h2",null,"Ollama AI in ReactJS")),n==="settings"&&I.createElement(VC,null),n==="help"&&I.createElement(XC,null),n==="chat"&&I.createElement(I.Fragment,null,I.createElement(YC,{messages:i}),I.createElement(FC,{addMessage:l})))},YC=({messages:i})=>I.createElement("div",{className:"chatBody"},I.createElement("div",{className:"responseBox"},i.map((e,n)=>I.createElement(KC,{key:n,message:e})))),FC=({addMessage:i})=>{const[e,n]=z.useState(""),r=()=>{e.trim()!==""&&(i(e,"user"),n(""),GC({input_message:e}).then(l=>{i(l,"ai")}).catch(l=>console.error("Error generating reply:",l)))};return I.createElement("div",{className:"userInput"},I.createElement("input",{placeholder:"Enter Your Prompt",value:e,onChange:l=>n(l.target.value),onKeyDown:l=>l.key==="Enter"&&r()}),I.createElement("div",{className:"submitButton",onClick:r},I.createElement("h3",null,"Enter")))},KC=({message:i})=>I.createElement("div",{className:`Message ${i.sender}`},I.createElement("p",null,i.text)),XC=()=>I.createElement("div",{className:"helpMenu"},I.createElement("h3",null,"Help & FAQs"),I.createElement("p",null,"Here you can find help and frequently asked questions.")),JC=({openWindow:i})=>{const[e,n]=z.useState(""),[r,l]=z.useState("white"),u=()=>{const f=e.trim().toLowerCase();f==="bgedit"?i?i("bgedit"):console.error("openWindow function is not available"):f==="color 2"&&l("#009500")},c=f=>{f.key==="Enter"&&(u(),n(""))};return I.createElement("div",{className:"CMD"},I.createElement("div",{className:"initialText",style:{color:r}},I.createElement("p",null,"Microsoft Windows [Version 98]"),I.createElement("p",null,"(c) Microsoft Corporation. All rights reserved."),I.createElement("p",null,"--")),I.createElement("div",{className:"userInput",style:{color:r}},I.createElement("p",null,"C:\\Users\\user0"),I.createElement("input",{placeholder:"Enter command",value:e,onChange:f=>n(f.target.value),onKeyDown:c})))},WC=({color:i,setDesktopBgColor:e})=>{const[n,r]=z.useState(i);z.useEffect(()=>{r(i)},[i]);const l=c=>{r(c.target.value)},u=()=>{e(n)};return I.createElement("div",{className:"BgEdit"},I.createElement("h2",null,"Background Editor"),I.createElement("input",{type:"color",value:n,onChange:l}),I.createElement("button",{onClick:u},"Apply Color"))};function ex({windowStates:i,repoUrl:e,handleRepoChange:n,bringToFront:r,closeWindow:l,openWindow:u,setDesktopBgColor:c,openBgEdit:f}){return I.createElement(I.Fragment,null,i.music.isOpen&&I.createElement($i,{id:"music",title:"Music Player",width:750,height:800,onClose:()=>l("music"),onFocus:()=>r("music"),position:i.music,zIndex:i.music.zIndex},I.createElement(sS,{repoUrl:e})),i.settings.isOpen&&I.createElement($i,{id:"settings",title:"Settings",width:350,height:100,onClose:()=>l("settings"),onFocus:()=>r("settings"),position:i.settings,zIndex:i.settings.zIndex},I.createElement(lS,{onSubmitRepo:n})),i.equalizer.isOpen&&I.createElement($i,{id:"equalizer",title:"Equalizer",width:800,height:800,onClose:()=>l("equalizer"),onFocus:()=>r("equalizer"),position:i.equalizer,zIndex:i.equalizer.zIndex},I.createElement("h2",null,"Work in progress lad")),i.assistant.isOpen&&I.createElement($i,{id:"assistant",title:"Assistant",width:800,height:800,onClose:()=>l("assistant"),onFocus:()=>r("assistant"),position:i.assistant,zIndex:i.assistant.zIndex},I.createElement(QC,null)),i.cmd.isOpen&&I.createElement($i,{id:"cmd",title:"CMD",width:800,height:500,onClose:()=>l("cmd"),onFocus:()=>r("cmd"),position:i.cmd,zIndex:i.cmd.zIndex},I.createElement(JC,{openWindow:f})),i.bgedit.isOpen&&I.createElement($i,{id:"bgedit",title:"Background Editor",width:800,height:800,onClose:()=>l("bgedit"),onFocus:()=>r("bgedit"),position:i.bgedit,zIndex:i.bgedit.zIndex},I.createElement(WC,{setDesktopBgColor:c})))}const tx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEUAAACAgID//wDAwMAAAAAA//8A/wD///8AgACE6PTJAAAAAXRSTlMAQObYZgAAAAFiS0dEBxZhiOsAAAAHdElNRQfiBBMBIhnib8pPAAABdUlEQVQ4y3WUTW6DMBBGQcoBOjIk6xKpe3eS0GWQuEBLfYCK4n3EIgfopseu58fBxcm3Aj89z3iMKIokEPJUZCmhafZ46LP12hFAuyLl1glYE/ARoD2ngvdTBFglYEvgQ0GilCfv/Q3MiwKYgLZdlHoIyqRgni8RlM4hV9+z0JpqAaQICII9KDCOFQYkGNC9DLIyESDB2htAUqZnMCwYI6CkXoLyVfWdYcFWC0CH1bnYdCyYFBwHeutY0LYEyIg2JjMi4Gc1rCQHosMjg6fdYWbsWm4X00sEFuYLHVBAHAkLLVqohwXQ98fCjK/N6G6d0yGsCIgBDLE2bapCMPzRaW05tQpIYJCddlcKsBCMlzFcDB4ISDERkMFA81eAhgQywl7OdguwRg0Cn7AABDEaP7r3TgBo2CDQg4Cq59CU2AjrAqTh6/UCZHz3gJDWoDmwGPAahOFKKQUnP+L/KHj7/bkP8jwGdON3QbzYdfgT2fR50j9Dlj/uX7Pd5lE/IwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNC0xOVQwMTozNDoyNS0wNDowMHQ28t4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDQtMTlUMDE6MzQ6MjUtMDQ6MDAFa0piAAAAAElFTkSuQmCC",nx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAHlBMVEUAAAB/f3/AwMD///8AAAAAgIAAAIAAAP8A/wAAgABTa5L5AAAAAXRSTlMAQObYZgAAAAFiS0dEAxEMTPIAAAAHdElNRQfiBBMBJCt84jxJAAAA8ElEQVQ4y62U0Q2CMBBAS+ICBzeAqB/6WTD6SwUGMJENjBOYsIIruK2FK9iWq8HoSz9IX6537bUI0ROBgxiJVzayGOYjZ34No0hyGzmKKHMi0lniXVHiimrEE3Uz8AfRrV9z4qZhRbd7Xhx0yJUTx7Zt75yQeq09V5UKiOb8tbh0W5x/JMF+WC3XQsGSbS1CXLBCQVpw91AHmCxYOegAEuATQy+i3Eca4abub9yvIjW5J2JjyrXE9hFYavecmxxFQBR0hCVKGif6UEgvc5guMaUPpADpB0AowKSWCsEZVKv39jsyZP4ifbHU1kU1QXzkBXbdlY4knE+xAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA0LTE5VDAxOjM2OjQzLTA0OjAw1XweXgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNC0xOVQwMTozNjo0My0wNDowMKQhpuIAAAAASUVORK5CYII=",ax="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEUAAACAgID///8AAADAwMCAgAD//wDIuPtlAAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAHdElNRQfiBhoANCCn+IFNAAABIUlEQVQ4y73SS3KEIBAGYKzJHAD0AoK4NoUeQCRcYMB9GOf+Vwj44iFu0wvL4qtfmkYAbBUwLOCrwEHV3R2UdzB2N9CUN4B9JAEfScBHUjgjKZwRB5QdwGwFoHpkn3DDxgOd+Hiuh6AmXPNjPQAq7WKFr6BMnwUqGwd879aDMssOEIXwlC2x36l5HbX71LMxG6BoDyVmjFcQ0eZP/LGv5BtdgTpAZSZhjHlnoKVta7tysP5X6IDmsyzLu8okfqSUE7zClmB9CkDr2SWqCzzYYBOQW4hPDsQ0y2k9eTwr8DUO6tdNV6TTLYhWOyT3gQd9XFRytUTDPODh5SaSAfLio+CZ/woP/drUFQgT58EjwELwPDQ+EENY/woirR0eLK0O/AHxOomaeb43LQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNi0yNlQwMDo1MjozMi0wNDowMOzClQAAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDYtMjZUMDA6NTI6MzItMDQ6MDCdny28AAAAAElFTkSuQmCC",rx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfiBhoAKix6D/K5AAABr0lEQVRYw9VWwZGDMAyUPBRGBbSTGmhHFdCZ7mEMtpGsBe4yc5tHEiztWlpbCVMMNZ8ykAmEKdFmLsygzPSEPGMjolkjieTTb0P6Q0THESnkeCnxWGArLgR4XUGECQnC9mrDPwNVZz9mwIqwjCr4UIQSsQ4O65978FWTu/O8XoLjpl1x9k63MHjGmJ4LQOKdUP1ViQiYP/eEroXtTvyCENsCjcwL7MzQqLhLWiO4B7cKMbthC2j98V23LAEtpD41LpsQCnUi4gbBs0jNb0gV8CnyqmBSGv0guBWA/6tCWAI8Jr8nPbjJCiVpeeIwTS7HwME7N+P//2R6Au+n6Q7bAxXybGi9LBYLLYoOO830RGJmaPM6Ic6A6jl28oIF6hWTHPE9Z3ekpUtdKLaDqd9UzVr9qxAzPZZgc1uFOZXGiktgu8fdew3JjhzrKruqV0OW0IZej3cmv3ZirvfuiSzuSFazRTknb5tF+wVLZDmHGkBfc1wumhzq7VOGL3ebnaKAu+izUxRQ19AabTdIsrmewGj319Fh29tKNAJxc9j57Eskb8FORHEyJW8Bo/Fw9uIHOR2I4H61TfIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjZUMDA6NDI6NDQtMDQ6MDBEWXbjAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI2VDAwOjQyOjQ0LTA0OjAwNQTOXwAAAABJRU5ErkJggg==",ix="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuNBLfpoMAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuNAADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADX5rshveZftAAABgtJREFUaEPtmU9Mk9kah5/vT5HaQoFiE0IiE0IwN0wkXYwLrwYnorkh0ehixg0qCfEPK0NBIwszC124MDCZlWhcqWuNOG7QpBRbiKNBooYBSQaqGaRY9VpaKP36nbso7bWfbcUEL3rTJ3mTk/e85z3nd07OOd9pIc/aIrnd7ipVVVFV1Vj3VaPrOkIIJLfbPaUoCoqiGGO+alICPB6PmJ2dZXp6Gk3TkGUZVVWRZQVYBBYAydg+hSRBPA7z87BuHRQUQCiUvVxQAGYzCGHMJAAFsKJpOvG4xocTu7S0hCRJKIqCJEkUFxdjsViQvF6v8Hg8dHV1UVdXh67rjI2NLSetB/4BxNO6ysTPP8Nff8Eff8BPP8HUVOby33+D12tszfLgw0AfpaVQU/MDT58+ZWFhAQCn08ni4mJqbPv372fz5s2oAPF4nLq6Os6dO0c4HMbn8/D775eYnv4F+BcQW56hzLS0wK+/Jgb2229w6RL4fJnLjx/Djz8aMwCsA+YAQVdXPd9//09GRka4ffs2sixz8uRJ5ufn8Xq99Pb2oqoqiqIgA8iyjK7rhMNhAOx2OzYbwAbADBQDtqwWDNp4/NjG5KSNUCh3eWLi4/YJKwQqgTIWFv7N4uIiVquViooKNE1LG9vGjRuRJAlJkhIroKoqY2Nj+Hw+7HY74XAETQN4vbwPsq+A1Qp9fQlL8uEMZypbLLCwALr+3zooWO4vyujofSIRCyaTCQC/34/P56OsrIxwOJzaD0BiDwwNDdHZ2UlVVRU2mw1NW2Jq6k8ikUbgO0DPKkCWjQP5NJnbKMsHxiCVlUFKSr5DURTevHnDq1evqK6uprCwkGg0yvj4OM3NzWzatCkhYHh4mI6ODkPCdShKlPin9++qIUkJcSvp8+DBg9TW1ib2gPj4TAP+t4OHxNG60j6TY5aNFd8aOQUUFRUZXSmsViuynN7cGJ8pZrXJml2WZUKhECUlJRw+fJi2tjaOHj1KW1sbu3btYn5+Hl3X0wYYCoWorq7m0KFDNDU1pWK+KF6vV1y4cEEsHzMCELIsC4vFIgDR2NgoZmdnhRBCRKNRoeu6uHnzZirWarWmtW1paRGBQED09/en+VfbmpubxdmzZ0XGFUheaufPn+fMmTNMTk4yNDTEo0ePGB4eprKykv7+/tQsf0hRUREbNmygpKQkzfelyCggyc6dO9m2bRs9PT1s3bo1Ze/evWPLli1UVFQAUFNTQ2trK7W1tbx9+5ZAIEAsFmP37t2UlpYSCoWMqVeNnAI0TUPTNIqLi9P8PT09uFwuBgYGAGhoaKC7u5ve3l6uXbvGgQMHALh69Sp79+5Na7va5BQghEAIkXrsmEwmysvLuXPnDleuXGFychKAQCDAyMgIExMTALjdbgoKCnA4HEQiEfiCJ1LOjMkPJi3xYUQsFuP169c0NTXR2tpKTU0NAH19fezYsYNjx46l2gaDQYLBIPX19VRVVX32ibRSsTmjkk/N9+/fp/nb29vp7u6moaEhzQ9gNpsBOHLkCBcvXuT48eNcvnzZGPZJzGbzikTkfAjfu3ePSCRCe3s7Lpcr5TeZTDx48ICZmRkA9uzZQ0dHB+Pj46lV8Pv9jI6OYrfbKSsrw2w2c+PGDex2O7FYLJXrQyRJQlVVfD4fJ06cMFZnJKMAWZYxm82cPn2axsZGrl+/jsPhYGlpCZPJxK1bt9i3b18q3uFw4HQ603IAWCwW5ubmePnyJdu3b8fpdOJwOIhGo8ZQWBZgMpmYm5szVmUlowBd11NPuYcPH3Lq1CnWr19PPB5HUZTU5k0yMDCAy+UiEAik+T0eD52dnczMzPDkyZO0PNmQZZnp6WmjOzuZbuKkFRUVfeRLmtVqFbIsfxSTzf+5lsxj9Cct502cJNcFlDxVjDHZ/J/LSk+tnAK+BfIC1pq8gLUmL2CtyQtYa/IC1pr/DwGZfxv9utF1PfHkvX//vnj27Bl3796lsLBwRc+4tST5Q0N5eTmlpaVIg4ODU36/n4mJCVRVTf1x8LWj63piFQYHB6tevHjB8+fPvykB8Xg858suT5483wj/AQsE9M1/K4A+AAAAAElFTkSuQmCC";function sx(){const[i,e]=z.useState("#008C8A"),n=()=>{h("bgedit")},{windowStates:r,repoUrl:l,handleRepoChange:u,handleDragEnd:c,bringToFront:f,openWindow:h,closeWindow:m}=IE("https://api.github.com/repos/amberleafhash/toonStorage/contents/"),g=[{id:1,name:"Settings",icon:nx,onClick:()=>h("settings")},{id:2,name:"Music Player",icon:tx,onClick:()=>h("music")},{id:3,name:"Equalizer",icon:ax,onClick:()=>h("equalizer")},{id:4,name:"Assistant",icon:rx,onClick:()=>h("assistant")},{id:5,name:"CMD",icon:ix,onClick:()=>h("cmd")}];return I.createElement(jE,{onDragEnd:c},I.createElement("div",{className:"App"},I.createElement(ex,{windowStates:r,repoUrl:l,handleRepoChange:u,bringToFront:f,closeWindow:m,setDesktopBgColor:e,openBgEdit:n}),I.createElement(ZE,{icons:g,bgColor:i}),I.createElement($E,{icons:g})))}bA.createRoot(document.querySelector("#main")).render(I.createElement(I.StrictMode,null," ",I.createElement(sx,null)));
