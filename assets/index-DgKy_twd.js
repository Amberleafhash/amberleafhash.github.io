var Z0=Object.defineProperty;var V0=(s,e,a)=>e in s?Z0(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var Ra=(s,e,a)=>V0(s,typeof e!="symbol"?e+"":e,a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerPolicy&&(o.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?o.credentials="include":u.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(u){if(u.ep)return;u.ep=!0;const o=a(u);fetch(u.href,o)}})();function _r(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var uf={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function Q0(){if(Gg)return be;Gg=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function v(S){return S===null||typeof S!="object"?null:(S=b&&S[b]||S["@@iterator"],typeof S=="function"?S:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function C(S,U,Q){this.props=S,this.context=U,this.refs=T,this.updater=Q||w}C.prototype.isReactComponent={},C.prototype.setState=function(S,U){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,U,"setState")},C.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function M(){}M.prototype=C.prototype;function B(S,U,Q){this.props=S,this.context=U,this.refs=T,this.updater=Q||w}var D=B.prototype=new M;D.constructor=B,A(D,C.prototype),D.isPureReactComponent=!0;var ne=Array.isArray,P={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function fe(S,U,Q,X,F,oe){return Q=oe.ref,{$$typeof:s,type:S,key:U,ref:Q!==void 0?Q:null,props:oe}}function ae(S,U){return fe(S.type,U,void 0,void 0,void 0,S.props)}function ie(S){return typeof S=="object"&&S!==null&&S.$$typeof===s}function _e(S){var U={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(Q){return U[Q]})}var et=/\/+/g;function yt(S,U){return typeof S=="object"&&S!==null&&S.key!=null?_e(""+S.key):U.toString(36)}function ft(){}function J(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(ft,ft):(S.status="pending",S.then(function(U){S.status==="pending"&&(S.status="fulfilled",S.value=U)},function(U){S.status==="pending"&&(S.status="rejected",S.reason=U)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function V(S,U,Q,X,F){var oe=typeof S;(oe==="undefined"||oe==="boolean")&&(S=null);var he=!1;if(S===null)he=!0;else switch(oe){case"bigint":case"string":case"number":he=!0;break;case"object":switch(S.$$typeof){case s:case e:he=!0;break;case g:return he=S._init,V(he(S._payload),U,Q,X,F)}}if(he)return F=F(S),he=X===""?"."+yt(S,0):X,ne(F)?(Q="",he!=null&&(Q=he.replace(et,"$&/")+"/"),V(F,U,Q,"",function(ze){return ze})):F!=null&&(ie(F)&&(F=ae(F,Q+(F.key==null||S&&S.key===F.key?"":(""+F.key).replace(et,"$&/")+"/")+he)),U.push(F)),1;he=0;var Ze=X===""?".":X+":";if(ne(S))for(var xe=0;xe<S.length;xe++)X=S[xe],oe=Ze+yt(X,xe),he+=V(X,U,Q,oe,F);else if(xe=v(S),typeof xe=="function")for(S=xe.call(S),xe=0;!(X=S.next()).done;)X=X.value,oe=Ze+yt(X,xe++),he+=V(X,U,Q,oe,F);else if(oe==="object"){if(typeof S.then=="function")return V(J(S),U,Q,X,F);throw U=String(S),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return he}function k(S,U,Q){if(S==null)return S;var X=[],F=0;return V(S,X,"","",function(oe){return U.call(Q,oe,F++)}),X}function H(S){if(S._status===-1){var U=S._result;U=U(),U.then(function(Q){(S._status===0||S._status===-1)&&(S._status=1,S._result=Q)},function(Q){(S._status===0||S._status===-1)&&(S._status=2,S._result=Q)}),S._status===-1&&(S._status=0,S._result=U)}if(S._status===1)return S._result.default;throw S._result}var q=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function K(){}return be.Children={map:k,forEach:function(S,U,Q){k(S,function(){U.apply(this,arguments)},Q)},count:function(S){var U=0;return k(S,function(){U++}),U},toArray:function(S){return k(S,function(U){return U})||[]},only:function(S){if(!ie(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},be.Component=C,be.Fragment=a,be.Profiler=u,be.PureComponent=B,be.StrictMode=r,be.Suspense=m,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,be.act=function(){throw Error("act(...) is not supported in production builds of React.")},be.cache=function(S){return function(){return S.apply(null,arguments)}},be.cloneElement=function(S,U,Q){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var X=A({},S.props),F=S.key,oe=void 0;if(U!=null)for(he in U.ref!==void 0&&(oe=void 0),U.key!==void 0&&(F=""+U.key),U)!ee.call(U,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&U.ref===void 0||(X[he]=U[he]);var he=arguments.length-2;if(he===1)X.children=Q;else if(1<he){for(var Ze=Array(he),xe=0;xe<he;xe++)Ze[xe]=arguments[xe+2];X.children=Ze}return fe(S.type,F,void 0,void 0,oe,X)},be.createContext=function(S){return S={$$typeof:c,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:o,_context:S},S},be.createElement=function(S,U,Q){var X,F={},oe=null;if(U!=null)for(X in U.key!==void 0&&(oe=""+U.key),U)ee.call(U,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(F[X]=U[X]);var he=arguments.length-2;if(he===1)F.children=Q;else if(1<he){for(var Ze=Array(he),xe=0;xe<he;xe++)Ze[xe]=arguments[xe+2];F.children=Ze}if(S&&S.defaultProps)for(X in he=S.defaultProps,he)F[X]===void 0&&(F[X]=he[X]);return fe(S,oe,void 0,void 0,null,F)},be.createRef=function(){return{current:null}},be.forwardRef=function(S){return{$$typeof:d,render:S}},be.isValidElement=ie,be.lazy=function(S){return{$$typeof:g,_payload:{_status:-1,_result:S},_init:H}},be.memo=function(S,U){return{$$typeof:p,type:S,compare:U===void 0?null:U}},be.startTransition=function(S){var U=P.T,Q={};P.T=Q;try{var X=S(),F=P.S;F!==null&&F(Q,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(K,q)}catch(oe){q(oe)}finally{P.T=U}},be.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},be.use=function(S){return P.H.use(S)},be.useActionState=function(S,U,Q){return P.H.useActionState(S,U,Q)},be.useCallback=function(S,U){return P.H.useCallback(S,U)},be.useContext=function(S){return P.H.useContext(S)},be.useDebugValue=function(){},be.useDeferredValue=function(S,U){return P.H.useDeferredValue(S,U)},be.useEffect=function(S,U){return P.H.useEffect(S,U)},be.useId=function(){return P.H.useId()},be.useImperativeHandle=function(S,U,Q){return P.H.useImperativeHandle(S,U,Q)},be.useInsertionEffect=function(S,U){return P.H.useInsertionEffect(S,U)},be.useLayoutEffect=function(S,U){return P.H.useLayoutEffect(S,U)},be.useMemo=function(S,U){return P.H.useMemo(S,U)},be.useOptimistic=function(S,U){return P.H.useOptimistic(S,U)},be.useReducer=function(S,U,Q){return P.H.useReducer(S,U,Q)},be.useRef=function(S){return P.H.useRef(S)},be.useState=function(S){return P.H.useState(S)},be.useSyncExternalStore=function(S,U,Q){return P.H.useSyncExternalStore(S,U,Q)},be.useTransition=function(){return P.H.useTransition()},be.version="19.0.0",be}var Zg;function zd(){return Zg||(Zg=1,uf.exports=Q0()),uf.exports}var Ct=zd();const G=_r(Ct);var lf={exports:{}},gs={},of={exports:{}},cf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Y0(){return Vg||(Vg=1,function(s){function e(k,H){var q=k.length;k.push(H);e:for(;0<q;){var K=q-1>>>1,S=k[K];if(0<u(S,H))k[K]=H,k[q]=S,q=K;else break e}}function a(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var H=k[0],q=k.pop();if(q!==H){k[0]=q;e:for(var K=0,S=k.length,U=S>>>1;K<U;){var Q=2*(K+1)-1,X=k[Q],F=Q+1,oe=k[F];if(0>u(X,q))F<S&&0>u(oe,X)?(k[K]=oe,k[F]=q,K=F):(k[K]=X,k[Q]=q,K=Q);else if(F<S&&0>u(oe,q))k[K]=oe,k[F]=q,K=F;else break e}}return H}function u(k,H){var q=k.sortIndex-H.sortIndex;return q!==0?q:k.id-H.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],p=[],g=1,b=null,v=3,w=!1,A=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(k){for(var H=a(p);H!==null;){if(H.callback===null)r(p);else if(H.startTime<=k)r(p),H.sortIndex=H.expirationTime,e(m,H);else break;H=a(p)}}function ne(k){if(T=!1,D(k),!A)if(a(m)!==null)A=!0,J();else{var H=a(p);H!==null&&V(ne,H.startTime-k)}}var P=!1,ee=-1,fe=5,ae=-1;function ie(){return!(s.unstable_now()-ae<fe)}function _e(){if(P){var k=s.unstable_now();ae=k;var H=!0;try{e:{A=!1,T&&(T=!1,M(ee),ee=-1),w=!0;var q=v;try{t:{for(D(k),b=a(m);b!==null&&!(b.expirationTime>k&&ie());){var K=b.callback;if(typeof K=="function"){b.callback=null,v=b.priorityLevel;var S=K(b.expirationTime<=k);if(k=s.unstable_now(),typeof S=="function"){b.callback=S,D(k),H=!0;break t}b===a(m)&&r(m),D(k)}else r(m);b=a(m)}if(b!==null)H=!0;else{var U=a(p);U!==null&&V(ne,U.startTime-k),H=!1}}break e}finally{b=null,v=q,w=!1}H=void 0}}finally{H?et():P=!1}}}var et;if(typeof B=="function")et=function(){B(_e)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,ft=yt.port2;yt.port1.onmessage=_e,et=function(){ft.postMessage(null)}}else et=function(){C(_e,0)};function J(){P||(P=!0,et())}function V(k,H){ee=C(function(){k(s.unstable_now())},H)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(k){k.callback=null},s.unstable_continueExecution=function(){A||w||(A=!0,J())},s.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<k?Math.floor(1e3/k):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_getFirstCallbackNode=function(){return a(m)},s.unstable_next=function(k){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var q=v;v=H;try{return k()}finally{v=q}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(k,H){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var q=v;v=k;try{return H()}finally{v=q}},s.unstable_scheduleCallback=function(k,H,q){var K=s.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,k){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=q+S,k={id:g++,callback:H,priorityLevel:k,startTime:q,expirationTime:S,sortIndex:-1},q>K?(k.sortIndex=q,e(p,k),a(m)===null&&k===a(p)&&(T?(M(ee),ee=-1):T=!0,V(ne,q-K))):(k.sortIndex=S,e(m,k),A||w||(A=!0,J())),k},s.unstable_shouldYield=ie,s.unstable_wrapCallback=function(k){var H=v;return function(){var q=v;v=H;try{return k.apply(this,arguments)}finally{v=q}}}}(cf)),cf}var Qg;function K0(){return Qg||(Qg=1,of.exports=Y0()),of.exports}var ff={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function F0(){if(Yg)return _t;Yg=1;var s=zd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},u=Symbol.for("react.portal");function o(m,p,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:m,containerInfo:p,implementation:g}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_t.createPortal=function(m,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,g)},_t.flushSync=function(m){var p=c.T,g=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=g,r.d.f()}},_t.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},_t.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},_t.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var g=p.as,b=d(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:w}):g==="script"&&r.d.X(m,{crossOrigin:b,integrity:v,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_t.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},_t.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,b=d(g,p.crossOrigin);r.d.L(m,g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_t.preloadModule=function(m,p){if(typeof m=="string")if(p){var g=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},_t.requestFormReset=function(m){r.d.r(m)},_t.unstable_batchedUpdates=function(m,p){return m(p)},_t.useFormState=function(m,p,g){return c.H.useFormState(m,p,g)},_t.useFormStatus=function(){return c.H.useHostTransitionStatus()},_t.version="19.0.0",_t}var Kg;function X0(){if(Kg)return ff.exports;Kg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ff.exports=F0(),ff.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function J0(){if(Fg)return gs;Fg=1;var s=K0(),e=zd(),a=X0();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),w=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),ne=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function ee(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Symbol.for("react.client.reference");function ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===fe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m:return"Fragment";case d:return"Portal";case g:return"Profiler";case p:return"StrictMode";case T:return"Suspense";case C:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w:return(t.displayName||"Context")+".Provider";case v:return(t._context.displayName||"Context")+".Consumer";case A:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return n=t.displayName||null,n!==null?n:ae(t.type)||"Memo";case B:n=t._payload,t=t._init;try{return ae(t(n))}catch{}}return null}var ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=Object.assign,et,yt;function ft(t){if(et===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);et=n&&n[1]||"",yt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+et+t+yt}var J=!1;function V(t,n){if(!t||J)return"";J=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var z=function(){throw Error()};if(Object.defineProperty(z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(z,[])}catch(L){var j=L}Reflect.construct(t,[],z)}else{try{z.call()}catch(L){j=L}t.call(z.prototype)}}else{try{throw Error()}catch(L){j=L}(z=t())&&typeof z.catch=="function"&&z.catch(function(){})}}catch(L){if(L&&j&&typeof L.stack=="string")return[L.stack,j.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),y=h[0],_=h[1];if(y&&_){var E=y.split(`
`),R=_.split(`
`);for(f=l=0;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;for(;f<R.length&&!R[f].includes("DetermineComponentFrameRoot");)f++;if(l===E.length||f===R.length)for(l=E.length-1,f=R.length-1;1<=l&&0<=f&&E[l]!==R[f];)f--;for(;1<=l&&0<=f;l--,f--)if(E[l]!==R[f]){if(l!==1||f!==1)do if(l--,f--,0>f||E[l]!==R[f]){var I=`
`+E[l].replace(" at new "," at ");return t.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",t.displayName)),I}while(1<=l&&0<=f);break}}}finally{J=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?ft(i):""}function k(t){switch(t.tag){case 26:case 27:case 5:return ft(t.type);case 16:return ft("Lazy");case 13:return ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return t=V(t.type,!1),t;case 11:return t=V(t.type.render,!1),t;case 1:return t=V(t.type,!0),t;default:return""}}function H(t){try{var n="";do n+=k(t),t=t.return;while(t);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function q(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function K(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function S(t){if(q(t)!==t)throw Error(r(188))}function U(t){var n=t.alternate;if(!n){if(n=q(t),n===null)throw Error(r(188));return n!==t?null:t}for(var i=t,l=n;;){var f=i.return;if(f===null)break;var h=f.alternate;if(h===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===i)return S(f),t;if(h===l)return S(f),n;h=h.sibling}throw Error(r(188))}if(i.return!==l.return)i=f,l=h;else{for(var y=!1,_=f.child;_;){if(_===i){y=!0,i=f,l=h;break}if(_===l){y=!0,l=f,i=h;break}_=_.sibling}if(!y){for(_=h.child;_;){if(_===i){y=!0,i=h,l=f;break}if(_===l){y=!0,l=h,i=f;break}_=_.sibling}if(!y)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?t:n}function Q(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=Q(t),n!==null)return n;t=t.sibling}return null}var X=Array.isArray,F=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},he=[],Ze=-1;function xe(t){return{current:t}}function ze(t){0>Ze||(t.current=he[Ze],he[Ze]=null,Ze--)}function ke(t,n){Ze++,he[Ze]=t.current,t.current=n}var Kt=xe(null),vi=xe(null),aa=xe(null),Js=xe(null);function Ws(t,n){switch(ke(aa,n),ke(vi,t),ke(Kt,null),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)&&(n=n.namespaceURI)?vg(n):0;break;default:if(t=t===8?n.parentNode:n,n=t.tagName,t=t.namespaceURI)t=vg(t),n=_g(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ze(Kt),ke(Kt,n)}function wr(){ze(Kt),ze(vi),ze(aa)}function Fl(t){t.memoizedState!==null&&ke(Js,t);var n=Kt.current,i=_g(n,t.type);n!==i&&(ke(vi,t),ke(Kt,i))}function eu(t){vi.current===t&&(ze(Kt),ze(vi)),Js.current===t&&(ze(Js),fs._currentValue=oe)}var Xl=Object.prototype.hasOwnProperty,Jl=s.unstable_scheduleCallback,Wl=s.unstable_cancelCallback,Ev=s.unstable_shouldYield,Sv=s.unstable_requestPaint,Tn=s.unstable_now,Tv=s.unstable_getCurrentPriorityLevel,lh=s.unstable_ImmediatePriority,oh=s.unstable_UserBlockingPriority,tu=s.unstable_NormalPriority,Ov=s.unstable_LowPriority,ch=s.unstable_IdlePriority,Rv=s.log,Cv=s.unstable_setDisableYieldValue,_i=null,$t=null;function xv(t){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(_i,t,void 0,(t.current.flags&128)===128)}catch{}}function ra(t){if(typeof Rv=="function"&&Cv(t),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(_i,t)}catch{}}var Bt=Math.clz32?Math.clz32:Mv,Nv=Math.log,jv=Math.LN2;function Mv(t){return t>>>=0,t===0?32:31-(Nv(t)/jv|0)|0}var nu=128,au=4194304;function Pa(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ru(t,n){var i=t.pendingLanes;if(i===0)return 0;var l=0,f=t.suspendedLanes,h=t.pingedLanes,y=t.warmLanes;t=t.finishedLanes!==0;var _=i&134217727;return _!==0?(i=_&~f,i!==0?l=Pa(i):(h&=_,h!==0?l=Pa(h):t||(y=_&~y,y!==0&&(l=Pa(y))))):(_=i&~f,_!==0?l=Pa(_):h!==0?l=Pa(h):t||(y=i&~y,y!==0&&(l=Pa(y)))),l===0?0:n!==0&&n!==l&&!(n&f)&&(f=l&-l,y=n&-n,f>=y||f===32&&(y&4194176)!==0)?n:l}function wi(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Dv(t,n){switch(t){case 1:case 2:case 4:case 8:return n+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fh(){var t=nu;return nu<<=1,!(nu&4194176)&&(nu=128),t}function dh(){var t=au;return au<<=1,!(au&62914560)&&(au=4194304),t}function eo(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function Ai(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function kv(t,n,i,l,f,h){var y=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var _=t.entanglements,E=t.expirationTimes,R=t.hiddenUpdates;for(i=y&~i;0<i;){var I=31-Bt(i),z=1<<I;_[I]=0,E[I]=-1;var j=R[I];if(j!==null)for(R[I]=null,I=0;I<j.length;I++){var L=j[I];L!==null&&(L.lane&=-536870913)}i&=~z}l!==0&&hh(t,l,0),h!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=h&~(y&~n))}function hh(t,n,i){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Bt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|i&4194218}function mh(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var l=31-Bt(i),f=1<<l;f&n|t[l]&n&&(t[l]|=n),i&=~f}}function ph(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function gh(){var t=F.p;return t!==0?t:(t=window.event,t===void 0?32:$g(t.type))}function Uv(t,n){var i=F.p;try{return F.p=t,n()}finally{F.p=i}}var ia=Math.random().toString(36).slice(2),bt="__reactFiber$"+ia,Mt="__reactProps$"+ia,Ar="__reactContainer$"+ia,to="__reactEvents$"+ia,Lv="__reactListeners$"+ia,Iv="__reactHandles$"+ia,yh="__reactResources$"+ia,Ei="__reactMarker$"+ia;function no(t){delete t[bt],delete t[Mt],delete t[to],delete t[Lv],delete t[Iv]}function za(t){var n=t[bt];if(n)return n;for(var i=t.parentNode;i;){if(n=i[Ar]||i[bt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=Eg(t);t!==null;){if(i=t[bt])return i;t=Eg(t)}return n}t=i,i=t.parentNode}return null}function Er(t){if(t=t[bt]||t[Ar]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Si(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function Sr(t){var n=t[yh];return n||(n=t[yh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function it(t){t[Ei]=!0}var bh=new Set,vh={};function Ha(t,n){Tr(t,n),Tr(t+"Capture",n)}function Tr(t,n){for(vh[t]=n,t=0;t<n.length;t++)bh.add(n[t])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$v=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_h={},wh={};function Bv(t){return Xl.call(wh,t)?!0:Xl.call(_h,t)?!1:$v.test(t)?wh[t]=!0:(_h[t]=!0,!1)}function iu(t,n,i){if(Bv(n))if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+i)}}function su(t,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+i)}}function Ln(t,n,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(n,i,""+l)}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ah(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Pv(t){var n=Ah(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var f=i.get,h=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return f.call(this)},set:function(y){l=""+y,h.call(this,y)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function uu(t){t._valueTracker||(t._valueTracker=Pv(t))}function Eh(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return t&&(l=Ah(t)?t.checked?"true":"false":t.value),t=l,t!==i?(n.setValue(t),!0):!1}function lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zv=/[\n"\\]/g;function Xt(t){return t.replace(zv,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ao(t,n,i,l,f,h,y,_){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),n!=null?y==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ft(n)):t.value!==""+Ft(n)&&(t.value=""+Ft(n)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),n!=null?ro(t,y,Ft(n)):i!=null?ro(t,y,Ft(i)):l!=null&&t.removeAttribute("value"),f==null&&h!=null&&(t.defaultChecked=!!h),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+Ft(_):t.removeAttribute("name")}function Sh(t,n,i,l,f,h,y,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),n!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||n!=null))return;i=i!=null?""+Ft(i):"",n=n!=null?""+Ft(n):i,_||n===t.value||(t.value=n),t.defaultValue=n}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=_?t.checked:!!l,t.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y)}function ro(t,n,i){n==="number"&&lu(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function Or(t,n,i,l){if(t=t.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=n.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&l&&(t[i].defaultSelected=!0)}else{for(i=""+Ft(i),n=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}n!==null||t[f].disabled||(n=t[f])}n!==null&&(n.selected=!0)}}function Th(t,n,i){if(n!=null&&(n=""+Ft(n),n!==t.value&&(t.value=n),i==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=i!=null?""+Ft(i):""}function Oh(t,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(r(92));if(X(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=Ft(n),t.defaultValue=i,l=t.textContent,l===i&&l!==""&&l!==null&&(t.value=l)}function Rr(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var Hv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rh(t,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,i):typeof i!="number"||i===0||Hv.has(n)?n==="float"?t.cssFloat=i:t[n]=(""+i).trim():t[n]=i+"px"}function Ch(t,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in n)l=n[f],n.hasOwnProperty(f)&&i[f]!==l&&Rh(t,f,l)}else for(var h in n)n.hasOwnProperty(h)&&Rh(t,h,n[h])}function io(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ou(t){return Gv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var so=null;function uo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cr=null,xr=null;function xh(t){var n=Er(t);if(n&&(t=n.stateNode)){var i=t[Mt]||null;e:switch(t=n.stateNode,n.type){case"input":if(ao(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Xt(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==t&&l.form===t.form){var f=l[Mt]||null;if(!f)throw Error(r(90));ao(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===t.form&&Eh(l)}break e;case"textarea":Th(t,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Or(t,!!i.multiple,n,!1)}}}var lo=!1;function Nh(t,n,i){if(lo)return t(n,i);lo=!0;try{var l=t(n);return l}finally{if(lo=!1,(Cr!==null||xr!==null)&&(Vu(),Cr&&(n=Cr,t=xr,xr=Cr=null,xh(n),t)))for(n=0;n<t.length;n++)xh(t[n])}}function Ti(t,n){var i=t.stateNode;if(i===null)return null;var l=i[Mt]||null;if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var oo=!1;if(Un)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){oo=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{oo=!1}var sa=null,co=null,cu=null;function jh(){if(cu)return cu;var t,n=co,i=n.length,l,f="value"in sa?sa.value:sa.textContent,h=f.length;for(t=0;t<i&&n[t]===f[t];t++);var y=i-t;for(l=1;l<=y&&n[i-l]===f[h-l];l++);return cu=f.slice(t,1<l?1-l:void 0)}function fu(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function du(){return!0}function Mh(){return!1}function Dt(t){function n(i,l,f,h,y){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(i=t[_],this[_]=i?i(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?du:Mh,this.isPropagationStopped=Mh,this}return _e(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),n}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=Dt(qa),Ri=_e({},qa,{view:0,detail:0}),Zv=Dt(Ri),fo,ho,Ci,mu=_e({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:po,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(fo=t.screenX-Ci.screenX,ho=t.screenY-Ci.screenY):ho=fo=0,Ci=t),fo)},movementY:function(t){return"movementY"in t?t.movementY:ho}}),Dh=Dt(mu),Vv=_e({},mu,{dataTransfer:0}),Qv=Dt(Vv),Yv=_e({},Ri,{relatedTarget:0}),mo=Dt(Yv),Kv=_e({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=Dt(Kv),Xv=_e({},qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Jv=Dt(Xv),Wv=_e({},qa,{data:0}),kh=Dt(Wv),e_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a_(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=n_[t])?!!n[t]:!1}function po(){return a_}var r_=_e({},Ri,{key:function(t){if(t.key){var n=e_[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=fu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:po,charCode:function(t){return t.type==="keypress"?fu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),i_=Dt(r_),s_=_e({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uh=Dt(s_),u_=_e({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:po}),l_=Dt(u_),o_=_e({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),c_=Dt(o_),f_=_e({},mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d_=Dt(f_),h_=_e({},qa,{newState:0,oldState:0}),m_=Dt(h_),p_=[9,13,27,32],go=Un&&"CompositionEvent"in window,xi=null;Un&&"documentMode"in document&&(xi=document.documentMode);var g_=Un&&"TextEvent"in window&&!xi,Lh=Un&&(!go||xi&&8<xi&&11>=xi),Ih=" ",$h=!1;function Bh(t,n){switch(t){case"keyup":return p_.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ph(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nr=!1;function y_(t,n){switch(t){case"compositionend":return Ph(n);case"keypress":return n.which!==32?null:($h=!0,Ih);case"textInput":return t=n.data,t===Ih&&$h?null:t;default:return null}}function b_(t,n){if(Nr)return t==="compositionend"||!go&&Bh(t,n)?(t=jh(),cu=co=sa=null,Nr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Lh&&n.locale!=="ko"?null:n.data;default:return null}}var v_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!v_[t.type]:n==="textarea"}function Hh(t,n,i,l){Cr?xr?xr.push(l):xr=[l]:Cr=l,n=Xu(n,"onChange"),0<n.length&&(i=new hu("onChange","change",null,i,l),t.push({event:i,listeners:n}))}var Ni=null,ji=null;function __(t){mg(t,0)}function pu(t){var n=Si(t);if(Eh(n))return t}function qh(t,n){if(t==="change")return n}var Gh=!1;if(Un){var yo;if(Un){var bo="oninput"in document;if(!bo){var Zh=document.createElement("div");Zh.setAttribute("oninput","return;"),bo=typeof Zh.oninput=="function"}yo=bo}else yo=!1;Gh=yo&&(!document.documentMode||9<document.documentMode)}function Vh(){Ni&&(Ni.detachEvent("onpropertychange",Qh),ji=Ni=null)}function Qh(t){if(t.propertyName==="value"&&pu(ji)){var n=[];Hh(n,ji,t,uo(t)),Nh(__,n)}}function w_(t,n,i){t==="focusin"?(Vh(),Ni=n,ji=i,Ni.attachEvent("onpropertychange",Qh)):t==="focusout"&&Vh()}function A_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pu(ji)}function E_(t,n){if(t==="click")return pu(n)}function S_(t,n){if(t==="input"||t==="change")return pu(n)}function T_(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Pt=typeof Object.is=="function"?Object.is:T_;function Mi(t,n){if(Pt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!Xl.call(n,f)||!Pt(t[f],n[f]))return!1}return!0}function Yh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kh(t,n){var i=Yh(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=n&&l>=n)return{node:i,offset:n-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Yh(i)}}function Fh(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Fh(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Xh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=lu(t.document);n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=lu(t.document)}return n}function vo(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function O_(t,n){var i=Xh(n);n=t.focusedElem;var l=t.selectionRange;if(i!==n&&n&&n.ownerDocument&&Fh(n.ownerDocument.documentElement,n)){if(l!==null&&vo(n)){if(t=l.start,i=l.end,i===void 0&&(i=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(i,n.value.length);else if(i=(t=n.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var f=n.textContent.length,h=Math.min(l.start,f);l=l.end===void 0?h:Math.min(l.end,f),!i.extend&&h>l&&(f=l,l=h,h=f),f=Kh(n,h);var y=Kh(n,l);f&&y&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==y.node||i.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(f.node,f.offset),i.removeAllRanges(),h>l?(i.addRange(t),i.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),i.addRange(t)))}}for(t=[],i=n;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)i=t[n],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var R_=Un&&"documentMode"in document&&11>=document.documentMode,jr=null,_o=null,Di=null,wo=!1;function Jh(t,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;wo||jr==null||jr!==lu(l)||(l=jr,"selectionStart"in l&&vo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Di&&Mi(Di,l)||(Di=l,l=Xu(_o,"onSelect"),0<l.length&&(n=new hu("onSelect","select",null,n,i),t.push({event:n,listeners:l}),n.target=jr)))}function Ga(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var Mr={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Ao={},Wh={};Un&&(Wh=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function Za(t){if(Ao[t])return Ao[t];if(!Mr[t])return t;var n=Mr[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in Wh)return Ao[t]=n[i];return t}var em=Za("animationend"),tm=Za("animationiteration"),nm=Za("animationstart"),C_=Za("transitionrun"),x_=Za("transitionstart"),N_=Za("transitioncancel"),am=Za("transitionend"),rm=new Map,im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function cn(t,n){rm.set(t,n),Ha(n,[t])}var Jt=[],Dr=0,Eo=0;function gu(){for(var t=Dr,n=Eo=Dr=0;n<t;){var i=Jt[n];Jt[n++]=null;var l=Jt[n];Jt[n++]=null;var f=Jt[n];Jt[n++]=null;var h=Jt[n];if(Jt[n++]=null,l!==null&&f!==null){var y=l.pending;y===null?f.next=f:(f.next=y.next,y.next=f),l.pending=f}h!==0&&sm(i,f,h)}}function yu(t,n,i,l){Jt[Dr++]=t,Jt[Dr++]=n,Jt[Dr++]=i,Jt[Dr++]=l,Eo|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function So(t,n,i,l){return yu(t,n,i,l),bu(t)}function ua(t,n){return yu(t,null,null,n),bu(t)}function sm(t,n,i){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i);for(var f=!1,h=t.return;h!==null;)h.childLanes|=i,l=h.alternate,l!==null&&(l.childLanes|=i),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(f=!0)),t=h,h=h.return;f&&n!==null&&t.tag===3&&(h=t.stateNode,f=31-Bt(i),h=h.hiddenUpdates,t=h[f],t===null?h[f]=[n]:t.push(n),n.lane=i|536870912)}function bu(t){if(50<rs)throw rs=0,Nc=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var kr={},um=new WeakMap;function Wt(t,n){if(typeof t=="object"&&t!==null){var i=um.get(t);return i!==void 0?i:(n={value:t,source:n,stack:H(n)},um.set(t,n),n)}return{value:t,source:n,stack:H(n)}}var Ur=[],Lr=0,vu=null,_u=0,en=[],tn=0,Va=null,In=1,$n="";function Qa(t,n){Ur[Lr++]=_u,Ur[Lr++]=vu,vu=t,_u=n}function lm(t,n,i){en[tn++]=In,en[tn++]=$n,en[tn++]=Va,Va=t;var l=In;t=$n;var f=32-Bt(l)-1;l&=~(1<<f),i+=1;var h=32-Bt(n)+f;if(30<h){var y=f-f%5;h=(l&(1<<y)-1).toString(32),l>>=y,f-=y,In=1<<32-Bt(n)+f|i<<f|l,$n=h+t}else In=1<<h|i<<f|l,$n=t}function To(t){t.return!==null&&(Qa(t,1),lm(t,1,0))}function Oo(t){for(;t===vu;)vu=Ur[--Lr],Ur[Lr]=null,_u=Ur[--Lr],Ur[Lr]=null;for(;t===Va;)Va=en[--tn],en[tn]=null,$n=en[--tn],en[tn]=null,In=en[--tn],en[tn]=null}var Et=null,dt=null,Ne=!1,fn=null,On=!1,Ro=Error(r(519));function Ya(t){var n=Error(r(418,""));throw Li(Wt(n,t)),Ro}function om(t){var n=t.stateNode,i=t.type,l=t.memoizedProps;switch(n[bt]=t,n[Mt]=l,i){case"dialog":Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":case"embed":Oe("load",n);break;case"video":case"audio":for(i=0;i<ss.length;i++)Oe(ss[i],n);break;case"source":Oe("error",n);break;case"img":case"image":case"link":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"input":Oe("invalid",n),Sh(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),uu(n);break;case"select":Oe("invalid",n);break;case"textarea":Oe("invalid",n),Oh(n,l.value,l.defaultValue,l.children),uu(n)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||bg(n.textContent,i)?(l.popover!=null&&(Oe("beforetoggle",n),Oe("toggle",n)),l.onScroll!=null&&Oe("scroll",n),l.onScrollEnd!=null&&Oe("scrollend",n),l.onClick!=null&&(n.onclick=Ju),n=!0):n=!1,n||Ya(t)}function cm(t){for(Et=t.return;Et;)switch(Et.tag){case 3:case 27:On=!0;return;case 5:case 13:On=!1;return;default:Et=Et.return}}function ki(t){if(t!==Et)return!1;if(!Ne)return cm(t),Ne=!0,!1;var n=!1,i;if((i=t.tag!==3&&t.tag!==27)&&((i=t.tag===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Qc(t.type,t.memoizedProps)),i=!i),i&&(n=!0),n&&dt&&Ya(t),cm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(i=t.data,i==="/$"){if(n===0){dt=hn(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;t=t.nextSibling}dt=null}}else dt=Et?hn(t.stateNode.nextSibling):null;return!0}function Ui(){dt=Et=null,Ne=!1}function Li(t){fn===null?fn=[t]:fn.push(t)}var Ii=Error(r(460)),fm=Error(r(474)),Co={then:function(){}};function dm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function wu(){}function hm(t,n,i){switch(i=t[i],i===void 0?t.push(n):i!==n&&(n.then(wu,wu),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,t===Ii?Error(r(483)):t;default:if(typeof n.status=="string")n.then(wu,wu);else{if(t=Be,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=l}},function(l){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,t===Ii?Error(r(483)):t}throw $i=n,Ii}}var $i=null;function mm(){if($i===null)throw Error(r(459));var t=$i;return $i=null,t}var Ir=null,Bi=0;function Au(t){var n=Bi;return Bi+=1,Ir===null&&(Ir=[]),hm(Ir,t,n)}function Pi(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Eu(t,n){throw n.$$typeof===o?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function pm(t){var n=t._init;return n(t._payload)}function gm(t){function n(x,O){if(t){var N=x.deletions;N===null?(x.deletions=[O],x.flags|=16):N.push(O)}}function i(x,O){if(!t)return null;for(;O!==null;)n(x,O),O=O.sibling;return null}function l(x){for(var O=new Map;x!==null;)x.key!==null?O.set(x.key,x):O.set(x.index,x),x=x.sibling;return O}function f(x,O){return x=va(x,O),x.index=0,x.sibling=null,x}function h(x,O,N){return x.index=N,t?(N=x.alternate,N!==null?(N=N.index,N<O?(x.flags|=33554434,O):N):(x.flags|=33554434,O)):(x.flags|=1048576,O)}function y(x){return t&&x.alternate===null&&(x.flags|=33554434),x}function _(x,O,N,$){return O===null||O.tag!==6?(O=Ac(N,x.mode,$),O.return=x,O):(O=f(O,N),O.return=x,O)}function E(x,O,N,$){var re=N.type;return re===m?I(x,O,N.props.children,$,N.key):O!==null&&(O.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===B&&pm(re)===O.type)?(O=f(O,N.props),Pi(O,N),O.return=x,O):(O=zu(N.type,N.key,N.props,null,x.mode,$),Pi(O,N),O.return=x,O)}function R(x,O,N,$){return O===null||O.tag!==4||O.stateNode.containerInfo!==N.containerInfo||O.stateNode.implementation!==N.implementation?(O=Ec(N,x.mode,$),O.return=x,O):(O=f(O,N.children||[]),O.return=x,O)}function I(x,O,N,$,re){return O===null||O.tag!==7?(O=rr(N,x.mode,$,re),O.return=x,O):(O=f(O,N),O.return=x,O)}function z(x,O,N){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ac(""+O,x.mode,N),O.return=x,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case c:return N=zu(O.type,O.key,O.props,null,x.mode,N),Pi(N,O),N.return=x,N;case d:return O=Ec(O,x.mode,N),O.return=x,O;case B:var $=O._init;return O=$(O._payload),z(x,O,N)}if(X(O)||ee(O))return O=rr(O,x.mode,N,null),O.return=x,O;if(typeof O.then=="function")return z(x,Au(O),N);if(O.$$typeof===w)return z(x,$u(x,O),N);Eu(x,O)}return null}function j(x,O,N,$){var re=O!==null?O.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return re!==null?null:_(x,O,""+N,$);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case c:return N.key===re?E(x,O,N,$):null;case d:return N.key===re?R(x,O,N,$):null;case B:return re=N._init,N=re(N._payload),j(x,O,N,$)}if(X(N)||ee(N))return re!==null?null:I(x,O,N,$,null);if(typeof N.then=="function")return j(x,O,Au(N),$);if(N.$$typeof===w)return j(x,O,$u(x,N),$);Eu(x,N)}return null}function L(x,O,N,$,re){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return x=x.get(N)||null,_(O,x,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case c:return x=x.get($.key===null?N:$.key)||null,E(O,x,$,re);case d:return x=x.get($.key===null?N:$.key)||null,R(O,x,$,re);case B:var Se=$._init;return $=Se($._payload),L(x,O,N,$,re)}if(X($)||ee($))return x=x.get(N)||null,I(O,x,$,re,null);if(typeof $.then=="function")return L(x,O,N,Au($),re);if($.$$typeof===w)return L(x,O,N,$u(O,$),re);Eu(O,$)}return null}function ue(x,O,N,$){for(var re=null,Se=null,ce=O,de=O=0,lt=null;ce!==null&&de<N.length;de++){ce.index>de?(lt=ce,ce=null):lt=ce.sibling;var je=j(x,ce,N[de],$);if(je===null){ce===null&&(ce=lt);break}t&&ce&&je.alternate===null&&n(x,ce),O=h(je,O,de),Se===null?re=je:Se.sibling=je,Se=je,ce=lt}if(de===N.length)return i(x,ce),Ne&&Qa(x,de),re;if(ce===null){for(;de<N.length;de++)ce=z(x,N[de],$),ce!==null&&(O=h(ce,O,de),Se===null?re=ce:Se.sibling=ce,Se=ce);return Ne&&Qa(x,de),re}for(ce=l(ce);de<N.length;de++)lt=L(ce,x,de,N[de],$),lt!==null&&(t&&lt.alternate!==null&&ce.delete(lt.key===null?de:lt.key),O=h(lt,O,de),Se===null?re=lt:Se.sibling=lt,Se=lt);return t&&ce.forEach(function(Oa){return n(x,Oa)}),Ne&&Qa(x,de),re}function pe(x,O,N,$){if(N==null)throw Error(r(151));for(var re=null,Se=null,ce=O,de=O=0,lt=null,je=N.next();ce!==null&&!je.done;de++,je=N.next()){ce.index>de?(lt=ce,ce=null):lt=ce.sibling;var Oa=j(x,ce,je.value,$);if(Oa===null){ce===null&&(ce=lt);break}t&&ce&&Oa.alternate===null&&n(x,ce),O=h(Oa,O,de),Se===null?re=Oa:Se.sibling=Oa,Se=Oa,ce=lt}if(je.done)return i(x,ce),Ne&&Qa(x,de),re;if(ce===null){for(;!je.done;de++,je=N.next())je=z(x,je.value,$),je!==null&&(O=h(je,O,de),Se===null?re=je:Se.sibling=je,Se=je);return Ne&&Qa(x,de),re}for(ce=l(ce);!je.done;de++,je=N.next())je=L(ce,x,de,je.value,$),je!==null&&(t&&je.alternate!==null&&ce.delete(je.key===null?de:je.key),O=h(je,O,de),Se===null?re=je:Se.sibling=je,Se=je);return t&&ce.forEach(function(G0){return n(x,G0)}),Ne&&Qa(x,de),re}function Ye(x,O,N,$){if(typeof N=="object"&&N!==null&&N.type===m&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case c:e:{for(var re=N.key;O!==null;){if(O.key===re){if(re=N.type,re===m){if(O.tag===7){i(x,O.sibling),$=f(O,N.props.children),$.return=x,x=$;break e}}else if(O.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===B&&pm(re)===O.type){i(x,O.sibling),$=f(O,N.props),Pi($,N),$.return=x,x=$;break e}i(x,O);break}else n(x,O);O=O.sibling}N.type===m?($=rr(N.props.children,x.mode,$,N.key),$.return=x,x=$):($=zu(N.type,N.key,N.props,null,x.mode,$),Pi($,N),$.return=x,x=$)}return y(x);case d:e:{for(re=N.key;O!==null;){if(O.key===re)if(O.tag===4&&O.stateNode.containerInfo===N.containerInfo&&O.stateNode.implementation===N.implementation){i(x,O.sibling),$=f(O,N.children||[]),$.return=x,x=$;break e}else{i(x,O);break}else n(x,O);O=O.sibling}$=Ec(N,x.mode,$),$.return=x,x=$}return y(x);case B:return re=N._init,N=re(N._payload),Ye(x,O,N,$)}if(X(N))return ue(x,O,N,$);if(ee(N)){if(re=ee(N),typeof re!="function")throw Error(r(150));return N=re.call(N),pe(x,O,N,$)}if(typeof N.then=="function")return Ye(x,O,Au(N),$);if(N.$$typeof===w)return Ye(x,O,$u(x,N),$);Eu(x,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,O!==null&&O.tag===6?(i(x,O.sibling),$=f(O,N),$.return=x,x=$):(i(x,O),$=Ac(N,x.mode,$),$.return=x,x=$),y(x)):i(x,O)}return function(x,O,N,$){try{Bi=0;var re=Ye(x,O,N,$);return Ir=null,re}catch(ce){if(ce===Ii)throw ce;var Se=sn(29,ce,null,x.mode);return Se.lanes=$,Se.return=x,Se}finally{}}}var Ka=gm(!0),ym=gm(!1),$r=xe(null),Su=xe(0);function bm(t,n){t=Kn,ke(Su,t),ke($r,n),Kn=t|n.baseLanes}function xo(){ke(Su,Kn),ke($r,$r.current)}function No(){Kn=Su.current,ze($r),ze(Su)}var nn=xe(null),Rn=null;function la(t){var n=t.alternate;ke(tt,tt.current&1),ke(nn,t),Rn===null&&(n===null||$r.current!==null||n.memoizedState!==null)&&(Rn=t)}function vm(t){if(t.tag===22){if(ke(tt,tt.current),ke(nn,t),Rn===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Rn=t)}}else oa()}function oa(){ke(tt,tt.current),ke(nn,nn.current)}function Bn(t){ze(nn),Rn===t&&(Rn=null),ze(tt)}var tt=xe(0);function Tu(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var j_=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(i,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(i){return i()})}},M_=s.unstable_scheduleCallback,D_=s.unstable_NormalPriority,nt={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jo(){return{controller:new j_,data:new Map,refCount:0}}function zi(t){t.refCount--,t.refCount===0&&M_(D_,function(){t.controller.abort()})}var Hi=null,Mo=0,Br=0,Pr=null;function k_(t,n){if(Hi===null){var i=Hi=[];Mo=0,Br=$c(),Pr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Mo++,n.then(_m,_m),n}function _m(){if(--Mo===0&&Hi!==null){Pr!==null&&(Pr.status="fulfilled");var t=Hi;Hi=null,Br=0,Pr=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function U_(t,n){var i=[],l={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(l.status="rejected",l.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),l}var wm=ie.S;ie.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&k_(t,n),wm!==null&&wm(t,n)};var Fa=xe(null);function Do(){var t=Fa.current;return t!==null?t:Be.pooledCache}function Ou(t,n){n===null?ke(Fa,Fa.current):ke(Fa,n.pool)}function Am(){var t=Do();return t===null?null:{parent:nt._currentValue,pool:t}}var ca=0,Ee=null,Ue=null,Fe=null,Ru=!1,zr=!1,Xa=!1,Cu=0,qi=0,Hr=null,L_=0;function Ke(){throw Error(r(321))}function ko(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Pt(t[i],n[i]))return!1;return!0}function Uo(t,n,i,l,f,h){return ca=h,Ee=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ie.H=t===null||t.memoizedState===null?Ja:fa,Xa=!1,h=i(l,f),Xa=!1,zr&&(h=Sm(n,i,l,f)),Em(t),h}function Em(t){ie.H=Cn;var n=Ue!==null&&Ue.next!==null;if(ca=0,Fe=Ue=Ee=null,Ru=!1,qi=0,Hr=null,n)throw Error(r(300));t===null||st||(t=t.dependencies,t!==null&&Iu(t)&&(st=!0))}function Sm(t,n,i,l){Ee=t;var f=0;do{if(zr&&(Hr=null),qi=0,zr=!1,25<=f)throw Error(r(301));if(f+=1,Fe=Ue=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}ie.H=Wa,h=n(i,l)}while(zr);return h}function I_(){var t=ie.H,n=t.useState()[0];return n=typeof n.then=="function"?Gi(n):n,t=t.useState()[0],(Ue!==null?Ue.memoizedState:null)!==t&&(Ee.flags|=1024),n}function Lo(){var t=Cu!==0;return Cu=0,t}function Io(t,n,i){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i}function $o(t){if(Ru){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ru=!1}ca=0,Fe=Ue=Ee=null,zr=!1,qi=Cu=0,Hr=null}function kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ee.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Xe(){if(Ue===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var n=Fe===null?Ee.memoizedState:Fe.next;if(n!==null)Fe=n,Ue=t;else{if(t===null)throw Ee.alternate===null?Error(r(467)):Error(r(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Fe===null?Ee.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}var xu;xu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Gi(t){var n=qi;return qi+=1,Hr===null&&(Hr=[]),t=hm(Hr,t,n),n=Ee,(Fe===null?n.memoizedState:Fe.next)===null&&(n=n.alternate,ie.H=n===null||n.memoizedState===null?Ja:fa),t}function Nu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Gi(t);if(t.$$typeof===w)return vt(t)}throw Error(r(438,String(t)))}function Bo(t){var n=null,i=Ee.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=Ee.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=xu(),Ee.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(t),l=0;l<t;l++)i[l]=ne;return n.index++,i}function Pn(t,n){return typeof n=="function"?n(t):n}function ju(t){var n=Xe();return Po(n,Ue,t)}function Po(t,n,i){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var f=t.baseQueue,h=l.pending;if(h!==null){if(f!==null){var y=f.next;f.next=h.next,h.next=y}n.baseQueue=f=h,l.pending=null}if(h=t.baseState,f===null)t.memoizedState=h;else{n=f.next;var _=y=null,E=null,R=n,I=!1;do{var z=R.lane&-536870913;if(z!==R.lane?(Re&z)===z:(ca&z)===z){var j=R.revertLane;if(j===0)E!==null&&(E=E.next={lane:0,revertLane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),z===Br&&(I=!0);else if((ca&j)===j){R=R.next,j===Br&&(I=!0);continue}else z={lane:0,revertLane:R.revertLane,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},E===null?(_=E=z,y=h):E=E.next=z,Ee.lanes|=j,_a|=j;z=R.action,Xa&&i(h,z),h=R.hasEagerState?R.eagerState:i(h,z)}else j={lane:z,revertLane:R.revertLane,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},E===null?(_=E=j,y=h):E=E.next=j,Ee.lanes|=z,_a|=z;R=R.next}while(R!==null&&R!==n);if(E===null?y=h:E.next=_,!Pt(h,t.memoizedState)&&(st=!0,I&&(i=Pr,i!==null)))throw i;t.memoizedState=h,t.baseState=y,t.baseQueue=E,l.lastRenderedState=h}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function zo(t){var n=Xe(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=t;var l=i.dispatch,f=i.pending,h=n.memoizedState;if(f!==null){i.pending=null;var y=f=f.next;do h=t(h,y.action),y=y.next;while(y!==f);Pt(h,n.memoizedState)||(st=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),i.lastRenderedState=h}return[h,l]}function Tm(t,n,i){var l=Ee,f=Xe(),h=Ne;if(h){if(i===void 0)throw Error(r(407));i=i()}else i=n();var y=!Pt((Ue||f).memoizedState,i);if(y&&(f.memoizedState=i,st=!0),f=f.queue,Go(Cm.bind(null,l,f,t),[t]),f.getSnapshot!==n||y||Fe!==null&&Fe.memoizedState.tag&1){if(l.flags|=2048,qr(9,Rm.bind(null,l,f,i,n),{destroy:void 0},null),Be===null)throw Error(r(349));h||ca&60||Om(l,n,i)}return i}function Om(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=Ee.updateQueue,n===null?(n=xu(),Ee.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function Rm(t,n,i,l){n.value=i,n.getSnapshot=l,xm(n)&&Nm(t)}function Cm(t,n,i){return i(function(){xm(n)&&Nm(t)})}function xm(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Pt(t,i)}catch{return!0}}function Nm(t){var n=ua(t,2);n!==null&&St(n,t,2)}function Ho(t){var n=kt();if(typeof t=="function"){var i=t;if(t=i(),Xa){ra(!0);try{i()}finally{ra(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:t},n}function jm(t,n,i,l){return t.baseState=i,Po(t,Ue,typeof l=="function"?l:Pn)}function $_(t,n,i,l,f){if(ku(t))throw Error(r(485));if(t=n.action,t!==null){var h={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};ie.T!==null?i(!0):h.isTransition=!1,l(h),i=n.pending,i===null?(h.next=n.pending=h,Mm(n,h)):(h.next=i.next,n.pending=i.next=h)}}function Mm(t,n){var i=n.action,l=n.payload,f=t.state;if(n.isTransition){var h=ie.T,y={};ie.T=y;try{var _=i(f,l),E=ie.S;E!==null&&E(y,_),Dm(t,n,_)}catch(R){qo(t,n,R)}finally{ie.T=h}}else try{h=i(f,l),Dm(t,n,h)}catch(R){qo(t,n,R)}}function Dm(t,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){km(t,n,l)},function(l){return qo(t,n,l)}):km(t,n,i)}function km(t,n,i){n.status="fulfilled",n.value=i,Um(n),t.state=i,n=t.pending,n!==null&&(i=n.next,i===n?t.pending=null:(i=i.next,n.next=i,Mm(t,i)))}function qo(t,n,i){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,Um(n),n=n.next;while(n!==l)}t.action=null}function Um(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Lm(t,n){return n}function Im(t,n){if(Ne){var i=Be.formState;if(i!==null){e:{var l=Ee;if(Ne){if(dt){t:{for(var f=dt,h=On;f.nodeType!==8;){if(!h){f=null;break t}if(f=hn(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){dt=hn(f.nextSibling),l=f.data==="F!";break e}}Ya(l)}l=!1}l&&(n=i[0])}}return i=kt(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lm,lastRenderedState:n},i.queue=l,i=tp.bind(null,Ee,l),l.dispatch=i,l=Ho(!1),h=Ko.bind(null,Ee,!1,l.queue),l=kt(),f={state:n,dispatch:null,action:t,pending:null},l.queue=f,i=$_.bind(null,Ee,f,h,i),f.dispatch=i,l.memoizedState=t,[n,i,!1]}function $m(t){var n=Xe();return Bm(n,Ue,t)}function Bm(t,n,i){n=Po(t,n,Lm)[0],t=ju(Pn)[0],n=typeof n=="object"&&n!==null&&typeof n.then=="function"?Gi(n):n;var l=Xe(),f=l.queue,h=f.dispatch;return i!==l.memoizedState&&(Ee.flags|=2048,qr(9,B_.bind(null,f,i),{destroy:void 0},null)),[n,h,t]}function B_(t,n){t.action=n}function Pm(t){var n=Xe(),i=Ue;if(i!==null)return Bm(n,i,t);Xe(),n=n.memoizedState,i=Xe();var l=i.queue.dispatch;return i.memoizedState=t,[n,l,!1]}function qr(t,n,i,l){return t={tag:t,create:n,inst:i,deps:l,next:null},n=Ee.updateQueue,n===null&&(n=xu(),Ee.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,n.lastEffect=t),t}function zm(){return Xe().memoizedState}function Mu(t,n,i,l){var f=kt();Ee.flags|=t,f.memoizedState=qr(1|n,i,{destroy:void 0},l===void 0?null:l)}function Du(t,n,i,l){var f=Xe();l=l===void 0?null:l;var h=f.memoizedState.inst;Ue!==null&&l!==null&&ko(l,Ue.memoizedState.deps)?f.memoizedState=qr(n,i,h,l):(Ee.flags|=t,f.memoizedState=qr(1|n,i,h,l))}function Hm(t,n){Mu(8390656,8,t,n)}function Go(t,n){Du(2048,8,t,n)}function qm(t,n){return Du(4,2,t,n)}function Gm(t,n){return Du(4,4,t,n)}function Zm(t,n){if(typeof n=="function"){t=t();var i=n(t);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Vm(t,n,i){i=i!=null?i.concat([t]):null,Du(4,4,Zm.bind(null,n,t),i)}function Zo(){}function Qm(t,n){var i=Xe();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&ko(n,l[1])?l[0]:(i.memoizedState=[t,n],t)}function Ym(t,n){var i=Xe();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&ko(n,l[1]))return l[0];if(l=t(),Xa){ra(!0);try{t()}finally{ra(!1)}}return i.memoizedState=[l,n],l}function Vo(t,n,i){return i===void 0||ca&1073741824?t.memoizedState=n:(t.memoizedState=i,t=Fp(),Ee.lanes|=t,_a|=t,i)}function Km(t,n,i,l){return Pt(i,n)?i:$r.current!==null?(t=Vo(t,i,l),Pt(t,n)||(st=!0),t):ca&42?(t=Fp(),Ee.lanes|=t,_a|=t,n):(st=!0,t.memoizedState=i)}function Fm(t,n,i,l,f){var h=F.p;F.p=h!==0&&8>h?h:8;var y=ie.T,_={};ie.T=_,Ko(t,!1,n,i);try{var E=f(),R=ie.S;if(R!==null&&R(_,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var I=U_(E,l);Zi(t,n,I,Gt(t))}else Zi(t,n,l,Gt(t))}catch(z){Zi(t,n,{then:function(){},status:"rejected",reason:z},Gt())}finally{F.p=h,ie.T=y}}function P_(){}function Qo(t,n,i,l){if(t.tag!==5)throw Error(r(476));var f=Xm(t).queue;Fm(t,f,n,oe,i===null?P_:function(){return Jm(t),i(l)})}function Xm(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:oe},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:i},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Jm(t){var n=Xm(t).next.queue;Zi(t,n,{},Gt())}function Yo(){return vt(fs)}function Wm(){return Xe().memoizedState}function ep(){return Xe().memoizedState}function z_(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var i=Gt();t=ma(i);var l=pa(n,t,i);l!==null&&(St(l,n,i),Yi(l,n,i)),n={cache:jo()},t.payload=n;return}n=n.return}}function H_(t,n,i){var l=Gt();i={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},ku(t)?np(n,i):(i=So(t,n,i,l),i!==null&&(St(i,t,l),ap(i,n,l)))}function tp(t,n,i){var l=Gt();Zi(t,n,i,l)}function Zi(t,n,i,l){var f={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(ku(t))np(n,f);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var y=n.lastRenderedState,_=h(y,i);if(f.hasEagerState=!0,f.eagerState=_,Pt(_,y))return yu(t,n,f,0),Be===null&&gu(),!1}catch{}finally{}if(i=So(t,n,f,l),i!==null)return St(i,t,l),ap(i,n,l),!0}return!1}function Ko(t,n,i,l){if(l={lane:2,revertLane:$c(),action:l,hasEagerState:!1,eagerState:null,next:null},ku(t)){if(n)throw Error(r(479))}else n=So(t,i,l,2),n!==null&&St(n,t,2)}function ku(t){var n=t.alternate;return t===Ee||n!==null&&n===Ee}function np(t,n){zr=Ru=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function ap(t,n,i){if(i&4194176){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,mh(t,i)}}var Cn={readContext:vt,use:Nu,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke};Cn.useCacheRefresh=Ke,Cn.useMemoCache=Ke,Cn.useHostTransitionStatus=Ke,Cn.useFormState=Ke,Cn.useActionState=Ke,Cn.useOptimistic=Ke;var Ja={readContext:vt,use:Nu,useCallback:function(t,n){return kt().memoizedState=[t,n===void 0?null:n],t},useContext:vt,useEffect:Hm,useImperativeHandle:function(t,n,i){i=i!=null?i.concat([t]):null,Mu(4194308,4,Zm.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Mu(4194308,4,t,n)},useInsertionEffect:function(t,n){Mu(4,2,t,n)},useMemo:function(t,n){var i=kt();n=n===void 0?null:n;var l=t();if(Xa){ra(!0);try{t()}finally{ra(!1)}}return i.memoizedState=[l,n],l},useReducer:function(t,n,i){var l=kt();if(i!==void 0){var f=i(n);if(Xa){ra(!0);try{i(n)}finally{ra(!1)}}}else f=n;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=H_.bind(null,Ee,t),[l.memoizedState,t]},useRef:function(t){var n=kt();return t={current:t},n.memoizedState=t},useState:function(t){t=Ho(t);var n=t.queue,i=tp.bind(null,Ee,n);return n.dispatch=i,[t.memoizedState,i]},useDebugValue:Zo,useDeferredValue:function(t,n){var i=kt();return Vo(i,t,n)},useTransition:function(){var t=Ho(!1);return t=Fm.bind(null,Ee,t.queue,!0,!1),kt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,i){var l=Ee,f=kt();if(Ne){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),Be===null)throw Error(r(349));Re&60||Om(l,n,i)}f.memoizedState=i;var h={value:i,getSnapshot:n};return f.queue=h,Hm(Cm.bind(null,l,h,t),[t]),l.flags|=2048,qr(9,Rm.bind(null,l,h,i,n),{destroy:void 0},null),i},useId:function(){var t=kt(),n=Be.identifierPrefix;if(Ne){var i=$n,l=In;i=(l&~(1<<32-Bt(l)-1)).toString(32)+i,n=":"+n+"R"+i,i=Cu++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=L_++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},useCacheRefresh:function(){return kt().memoizedState=z_.bind(null,Ee)}};Ja.useMemoCache=Bo,Ja.useHostTransitionStatus=Yo,Ja.useFormState=Im,Ja.useActionState=Im,Ja.useOptimistic=function(t){var n=kt();n.memoizedState=n.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Ko.bind(null,Ee,!0,i),i.dispatch=n,[t,n]};var fa={readContext:vt,use:Nu,useCallback:Qm,useContext:vt,useEffect:Go,useImperativeHandle:Vm,useInsertionEffect:qm,useLayoutEffect:Gm,useMemo:Ym,useReducer:ju,useRef:zm,useState:function(){return ju(Pn)},useDebugValue:Zo,useDeferredValue:function(t,n){var i=Xe();return Km(i,Ue.memoizedState,t,n)},useTransition:function(){var t=ju(Pn)[0],n=Xe().memoizedState;return[typeof t=="boolean"?t:Gi(t),n]},useSyncExternalStore:Tm,useId:Wm};fa.useCacheRefresh=ep,fa.useMemoCache=Bo,fa.useHostTransitionStatus=Yo,fa.useFormState=$m,fa.useActionState=$m,fa.useOptimistic=function(t,n){var i=Xe();return jm(i,Ue,t,n)};var Wa={readContext:vt,use:Nu,useCallback:Qm,useContext:vt,useEffect:Go,useImperativeHandle:Vm,useInsertionEffect:qm,useLayoutEffect:Gm,useMemo:Ym,useReducer:zo,useRef:zm,useState:function(){return zo(Pn)},useDebugValue:Zo,useDeferredValue:function(t,n){var i=Xe();return Ue===null?Vo(i,t,n):Km(i,Ue.memoizedState,t,n)},useTransition:function(){var t=zo(Pn)[0],n=Xe().memoizedState;return[typeof t=="boolean"?t:Gi(t),n]},useSyncExternalStore:Tm,useId:Wm};Wa.useCacheRefresh=ep,Wa.useMemoCache=Bo,Wa.useHostTransitionStatus=Yo,Wa.useFormState=Pm,Wa.useActionState=Pm,Wa.useOptimistic=function(t,n){var i=Xe();return Ue!==null?jm(i,Ue,t,n):(i.baseState=t,[t,i.queue.dispatch])};function Fo(t,n,i,l){n=t.memoizedState,i=i(l,n),i=i==null?n:_e({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Xo={isMounted:function(t){return(t=t._reactInternals)?q(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var l=Gt(),f=ma(l);f.payload=n,i!=null&&(f.callback=i),n=pa(t,f,l),n!==null&&(St(n,t,l),Yi(n,t,l))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var l=Gt(),f=ma(l);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=pa(t,f,l),n!==null&&(St(n,t,l),Yi(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=Gt(),l=ma(i);l.tag=2,n!=null&&(l.callback=n),n=pa(t,l,i),n!==null&&(St(n,t,i),Yi(n,t,i))}};function rp(t,n,i,l,f,h,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,h,y):n.prototype&&n.prototype.isPureReactComponent?!Mi(i,l)||!Mi(f,h):!0}function ip(t,n,i,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==t&&Xo.enqueueReplaceState(n,n.state,null)}function er(t,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(t=t.defaultProps){i===n&&(i=_e({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}var Uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function sp(t){Uu(t)}function up(t){console.error(t)}function lp(t){Uu(t)}function Lu(t,n){try{var i=t.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function op(t,n,i){try{var l=t.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Jo(t,n,i){return i=ma(i),i.tag=3,i.payload={element:null},i.callback=function(){Lu(t,n)},i}function cp(t){return t=ma(t),t.tag=3,t}function fp(t,n,i,l){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var h=l.value;t.payload=function(){return f(h)},t.callback=function(){op(n,i,l)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){op(n,i,l),typeof f!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function q_(t,n,i,l,f){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&Qi(n,i,f,!0),i=nn.current,i!==null){switch(i.tag){case 13:return Rn===null?Dc():i.alternate===null&&Qe===0&&(Qe=3),i.flags&=-257,i.flags|=65536,i.lanes=f,l===Co?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),Uc(t,l,f)),!1;case 22:return i.flags|=65536,l===Co?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),Uc(t,l,f)),!1}throw Error(r(435,i.tag))}return Uc(t,l,f),Dc(),!1}if(Ne)return n=nn.current,n!==null?(!(n.flags&65536)&&(n.flags|=256),n.flags|=65536,n.lanes=f,l!==Ro&&(t=Error(r(422),{cause:l}),Li(Wt(t,i)))):(l!==Ro&&(n=Error(r(423),{cause:l}),Li(Wt(n,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Wt(l,i),f=Jo(t.stateNode,l,f),hc(t,f),Qe!==4&&(Qe=2)),!1;var h=Error(r(520),{cause:l});if(h=Wt(h,i),ns===null?ns=[h]:ns.push(h),Qe!==4&&(Qe=2),n===null)return!0;l=Wt(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=Jo(i.stateNode,l,t),hc(i,t),!1;case 1:if(n=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(wa===null||!wa.has(h))))return i.flags|=65536,f&=-f,i.lanes|=f,f=cp(f),fp(f,t,i,l),hc(i,f),!1}i=i.return}while(i!==null);return!1}var dp=Error(r(461)),st=!1;function ht(t,n,i,l){n.child=t===null?ym(n,null,i,l):Ka(n,t.child,i,l)}function hp(t,n,i,l,f){i=i.render;var h=n.ref;if("ref"in l){var y={};for(var _ in l)_!=="ref"&&(y[_]=l[_])}else y=l;return nr(n),l=Uo(t,n,i,y,h,f),_=Lo(),t!==null&&!st?(Io(t,n,f),zn(t,n,f)):(Ne&&_&&To(n),n.flags|=1,ht(t,n,l,f),n.child)}function mp(t,n,i,l,f){if(t===null){var h=i.type;return typeof h=="function"&&!wc(h)&&h.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=h,pp(t,n,h,l,f)):(t=zu(i.type,null,l,n,n.mode,f),t.ref=n.ref,t.return=n,n.child=t)}if(h=t.child,!uc(t,f)){var y=h.memoizedProps;if(i=i.compare,i=i!==null?i:Mi,i(y,l)&&t.ref===n.ref)return zn(t,n,f)}return n.flags|=1,t=va(h,l),t.ref=n.ref,t.return=n,n.child=t}function pp(t,n,i,l,f){if(t!==null){var h=t.memoizedProps;if(Mi(h,l)&&t.ref===n.ref)if(st=!1,n.pendingProps=l=h,uc(t,f))t.flags&131072&&(st=!0);else return n.lanes=t.lanes,zn(t,n,f)}return Wo(t,n,i,l,f)}function gp(t,n,i){var l=n.pendingProps,f=l.children,h=(n.stateNode._pendingVisibility&2)!==0,y=t!==null?t.memoizedState:null;if(Vi(t,n),l.mode==="hidden"||h){if(n.flags&128){if(l=y!==null?y.baseLanes|i:i,t!==null){for(f=n.child=t.child,h=0;f!==null;)h=h|f.lanes|f.childLanes,f=f.sibling;n.childLanes=h&~l}else n.childLanes=0,n.child=null;return yp(t,n,l,i)}if(i&536870912)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ou(n,y!==null?y.cachePool:null),y!==null?bm(n,y):xo(),vm(n);else return n.lanes=n.childLanes=536870912,yp(t,n,y!==null?y.baseLanes|i:i,i)}else y!==null?(Ou(n,y.cachePool),bm(n,y),oa(),n.memoizedState=null):(t!==null&&Ou(n,null),xo(),oa());return ht(t,n,f,i),n.child}function yp(t,n,i,l){var f=Do();return f=f===null?null:{parent:nt._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},t!==null&&Ou(n,null),xo(),vm(n),t!==null&&Qi(t,n,l,!0),null}function Vi(t,n){var i=n.ref;if(i===null)t!==null&&t.ref!==null&&(n.flags|=2097664);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(t===null||t.ref!==i)&&(n.flags|=2097664)}}function Wo(t,n,i,l,f){return nr(n),i=Uo(t,n,i,l,void 0,f),l=Lo(),t!==null&&!st?(Io(t,n,f),zn(t,n,f)):(Ne&&l&&To(n),n.flags|=1,ht(t,n,i,f),n.child)}function bp(t,n,i,l,f,h){return nr(n),n.updateQueue=null,i=Sm(n,l,i,f),Em(t),l=Lo(),t!==null&&!st?(Io(t,n,h),zn(t,n,h)):(Ne&&l&&To(n),n.flags|=1,ht(t,n,i,h),n.child)}function vp(t,n,i,l,f){if(nr(n),n.stateNode===null){var h=kr,y=i.contextType;typeof y=="object"&&y!==null&&(h=vt(y)),h=new i(l,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Xo,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=l,h.state=n.memoizedState,h.refs={},fc(n),y=i.contextType,h.context=typeof y=="object"&&y!==null?vt(y):kr,h.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(Fo(n,i,y,l),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&Xo.enqueueReplaceState(h,h.state,null),Fi(n,l,h,f),Ki(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){h=n.stateNode;var _=n.memoizedProps,E=er(i,_);h.props=E;var R=h.context,I=i.contextType;y=kr,typeof I=="object"&&I!==null&&(y=vt(I));var z=i.getDerivedStateFromProps;I=typeof z=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,I||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||R!==y)&&ip(n,h,l,y),ha=!1;var j=n.memoizedState;h.state=j,Fi(n,l,h,f),Ki(),R=n.memoizedState,_||j!==R||ha?(typeof z=="function"&&(Fo(n,i,z,l),R=n.memoizedState),(E=ha||rp(n,i,E,l,j,R,y))?(I||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=R),h.props=l,h.state=R,h.context=y,l=E):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,dc(t,n),y=n.memoizedProps,I=er(i,y),h.props=I,z=n.pendingProps,j=h.context,R=i.contextType,E=kr,typeof R=="object"&&R!==null&&(E=vt(R)),_=i.getDerivedStateFromProps,(R=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==z||j!==E)&&ip(n,h,l,E),ha=!1,j=n.memoizedState,h.state=j,Fi(n,l,h,f),Ki();var L=n.memoizedState;y!==z||j!==L||ha||t!==null&&t.dependencies!==null&&Iu(t.dependencies)?(typeof _=="function"&&(Fo(n,i,_,l),L=n.memoizedState),(I=ha||rp(n,i,I,l,j,L,E)||t!==null&&t.dependencies!==null&&Iu(t.dependencies))?(R||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,L,E),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,L,E)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&j===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&j===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=L),h.props=l,h.state=L,h.context=E,l=I):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&j===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&j===t.memoizedState||(n.flags|=1024),l=!1)}return h=l,Vi(t,n),l=(n.flags&128)!==0,h||l?(h=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,t!==null&&l?(n.child=Ka(n,t.child,null,f),n.child=Ka(n,null,i,f)):ht(t,n,i,f),n.memoizedState=h.state,t=n.child):t=zn(t,n,f),t}function _p(t,n,i,l){return Ui(),n.flags|=256,ht(t,n,i,l),n.child}var ec={dehydrated:null,treeContext:null,retryLane:0};function tc(t){return{baseLanes:t,cachePool:Am()}}function nc(t,n,i){return t=t!==null?t.childLanes&~i:0,n&&(t|=un),t}function wp(t,n,i){var l=n.pendingProps,f=!1,h=(n.flags&128)!==0,y;if((y=h)||(y=t!==null&&t.memoizedState===null?!1:(tt.current&2)!==0),y&&(f=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ne){if(f?la(n):oa(),Ne){var _=dt,E;if(E=_){e:{for(E=_,_=On;E.nodeType!==8;){if(!_){_=null;break e}if(E=hn(E.nextSibling),E===null){_=null;break e}}_=E}_!==null?(n.memoizedState={dehydrated:_,treeContext:Va!==null?{id:In,overflow:$n}:null,retryLane:536870912},E=sn(18,null,null,0),E.stateNode=_,E.return=n,n.child=E,Et=n,dt=null,E=!0):E=!1}E||Ya(n)}if(_=n.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return _.data==="$!"?n.lanes=16:n.lanes=536870912,null;Bn(n)}return _=l.children,l=l.fallback,f?(oa(),f=n.mode,_=rc({mode:"hidden",children:_},f),l=rr(l,f,i,null),_.return=n,l.return=n,_.sibling=l,n.child=_,f=n.child,f.memoizedState=tc(i),f.childLanes=nc(t,y,i),n.memoizedState=ec,l):(la(n),ac(n,_))}if(E=t.memoizedState,E!==null&&(_=E.dehydrated,_!==null)){if(h)n.flags&256?(la(n),n.flags&=-257,n=ic(t,n,i)):n.memoizedState!==null?(oa(),n.child=t.child,n.flags|=128,n=null):(oa(),f=l.fallback,_=n.mode,l=rc({mode:"visible",children:l.children},_),f=rr(f,_,i,null),f.flags|=2,l.return=n,f.return=n,l.sibling=f,n.child=l,Ka(n,t.child,null,i),l=n.child,l.memoizedState=tc(i),l.childLanes=nc(t,y,i),n.memoizedState=ec,n=f);else if(la(n),_.data==="$!"){if(y=_.nextSibling&&_.nextSibling.dataset,y)var R=y.dgst;y=R,l=Error(r(419)),l.stack="",l.digest=y,Li({value:l,source:null,stack:null}),n=ic(t,n,i)}else if(st||Qi(t,n,i,!1),y=(i&t.childLanes)!==0,st||y){if(y=Be,y!==null){if(l=i&-i,l&42)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=l&(y.suspendedLanes|i)?0:l,l!==0&&l!==E.retryLane)throw E.retryLane=l,ua(t,l),St(y,t,l),dp}_.data==="$?"||Dc(),n=ic(t,n,i)}else _.data==="$?"?(n.flags|=128,n.child=t.child,n=r0.bind(null,t),_._reactRetry=n,n=null):(t=E.treeContext,dt=hn(_.nextSibling),Et=n,Ne=!0,fn=null,On=!1,t!==null&&(en[tn++]=In,en[tn++]=$n,en[tn++]=Va,In=t.id,$n=t.overflow,Va=n),n=ac(n,l.children),n.flags|=4096);return n}return f?(oa(),f=l.fallback,_=n.mode,E=t.child,R=E.sibling,l=va(E,{mode:"hidden",children:l.children}),l.subtreeFlags=E.subtreeFlags&31457280,R!==null?f=va(R,f):(f=rr(f,_,i,null),f.flags|=2),f.return=n,l.return=n,l.sibling=f,n.child=l,l=f,f=n.child,_=t.child.memoizedState,_===null?_=tc(i):(E=_.cachePool,E!==null?(R=nt._currentValue,E=E.parent!==R?{parent:R,pool:R}:E):E=Am(),_={baseLanes:_.baseLanes|i,cachePool:E}),f.memoizedState=_,f.childLanes=nc(t,y,i),n.memoizedState=ec,l):(la(n),i=t.child,t=i.sibling,i=va(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,t!==null&&(y=n.deletions,y===null?(n.deletions=[t],n.flags|=16):y.push(t)),n.child=i,n.memoizedState=null,i)}function ac(t,n){return n=rc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function rc(t,n){return Qp(t,n,0,null)}function ic(t,n,i){return Ka(n,t.child,null,i),t=ac(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Ap(t,n,i){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),oc(t.return,n,i)}function sc(t,n,i,l,f){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=i,h.tailMode=f)}function Ep(t,n,i){var l=n.pendingProps,f=l.revealOrder,h=l.tail;if(ht(t,n,l.children,i),l=tt.current,l&2)l=l&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ap(t,i,n);else if(t.tag===19)Ap(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ke(tt,l),f){case"forwards":for(i=n.child,f=null;i!==null;)t=i.alternate,t!==null&&Tu(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),sc(n,!1,f,i,h);break;case"backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(t=f.alternate,t!==null&&Tu(t)===null){n.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}sc(n,!0,i,null,h);break;case"together":sc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function zn(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),_a|=n.lanes,!(i&n.childLanes))if(t!==null){if(Qi(t,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,i=va(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=va(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function uc(t,n){return t.lanes&n?!0:(t=t.dependencies,!!(t!==null&&Iu(t)))}function G_(t,n,i){switch(n.tag){case 3:Ws(n,n.stateNode.containerInfo),da(n,nt,t.memoizedState.cache),Ui();break;case 27:case 5:Fl(n);break;case 4:Ws(n,n.stateNode.containerInfo);break;case 10:da(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(la(n),n.flags|=128,null):i&n.child.childLanes?wp(t,n,i):(la(n),t=zn(t,n,i),t!==null?t.sibling:null);la(n);break;case 19:var f=(t.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||(Qi(t,n,i,!1),l=(i&n.childLanes)!==0),f){if(l)return Ep(t,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ke(tt,tt.current),l)break;return null;case 22:case 23:return n.lanes=0,gp(t,n,i);case 24:da(n,nt,t.memoizedState.cache)}return zn(t,n,i)}function Sp(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps)st=!0;else{if(!uc(t,i)&&!(n.flags&128))return st=!1,G_(t,n,i);st=!!(t.flags&131072)}else st=!1,Ne&&n.flags&1048576&&lm(n,_u,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var l=n.elementType,f=l._init;if(l=f(l._payload),n.type=l,typeof l=="function")wc(l)?(t=er(l,t),n.tag=1,n=vp(null,n,l,t,i)):(n.tag=0,n=Wo(null,n,l,t,i));else{if(l!=null){if(f=l.$$typeof,f===A){n.tag=11,n=hp(null,n,l,t,i);break e}else if(f===M){n.tag=14,n=mp(null,n,l,t,i);break e}}throw n=ae(l)||l,Error(r(306,n,""))}}return n;case 0:return Wo(t,n,n.type,n.pendingProps,i);case 1:return l=n.type,f=er(l,n.pendingProps),vp(t,n,l,f,i);case 3:e:{if(Ws(n,n.stateNode.containerInfo),t===null)throw Error(r(387));var h=n.pendingProps;f=n.memoizedState,l=f.element,dc(t,n),Fi(n,h,null,i);var y=n.memoizedState;if(h=y.cache,da(n,nt,h),h!==f.cache&&cc(n,[nt],i,!0),Ki(),h=y.element,f.isDehydrated)if(f={element:h,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=_p(t,n,h,i);break e}else if(h!==l){l=Wt(Error(r(424)),n),Li(l),n=_p(t,n,h,i);break e}else for(dt=hn(n.stateNode.containerInfo.firstChild),Et=n,Ne=!0,fn=null,On=!0,i=ym(n,null,h,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ui(),h===l){n=zn(t,n,i);break e}ht(t,n,h,i)}n=n.child}return n;case 26:return Vi(t,n),t===null?(i=Rg(n.type,null,n.pendingProps,null))?n.memoizedState=i:Ne||(i=n.type,t=n.pendingProps,l=Wu(aa.current).createElement(i),l[bt]=n,l[Mt]=t,mt(l,i,t),it(l),n.stateNode=l):n.memoizedState=Rg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Fl(n),t===null&&Ne&&(l=n.stateNode=Sg(n.type,n.pendingProps,aa.current),Et=n,On=!0,dt=hn(l.firstChild)),l=n.pendingProps.children,t!==null||Ne?ht(t,n,l,i):n.child=Ka(n,null,l,i),Vi(t,n),n.child;case 5:return t===null&&Ne&&((f=l=dt)&&(l=_0(l,n.type,n.pendingProps,On),l!==null?(n.stateNode=l,Et=n,dt=hn(l.firstChild),On=!1,f=!0):f=!1),f||Ya(n)),Fl(n),f=n.type,h=n.pendingProps,y=t!==null?t.memoizedProps:null,l=h.children,Qc(f,h)?l=null:y!==null&&Qc(f,y)&&(n.flags|=32),n.memoizedState!==null&&(f=Uo(t,n,I_,null,null,i),fs._currentValue=f),Vi(t,n),ht(t,n,l,i),n.child;case 6:return t===null&&Ne&&((t=i=dt)&&(i=w0(i,n.pendingProps,On),i!==null?(n.stateNode=i,Et=n,dt=null,t=!0):t=!1),t||Ya(n)),null;case 13:return wp(t,n,i);case 4:return Ws(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Ka(n,null,l,i):ht(t,n,l,i),n.child;case 11:return hp(t,n,n.type,n.pendingProps,i);case 7:return ht(t,n,n.pendingProps,i),n.child;case 8:return ht(t,n,n.pendingProps.children,i),n.child;case 12:return ht(t,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,da(n,n.type,l.value),ht(t,n,l.children,i),n.child;case 9:return f=n.type._context,l=n.pendingProps.children,nr(n),f=vt(f),l=l(f),n.flags|=1,ht(t,n,l,i),n.child;case 14:return mp(t,n,n.type,n.pendingProps,i);case 15:return pp(t,n,n.type,n.pendingProps,i);case 19:return Ep(t,n,i);case 22:return gp(t,n,i);case 24:return nr(n),l=vt(nt),t===null?(f=Do(),f===null&&(f=Be,h=jo(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=i),f=h),n.memoizedState={parent:l,cache:f},fc(n),da(n,nt,f)):(t.lanes&i&&(dc(t,n),Fi(n,null,null,i),Ki()),f=t.memoizedState,h=n.memoizedState,f.parent!==l?(f={parent:l,cache:l},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),da(n,nt,l)):(l=h.cache,da(n,nt,l),l!==f.cache&&cc(n,[nt],i,!0))),ht(t,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}var lc=xe(null),tr=null,Hn=null;function da(t,n,i){ke(lc,n._currentValue),n._currentValue=i}function qn(t){t._currentValue=lc.current,ze(lc)}function oc(t,n,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===i)break;t=t.return}}function cc(t,n,i,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var h=f.dependencies;if(h!==null){var y=f.child;h=h.firstContext;e:for(;h!==null;){var _=h;h=f;for(var E=0;E<n.length;E++)if(_.context===n[E]){h.lanes|=i,_=h.alternate,_!==null&&(_.lanes|=i),oc(h.return,i,t),l||(y=null);break e}h=_.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(r(341));y.lanes|=i,h=y.alternate,h!==null&&(h.lanes|=i),oc(y,i,t),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function Qi(t,n,i,l){t=null;for(var f=n,h=!1;f!==null;){if(!h){if(f.flags&524288)h=!0;else if(f.flags&262144)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var _=f.type;Pt(f.pendingProps.value,y.value)||(t!==null?t.push(_):t=[_])}}else if(f===Js.current){if(y=f.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(fs):t=[fs])}f=f.return}t!==null&&cc(n,t,i,l),n.flags|=262144}function Iu(t){for(t=t.firstContext;t!==null;){if(!Pt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function nr(t){tr=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vt(t){return Tp(tr,t)}function $u(t,n){return tr===null&&nr(t),Tp(t,n)}function Tp(t,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Hn===null){if(t===null)throw Error(r(308));Hn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Hn=Hn.next=n;return i}var ha=!1;function fc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ma(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pa(t,n,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,qe&2){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,n=bu(t),sm(t,null,i),n}return yu(t,l,n,i),bu(t)}function Yi(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194176)!==0)){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,mh(t,i)}}function hc(t,n){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?f=h=y:h=h.next=y,i=i.next}while(i!==null);h===null?f=h=n:h=h.next=n}else f=h=n;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}var mc=!1;function Ki(){if(mc){var t=Pr;if(t!==null)throw t}}function Fi(t,n,i,l){mc=!1;var f=t.updateQueue;ha=!1;var h=f.firstBaseUpdate,y=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var E=_,R=E.next;E.next=null,y===null?h=R:y.next=R,y=E;var I=t.alternate;I!==null&&(I=I.updateQueue,_=I.lastBaseUpdate,_!==y&&(_===null?I.firstBaseUpdate=R:_.next=R,I.lastBaseUpdate=E))}if(h!==null){var z=f.baseState;y=0,I=R=E=null,_=h;do{var j=_.lane&-536870913,L=j!==_.lane;if(L?(Re&j)===j:(l&j)===j){j!==0&&j===Br&&(mc=!0),I!==null&&(I=I.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var ue=t,pe=_;j=n;var Ye=i;switch(pe.tag){case 1:if(ue=pe.payload,typeof ue=="function"){z=ue.call(Ye,z,j);break e}z=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=pe.payload,j=typeof ue=="function"?ue.call(Ye,z,j):ue,j==null)break e;z=_e({},z,j);break e;case 2:ha=!0}}j=_.callback,j!==null&&(t.flags|=64,L&&(t.flags|=8192),L=f.callbacks,L===null?f.callbacks=[j]:L.push(j))}else L={lane:j,tag:_.tag,payload:_.payload,callback:_.callback,next:null},I===null?(R=I=L,E=z):I=I.next=L,y|=j;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;L=_,_=L.next,L.next=null,f.lastBaseUpdate=L,f.shared.pending=null}}while(!0);I===null&&(E=z),f.baseState=E,f.firstBaseUpdate=R,f.lastBaseUpdate=I,h===null&&(f.shared.lanes=0),_a|=y,t.lanes=y,t.memoizedState=z}}function Op(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Rp(t,n){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Op(i[t],n)}function Xi(t,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var f=l.next;i=f;do{if((i.tag&t)===t){l=void 0;var h=i.create,y=i.inst;l=h(),y.destroy=l}i=i.next}while(i!==f)}}catch(_){$e(n,n.return,_)}}function ga(t,n,i){try{var l=n.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var h=f.next;l=h;do{if((l.tag&t)===t){var y=l.inst,_=y.destroy;if(_!==void 0){y.destroy=void 0,f=n;var E=i;try{_()}catch(R){$e(f,E,R)}}}l=l.next}while(l!==h)}}catch(R){$e(n,n.return,R)}}function Cp(t){var n=t.updateQueue;if(n!==null){var i=t.stateNode;try{Rp(n,i)}catch(l){$e(t,t.return,l)}}}function xp(t,n,i){i.props=er(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(l){$e(t,n,l)}}function ar(t,n){try{var i=t.ref;if(i!==null){var l=t.stateNode;switch(t.tag){case 26:case 27:case 5:var f=l;break;default:f=l}typeof i=="function"?t.refCleanup=i(f):i.current=f}}catch(h){$e(t,n,h)}}function zt(t,n){var i=t.ref,l=t.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(f){$e(t,n,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){$e(t,n,f)}else i.current=null}function Np(t){var n=t.type,i=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(f){$e(t,t.return,f)}}function jp(t,n,i){try{var l=t.stateNode;p0(l,t.type,i,n),l[Mt]=n}catch(f){$e(t,t.return,f)}}function Mp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function pc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Ju));else if(l!==4&&l!==27&&(t=t.child,t!==null))for(gc(t,n,i),t=t.sibling;t!==null;)gc(t,n,i),t=t.sibling}function Bu(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(l!==4&&l!==27&&(t=t.child,t!==null))for(Bu(t,n,i),t=t.sibling;t!==null;)Bu(t,n,i),t=t.sibling}var Gn=!1,Ve=!1,yc=!1,Dp=typeof WeakSet=="function"?WeakSet:Set,ut=null,kp=!1;function Z_(t,n){if(t=t.containerInfo,Zc=il,t=Xh(t),vo(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var y=0,_=-1,E=-1,R=0,I=0,z=t,j=null;t:for(;;){for(var L;z!==i||f!==0&&z.nodeType!==3||(_=y+f),z!==h||l!==0&&z.nodeType!==3||(E=y+l),z.nodeType===3&&(y+=z.nodeValue.length),(L=z.firstChild)!==null;)j=z,z=L;for(;;){if(z===t)break t;if(j===i&&++R===f&&(_=y),j===h&&++I===l&&(E=y),(L=z.nextSibling)!==null)break;z=j,j=z.parentNode}z=L}i=_===-1||E===-1?null:{start:_,end:E}}else i=null}i=i||{start:0,end:0}}else i=null;for(Vc={focusedElem:t,selectionRange:i},il=!1,ut=n;ut!==null;)if(n=ut,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ut=t;else for(;ut!==null;){switch(n=ut,h=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&h!==null){t=void 0,i=n,f=h.memoizedProps,h=h.memoizedState,l=i.stateNode;try{var ue=er(i.type,f,i.elementType===i.type);t=l.getSnapshotBeforeUpdate(ue,h),l.__reactInternalSnapshotBeforeUpdate=t}catch(pe){$e(i,i.return,pe)}}break;case 3:if(t&1024){if(t=n.stateNode.containerInfo,i=t.nodeType,i===9)Fc(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Fc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,ut=t;break}ut=n.return}return ue=kp,kp=!1,ue}function Up(t,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Vn(t,i),l&4&&Xi(5,i);break;case 1:if(Vn(t,i),l&4)if(t=i.stateNode,n===null)try{t.componentDidMount()}catch(_){$e(i,i.return,_)}else{var f=er(i.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(f,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){$e(i,i.return,_)}}l&64&&Cp(i),l&512&&ar(i,i.return);break;case 3:if(Vn(t,i),l&64&&(l=i.updateQueue,l!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Rp(l,t)}catch(_){$e(i,i.return,_)}}break;case 26:Vn(t,i),l&512&&ar(i,i.return);break;case 27:case 5:Vn(t,i),n===null&&l&4&&Np(i),l&512&&ar(i,i.return);break;case 12:Vn(t,i);break;case 13:Vn(t,i),l&4&&$p(t,i);break;case 22:if(f=i.memoizedState!==null||Gn,!f){n=n!==null&&n.memoizedState!==null||Ve;var h=Gn,y=Ve;Gn=f,(Ve=n)&&!y?ya(t,i,(i.subtreeFlags&8772)!==0):Vn(t,i),Gn=h,Ve=y}l&512&&(i.memoizedProps.mode==="manual"?ar(i,i.return):zt(i,i.return));break;default:Vn(t,i)}}function Lp(t){var n=t.alternate;n!==null&&(t.alternate=null,Lp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&no(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Je=null,Ht=!1;function Zn(t,n,i){for(i=i.child;i!==null;)Ip(t,n,i),i=i.sibling}function Ip(t,n,i){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(_i,i)}catch{}switch(i.tag){case 26:Ve||zt(i,n),Zn(t,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ve||zt(i,n);var l=Je,f=Ht;for(Je=i.stateNode,Zn(t,n,i),i=i.stateNode,n=i.attributes;n.length;)i.removeAttributeNode(n[0]);no(i),Je=l,Ht=f;break;case 5:Ve||zt(i,n);case 6:f=Je;var h=Ht;if(Je=null,Zn(t,n,i),Je=f,Ht=h,Je!==null)if(Ht)try{t=Je,l=i.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)}catch(y){$e(i,n,y)}else try{Je.removeChild(i.stateNode)}catch(y){$e(i,n,y)}break;case 18:Je!==null&&(Ht?(n=Je,i=i.stateNode,n.nodeType===8?Kc(n.parentNode,i):n.nodeType===1&&Kc(n,i),ps(n)):Kc(Je,i.stateNode));break;case 4:l=Je,f=Ht,Je=i.stateNode.containerInfo,Ht=!0,Zn(t,n,i),Je=l,Ht=f;break;case 0:case 11:case 14:case 15:Ve||ga(2,i,n),Ve||ga(4,i,n),Zn(t,n,i);break;case 1:Ve||(zt(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&xp(i,n,l)),Zn(t,n,i);break;case 21:Zn(t,n,i);break;case 22:Ve||zt(i,n),Ve=(l=Ve)||i.memoizedState!==null,Zn(t,n,i),Ve=l;break;default:Zn(t,n,i)}}function $p(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ps(t)}catch(i){$e(n,n.return,i)}}function V_(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Dp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Dp),n;default:throw Error(r(435,t.tag))}}function bc(t,n){var i=V_(t);n.forEach(function(l){var f=i0.bind(null,t,l);i.has(l)||(i.add(l),l.then(f,f))})}function an(t,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l],h=t,y=n,_=y;e:for(;_!==null;){switch(_.tag){case 27:case 5:Je=_.stateNode,Ht=!1;break e;case 3:Je=_.stateNode.containerInfo,Ht=!0;break e;case 4:Je=_.stateNode.containerInfo,Ht=!0;break e}_=_.return}if(Je===null)throw Error(r(160));Ip(h,y,f),Je=null,Ht=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Bp(n,t),n=n.sibling}var dn=null;function Bp(t,n){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:an(n,t),rn(t),l&4&&(ga(3,t,t.return),Xi(3,t),ga(5,t,t.return));break;case 1:an(n,t),rn(t),l&512&&(Ve||i===null||zt(i,i.return)),l&64&&Gn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var f=dn;if(an(n,t),rn(t),l&512&&(Ve||i===null||zt(i,i.return)),l&4){var h=i!==null?i.memoizedState:null;if(l=t.memoizedState,i===null)if(l===null)if(t.stateNode===null){e:{l=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":h=f.getElementsByTagName("title")[0],(!h||h[Ei]||h[bt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(l),f.head.insertBefore(h,f.querySelector("head > title"))),mt(h,l,i),h[bt]=t,it(h),l=h;break e;case"link":var y=Ng("link","href",f).get(l+(i.href||""));if(y){for(var _=0;_<y.length;_++)if(h=y[_],h.getAttribute("href")===(i.href==null?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(_,1);break t}}h=f.createElement(l),mt(h,l,i),f.head.appendChild(h);break;case"meta":if(y=Ng("meta","content",f).get(l+(i.content||""))){for(_=0;_<y.length;_++)if(h=y[_],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(_,1);break t}}h=f.createElement(l),mt(h,l,i),f.head.appendChild(h);break;default:throw Error(r(468,l))}h[bt]=t,it(h),l=h}t.stateNode=l}else jg(f,t.type,t.stateNode);else t.stateNode=xg(f,l,t.memoizedProps);else h!==l?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,l===null?jg(f,t.type,t.stateNode):xg(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&jp(t,t.memoizedProps,i.memoizedProps)}break;case 27:if(l&4&&t.alternate===null){f=t.stateNode,h=t.memoizedProps;try{for(var E=f.firstChild;E;){var R=E.nextSibling,I=E.nodeName;E[Ei]||I==="HEAD"||I==="BODY"||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&E.rel.toLowerCase()==="stylesheet"||f.removeChild(E),E=R}for(var z=t.type,j=f.attributes;j.length;)f.removeAttributeNode(j[0]);mt(f,z,h),f[bt]=t,f[Mt]=h}catch(ue){$e(t,t.return,ue)}}case 5:if(an(n,t),rn(t),l&512&&(Ve||i===null||zt(i,i.return)),t.flags&32){f=t.stateNode;try{Rr(f,"")}catch(ue){$e(t,t.return,ue)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,jp(t,f,i!==null?i.memoizedProps:f)),l&1024&&(yc=!0);break;case 6:if(an(n,t),rn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,i=t.stateNode;try{i.nodeValue=l}catch(ue){$e(t,t.return,ue)}}break;case 3:if(nl=null,f=dn,dn=el(n.containerInfo),an(n,t),dn=f,rn(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{ps(n.containerInfo)}catch(ue){$e(t,t.return,ue)}yc&&(yc=!1,Pp(t));break;case 4:l=dn,dn=el(t.stateNode.containerInfo),an(n,t),rn(t),dn=l;break;case 12:an(n,t),rn(t);break;case 13:an(n,t),rn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Rc=Tn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bc(t,l)));break;case 22:if(l&512&&(Ve||i===null||zt(i,i.return)),E=t.memoizedState!==null,R=i!==null&&i.memoizedState!==null,I=Gn,z=Ve,Gn=I||E,Ve=z||R,an(n,t),Ve=z,Gn=I,rn(t),n=t.stateNode,n._current=t,n._visibility&=-3,n._visibility|=n._pendingVisibility&2,l&8192&&(n._visibility=E?n._visibility&-2:n._visibility|1,E&&(n=Gn||Ve,i===null||R||n||Gr(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(i=null,n=t;;){if(n.tag===5||n.tag===26||n.tag===27){if(i===null){R=i=n;try{if(f=R.stateNode,E)h=f.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{y=R.stateNode,_=R.memoizedProps.style;var L=_!=null&&_.hasOwnProperty("display")?_.display:null;y.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ue){$e(R,R.return,ue)}}}else if(n.tag===6){if(i===null){R=n;try{R.stateNode.nodeValue=E?"":R.memoizedProps}catch(ue){$e(R,R.return,ue)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,bc(t,i))));break;case 19:an(n,t),rn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bc(t,l)));break;case 21:break;default:an(n,t),rn(t)}}function rn(t){var n=t.flags;if(n&2){try{if(t.tag!==27){e:{for(var i=t.return;i!==null;){if(Mp(i)){var l=i;break e}i=i.return}throw Error(r(160))}switch(l.tag){case 27:var f=l.stateNode,h=pc(t);Bu(t,h,f);break;case 5:var y=l.stateNode;l.flags&32&&(Rr(y,""),l.flags&=-33);var _=pc(t);Bu(t,_,y);break;case 3:case 4:var E=l.stateNode.containerInfo,R=pc(t);gc(t,R,E);break;default:throw Error(r(161))}}}catch(I){$e(t,t.return,I)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Pp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Pp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Vn(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Up(t,n.alternate,n),n=n.sibling}function Gr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ga(4,n,n.return),Gr(n);break;case 1:zt(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&xp(n,n.return,i),Gr(n);break;case 26:case 27:case 5:zt(n,n.return),Gr(n);break;case 22:zt(n,n.return),n.memoizedState===null&&Gr(n);break;default:Gr(n)}t=t.sibling}}function ya(t,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,f=t,h=n,y=h.flags;switch(h.tag){case 0:case 11:case 15:ya(f,h,i),Xi(4,h);break;case 1:if(ya(f,h,i),l=h,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(R){$e(l,l.return,R)}if(l=h,f=l.updateQueue,f!==null){var _=l.stateNode;try{var E=f.shared.hiddenCallbacks;if(E!==null)for(f.shared.hiddenCallbacks=null,f=0;f<E.length;f++)Op(E[f],_)}catch(R){$e(l,l.return,R)}}i&&y&64&&Cp(h),ar(h,h.return);break;case 26:case 27:case 5:ya(f,h,i),i&&l===null&&y&4&&Np(h),ar(h,h.return);break;case 12:ya(f,h,i);break;case 13:ya(f,h,i),i&&y&4&&$p(f,h);break;case 22:h.memoizedState===null&&ya(f,h,i),ar(h,h.return);break;default:ya(f,h,i)}n=n.sibling}}function vc(t,n){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&zi(i))}function _c(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&zi(t))}function ba(t,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)zp(t,n,i,l),n=n.sibling}function zp(t,n,i,l){var f=n.flags;switch(n.tag){case 0:case 11:case 15:ba(t,n,i,l),f&2048&&Xi(9,n);break;case 3:ba(t,n,i,l),f&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&zi(t)));break;case 12:if(f&2048){ba(t,n,i,l),t=n.stateNode;try{var h=n.memoizedProps,y=h.id,_=h.onPostCommit;typeof _=="function"&&_(y,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(E){$e(n,n.return,E)}}else ba(t,n,i,l);break;case 23:break;case 22:h=n.stateNode,n.memoizedState!==null?h._visibility&4?ba(t,n,i,l):Ji(t,n):h._visibility&4?ba(t,n,i,l):(h._visibility|=4,Zr(t,n,i,l,(n.subtreeFlags&10256)!==0)),f&2048&&vc(n.alternate,n);break;case 24:ba(t,n,i,l),f&2048&&_c(n.alternate,n);break;default:ba(t,n,i,l)}}function Zr(t,n,i,l,f){for(f=f&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var h=t,y=n,_=i,E=l,R=y.flags;switch(y.tag){case 0:case 11:case 15:Zr(h,y,_,E,f),Xi(8,y);break;case 23:break;case 22:var I=y.stateNode;y.memoizedState!==null?I._visibility&4?Zr(h,y,_,E,f):Ji(h,y):(I._visibility|=4,Zr(h,y,_,E,f)),f&&R&2048&&vc(y.alternate,y);break;case 24:Zr(h,y,_,E,f),f&&R&2048&&_c(y.alternate,y);break;default:Zr(h,y,_,E,f)}n=n.sibling}}function Ji(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=t,l=n,f=l.flags;switch(l.tag){case 22:Ji(i,l),f&2048&&vc(l.alternate,l);break;case 24:Ji(i,l),f&2048&&_c(l.alternate,l);break;default:Ji(i,l)}n=n.sibling}}var Wi=8192;function Vr(t){if(t.subtreeFlags&Wi)for(t=t.child;t!==null;)Hp(t),t=t.sibling}function Hp(t){switch(t.tag){case 26:Vr(t),t.flags&Wi&&t.memoizedState!==null&&k0(dn,t.memoizedState,t.memoizedProps);break;case 5:Vr(t);break;case 3:case 4:var n=dn;dn=el(t.stateNode.containerInfo),Vr(t),dn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Wi,Wi=16777216,Vr(t),Wi=n):Vr(t));break;default:Vr(t)}}function qp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function es(t){var n=t.deletions;if(t.flags&16){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];ut=l,Zp(l,t)}qp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gp(t),t=t.sibling}function Gp(t){switch(t.tag){case 0:case 11:case 15:es(t),t.flags&2048&&ga(9,t,t.return);break;case 3:es(t);break;case 12:es(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&4&&(t.return===null||t.return.tag!==13)?(n._visibility&=-5,Pu(t)):es(t);break;default:es(t)}}function Pu(t){var n=t.deletions;if(t.flags&16){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];ut=l,Zp(l,t)}qp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ga(8,n,n.return),Pu(n);break;case 22:i=n.stateNode,i._visibility&4&&(i._visibility&=-5,Pu(n));break;default:Pu(n)}t=t.sibling}}function Zp(t,n){for(;ut!==null;){var i=ut;switch(i.tag){case 0:case 11:case 15:ga(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:zi(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,ut=l;else e:for(i=t;ut!==null;){l=ut;var f=l.sibling,h=l.return;if(Lp(l),l===i){ut=null;break e}if(f!==null){f.return=h,ut=f;break e}ut=h}}}function Q_(t,n,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,n,i,l){return new Q_(t,n,i,l)}function wc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function va(t,n){var i=t.alternate;return i===null?(i=sn(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&31457280,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function Vp(t,n){t.flags&=31457282;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,n=i.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function zu(t,n,i,l,f,h){var y=0;if(l=t,typeof t=="function")wc(t)&&(y=1);else if(typeof t=="string")y=M0(t,i,Kt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case m:return rr(i.children,f,h,n);case p:y=8,f|=24;break;case g:return t=sn(12,i,n,f|2),t.elementType=g,t.lanes=h,t;case T:return t=sn(13,i,n,f),t.elementType=T,t.lanes=h,t;case C:return t=sn(19,i,n,f),t.elementType=C,t.lanes=h,t;case D:return Qp(i,f,h,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b:case w:y=10;break e;case v:y=9;break e;case A:y=11;break e;case M:y=14;break e;case B:y=16,l=null;break e}y=29,i=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=sn(y,i,n,f),n.elementType=t,n.type=l,n.lanes=h,n}function rr(t,n,i,l){return t=sn(7,t,l,n),t.lanes=i,t}function Qp(t,n,i,l){t=sn(22,t,l,n),t.elementType=D,t.lanes=i;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var h=f._current;if(h===null)throw Error(r(456));if(!(f._pendingVisibility&2)){var y=ua(h,2);y!==null&&(f._pendingVisibility|=2,St(y,h,2))}},attach:function(){var h=f._current;if(h===null)throw Error(r(456));if(f._pendingVisibility&2){var y=ua(h,2);y!==null&&(f._pendingVisibility&=-3,St(y,h,2))}}};return t.stateNode=f,t}function Ac(t,n,i){return t=sn(6,t,null,n),t.lanes=i,t}function Ec(t,n,i){return n=sn(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Qn(t){t.flags|=4}function Yp(t,n){if(n.type!=="stylesheet"||n.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Mg(n)){if(n=nn.current,n!==null&&((Re&4194176)===Re?Rn!==null:(Re&62914560)!==Re&&!(Re&536870912)||n!==Rn))throw $i=Co,fm;t.flags|=8192}}function Hu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?dh():536870912,t.lanes|=n,Yr|=n)}function ts(t,n){if(!Ne)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function He(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(n)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&31457280,l|=f.flags&31457280,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=i,n}function Y_(t,n,i){var l=n.pendingProps;switch(Oo(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(n),null;case 1:return He(n),null;case 3:return i=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),qn(nt),wr(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ki(n)?Qn(n):t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,fn!==null&&(jc(fn),fn=null))),He(n),null;case 26:return i=n.memoizedState,t===null?(Qn(n),i!==null?(He(n),Yp(n,i)):(He(n),n.flags&=-16777217)):i?i!==t.memoizedState?(Qn(n),He(n),Yp(n,i)):(He(n),n.flags&=-16777217):(t.memoizedProps!==l&&Qn(n),He(n),n.flags&=-16777217),null;case 27:eu(n),i=aa.current;var f=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Qn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return He(n),null}t=Kt.current,ki(n)?om(n):(t=Sg(f,l,i),n.stateNode=t,Qn(n))}return He(n),null;case 5:if(eu(n),i=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Qn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return He(n),null}if(t=Kt.current,ki(n))om(n);else{switch(f=Wu(aa.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(i,{is:l.is}):f.createElement(i)}}t[bt]=n,t[Mt]=l;e:for(f=n.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}n.stateNode=t;e:switch(mt(t,i,l),i){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Qn(n)}}return He(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Qn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=aa.current,ki(n)){if(t=n.stateNode,i=n.memoizedProps,l=null,f=Et,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[bt]=n,t=!!(t.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||bg(t.nodeValue,i)),t||Ya(n)}else t=Wu(t).createTextNode(l),t[bt]=n,n.stateNode=t}return He(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=ki(n),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[bt]=n}else Ui(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;He(n),f=!1}else fn!==null&&(jc(fn),fn=null),f=!0;if(!f)return n.flags&256?(Bn(n),n):(Bn(n),null)}if(Bn(n),n.flags&128)return n.lanes=i,n;if(i=l!==null,t=t!==null&&t.memoizedState!==null,i){l=n.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==f&&(l.flags|=2048)}return i!==t&&i&&(n.child.flags|=8192),Hu(n,n.updateQueue),He(n),null;case 4:return wr(),t===null&&Hc(n.stateNode.containerInfo),He(n),null;case 10:return qn(n.type),He(n),null;case 19:if(ze(tt),f=n.memoizedState,f===null)return He(n),null;if(l=(n.flags&128)!==0,h=f.rendering,h===null)if(l)ts(f,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(h=Tu(t),h!==null){for(n.flags|=128,ts(f,!1),t=h.updateQueue,n.updateQueue=t,Hu(n,t),n.subtreeFlags=0,t=i,i=n.child;i!==null;)Vp(i,t),i=i.sibling;return ke(tt,tt.current&1|2),n.child}t=t.sibling}f.tail!==null&&Tn()>qu&&(n.flags|=128,l=!0,ts(f,!1),n.lanes=4194304)}else{if(!l)if(t=Tu(h),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,Hu(n,t),ts(f,!0),f.tail===null&&f.tailMode==="hidden"&&!h.alternate&&!Ne)return He(n),null}else 2*Tn()-f.renderingStartTime>qu&&i!==536870912&&(n.flags|=128,l=!0,ts(f,!1),n.lanes=4194304);f.isBackwards?(h.sibling=n.child,n.child=h):(t=f.last,t!==null?t.sibling=h:n.child=h,f.last=h)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=Tn(),n.sibling=null,t=tt.current,ke(tt,l?t&1|2:t&1),n):(He(n),null);case 22:case 23:return Bn(n),No(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?i&536870912&&!(n.flags&128)&&(He(n),n.subtreeFlags&6&&(n.flags|=8192)):He(n),i=n.updateQueue,i!==null&&Hu(n,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),t!==null&&ze(Fa),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),qn(nt),He(n),null;case 25:return null}throw Error(r(156,n.tag))}function K_(t,n){switch(Oo(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return qn(nt),wr(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return eu(n),null;case 13:if(Bn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Ui()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ze(tt),null;case 4:return wr(),null;case 10:return qn(n.type),null;case 22:case 23:return Bn(n),No(),t!==null&&ze(Fa),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return qn(nt),null;case 25:return null;default:return null}}function Kp(t,n){switch(Oo(n),n.tag){case 3:qn(nt),wr();break;case 26:case 27:case 5:eu(n);break;case 4:wr();break;case 13:Bn(n);break;case 19:ze(tt);break;case 10:qn(n.type);break;case 22:case 23:Bn(n),No(),t!==null&&ze(Fa);break;case 24:qn(nt)}}var F_={getCacheForType:function(t){var n=vt(nt),i=n.data.get(t);return i===void 0&&(i=t(),n.data.set(t,i)),i}},X_=typeof WeakMap=="function"?WeakMap:Map,qe=0,Be=null,Te=null,Re=0,Pe=0,qt=null,Yn=!1,Qr=!1,Sc=!1,Kn=0,Qe=0,_a=0,ir=0,Tc=0,un=0,Yr=0,ns=null,xn=null,Oc=!1,Rc=0,qu=1/0,Gu=null,wa=null,Zu=!1,sr=null,as=0,Cc=0,xc=null,rs=0,Nc=null;function Gt(){if(qe&2&&Re!==0)return Re&-Re;if(ie.T!==null){var t=Br;return t!==0?t:$c()}return gh()}function Fp(){un===0&&(un=!(Re&536870912)||Ne?fh():536870912);var t=nn.current;return t!==null&&(t.flags|=32),un}function St(t,n,i){(t===Be&&Pe===2||t.cancelPendingCommit!==null)&&(Kr(t,0),Fn(t,Re,un,!1)),Ai(t,i),(!(qe&2)||t!==Be)&&(t===Be&&(!(qe&2)&&(ir|=i),Qe===4&&Fn(t,Re,un,!1)),Nn(t))}function Xp(t,n,i){if(qe&6)throw Error(r(327));var l=!i&&(n&60)===0&&(n&t.expiredLanes)===0||wi(t,n),f=l?e0(t,n):kc(t,n,!0),h=l;do{if(f===0){Qr&&!l&&Fn(t,n,0,!1);break}else if(f===6)Fn(t,n,0,!Yn);else{if(i=t.current.alternate,h&&!J_(i)){f=kc(t,n,!1),h=!1;continue}if(f===2){if(h=n,t.errorRecoveryDisabledLanes&h)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var _=t;f=ns;var E=_.current.memoizedState.isDehydrated;if(E&&(Kr(_,y).flags|=256),y=kc(_,y,!1),y!==2){if(Sc&&!E){_.errorRecoveryDisabledLanes|=h,ir|=h,f=4;break e}h=xn,xn=f,h!==null&&jc(h)}f=y}if(h=!1,f!==2)continue}}if(f===1){Kr(t,0),Fn(t,n,0,!0);break}e:{switch(l=t,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194176)===n){Fn(l,n,un,!Yn);break e}break;case 2:xn=null;break;case 3:case 5:break;default:throw Error(r(329))}if(l.finishedWork=i,l.finishedLanes=n,(n&62914560)===n&&(h=Rc+300-Tn(),10<h)){if(Fn(l,n,un,!Yn),ru(l,0)!==0)break e;l.timeoutHandle=wg(Jp.bind(null,l,i,xn,Gu,Oc,n,un,ir,Yr,Yn,2,-0,0),h);break e}Jp(l,i,xn,Gu,Oc,n,un,ir,Yr,Yn,0,-0,0)}}break}while(!0);Nn(t)}function jc(t){xn===null?xn=t:xn.push.apply(xn,t)}function Jp(t,n,i,l,f,h,y,_,E,R,I,z,j){var L=n.subtreeFlags;if((L&8192||(L&16785408)===16785408)&&(cs={stylesheets:null,count:0,unsuspend:D0},Hp(n),n=U0(),n!==null)){t.cancelPendingCommit=n(ig.bind(null,t,i,l,f,y,_,E,1,z,j)),Fn(t,h,y,!R);return}ig(t,i,l,f,y,_,E,I,z,j)}function J_(t){for(var n=t;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var f=i[l],h=f.getSnapshot;f=f.value;try{if(!Pt(h(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Fn(t,n,i,l){n&=~Tc,n&=~ir,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var f=n;0<f;){var h=31-Bt(f),y=1<<h;l[h]=-1,f&=~y}i!==0&&hh(t,i,n)}function Vu(){return qe&6?!0:(is(0),!1)}function Mc(){if(Te!==null){if(Pe===0)var t=Te.return;else t=Te,Hn=tr=null,$o(t),Ir=null,Bi=0,t=Te;for(;t!==null;)Kp(t.alternate,t),t=t.return;Te=null}}function Kr(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,y0(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Mc(),Be=t,Te=i=va(t.current,null),Re=n,Pe=0,qt=null,Yn=!1,Qr=wi(t,n),Sc=!1,Yr=un=Tc=ir=_a=Qe=0,xn=ns=null,Oc=!1,n&8&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var f=31-Bt(l),h=1<<f;n|=t[f],l&=~h}return Kn=n,gu(),i}function Wp(t,n){Ee=null,ie.H=Cn,n===Ii?(n=mm(),Pe=3):n===fm?(n=mm(),Pe=4):Pe=n===dp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,qt=n,Te===null&&(Qe=1,Lu(t,Wt(n,t.current)))}function eg(){var t=ie.H;return ie.H=Cn,t===null?Cn:t}function tg(){var t=ie.A;return ie.A=F_,t}function Dc(){Qe=4,Yn||(Re&4194176)!==Re&&nn.current!==null||(Qr=!0),!(_a&134217727)&&!(ir&134217727)||Be===null||Fn(Be,Re,un,!1)}function kc(t,n,i){var l=qe;qe|=2;var f=eg(),h=tg();(Be!==t||Re!==n)&&(Gu=null,Kr(t,n)),n=!1;var y=Qe;e:do try{if(Pe!==0&&Te!==null){var _=Te,E=qt;switch(Pe){case 8:Mc(),y=6;break e;case 3:case 2:case 6:nn.current===null&&(n=!0);var R=Pe;if(Pe=0,qt=null,Fr(t,_,E,R),i&&Qr){y=0;break e}break;default:R=Pe,Pe=0,qt=null,Fr(t,_,E,R)}}W_(),y=Qe;break}catch(I){Wp(t,I)}while(!0);return n&&t.shellSuspendCounter++,Hn=tr=null,qe=l,ie.H=f,ie.A=h,Te===null&&(Be=null,Re=0,gu()),y}function W_(){for(;Te!==null;)ng(Te)}function e0(t,n){var i=qe;qe|=2;var l=eg(),f=tg();Be!==t||Re!==n?(Gu=null,qu=Tn()+500,Kr(t,n)):Qr=wi(t,n);e:do try{if(Pe!==0&&Te!==null){n=Te;var h=qt;t:switch(Pe){case 1:Pe=0,qt=null,Fr(t,n,h,1);break;case 2:if(dm(h)){Pe=0,qt=null,ag(n);break}n=function(){Pe===2&&Be===t&&(Pe=7),Nn(t)},h.then(n,n);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:dm(h)?(Pe=0,qt=null,ag(n)):(Pe=0,qt=null,Fr(t,n,h,7));break;case 5:var y=null;switch(Te.tag){case 26:y=Te.memoizedState;case 5:case 27:var _=Te;if(!y||Mg(y)){Pe=0,qt=null;var E=_.sibling;if(E!==null)Te=E;else{var R=_.return;R!==null?(Te=R,Qu(R)):Te=null}break t}}Pe=0,qt=null,Fr(t,n,h,5);break;case 6:Pe=0,qt=null,Fr(t,n,h,6);break;case 8:Mc(),Qe=6;break e;default:throw Error(r(462))}}t0();break}catch(I){Wp(t,I)}while(!0);return Hn=tr=null,ie.H=l,ie.A=f,qe=i,Te!==null?0:(Be=null,Re=0,gu(),Qe)}function t0(){for(;Te!==null&&!Ev();)ng(Te)}function ng(t){var n=Sp(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,n===null?Qu(t):Te=n}function ag(t){var n=t,i=n.alternate;switch(n.tag){case 15:case 0:n=bp(i,n,n.pendingProps,n.type,void 0,Re);break;case 11:n=bp(i,n,n.pendingProps,n.type.render,n.ref,Re);break;case 5:$o(n);default:Kp(i,n),n=Te=Vp(n,Kn),n=Sp(i,n,Kn)}t.memoizedProps=t.pendingProps,n===null?Qu(t):Te=n}function Fr(t,n,i,l){Hn=tr=null,$o(n),Ir=null,Bi=0;var f=n.return;try{if(q_(t,f,n,i,Re)){Qe=1,Lu(t,Wt(i,t.current)),Te=null;return}}catch(h){if(f!==null)throw Te=f,h;Qe=1,Lu(t,Wt(i,t.current)),Te=null;return}n.flags&32768?(Ne||l===1?t=!0:Qr||Re&536870912?t=!1:(Yn=t=!0,(l===2||l===3||l===6)&&(l=nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),rg(n,t)):Qu(n)}function Qu(t){var n=t;do{if(n.flags&32768){rg(n,Yn);return}t=n.return;var i=Y_(n.alternate,n,Kn);if(i!==null){Te=i;return}if(n=n.sibling,n!==null){Te=n;return}Te=n=t}while(n!==null);Qe===0&&(Qe=5)}function rg(t,n){do{var i=K_(t.alternate,t);if(i!==null){i.flags&=32767,Te=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(t=t.sibling,t!==null)){Te=t;return}Te=t=i}while(t!==null);Qe=6,Te=null}function ig(t,n,i,l,f,h,y,_,E,R){var I=ie.T,z=F.p;try{F.p=2,ie.T=null,n0(t,n,i,l,z,f,h,y,_,E,R)}finally{ie.T=I,F.p=z}}function n0(t,n,i,l,f,h,y,_){do Xr();while(sr!==null);if(qe&6)throw Error(r(327));var E=t.finishedWork;if(l=t.finishedLanes,E===null)return null;if(t.finishedWork=null,t.finishedLanes=0,E===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var R=E.lanes|E.childLanes;if(R|=Eo,kv(t,l,R,h,y,_),t===Be&&(Te=Be=null,Re=0),!(E.subtreeFlags&10256)&&!(E.flags&10256)||Zu||(Zu=!0,Cc=R,xc=i,s0(tu,function(){return Xr(),null})),i=(E.flags&15990)!==0,E.subtreeFlags&15990||i?(i=ie.T,ie.T=null,h=F.p,F.p=2,y=qe,qe|=4,Z_(t,E),Bp(E,t),O_(Vc,t.containerInfo),il=!!Zc,Vc=Zc=null,t.current=E,Up(t,E.alternate,E),Sv(),qe=y,F.p=h,ie.T=i):t.current=E,Zu?(Zu=!1,sr=t,as=l):sg(t,R),R=t.pendingLanes,R===0&&(wa=null),xv(E.stateNode),Nn(t),n!==null)for(f=t.onRecoverableError,E=0;E<n.length;E++)R=n[E],f(R.value,{componentStack:R.stack});return as&3&&Xr(),R=t.pendingLanes,l&4194218&&R&42?t===Nc?rs++:(rs=0,Nc=t):rs=0,is(0),null}function sg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,zi(n)))}function Xr(){if(sr!==null){var t=sr,n=Cc;Cc=0;var i=ph(as),l=ie.T,f=F.p;try{if(F.p=32>i?32:i,ie.T=null,sr===null)var h=!1;else{i=xc,xc=null;var y=sr,_=as;if(sr=null,as=0,qe&6)throw Error(r(331));var E=qe;if(qe|=4,Gp(y.current),zp(y,y.current,_,i),qe=E,is(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(_i,y)}catch{}h=!0}return h}finally{F.p=f,ie.T=l,sg(t,n)}}return!1}function ug(t,n,i){n=Wt(i,n),n=Jo(t.stateNode,n,2),t=pa(t,n,2),t!==null&&(Ai(t,2),Nn(t))}function $e(t,n,i){if(t.tag===3)ug(t,t,i);else for(;n!==null;){if(n.tag===3){ug(n,t,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(wa===null||!wa.has(l))){t=Wt(i,t),i=cp(2),l=pa(n,i,2),l!==null&&(fp(i,l,n,t),Ai(l,2),Nn(l));break}}n=n.return}}function Uc(t,n,i){var l=t.pingCache;if(l===null){l=t.pingCache=new X_;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(i)||(Sc=!0,f.add(i),t=a0.bind(null,t,n,i),n.then(t,t))}function a0(t,n,i){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,Be===t&&(Re&i)===i&&(Qe===4||Qe===3&&(Re&62914560)===Re&&300>Tn()-Rc?!(qe&2)&&Kr(t,0):Tc|=i,Yr===Re&&(Yr=0)),Nn(t)}function lg(t,n){n===0&&(n=dh()),t=ua(t,n),t!==null&&(Ai(t,n),Nn(t))}function r0(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),lg(t,i)}function i0(t,n){var i=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),lg(t,i)}function s0(t,n){return Jl(t,n)}var Yu=null,Jr=null,Lc=!1,Ku=!1,Ic=!1,ur=0;function Nn(t){t!==Jr&&t.next===null&&(Jr===null?Yu=Jr=t:Jr=Jr.next=t),Ku=!0,Lc||(Lc=!0,l0(u0))}function is(t,n){if(!Ic&&Ku){Ic=!0;do for(var i=!1,l=Yu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var h=0;else{var y=l.suspendedLanes,_=l.pingedLanes;h=(1<<31-Bt(42|t)+1)-1,h&=f&~(y&~_),h=h&201326677?h&201326677|1:h?h|2:0}h!==0&&(i=!0,fg(l,h))}else h=Re,h=ru(l,l===Be?h:0),!(h&3)||wi(l,h)||(i=!0,fg(l,h));l=l.next}while(i);Ic=!1}}function u0(){Ku=Lc=!1;var t=0;ur!==0&&(g0()&&(t=ur),ur=0);for(var n=Tn(),i=null,l=Yu;l!==null;){var f=l.next,h=og(l,n);h===0?(l.next=null,i===null?Yu=f:i.next=f,f===null&&(Jr=i)):(i=l,(t!==0||h&3)&&(Ku=!0)),l=f}is(t)}function og(t,n){for(var i=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var y=31-Bt(h),_=1<<y,E=f[y];E===-1?(!(_&i)||_&l)&&(f[y]=Dv(_,n)):E<=n&&(t.expiredLanes|=_),h&=~_}if(n=Be,i=Re,i=ru(t,t===n?i:0),l=t.callbackNode,i===0||t===n&&Pe===2||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Wl(l),t.callbackNode=null,t.callbackPriority=0;if(!(i&3)||wi(t,i)){if(n=i&-i,n===t.callbackPriority)return n;switch(l!==null&&Wl(l),ph(i)){case 2:case 8:i=oh;break;case 32:i=tu;break;case 268435456:i=ch;break;default:i=tu}return l=cg.bind(null,t),i=Jl(i,l),t.callbackPriority=n,t.callbackNode=i,n}return l!==null&&l!==null&&Wl(l),t.callbackPriority=2,t.callbackNode=null,2}function cg(t,n){var i=t.callbackNode;if(Xr()&&t.callbackNode!==i)return null;var l=Re;return l=ru(t,t===Be?l:0),l===0?null:(Xp(t,l,n),og(t,Tn()),t.callbackNode!=null&&t.callbackNode===i?cg.bind(null,t):null)}function fg(t,n){if(Xr())return null;Xp(t,n,!0)}function l0(t){b0(function(){qe&6?Jl(lh,t):t()})}function $c(){return ur===0&&(ur=fh()),ur}function dg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ou(""+t)}function hg(t,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,t.id&&i.setAttribute("form",t.id),n.parentNode.insertBefore(i,n),t=new FormData(t),i.parentNode.removeChild(i),t}function o0(t,n,i,l,f){if(n==="submit"&&i&&i.stateNode===f){var h=dg((f[Mt]||null).action),y=l.submitter;y&&(n=(n=y[Mt]||null)?dg(n.formAction):y.getAttribute("formAction"),n!==null&&(h=n,y=null));var _=new hu("action","action",null,l,f);t.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ur!==0){var E=y?hg(f,y):new FormData(f);Qo(i,{pending:!0,data:E,method:f.method,action:h},null,E)}}else typeof h=="function"&&(_.preventDefault(),E=y?hg(f,y):new FormData(f),Qo(i,{pending:!0,data:E,method:f.method,action:h},h,E))},currentTarget:f}]})}}for(var Bc=0;Bc<im.length;Bc++){var Pc=im[Bc],c0=Pc.toLowerCase(),f0=Pc[0].toUpperCase()+Pc.slice(1);cn(c0,"on"+f0)}cn(em,"onAnimationEnd"),cn(tm,"onAnimationIteration"),cn(nm,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(C_,"onTransitionRun"),cn(x_,"onTransitionStart"),cn(N_,"onTransitionCancel"),cn(am,"onTransitionEnd"),Tr("onMouseEnter",["mouseout","mouseover"]),Tr("onMouseLeave",["mouseout","mouseover"]),Tr("onPointerEnter",["pointerout","pointerover"]),Tr("onPointerLeave",["pointerout","pointerover"]),Ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ha("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ss));function mg(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],f=l.event;l=l.listeners;e:{var h=void 0;if(n)for(var y=l.length-1;0<=y;y--){var _=l[y],E=_.instance,R=_.currentTarget;if(_=_.listener,E!==h&&f.isPropagationStopped())break e;h=_,f.currentTarget=R;try{h(f)}catch(I){Uu(I)}f.currentTarget=null,h=E}else for(y=0;y<l.length;y++){if(_=l[y],E=_.instance,R=_.currentTarget,_=_.listener,E!==h&&f.isPropagationStopped())break e;h=_,f.currentTarget=R;try{h(f)}catch(I){Uu(I)}f.currentTarget=null,h=E}}}}function Oe(t,n){var i=n[to];i===void 0&&(i=n[to]=new Set);var l=t+"__bubble";i.has(l)||(pg(n,t,2,!1),i.add(l))}function zc(t,n,i){var l=0;n&&(l|=4),pg(i,t,l,n)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Hc(t){if(!t[Fu]){t[Fu]=!0,bh.forEach(function(i){i!=="selectionchange"&&(d0.has(i)||zc(i,!1,t),zc(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Fu]||(n[Fu]=!0,zc("selectionchange",!1,n))}}function pg(t,n,i,l){switch($g(n)){case 2:var f=$0;break;case 8:f=B0;break;default:f=tf}i=f.bind(null,n,i,t),f=void 0,!oo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(n,i,{capture:!0,passive:f}):t.addEventListener(n,i,!0):f!==void 0?t.addEventListener(n,i,{passive:f}):t.addEventListener(n,i,!1)}function qc(t,n,i,l,f){var h=l;if(!(n&1)&&!(n&2)&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var _=l.stateNode.containerInfo;if(_===f||_.nodeType===8&&_.parentNode===f)break;if(y===4)for(y=l.return;y!==null;){var E=y.tag;if((E===3||E===4)&&(E=y.stateNode.containerInfo,E===f||E.nodeType===8&&E.parentNode===f))return;y=y.return}for(;_!==null;){if(y=za(_),y===null)return;if(E=y.tag,E===5||E===6||E===26||E===27){l=h=y;continue e}_=_.parentNode}}l=l.return}Nh(function(){var R=h,I=uo(i),z=[];e:{var j=rm.get(t);if(j!==void 0){var L=hu,ue=t;switch(t){case"keypress":if(fu(i)===0)break e;case"keydown":case"keyup":L=i_;break;case"focusin":ue="focus",L=mo;break;case"focusout":ue="blur",L=mo;break;case"beforeblur":case"afterblur":L=mo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Qv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=l_;break;case em:case tm:case nm:L=Fv;break;case am:L=c_;break;case"scroll":case"scrollend":L=Zv;break;case"wheel":L=d_;break;case"copy":case"cut":case"paste":L=Jv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Uh;break;case"toggle":case"beforetoggle":L=m_}var pe=(n&4)!==0,Ye=!pe&&(t==="scroll"||t==="scrollend"),x=pe?j!==null?j+"Capture":null:j;pe=[];for(var O=R,N;O!==null;){var $=O;if(N=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||N===null||x===null||($=Ti(O,x),$!=null&&pe.push(us(O,$,N))),Ye)break;O=O.return}0<pe.length&&(j=new L(j,ue,null,i,I),z.push({event:j,listeners:pe}))}}if(!(n&7)){e:{if(j=t==="mouseover"||t==="pointerover",L=t==="mouseout"||t==="pointerout",j&&i!==so&&(ue=i.relatedTarget||i.fromElement)&&(za(ue)||ue[Ar]))break e;if((L||j)&&(j=I.window===I?I:(j=I.ownerDocument)?j.defaultView||j.parentWindow:window,L?(ue=i.relatedTarget||i.toElement,L=R,ue=ue?za(ue):null,ue!==null&&(Ye=q(ue),pe=ue.tag,ue!==Ye||pe!==5&&pe!==27&&pe!==6)&&(ue=null)):(L=null,ue=R),L!==ue)){if(pe=Dh,$="onMouseLeave",x="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Uh,$="onPointerLeave",x="onPointerEnter",O="pointer"),Ye=L==null?j:Si(L),N=ue==null?j:Si(ue),j=new pe($,O+"leave",L,i,I),j.target=Ye,j.relatedTarget=N,$=null,za(I)===R&&(pe=new pe(x,O+"enter",ue,i,I),pe.target=N,pe.relatedTarget=Ye,$=pe),Ye=$,L&&ue)t:{for(pe=L,x=ue,O=0,N=pe;N;N=Wr(N))O++;for(N=0,$=x;$;$=Wr($))N++;for(;0<O-N;)pe=Wr(pe),O--;for(;0<N-O;)x=Wr(x),N--;for(;O--;){if(pe===x||x!==null&&pe===x.alternate)break t;pe=Wr(pe),x=Wr(x)}pe=null}else pe=null;L!==null&&gg(z,j,L,pe,!1),ue!==null&&Ye!==null&&gg(z,Ye,ue,pe,!0)}}e:{if(j=R?Si(R):window,L=j.nodeName&&j.nodeName.toLowerCase(),L==="select"||L==="input"&&j.type==="file")var re=qh;else if(zh(j))if(Gh)re=S_;else{re=A_;var Se=w_}else L=j.nodeName,!L||L.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?R&&io(R.elementType)&&(re=qh):re=E_;if(re&&(re=re(t,R))){Hh(z,re,i,I);break e}Se&&Se(t,j,R),t==="focusout"&&R&&j.type==="number"&&R.memoizedProps.value!=null&&ro(j,"number",j.value)}switch(Se=R?Si(R):window,t){case"focusin":(zh(Se)||Se.contentEditable==="true")&&(jr=Se,_o=R,Di=null);break;case"focusout":Di=_o=jr=null;break;case"mousedown":wo=!0;break;case"contextmenu":case"mouseup":case"dragend":wo=!1,Jh(z,i,I);break;case"selectionchange":if(R_)break;case"keydown":case"keyup":Jh(z,i,I)}var ce;if(go)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Nr?Bh(t,i)&&(de="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(de="onCompositionStart");de&&(Lh&&i.locale!=="ko"&&(Nr||de!=="onCompositionStart"?de==="onCompositionEnd"&&Nr&&(ce=jh()):(sa=I,co="value"in sa?sa.value:sa.textContent,Nr=!0)),Se=Xu(R,de),0<Se.length&&(de=new kh(de,t,null,i,I),z.push({event:de,listeners:Se}),ce?de.data=ce:(ce=Ph(i),ce!==null&&(de.data=ce)))),(ce=g_?y_(t,i):b_(t,i))&&(de=Xu(R,"onBeforeInput"),0<de.length&&(Se=new kh("onBeforeInput","beforeinput",null,i,I),z.push({event:Se,listeners:de}),Se.data=ce)),o0(z,t,R,i,I)}mg(z,n)})}function us(t,n,i){return{instance:t,listener:n,currentTarget:i}}function Xu(t,n){for(var i=n+"Capture",l=[];t!==null;){var f=t,h=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=Ti(t,i),f!=null&&l.unshift(us(t,f,h)),f=Ti(t,n),f!=null&&l.push(us(t,f,h))),t=t.return}return l}function Wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function gg(t,n,i,l,f){for(var h=n._reactName,y=[];i!==null&&i!==l;){var _=i,E=_.alternate,R=_.stateNode;if(_=_.tag,E!==null&&E===l)break;_!==5&&_!==26&&_!==27||R===null||(E=R,f?(R=Ti(i,h),R!=null&&y.unshift(us(i,R,E))):f||(R=Ti(i,h),R!=null&&y.push(us(i,R,E)))),i=i.return}y.length!==0&&t.push({event:n,listeners:y})}var h0=/\r\n?/g,m0=/\u0000|\uFFFD/g;function yg(t){return(typeof t=="string"?t:""+t).replace(h0,`
`).replace(m0,"")}function bg(t,n){return n=yg(n),yg(t)===n}function Ju(){}function Le(t,n,i,l,f,h){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Rr(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Rr(t,""+l);break;case"className":su(t,"class",l);break;case"tabIndex":su(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":su(t,i,l);break;case"style":Ch(t,l,h);break;case"data":if(n!=="object"){su(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){t.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=ou(""+l),t.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(n!=="input"&&Le(t,n,"name",f.name,f,null),Le(t,n,"formEncType",f.formEncType,f,null),Le(t,n,"formMethod",f.formMethod,f,null),Le(t,n,"formTarget",f.formTarget,f,null)):(Le(t,n,"encType",f.encType,f,null),Le(t,n,"method",f.method,f,null),Le(t,n,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=ou(""+l),t.setAttribute(i,l);break;case"onClick":l!=null&&(t.onclick=Ju);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}i=ou(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""+l):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":l===!0?t.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,l):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(i,l):t.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(i):t.setAttribute(i,l);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),iu(t,"popover",l);break;case"xlinkActuate":Ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ln(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ln(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ln(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ln(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":iu(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=qv.get(i)||i,iu(t,i,l))}}function Gc(t,n,i,l,f,h){switch(i){case"style":Ch(t,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"children":typeof l=="string"?Rr(t,l):(typeof l=="number"||typeof l=="bigint")&&Rr(t,""+l);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vh.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),h=t[Mt]||null,h=h!=null?h[i]:null,typeof h=="function"&&t.removeEventListener(n,h,f),typeof l=="function")){typeof h!="function"&&h!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(n,l,f);break e}i in t?t[i]=l:l===!0?t.setAttribute(i,""):iu(t,i,l)}}}function mt(t,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var l=!1,f=!1,h;for(h in i)if(i.hasOwnProperty(h)){var y=i[h];if(y!=null)switch(h){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Le(t,n,h,y,i,null)}}f&&Le(t,n,"srcSet",i.srcSet,i,null),l&&Le(t,n,"src",i.src,i,null);return;case"input":Oe("invalid",t);var _=h=y=f=null,E=null,R=null;for(l in i)if(i.hasOwnProperty(l)){var I=i[l];if(I!=null)switch(l){case"name":f=I;break;case"type":y=I;break;case"checked":E=I;break;case"defaultChecked":R=I;break;case"value":h=I;break;case"defaultValue":_=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,n));break;default:Le(t,n,l,I,i,null)}}Sh(t,h,_,E,R,y,f,!1),uu(t);return;case"select":Oe("invalid",t),l=y=h=null;for(f in i)if(i.hasOwnProperty(f)&&(_=i[f],_!=null))switch(f){case"value":h=_;break;case"defaultValue":y=_;break;case"multiple":l=_;default:Le(t,n,f,_,i,null)}n=h,i=y,t.multiple=!!l,n!=null?Or(t,!!l,n,!1):i!=null&&Or(t,!!l,i,!0);return;case"textarea":Oe("invalid",t),h=f=l=null;for(y in i)if(i.hasOwnProperty(y)&&(_=i[y],_!=null))switch(y){case"value":l=_;break;case"defaultValue":f=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:Le(t,n,y,_,i,null)}Oh(t,l,f,h),uu(t);return;case"option":for(E in i)if(i.hasOwnProperty(E)&&(l=i[E],l!=null))switch(E){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Le(t,n,E,l,i,null)}return;case"dialog":Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(l=0;l<ss.length;l++)Oe(ss[l],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in i)if(i.hasOwnProperty(R)&&(l=i[R],l!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Le(t,n,R,l,i,null)}return;default:if(io(n)){for(I in i)i.hasOwnProperty(I)&&(l=i[I],l!==void 0&&Gc(t,n,I,l,i,void 0));return}}for(_ in i)i.hasOwnProperty(_)&&(l=i[_],l!=null&&Le(t,n,_,l,i,null))}function p0(t,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,y=null,_=null,E=null,R=null,I=null;for(L in i){var z=i[L];if(i.hasOwnProperty(L)&&z!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":E=z;default:l.hasOwnProperty(L)||Le(t,n,L,null,l,z)}}for(var j in l){var L=l[j];if(z=i[j],l.hasOwnProperty(j)&&(L!=null||z!=null))switch(j){case"type":h=L;break;case"name":f=L;break;case"checked":R=L;break;case"defaultChecked":I=L;break;case"value":y=L;break;case"defaultValue":_=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,n));break;default:L!==z&&Le(t,n,j,L,l,z)}}ao(t,y,_,E,R,I,h,f);return;case"select":L=y=_=j=null;for(h in i)if(E=i[h],i.hasOwnProperty(h)&&E!=null)switch(h){case"value":break;case"multiple":L=E;default:l.hasOwnProperty(h)||Le(t,n,h,null,l,E)}for(f in l)if(h=l[f],E=i[f],l.hasOwnProperty(f)&&(h!=null||E!=null))switch(f){case"value":j=h;break;case"defaultValue":_=h;break;case"multiple":y=h;default:h!==E&&Le(t,n,f,h,l,E)}n=_,i=y,l=L,j!=null?Or(t,!!i,j,!1):!!l!=!!i&&(n!=null?Or(t,!!i,n,!0):Or(t,!!i,i?[]:"",!1));return;case"textarea":L=j=null;for(_ in i)if(f=i[_],i.hasOwnProperty(_)&&f!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Le(t,n,_,null,l,f)}for(y in l)if(f=l[y],h=i[y],l.hasOwnProperty(y)&&(f!=null||h!=null))switch(y){case"value":j=f;break;case"defaultValue":L=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==h&&Le(t,n,y,f,l,h)}Th(t,j,L);return;case"option":for(var ue in i)if(j=i[ue],i.hasOwnProperty(ue)&&j!=null&&!l.hasOwnProperty(ue))switch(ue){case"selected":t.selected=!1;break;default:Le(t,n,ue,null,l,j)}for(E in l)if(j=l[E],L=i[E],l.hasOwnProperty(E)&&j!==L&&(j!=null||L!=null))switch(E){case"selected":t.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Le(t,n,E,j,l,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in i)j=i[pe],i.hasOwnProperty(pe)&&j!=null&&!l.hasOwnProperty(pe)&&Le(t,n,pe,null,l,j);for(R in l)if(j=l[R],L=i[R],l.hasOwnProperty(R)&&j!==L&&(j!=null||L!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,n));break;default:Le(t,n,R,j,l,L)}return;default:if(io(n)){for(var Ye in i)j=i[Ye],i.hasOwnProperty(Ye)&&j!==void 0&&!l.hasOwnProperty(Ye)&&Gc(t,n,Ye,void 0,l,j);for(I in l)j=l[I],L=i[I],!l.hasOwnProperty(I)||j===L||j===void 0&&L===void 0||Gc(t,n,I,j,l,L);return}}for(var x in i)j=i[x],i.hasOwnProperty(x)&&j!=null&&!l.hasOwnProperty(x)&&Le(t,n,x,null,l,j);for(z in l)j=l[z],L=i[z],!l.hasOwnProperty(z)||j===L||j==null&&L==null||Le(t,n,z,j,l,L)}var Zc=null,Vc=null;function Wu(t){return t.nodeType===9?t:t.ownerDocument}function vg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _g(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Qc(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Yc=null;function g0(){var t=window.event;return t&&t.type==="popstate"?t===Yc?!1:(Yc=t,!0):(Yc=null,!1)}var wg=typeof setTimeout=="function"?setTimeout:void 0,y0=typeof clearTimeout=="function"?clearTimeout:void 0,Ag=typeof Promise=="function"?Promise:void 0,b0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ag<"u"?function(t){return Ag.resolve(null).then(t).catch(v0)}:wg;function v0(t){setTimeout(function(){throw t})}function Kc(t,n){var i=n,l=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(l===0){t.removeChild(f),ps(n);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=f}while(i);ps(n)}function Fc(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Fc(i),no(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function _0(t,n,i,l){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ei])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==f.rel||t.getAttribute("href")!==(f.href==null?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=hn(t.nextSibling),t===null)break}return null}function w0(t,n,i){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=hn(t.nextSibling),t===null))return null;return t}function hn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}function Eg(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}function Sg(t,n,i){switch(n=Wu(i),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}var ln=new Map,Tg=new Set;function el(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var Xn=F.d;F.d={f:A0,r:E0,D:S0,C:T0,L:O0,m:R0,X:x0,S:C0,M:N0};function A0(){var t=Xn.f(),n=Vu();return t||n}function E0(t){var n=Er(t);n!==null&&n.tag===5&&n.type==="form"?Jm(n):Xn.r(t)}var ei=typeof document>"u"?null:document;function Og(t,n,i){var l=ei;if(l&&typeof n=="string"&&n){var f=Xt(n);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),Tg.has(f)||(Tg.add(f),t={rel:t,crossOrigin:i,href:n},l.querySelector(f)===null&&(n=l.createElement("link"),mt(n,"link",t),it(n),l.head.appendChild(n)))}}function S0(t){Xn.D(t),Og("dns-prefetch",t,null)}function T0(t,n){Xn.C(t,n),Og("preconnect",t,n)}function O0(t,n,i){Xn.L(t,n,i);var l=ei;if(l&&t&&n){var f='link[rel="preload"][as="'+Xt(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Xt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Xt(i.imageSizes)+'"]')):f+='[href="'+Xt(t)+'"]';var h=f;switch(n){case"style":h=ti(t);break;case"script":h=ni(t)}ln.has(h)||(t=_e({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:t,as:n},i),ln.set(h,t),l.querySelector(f)!==null||n==="style"&&l.querySelector(ls(h))||n==="script"&&l.querySelector(os(h))||(n=l.createElement("link"),mt(n,"link",t),it(n),l.head.appendChild(n)))}}function R0(t,n){Xn.m(t,n);var i=ei;if(i&&t){var l=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Xt(l)+'"][href="'+Xt(t)+'"]',h=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ni(t)}if(!ln.has(h)&&(t=_e({rel:"modulepreload",href:t},n),ln.set(h,t),i.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(os(h)))return}l=i.createElement("link"),mt(l,"link",t),it(l),i.head.appendChild(l)}}}function C0(t,n,i){Xn.S(t,n,i);var l=ei;if(l&&t){var f=Sr(l).hoistableStyles,h=ti(t);n=n||"default";var y=f.get(h);if(!y){var _={loading:0,preload:null};if(y=l.querySelector(ls(h)))_.loading=5;else{t=_e({rel:"stylesheet",href:t,"data-precedence":n},i),(i=ln.get(h))&&Xc(t,i);var E=y=l.createElement("link");it(E),mt(E,"link",t),E._p=new Promise(function(R,I){E.onload=R,E.onerror=I}),E.addEventListener("load",function(){_.loading|=1}),E.addEventListener("error",function(){_.loading|=2}),_.loading|=4,tl(y,n,l)}y={type:"stylesheet",instance:y,count:1,state:_},f.set(h,y)}}}function x0(t,n){Xn.X(t,n);var i=ei;if(i&&t){var l=Sr(i).hoistableScripts,f=ni(t),h=l.get(f);h||(h=i.querySelector(os(f)),h||(t=_e({src:t,async:!0},n),(n=ln.get(f))&&Jc(t,n),h=i.createElement("script"),it(h),mt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(f,h))}}function N0(t,n){Xn.M(t,n);var i=ei;if(i&&t){var l=Sr(i).hoistableScripts,f=ni(t),h=l.get(f);h||(h=i.querySelector(os(f)),h||(t=_e({src:t,async:!0,type:"module"},n),(n=ln.get(f))&&Jc(t,n),h=i.createElement("script"),it(h),mt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(f,h))}}function Rg(t,n,i,l){var f=(f=aa.current)?el(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=ti(i.href),i=Sr(f).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=ti(i.href);var h=Sr(f).hoistableStyles,y=h.get(t);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,y),(h=f.querySelector(ls(t)))&&!h._p&&(y.instance=h,y.state.loading=5),ln.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ln.set(t,i),h||j0(f,t,i,y.state))),n&&l===null)throw Error(r(528,""));return y}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ni(i),i=Sr(f).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function ti(t){return'href="'+Xt(t)+'"'}function ls(t){return'link[rel="stylesheet"]['+t+"]"}function Cg(t){return _e({},t,{"data-precedence":t.precedence,precedence:null})}function j0(t,n,i,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),mt(n,"link",i),it(n),t.head.appendChild(n))}function ni(t){return'[src="'+Xt(t)+'"]'}function os(t){return"script[async]"+t}function xg(t,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+Xt(i.href)+'"]');if(l)return n.instance=l,it(l),l;var f=_e({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),it(l),mt(l,"style",f),tl(l,i.precedence,t),n.instance=l;case"stylesheet":f=ti(i.href);var h=t.querySelector(ls(f));if(h)return n.state.loading|=4,n.instance=h,it(h),h;l=Cg(i),(f=ln.get(f))&&Xc(l,f),h=(t.ownerDocument||t).createElement("link"),it(h);var y=h;return y._p=new Promise(function(_,E){y.onload=_,y.onerror=E}),mt(h,"link",l),n.state.loading|=4,tl(h,i.precedence,t),n.instance=h;case"script":return h=ni(i.src),(f=t.querySelector(os(h)))?(n.instance=f,it(f),f):(l=i,(f=ln.get(h))&&(l=_e({},i),Jc(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),it(f),mt(f,"link",l),t.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&!(n.state.loading&4)&&(l=n.instance,n.state.loading|=4,tl(l,i.precedence,t));return n.instance}function tl(t,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,h=f,y=0;y<l.length;y++){var _=l[y];if(_.dataset.precedence===n)h=_;else if(h!==f)break}h?h.parentNode.insertBefore(t,h.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(t,n.firstChild))}function Xc(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Jc(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var nl=null;function Ng(t,n,i){if(nl===null){var l=new Map,f=nl=new Map;f.set(i,l)}else f=nl,l=f.get(i),l||(l=new Map,f.set(i,l));if(l.has(t))return l;for(l.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var h=i[f];if(!(h[Ei]||h[bt]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(n)||"";y=t+y;var _=l.get(y);_?_.push(h):l.set(y,[h])}}return l}function jg(t,n,i){t=t.ownerDocument||t,t.head.insertBefore(i,n==="title"?t.querySelector("head > title"):null)}function M0(t,n,i){if(i===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Mg(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var cs=null;function D0(){}function k0(t,n,i){if(cs===null)throw Error(r(475));var l=cs;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var f=ti(i.href),h=t.querySelector(ls(f));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=al.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=h,it(h);return}h=t.ownerDocument||t,i=Cg(i),(f=ln.get(f))&&Xc(i,f),h=h.createElement("link"),it(h);var y=h;y._p=new Promise(function(_,E){y.onload=_,y.onerror=E}),mt(h,"link",i),n.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(l.count++,n=al.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function U0(){if(cs===null)throw Error(r(475));var t=cs;return t.stylesheets&&t.count===0&&Wc(t,t.stylesheets),0<t.count?function(n){var i=setTimeout(function(){if(t.stylesheets&&Wc(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i)}}:null}function al(){if(this.count--,this.count===0){if(this.stylesheets)Wc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var rl=null;function Wc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,rl=new Map,n.forEach(L0,t),rl=null,al.call(t))}function L0(t,n){if(!(n.state.loading&4)){var i=rl.get(t);if(i)var l=i.get(null);else{i=new Map,rl.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var y=f[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),l=y)}l&&i.set(null,l)}f=n.instance,y=f.getAttribute("data-precedence"),h=i.get(y)||l,h===l&&i.set(null,f),i.set(y,f),this.count++,l=al.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),h?h.parentNode.insertBefore(f,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),n.state.loading|=4}}var fs={$$typeof:w,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function I0(t,n,i,l,f,h,y,_){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.hiddenUpdates=eo(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Dg(t,n,i,l,f,h,y,_,E,R,I,z){return t=new I0(t,n,i,y,_,E,R,z),n=1,h===!0&&(n|=24),h=sn(3,null,null,n),t.current=h,h.stateNode=t,n=jo(),n.refCount++,t.pooledCache=n,n.refCount++,h.memoizedState={element:l,isDehydrated:i,cache:n},fc(h),t}function kg(t){return t?(t=kr,t):kr}function Ug(t,n,i,l,f,h){f=kg(f),l.context===null?l.context=f:l.pendingContext=f,l=ma(n),l.payload={element:i},h=h===void 0?null:h,h!==null&&(l.callback=h),i=pa(t,l,n),i!==null&&(St(i,t,n),Yi(i,t,n))}function Lg(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function ef(t,n){Lg(t,n),(t=t.alternate)&&Lg(t,n)}function Ig(t){if(t.tag===13){var n=ua(t,67108864);n!==null&&St(n,t,67108864),ef(t,67108864)}}var il=!0;function $0(t,n,i,l){var f=ie.T;ie.T=null;var h=F.p;try{F.p=2,tf(t,n,i,l)}finally{F.p=h,ie.T=f}}function B0(t,n,i,l){var f=ie.T;ie.T=null;var h=F.p;try{F.p=8,tf(t,n,i,l)}finally{F.p=h,ie.T=f}}function tf(t,n,i,l){if(il){var f=nf(l);if(f===null)qc(t,n,l,sl,i),Bg(t,l);else if(z0(f,t,n,i,l))l.stopPropagation();else if(Bg(t,l),n&4&&-1<P0.indexOf(t)){for(;f!==null;){var h=Er(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=Pa(h.pendingLanes);if(y!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;y;){var E=1<<31-Bt(y);_.entanglements[1]|=E,y&=~E}Nn(h),!(qe&6)&&(qu=Tn()+500,is(0))}}break;case 13:_=ua(h,2),_!==null&&St(_,h,2),Vu(),ef(h,2)}if(h=nf(l),h===null&&qc(t,n,l,sl,i),h===f)break;f=h}f!==null&&l.stopPropagation()}else qc(t,n,l,null,i)}}function nf(t){return t=uo(t),af(t)}var sl=null;function af(t){if(sl=null,t=za(t),t!==null){var n=q(t);if(n===null)t=null;else{var i=n.tag;if(i===13){if(t=K(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return sl=t,null}function $g(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tv()){case lh:return 2;case oh:return 8;case tu:case Ov:return 32;case ch:return 268435456;default:return 32}default:return 32}}var rf=!1,Aa=null,Ea=null,Sa=null,ds=new Map,hs=new Map,Ta=[],P0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bg(t,n){switch(t){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":ds.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(n.pointerId)}}function ms(t,n,i,l,f,h){return t===null||t.nativeEvent!==h?(t={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:h,targetContainers:[f]},n!==null&&(n=Er(n),n!==null&&Ig(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),t)}function z0(t,n,i,l,f){switch(n){case"focusin":return Aa=ms(Aa,t,n,i,l,f),!0;case"dragenter":return Ea=ms(Ea,t,n,i,l,f),!0;case"mouseover":return Sa=ms(Sa,t,n,i,l,f),!0;case"pointerover":var h=f.pointerId;return ds.set(h,ms(ds.get(h)||null,t,n,i,l,f)),!0;case"gotpointercapture":return h=f.pointerId,hs.set(h,ms(hs.get(h)||null,t,n,i,l,f)),!0}return!1}function Pg(t){var n=za(t.target);if(n!==null){var i=q(n);if(i!==null){if(n=i.tag,n===13){if(n=K(i),n!==null){t.blockedOn=n,Uv(t.priority,function(){if(i.tag===13){var l=Gt(),f=ua(i,l);f!==null&&St(f,i,l),ef(i,l)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=nf(t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);so=l,i.target.dispatchEvent(l),so=null}else return n=Er(i),n!==null&&Ig(n),t.blockedOn=i,!1;n.shift()}return!0}function zg(t,n,i){ul(t)&&i.delete(n)}function H0(){rf=!1,Aa!==null&&ul(Aa)&&(Aa=null),Ea!==null&&ul(Ea)&&(Ea=null),Sa!==null&&ul(Sa)&&(Sa=null),ds.forEach(zg),hs.forEach(zg)}function ll(t,n){t.blockedOn===n&&(t.blockedOn=null,rf||(rf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,H0)))}var ol=null;function Hg(t){ol!==t&&(ol=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ol===t&&(ol=null);for(var n=0;n<t.length;n+=3){var i=t[n],l=t[n+1],f=t[n+2];if(typeof l!="function"){if(af(l||i)===null)continue;break}var h=Er(i);h!==null&&(t.splice(n,3),n-=3,Qo(h,{pending:!0,data:f,method:i.method,action:l},l,f))}}))}function ps(t){function n(E){return ll(E,t)}Aa!==null&&ll(Aa,t),Ea!==null&&ll(Ea,t),Sa!==null&&ll(Sa,t),ds.forEach(n),hs.forEach(n);for(var i=0;i<Ta.length;i++){var l=Ta[i];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ta.length&&(i=Ta[0],i.blockedOn===null);)Pg(i),i.blockedOn===null&&Ta.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var f=i[l],h=i[l+1],y=f[Mt]||null;if(typeof h=="function")y||Hg(i);else if(y){var _=null;if(h&&h.hasAttribute("formAction")){if(f=h,y=h[Mt]||null)_=y.formAction;else if(af(f)!==null)continue}else _=y.action;typeof _=="function"?i[l+1]=_:(i.splice(l,3),l-=3),Hg(i)}}}function sf(t){this._internalRoot=t}cl.prototype.render=sf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,l=Gt();Ug(i,l,t,n,null,null)},cl.prototype.unmount=sf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;t.tag===0&&Xr(),Ug(t.current,2,null,t,null,null),Vu(),n[Ar]=null}};function cl(t){this._internalRoot=t}cl.prototype.unstable_scheduleHydration=function(t){if(t){var n=gh();t={blockedOn:null,target:t,priority:n};for(var i=0;i<Ta.length&&n!==0&&n<Ta[i].priority;i++);Ta.splice(i,0,t),i===0&&Pg(t)}};var qg=e.version;if(qg!=="19.0.0")throw Error(r(527,qg,"19.0.0"));F.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=U(n),t=t!==null?Q(t):null,t=t===null?null:t.stateNode,t};var q0={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,findFiberByHostInstance:za,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{_i=fl.inject(q0),$t=fl}catch{}}return gs.createRoot=function(t,n){if(!u(t))throw Error(r(299));var i=!1,l="",f=sp,h=up,y=lp,_=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(_=n.unstable_transitionCallbacks)),n=Dg(t,1,!1,null,null,i,l,f,h,y,_,null),t[Ar]=n.current,Hc(t.nodeType===8?t.parentNode:t),new sf(n)},gs.hydrateRoot=function(t,n,i){if(!u(t))throw Error(r(299));var l=!1,f="",h=sp,y=up,_=lp,E=null,R=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks),i.formState!==void 0&&(R=i.formState)),n=Dg(t,1,!0,n,i??null,l,f,h,y,_,E,R),n.context=kg(null),i=n.current,l=Gt(),f=ma(l),f.callback=null,pa(i,f,l),n.current.lanes=l,Ai(n,l),Nn(n),t[Ar]=n.current,Hc(t),new cl(n)},gs.version="19.0.0",gs}var Xg;function W0(){if(Xg)return lf.exports;Xg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),lf.exports=J0(),lf.exports}var ew=W0();const tw=_r(ew),nw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASQAAABzCAMAAAAG248lAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHOUExURf///wAAAN/f34CAgMDAwLe3t42NjVhYWCkpKRQUFAICAg0NDRoaGkFBQXBwcKCgoLy8vP8AAAD/AIaGhigoKEdHR7+/v76+vn19fRAQECoqKq2trVlZWZ2dnbm5uXZ2dnNzc7Kysj4+PmxsbLW1tVdXVwQEBAgICJqamn9/fxcXF2ZmZqurqycnJ2hoaAcHB46Ojh4eHjIyMmdnZwsLC1RUVIWFhYyMjKenpz09PSAgIK+vry8vL729vUJCQpeXl7S0tJ+fn29vb6amphISEmFhYYKCggMDA5OTk1xcXDU1NWpqant7e0REREtLS6ysrHJycqioqKOjo0hISE5OThsbG6qqqra2ti0tLbOzs3l5eRYWFkVFRbi4uJiYmExMTFNTU4iIiJWVlQUFBQwMDKGhoZmZmSIiImRkZA4ODi4uLouLi1JSUrGxsX5+fhwcHKmpqZSUlFFRUXV1dbq6upKSkjQ0NIGBgV9fXx0dHSQkJAAA////ADk5OWlpaaSkpIqKihEREZaWlm5ubk9PTwoKCpCQkHh4eEZGRjw8PDg4ODExMQEBAUBAQImJiV1dXVBQUJGRkQ8PD3x8fK6urm1tbRMTE0pKSiMjI01NTca/zt4AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAecSURBVHhe7Zr9XxRFGMCbXBCO07si7iTxDD3BEHw5fOtQETXwBQHFNDPKDIoS0YQMLF/K1DJ7f/9vm3n22ZnZ3dn1wc7P3cp8f+DzzDPD8Nkvu7Mzs/OCJRYmwNgSgZVEwEoiYCUR0CS9aAmzQmAlxWMlEbCSCFhJBIySHIsPK4mAlUTASiJgJRGwkghYSQSsJAJWEgEriYCVRMBKImAlEXg2kqDDAFiVRKwkAlYSASuJgJVEoJKSoBsC2Dw5WEkErCQCVhKBGpFUV7+yoTElKpvSq1ZnspiuEciSoA3GYaBW8ZIAY87LAow98BcF2eZXMOmRasnksLIWqL6k/JpWTPl4NYP1Qda2rcOoghTWv4aRiapLat+AiSCpjXlsolPc1NG5GeOKkX+9i23B2ES1JXX3YNnAptDQVNi6jbFKS8pt38H/WA1LKpawaKTXPzDl1+wU2QpLyrgDYoUlBaIA4AfABAckAZjgQAe5XVgyk9oNrVzye9JutqKS9r7hdlrDkjZ3YimCch80A2TbSkqq24ed1q6k/QewwGlt6z/IU3UDbfrL7pBo5rJcJR0+ggXW0VuAHgWFNzHJaShicvlKGsSYpQahPyTXi2nGho5iLhmSFNA6EjTEwQQHDXEwwRE9HcOYHVf3kaBdzcBPYGr5SmrBmB2DjhXDmGfspJwFLHtJI9CxQg1W++owFSspNzp8Mt0Eta3pVWOn4hZ+p8d5R41n+mE+nyRJb52FniXn3sYK1nNelJuxpKOuqvAOzqAkret9z6/3d7jxbBvGbMeKCxhpqP+JTlUljWDM2LsT0HUUsZLWiVVFkPR7WCtQkrLvY8i52IWBxv+UBNeNcRjoAYB2GPswSBrDmJPeY1rOesRJ+sB7DP10aC9MKamo3ptsaHcyJF36EAuC1l5teh0gRlL/JJaDTPa7DThSUr0mtGcqGZKKDVhAGts+Mu9JRkvSZgtBDuyHFhxPUvljDATH1iZDkvaql5Snp8IPXrSkLVgy8MkUtOB4knSGjiZFUvFTLPnoOHA5cENFSuqTg/bO3m4ut25gpgMTjMlRySSpfOWZSgpEAPSwJKCDyBHFsMltnCfNYo5dvYYZ5zM57kxjxihpBmoqPE8CF6YIgB6WBHTAl2/wicREcJPbJGm/t/fbqUbp3HXMsRbM+CTtnCs685/fSNVDTTIkOYPq8Qgy45s8Ge+kfN/AFwsti00jcpDWls0bvKQmybvjRt3ZZkIkOZmbmAnT041tBOS129EhbCgHGCUptQdTSFIkOdlh4zclQVmONEuQJBsaJAW2G57d2g29+IAeFF8KMOZ8JcDYAzsDwl8nPW6pi6JJyp2alsoNksYw45EgSZy+24tY4Udd1ZMlZe+MlfQRLixpm76iEyRLEqfu7vjXWKnYIdcqsZJyoyvGQ9OesKSutZjxSJwkQd/w8cCcYBZrYiTl+8UWUZiwJHfjRSORkjjZb1p0T/I9HiWpcC9q3A9LkhmPCkuC68Y4DPQAQDsAExyQBGCCg79opP1bbMRJe89bhKQp026SS1iSNO6RYEn695L73hkSs6TInRJOWJKcg3vUvqSD3ZdnV7Ystu4753aiUTiOzdRHJaOka1cx6dF1sf6B17DkzdgTLEnucqg9DcUJrGOsGTMmSb6zBJ0bHt4RuweyYXjtljxJav9jGHvRUJVxkvY2Yo6x7+S2QU1ICkQA9ABggoMJDhriYILjOOvuYxhaLHDknRT7uMlNu9Ss2lmRfp8HSefl+a3gslMfk+SzaJIkP7d8r+3SPVeSnBkM9S0zRG0zyfmfQdL8I0z5LnEac8+HJLmnwdgP7dChh/Ziv+49R/LpVJLUJbr7jID6NECQNCFP2tWqJPVM8TnjdjWoZOfUMvXxXUw6akvaG8q1O0kt8bTPj4R5UlyVgixJgQ58QA9AoKgIS3IGH2NBkF59Z56/1Nv7fae41JiuJKmTXeFPwEV51UuUZHh5SKoqKfsjFiLRhvQrZcyxyZ/y2UzbRp7TPkmVd8872cyubVgUyOEsRpIaF3+eyI3OjahDYxpVlRSeMAc5oxZb6tlyEReszZMMNHq7vzGStC/tgtBeClBdSbFLL05J/8fKI18uj8TDGXt6V26xxUjSXh4C0+S/6pKc+jhL/ndevT6C4YhjuhWvbsRAbmvGSFIPMaDNwTTIkqANxmGgdkngLzqnoz+W/OI/j1O4hXkX98kI34o93fIImDcYx0gKPm/yzalTdUlO4R6c8w9x89fgN1z/bXPkMCQv/YZlZFNBjV6TA9AkVpJ+YoljWEbWgiSu6ffQ3dQxvjmoiPOHd3xf0IQbTUX5xZZzAz77HsIS2+V2EifJyW7VPx78iVkftSCJM/9goXTBXXf8tfj3w8NRJ7rOLvwjLqm1YUE7pNM+VxJTq86G24FThUQmhkvivGXn4r/NxhlArUiqbZ5CUiAyAbUBsMoDs4nASiJgJRGwkghYSQTIkhTQ2gTWP5ElNa4FrCQCVhIBK4mAlUTgKSQtP6wkAlYSASuJgJVEwEoiYCURsJIIWEkErCQCVhIBK4lAUBKULQasJAJWEgEriYCVRMCVBD8tsVhJBKwkAlYSASvpiTD2H3G1RveWuZGKAAAAAElFTkSuQmCC",aw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAACWBAMAAAAvaLvFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURQAAgICAgMDAwP///wAA/82czywAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFmSURBVGje7ZddcsIwDITd4gNUhQOAeoEWcwCY6v5naryV/5PhgTc5+2Q7/mBmZ6UobteuXa+L6JMXnWekDuFfei1todmoEK7MuvohYv4KgehD+S0jTVJvRCF85y3sW1DdvjPXT6ekmms7tfV0p6aiXMxMarHabp/Xl2GK6JjfOwAOsfeeROouPA2F4MSZhEXucQvnoGs+m4gaJfIg2rbPOoVrXOkcz+4zUiVCjZ7M8zYpdBvmS4zQUdsLvm6ATkV5EZ3nlxVO0IA1TOk13WfLIIVr3RyynMFIbFBz/XvZKgWNU5nIb84RHL6pueYpdQnnKVFaZKfWYV+hBiktmVJfSXWPQVO+NX9jkyrCoIoeo7MsxljfTrC+R61RBUdwkjRM+LlL7sJZVimnsSrZKkD3oK9Km9TqUdwWqkbtUiUp3Y3BOV/5apVqF42lo1crObRG+aGW1u1rQ2eVcr2jG7661a8AQ5Rzfxe/BDyHDpFeAAAAAElFTkSuQmCC",rw=({icons:s})=>{const[e,a]=Ct.useState(!1),r=()=>{a(u=>!u)};return G.createElement("div",{className:"TaskbarContainer"},e&&G.createElement("div",{className:"StartMenu"},G.createElement(uw,{icons:s})),G.createElement("div",{className:"Taskbar"},G.createElement(iw,{onClick:r}),G.createElement(sw,null)))},iw=({onClick:s})=>G.createElement("div",{className:"StartButton",onClick:s},G.createElement("img",{className:"TaskbarImg",src:nw,alt:"Start Button"})),sw=()=>{const[s,e]=Ct.useState(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}));return Ct.useEffect(()=>{const a=setInterval(()=>{const r=new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date);e(r)},6e4);return e(new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date)),()=>clearInterval(a)},[]),G.createElement("div",{className:"TaskbarClock"},G.createElement("p",null,s))},uw=({icons:s})=>G.createElement("div",{className:"StartMenu"},G.createElement("div",{className:"leftBar"},G.createElement("img",{className:"TaskbarImg",src:aw,alt:"image of button"})),G.createElement("div",{className:"StartMenuContent"},s.map(({id:e,name:a,icon:r,onClick:u})=>G.createElement(lw,{key:e,menuItemName:a,StartMenuIcon:r,onClick:u})))),lw=({menuItemName:s,StartMenuIcon:e,onClick:a})=>G.createElement("div",{className:"StartMenuItem",onClick:a}," ",G.createElement("img",{className:"StartMenuIcon",src:e,alt:s}),G.createElement("p",null,s)),ow=({icons:s})=>G.createElement("div",{className:"Desktop"},G.createElement("div",{className:"iconBox"},s.map(({id:e,icon:a,name:r,onClick:u})=>G.createElement(cw,{key:e,icon:a,iconName:r,onClick:u})))),cw=({icon:s,iconName:e,onClick:a})=>G.createElement("div",{className:"DesktopIcon",onClick:a},G.createElement("div",{className:"item"},G.createElement("img",{src:s,alt:e}),G.createElement("div",{className:"iconName"},G.createElement("p",null,e)))),fw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURf///wAAAN/f34CAgMDAwJsNYssAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABDSURBVEjH7cq5DQAgDANAngm8AhugrMD+M1FTQNIRS776SkgFSGIbDrPJFNeToqKiouKviJNimnjFFLu5WCKC8kdgAxXv7NbkSsdOAAAAAElFTkSuQmCC",dw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURf///wAAAN/f34CAgMDAwJsNYssAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABMSURBVEjHYyAKMAoKDhGFTEoEgLGx4VBS6OLiKIgVuIDAqMIBVuiCDhxHFY4qHFU4qnAoKhw+RTM+MJQUMhsTBENFoSCRYPArFBQEAP2asDHDoFEZAAAAAElFTkSuQmCC",hw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAVUExURf///wAAAN/f34CAgMDAwL+/vwEBAXn373wAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABmSURBVEjHYyAKMAoKDhGFTEoEgLGx4VBS6IIXDEWFgiCAkEZwh6JCFxdHkJwIKmvIKoT5FQxC4GJDViGah4e2wuETM8Moz4D9ivB/Ipw7FBXiBKMKB0ghszFBMFQUChIJBr9CQUEAjhbMKR8UtOYAAAAASUVORK5CYII=",dl=({title:s,width:e,height:a,children:r,onClose:u})=>G.createElement("div",{className:"Menu98",style:{width:e,height:a}},G.createElement("div",{className:"titlebar"},G.createElement("p",null,s),G.createElement("div",{className:"buttonContainer"},G.createElement("div",{className:"button",style:{backgroundImage:`url(${fw})`}}),G.createElement("div",{className:"button",style:{backgroundImage:`url(${dw})`}}),G.createElement("div",{className:"button",style:{backgroundImage:`url(${hw})`},onClick:u}))),G.createElement(mw,null,r)),mw=({children:s})=>G.createElement("div",{className:"Body"},s),lr={githubRepo:"",artistName:"",songName:"",albumCover:"",printTest:()=>{console.log("well")}},pw=({songName:s,songArtist:e,albumCover:a})=>G.createElement("div",{className:"song-info"},G.createElement("div",{className:"album-info"},G.createElement("img",{src:a,alt:"Album cover",className:"album-cover"}),G.createElement("div",{className:"song-details"},G.createElement("h2",{className:"song-name"},s),G.createElement("h3",{className:"song-artist"},e)))),gw="/assets/playbutton-CnN6bRpu.png",yw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAAAAAKVnuc8AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOwwAADsMBx2+oZAAABdBJREFUeF7t0TGKQwEMxND8+186jcodAllQXOjVZlzo9eSUghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMb8K8voHJj7j/itM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCE7meP87eCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTnled689/8oyFpbvgAAAABJRU5ErkJggg==",bw="/assets/forwardbutton-CgiMt0Yj.png",vw="/assets/rewindbutton-DPVTxBor.png",_w=({isPlaying:s,togglePlayPause:e,playNextSong:a,playPreviousSong:r})=>{const u={backgroundImage:`url(${yw})`},o={backgroundImage:`url(${gw})`},c={backgroundImage:`url(${bw})`},d={backgroundImage:`url(${vw})`};return G.createElement("div",{className:"buttonContainer"},G.createElement("div",{className:"Button",style:d,onClick:r}),G.createElement("div",{className:"Button",onClick:e,style:s?u:o}),G.createElement("div",{className:"Button",style:c,onClick:a}))},ww=s=>{const e=Math.floor(s/60),a=Math.floor(s%60);return`${String(e).padStart(2,"0")}:${String(a).padStart(2,"0")}`},Aw=({sliderValue:s,currentTime:e,handleSliderChange:a})=>G.createElement("div",{className:"audioSlider"},G.createElement("p",null,ww(e)),G.createElement("input",{type:"range",min:"0",max:"100",value:s,className:"slider",onChange:r=>a(r.target.value)})),Ew="/assets/defaultalbumcover-C1o72Qwd.png",Sw=({repoUrl:s})=>{const[e,a]=Ct.useState(0),[r,u]=Ct.useState(0);lr.songName="Fuck with Dre Day",lr.artistName="Dr Dre",lr.albumCover=Ew;const o=m=>{a(m)},c=()=>{console.log(lr)},d=()=>{};return G.createElement("div",{className:"MusicPlayer"},G.createElement(pw,{songName:lr.songName,songArtist:lr.artistName,albumCover:lr.albumCover}),G.createElement(_w,{playNextSong:c,playPreviousSong:d}),G.createElement(Aw,{sliderValue:e,currentTime:r,handleSliderChange:o}))},Tw=({onSubmitRepo:s})=>{const[e,a]=Ct.useState(""),r=u=>{u.preventDefault(),e&&s(e)};return G.createElement("div",{className:"Settings"},G.createElement("form",{onSubmit:r},G.createElement("input",{type:"text",placeholder:"Enter GitHub Repo URL",value:e,onChange:u=>a(u.target.value),className:"settings-input"}),G.createElement("button",{type:"submit",className:"settings-button"},"Submit")))};function Ow(s){if(typeof s>"u")return null;try{return JSON.parse(s)}catch{}let e="";const a=[];let r=!1,u=!1;for(let o of s){if(r)o==='"'&&!u?r=!1:o===`
`&&!u?o="\\n":o==="\\"?u=!u:u=!1;else if(o==='"')r=!0,u=!1;else if(o==="{")a.push("}");else if(o==="[")a.push("]");else if(o==="}"||o==="]")if(a&&a[a.length-1]===o)a.pop();else return null;e+=o}r&&(e+='"');for(let o=a.length-1;o>=0;o-=1)e+=a[o];try{return JSON.parse(e)}catch{return null}}var df,Jg;function Rw(){return Jg||(Jg=1,df=function(s,e){if(typeof s!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,s.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),df}var Cw=Rw();const xw=_r(Cw);var hl={exports:{}},Wg;function Nw(){if(Wg)return hl.exports;Wg=1;const s=/[\p{Lu}]/u,e=/[\p{Ll}]/u,a=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,u=/[_.\- ]+/,o=new RegExp("^"+u.source),c=new RegExp(u.source+r.source,"gu"),d=new RegExp("\\d+"+r.source,"gu"),m=(v,w,A)=>{let T=!1,C=!1,M=!1;for(let B=0;B<v.length;B++){const D=v[B];T&&s.test(D)?(v=v.slice(0,B)+"-"+v.slice(B),T=!1,M=C,C=!0,B++):C&&M&&e.test(D)?(v=v.slice(0,B-1)+"-"+v.slice(B-1),M=C,C=!1,T=!0):(T=w(D)===D&&A(D)!==D,M=C,C=A(D)===D&&w(D)!==D)}return v},p=(v,w)=>(a.lastIndex=0,v.replace(a,A=>w(A))),g=(v,w)=>(c.lastIndex=0,d.lastIndex=0,v.replace(c,(A,T)=>w(T)).replace(d,A=>w(A))),b=(v,w)=>{if(!(typeof v=="string"||Array.isArray(v)))throw new TypeError("Expected the input to be `string | string[]`");if(w={pascalCase:!1,preserveConsecutiveUppercase:!1,...w},Array.isArray(v)?v=v.map(M=>M.trim()).filter(M=>M.length).join("-"):v=v.trim(),v.length===0)return"";const A=w.locale===!1?M=>M.toLowerCase():M=>M.toLocaleLowerCase(w.locale),T=w.locale===!1?M=>M.toUpperCase():M=>M.toLocaleUpperCase(w.locale);return v.length===1?w.pascalCase?T(v):A(v):(v!==A(v)&&(v=m(v,A,T)),v=v.replace(o,""),w.preserveConsecutiveUppercase?v=p(v,A):v=A(v),w.pascalCase&&(v=T(v.charAt(0))+v.slice(1)),g(v,T))};return hl.exports=b,hl.exports.default=b,hl.exports}Nw();function jw(s,e){return(e==null?void 0:e[s])||xw(s)}function Mw(s,e,a){const r={};for(const u in s)Object.hasOwn(s,u)&&(r[e(u,a)]=s[u]);return r}function ey(s){return Array.isArray(s)?[...s]:{...s}}function Dw(s,e){const a=ey(s);for(const[r,u]of Object.entries(e)){const[o,...c]=r.split(".").reverse();let d=a;for(const m of c.reverse()){if(d[m]===void 0)break;d[m]=ey(d[m]),d=d[m]}d[o]!==void 0&&(d[o]={lc:1,type:"secret",id:[u]})}return a}function Ib(s){const e=Object.getPrototypeOf(s);return typeof s.lc_name=="function"&&(typeof e.lc_name!="function"||s.lc_name()!==e.lc_name())?s.lc_name():s.name}class Da{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Ib(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...a){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var u;return(u=this.lc_serializable_keys)==null?void 0:u.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Da||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},a={},r=Object.keys(this.lc_kwargs).reduce((u,o)=>(u[o]=o in this?this[o]:this.lc_kwargs[o],u),{});for(let u=Object.getPrototypeOf(this);u;u=Object.getPrototypeOf(u))Object.assign(e,Reflect.get(u,"lc_aliases",this)),Object.assign(a,Reflect.get(u,"lc_secrets",this)),Object.assign(r,Reflect.get(u,"lc_attributes",this));return Object.keys(a).forEach(u=>{let o=this,c=r;const[d,...m]=u.split(".").reverse();for(const p of m.reverse()){if(!(p in o)||o[p]===void 0)return;(!(p in c)||c[p]===void 0)&&(typeof o[p]=="object"&&o[p]!=null?c[p]={}:Array.isArray(o[p])&&(c[p]=[])),o=o[p],c=c[p]}d in o&&o[d]!==void 0&&(c[d]=c[d]||o[d])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:Mw(Object.keys(a).length?Dw(r,a):r,jw,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function kw(s,e){return typeof s=="string"?s===""?e:typeof e=="string"?s+e:[{type:"text",text:s},...e]:Array.isArray(e)?Hd(s,e)??[...s,...e]:e===""?s:[...s,{type:"text",text:e}]}function Uw(s,e){function a(r,u){if(typeof r!="object"||r===null||r===void 0)return r;if(u>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(c=>a(c,u+1));const o={};for(const c of Object.keys(r))o[c]=a(r[c],u+1);return o}return JSON.stringify(a(s,0),null,2)}class Zs extends Da{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}getType(){return this._getType()}constructor(e,a){typeof e=="string"&&(e={content:e,additional_kwargs:a,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const a=Uw(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${a}`}}function Sl(s,e){const a={...s};for(const[r,u]of Object.entries(e))if(a[r]==null)a[r]=u;else{if(u==null)continue;if(typeof a[r]!=typeof u||Array.isArray(a[r])!==Array.isArray(u))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof a[r]=="string"){if(r==="type")continue;a[r]+=u}else if(typeof a[r]=="object"&&!Array.isArray(a[r]))a[r]=Sl(a[r],u);else if(Array.isArray(a[r]))a[r]=Hd(a[r],u);else{if(a[r]===u)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return a}function Hd(s,e){if(!(s===void 0&&e===void 0)){if(s===void 0||e===void 0)return s||e;{const a=[...s];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const u=a.findIndex(o=>o.index===r.index);u!==-1?a[u]=Sl(a[u],r):a.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;a.push(r)}return a}}}class Lw extends Zs{}function Iw(s){return typeof s.role=="string"}function $w(s){return typeof(s==null?void 0:s._getType)=="function"}class Bw extends Zs{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,a,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:a}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function Pw(s){const e=[],a=[];for(const r of s)if(r.function){const u=r.function.name;try{const o=JSON.parse(r.function.arguments),c={name:u||"",args:o||{},id:r.id};e.push(c)}catch{a.push({name:u,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,a]}class ci extends Zs{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,a){var u;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:a??{}};else{r=e;const o=(u=r.additional_kwargs)==null?void 0:u.tool_calls,c=r.tool_calls;o!=null&&o.length>0&&(c===void 0||c.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(o!=null&&c===void 0){const[d,m]=Pw(o);r.tool_calls=d??[],r.invalid_tool_calls=m??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}class Pl extends Lw{constructor(e){let a;if(typeof e=="string")a={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)a={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],u=[];for(const o of e.tool_call_chunks){let c={};try{if(c=Ow(o.args||"{}"),c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");r.push({name:o.name??"",args:c,id:o.id,type:"tool_call"})}catch{u.push({name:o.name,args:o.args,id:o.id,error:"Malformed args.",type:"invalid_tool_call"})}}a={...e,tool_calls:r,invalid_tool_calls:u,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(a),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=a.tool_call_chunks??this.tool_call_chunks,this.tool_calls=a.tool_calls??this.tool_calls,this.invalid_tool_calls=a.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=a.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,u,o,c,d,m,p,g,b,v,w,A,T,C,M,B,D,ne,P,ee,fe,ae,ie,_e,et,yt,ft,J,V,k,H,q,K,S,U,Q,X,F,oe,he;const a={content:kw(this.content,e.content),additional_kwargs:Sl(this.additional_kwargs,e.additional_kwargs),response_metadata:Sl(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Ze=Hd(this.tool_call_chunks,e.tool_call_chunks);Ze!==void 0&&Ze.length>0&&(a.tool_call_chunks=Ze)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Ze={...(((u=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:u.audio)!==void 0||((c=(o=e.usage_metadata)==null?void 0:o.input_token_details)==null?void 0:c.audio)!==void 0)&&{audio:(((m=(d=this.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:m.audio)??0)+(((g=(p=e.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:g.audio)??0)},...(((v=(b=this.usage_metadata)==null?void 0:b.input_token_details)==null?void 0:v.cache_read)!==void 0||((A=(w=e.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:A.cache_read)!==void 0)&&{cache_read:(((C=(T=this.usage_metadata)==null?void 0:T.input_token_details)==null?void 0:C.cache_read)??0)+(((B=(M=e.usage_metadata)==null?void 0:M.input_token_details)==null?void 0:B.cache_read)??0)},...(((ne=(D=this.usage_metadata)==null?void 0:D.input_token_details)==null?void 0:ne.cache_creation)!==void 0||((ee=(P=e.usage_metadata)==null?void 0:P.input_token_details)==null?void 0:ee.cache_creation)!==void 0)&&{cache_creation:(((ae=(fe=this.usage_metadata)==null?void 0:fe.input_token_details)==null?void 0:ae.cache_creation)??0)+(((_e=(ie=e.usage_metadata)==null?void 0:ie.input_token_details)==null?void 0:_e.cache_creation)??0)}},xe={...(((yt=(et=this.usage_metadata)==null?void 0:et.output_token_details)==null?void 0:yt.audio)!==void 0||((J=(ft=e.usage_metadata)==null?void 0:ft.output_token_details)==null?void 0:J.audio)!==void 0)&&{audio:(((k=(V=this.usage_metadata)==null?void 0:V.output_token_details)==null?void 0:k.audio)??0)+(((q=(H=e.usage_metadata)==null?void 0:H.output_token_details)==null?void 0:q.audio)??0)},...(((S=(K=this.usage_metadata)==null?void 0:K.output_token_details)==null?void 0:S.reasoning)!==void 0||((Q=(U=e.usage_metadata)==null?void 0:U.output_token_details)==null?void 0:Q.reasoning)!==void 0)&&{reasoning:(((F=(X=this.usage_metadata)==null?void 0:X.output_token_details)==null?void 0:F.reasoning)??0)+(((he=(oe=e.usage_metadata)==null?void 0:oe.output_token_details)==null?void 0:he.reasoning)??0)}},ze=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},ke=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Kt={input_tokens:ze.input_tokens+ke.input_tokens,output_tokens:ze.output_tokens+ke.output_tokens,total_tokens:ze.total_tokens+ke.total_tokens,...Object.keys(Ze).length>0&&{input_token_details:Ze},...Object.keys(xe).length>0&&{output_token_details:xe}};a.usage_metadata=Kt}return new Pl(a)}}class Vs extends Zs{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class ty extends Zs{static lc_name(){return"SystemMessage"}_getType(){return"system"}}function zw(s,e){return s.lc_error_code=e,s.message=`${s.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,s}function $b(s){return!!(s&&typeof s=="object"&&"type"in s&&s.type==="tool_call")}class Hw extends Error{constructor(e,a){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=a}}function qw(s){return $b(s)?s:typeof s.id=="string"&&s.type==="function"&&typeof s.function=="object"&&s.function!==null&&"arguments"in s.function&&typeof s.function.arguments=="string"&&"name"in s.function&&typeof s.function.name=="string"?{id:s.id,args:JSON.parse(s.function.arguments),name:s.function.name,type:"tool_call"}:s}function Gw(s){return typeof s=="object"&&s!=null&&s.lc===1&&Array.isArray(s.id)&&s.kwargs!=null&&typeof s.kwargs=="object"}function hf(s){let e,a;if(Gw(s)){const r=s.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",a=s.kwargs}else{const{type:r,...u}=s;e=r,a=u}if(e==="human"||e==="user")return new Vs(a);if(e==="ai"||e==="assistant"){const{tool_calls:r,...u}=a;if(!Array.isArray(r))return new ci(a);const o=r.map(qw);return new ci({...u,tool_calls:o})}else{if(e==="system")return new ty(a);if(e==="developer")return new ty({...a,additional_kwargs:{...a.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in a)return new Bw({...a,content:a.content,tool_call_id:a.tool_call_id,name:a.name});throw zw(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(s,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Zw(s){if(typeof s=="string")return new Vs(s);if($w(s))return s;if(Array.isArray(s)){const[e,a]=s;return hf({type:e,content:a})}else if(Iw(s)){const{role:e,...a}=s;return hf({...a,type:e})}else return hf(s)}function qd(s,e="Human",a="AI"){const r=[];for(const u of s){let o;if(u._getType()==="human")o=e;else if(u._getType()==="ai")o=a;else if(u._getType()==="system")o="System";else if(u._getType()==="function")o="Function";else if(u._getType()==="tool")o="Tool";else if(u._getType()==="generic")o=u.role;else throw new Error(`Got unsupported message type: ${u._getType()}`);const c=u.name?`${u.name}, `:"",d=typeof u.content=="string"?u.content:JSON.stringify(u.content,null,2);r.push(`${o}: ${c}${d}`)}return r.join(`
`)}var Ce;(function(s){s.assertEqual=u=>u;function e(u){}s.assertIs=e;function a(u){throw new Error}s.assertNever=a,s.arrayToEnum=u=>{const o={};for(const c of u)o[c]=c;return o},s.getValidEnumValues=u=>{const o=s.objectKeys(u).filter(d=>typeof u[u[d]]!="number"),c={};for(const d of o)c[d]=u[d];return s.objectValues(c)},s.objectValues=u=>s.objectKeys(u).map(function(o){return u[o]}),s.objectKeys=typeof Object.keys=="function"?u=>Object.keys(u):u=>{const o=[];for(const c in u)Object.prototype.hasOwnProperty.call(u,c)&&o.push(c);return o},s.find=(u,o)=>{for(const c of u)if(o(c))return c},s.isInteger=typeof Number.isInteger=="function"?u=>Number.isInteger(u):u=>typeof u=="number"&&isFinite(u)&&Math.floor(u)===u;function r(u,o=" | "){return u.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}s.joinValues=r,s.jsonStringifyReplacer=(u,o)=>typeof o=="bigint"?o.toString():o})(Ce||(Ce={}));var xd;(function(s){s.mergeShapes=(e,a)=>({...e,...a})})(xd||(xd={}));const te=Ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ea=s=>{switch(typeof s){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(s)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(s)?te.array:s===null?te.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?te.promise:typeof Map<"u"&&s instanceof Map?te.map:typeof Set<"u"&&s instanceof Set?te.set:typeof Date<"u"&&s instanceof Date?te.date:te.object;default:return te.unknown}},Z=Ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Vw=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class Qt extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}format(e){const a=e||function(o){return o.message},r={_errors:[]},u=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(u);else if(c.code==="invalid_return_type")u(c.returnTypeError);else if(c.code==="invalid_arguments")u(c.argumentsError);else if(c.path.length===0)r._errors.push(a(c));else{let d=r,m=0;for(;m<c.path.length;){const p=c.path[m];m===c.path.length-1?(d[p]=d[p]||{_errors:[]},d[p]._errors.push(a(c))):d[p]=d[p]||{_errors:[]},d=d[p],m++}}};return u(this),r}static assert(e){if(!(e instanceof Qt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){const a={},r=[];for(const u of this.issues)u.path.length>0?(a[u.path[0]]=a[u.path[0]]||[],a[u.path[0]].push(e(u))):r.push(e(u));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}Qt.create=s=>new Qt(s);const fi=(s,e)=>{let a;switch(s.code){case Z.invalid_type:s.received===te.undefined?a="Required":a=`Expected ${s.expected}, received ${s.received}`;break;case Z.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(s.expected,Ce.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:a=`Unrecognized key(s) in object: ${Ce.joinValues(s.keys,", ")}`;break;case Z.invalid_union:a="Invalid input";break;case Z.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Ce.joinValues(s.options)}`;break;case Z.invalid_enum_value:a=`Invalid enum value. Expected ${Ce.joinValues(s.options)}, received '${s.received}'`;break;case Z.invalid_arguments:a="Invalid function arguments";break;case Z.invalid_return_type:a="Invalid function return type";break;case Z.invalid_date:a="Invalid date";break;case Z.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(a=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?a=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?a=`Invalid input: must end with "${s.validation.endsWith}"`:Ce.assertNever(s.validation):s.validation!=="regex"?a=`Invalid ${s.validation}`:a="Invalid";break;case Z.too_small:s.type==="array"?a=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?a=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?a=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?a=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:a="Invalid input";break;case Z.too_big:s.type==="array"?a=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?a=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?a=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?a=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?a=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:a="Invalid input";break;case Z.custom:a="Invalid input";break;case Z.invalid_intersection_types:a="Intersection results could not be merged";break;case Z.not_multiple_of:a=`Number must be a multiple of ${s.multipleOf}`;break;case Z.not_finite:a="Number must be finite";break;default:a=e.defaultError,Ce.assertNever(s)}return{message:a}};let Bb=fi;function Qw(s){Bb=s}function Tl(){return Bb}const Ol=s=>{const{data:e,path:a,errorMaps:r,issueData:u}=s,o=[...a,...u.path||[]],c={...u,path:o};if(u.message!==void 0)return{...u,path:o,message:u.message};let d="";const m=r.filter(p=>!!p).slice().reverse();for(const p of m)d=p(c,{data:e,defaultError:d}).message;return{...u,path:o,message:d}},Yw=[];function W(s,e){const a=Tl(),r=Ol({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,a,a===fi?void 0:fi].filter(u=>!!u)});s.common.issues.push(r)}class At{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){const r=[];for(const u of a){if(u.status==="aborted")return me;u.status==="dirty"&&e.dirty(),r.push(u.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,a){const r=[];for(const u of a){const o=await u.key,c=await u.value;r.push({key:o,value:c})}return At.mergeObjectSync(e,r)}static mergeObjectSync(e,a){const r={};for(const u of a){const{key:o,value:c}=u;if(o.status==="aborted"||c.status==="aborted")return me;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||u.alwaysSet)&&(r[o.value]=c.value)}return{status:e.value,value:r}}}const me=Object.freeze({status:"aborted"}),ii=s=>({status:"dirty",value:s}),Nt=s=>({status:"valid",value:s}),Nd=s=>s.status==="aborted",jd=s=>s.status==="dirty",pr=s=>s.status==="valid",xs=s=>typeof Promise<"u"&&s instanceof Promise;function Rl(s,e,a,r){if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(s)}function Pb(s,e,a,r,u){if(typeof e=="function"?s!==e||!u:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,a),a}var se;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(se||(se={}));var ws,As;class Mn{constructor(e,a,r,u){this._cachedPath=[],this.parent=e,this.data=a,this._path=r,this._key=u}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ny=(s,e)=>{if(pr(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new Qt(s.common.issues);return this._error=a,this._error}}};function ye(s){if(!s)return{};const{errorMap:e,invalid_type_error:a,required_error:r,description:u}=s;if(e&&(a||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:u}:{errorMap:(c,d)=>{var m,p;const{message:g}=s;return c.code==="invalid_enum_value"?{message:g??d.defaultError}:typeof d.data>"u"?{message:(m=g??r)!==null&&m!==void 0?m:d.defaultError}:c.code!=="invalid_type"?{message:d.defaultError}:{message:(p=g??a)!==null&&p!==void 0?p:d.defaultError}},description:u}}class Ae{get description(){return this._def.description}_getType(e){return ea(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:ea(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new At,ctx:{common:e.parent.common,data:e.data,parsedType:ea(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const a=this._parse(e);if(xs(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){const a=this._parse(e);return Promise.resolve(a)}parse(e,a){const r=this.safeParse(e,a);if(r.success)return r.data;throw r.error}safeParse(e,a){var r;const u={common:{issues:[],async:(r=a==null?void 0:a.async)!==null&&r!==void 0?r:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ea(e)},o=this._parseSync({data:e,path:u.path,parent:u});return ny(u,o)}"~validate"(e){var a,r;const u={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ea(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:u});return pr(o)?{value:o.value}:{issues:u.common.issues}}catch(o){!((r=(a=o==null?void 0:o.message)===null||a===void 0?void 0:a.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),u.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:u}).then(o=>pr(o)?{value:o.value}:{issues:u.common.issues})}async parseAsync(e,a){const r=await this.safeParseAsync(e,a);if(r.success)return r.data;throw r.error}async safeParseAsync(e,a){const r={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ea(e)},u=this._parse({data:e,path:r.path,parent:r}),o=await(xs(u)?u:Promise.resolve(u));return ny(r,o)}refine(e,a){const r=u=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(u):a;return this._refinement((u,o)=>{const c=e(u),d=()=>o.addIssue({code:Z.custom,...r(u)});return typeof Promise<"u"&&c instanceof Promise?c.then(m=>m?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,a){return this._refinement((r,u)=>e(r)?!0:(u.addIssue(typeof a=="function"?a(r,u):a),!1))}_refinement(e){return new wn({schema:this,typeName:Y.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return vn.create(this,this._def)}nullable(){return Ia.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return bn.create(this)}promise(){return hi.create(this,this._def)}or(e){return Ds.create([this,e],this._def)}and(e){return ks.create(this,e,this._def)}transform(e){return new wn({...ye(this._def),schema:this,typeName:Y.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const a=typeof e=="function"?e:()=>e;return new Bs({...ye(this._def),innerType:this,defaultValue:a,typeName:Y.ZodDefault})}brand(){return new Gd({typeName:Y.ZodBranded,type:this,...ye(this._def)})}catch(e){const a=typeof e=="function"?e:()=>e;return new Ps({...ye(this._def),innerType:this,catchValue:a,typeName:Y.ZodCatch})}describe(e){const a=this.constructor;return new a({...this._def,description:e})}pipe(e){return Qs.create(this,e)}readonly(){return zs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Kw=/^c[^\s-]{8,}$/i,Fw=/^[0-9a-z]+$/,Xw=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Jw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ww=/^[a-z0-9_-]{21}$/i,eA=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tA=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nA=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let mf;const rA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,iA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,sA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,lA=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,oA=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,zb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",cA=new RegExp(`^${zb}$`);function Hb(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function fA(s){return new RegExp(`^${Hb(s)}$`)}function qb(s){let e=`${zb}T${Hb(s)}`;const a=[];return a.push(s.local?"Z?":"Z"),s.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function dA(s,e){return!!((e==="v4"||!e)&&rA.test(s)||(e==="v6"||!e)&&sA.test(s))}function hA(s,e){if(!eA.test(s))return!1;try{const[a]=s.split("."),r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),u=JSON.parse(atob(r));return!(typeof u!="object"||u===null||!u.typ||!u.alg||e&&u.alg!==e)}catch{return!1}}function mA(s,e){return!!((e==="v4"||!e)&&iA.test(s)||(e==="v6"||!e)&&uA.test(s))}class yn extends Ae{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const o=this._getOrReturnCtx(e);return W(o,{code:Z.invalid_type,expected:te.string,received:o.parsedType}),me}const r=new At;let u;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(u=this._getOrReturnCtx(e,u),W(u,{code:Z.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(u=this._getOrReturnCtx(e,u),W(u,{code:Z.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const c=e.data.length>o.value,d=e.data.length<o.value;(c||d)&&(u=this._getOrReturnCtx(e,u),c?W(u,{code:Z.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):d&&W(u,{code:Z.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")nA.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"email",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")mf||(mf=new RegExp(aA,"u")),mf.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"emoji",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Jw.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"uuid",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")Ww.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"nanoid",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Kw.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"cuid",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Fw.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"cuid2",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Xw.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"ulid",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{u=this._getOrReturnCtx(e,u),W(u,{validation:"url",code:Z.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"regex",code:Z.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(u=this._getOrReturnCtx(e,u),W(u,{code:Z.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(u=this._getOrReturnCtx(e,u),W(u,{code:Z.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(u=this._getOrReturnCtx(e,u),W(u,{code:Z.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?qb(o).test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{code:Z.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?cA.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{code:Z.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?fA(o).test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{code:Z.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?tA.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"duration",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?dA(e.data,o.version)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"ip",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?hA(e.data,o.alg)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"jwt",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?mA(e.data,o.version)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"cidr",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?lA.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"base64",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?oA.test(e.data)||(u=this._getOrReturnCtx(e,u),W(u,{validation:"base64url",code:Z.invalid_string,message:o.message}),r.dirty()):Ce.assertNever(o);return{status:r.value,value:e.data}}_regex(e,a,r){return this.refinement(u=>e.test(u),{validation:a,code:Z.invalid_string,...se.errToObj(r)})}_addCheck(e){return new yn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...se.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...se.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...se.errToObj(e)})}datetime(e){var a,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...se.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...se.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...se.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...se.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...se.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...se.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...se.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...se.errToObj(a)})}nonempty(e){return this.min(1,se.errToObj(e))}trim(){return new yn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new yn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new yn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}}yn.create=s=>{var e;return new yn({checks:[],typeName:Y.ZodString,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...ye(s)})};function pA(s,e){const a=(s.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,u=a>r?a:r,o=parseInt(s.toFixed(u).replace(".","")),c=parseInt(e.toFixed(u).replace(".",""));return o%c/Math.pow(10,u)}class ka extends Ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const o=this._getOrReturnCtx(e);return W(o,{code:Z.invalid_type,expected:te.number,received:o.parsedType}),me}let r;const u=new At;for(const o of this._def.checks)o.kind==="int"?Ce.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),W(r,{code:Z.invalid_type,expected:"integer",received:"float",message:o.message}),u.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),W(r,{code:Z.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),u.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),W(r,{code:Z.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),u.dirty()):o.kind==="multipleOf"?pA(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),W(r,{code:Z.not_multiple_of,multipleOf:o.value,message:o.message}),u.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),W(r,{code:Z.not_finite,message:o.message}),u.dirty()):Ce.assertNever(o);return{status:u.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,se.toString(a))}gt(e,a){return this.setLimit("min",e,!1,se.toString(a))}lte(e,a){return this.setLimit("max",e,!0,se.toString(a))}lt(e,a){return this.setLimit("max",e,!1,se.toString(a))}setLimit(e,a,r,u){return new ka({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:r,message:se.toString(u)}]})}_addCheck(e){return new ka({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ce.isInteger(e.value))}get isFinite(){let e=null,a=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(a===null||r.value>a)&&(a=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(a)&&Number.isFinite(e)}}ka.create=s=>new ka({checks:[],typeName:Y.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...ye(s)});class Ua extends Ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==te.bigint)return this._getInvalidInput(e);let r;const u=new At;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),W(r,{code:Z.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),u.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),W(r,{code:Z.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),u.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),W(r,{code:Z.not_multiple_of,multipleOf:o.value,message:o.message}),u.dirty()):Ce.assertNever(o);return{status:u.value,value:e.data}}_getInvalidInput(e){const a=this._getOrReturnCtx(e);return W(a,{code:Z.invalid_type,expected:te.bigint,received:a.parsedType}),me}gte(e,a){return this.setLimit("min",e,!0,se.toString(a))}gt(e,a){return this.setLimit("min",e,!1,se.toString(a))}lte(e,a){return this.setLimit("max",e,!0,se.toString(a))}lt(e,a){return this.setLimit("max",e,!1,se.toString(a))}setLimit(e,a,r,u){return new Ua({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:r,message:se.toString(u)}]})}_addCheck(e){return new Ua({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(a)})}get minValue(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}}Ua.create=s=>{var e;return new Ua({checks:[],typeName:Y.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...ye(s)})};class Ns extends Ae{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){const r=this._getOrReturnCtx(e);return W(r,{code:Z.invalid_type,expected:te.boolean,received:r.parsedType}),me}return Nt(e.data)}}Ns.create=s=>new Ns({typeName:Y.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...ye(s)});class gr extends Ae{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const o=this._getOrReturnCtx(e);return W(o,{code:Z.invalid_type,expected:te.date,received:o.parsedType}),me}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return W(o,{code:Z.invalid_date}),me}const r=new At;let u;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(u=this._getOrReturnCtx(e,u),W(u,{code:Z.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(u=this._getOrReturnCtx(e,u),W(u,{code:Z.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Ce.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new gr({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(a)})}get minDate(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}}gr.create=s=>new gr({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:Y.ZodDate,...ye(s)});class Cl extends Ae{_parse(e){if(this._getType(e)!==te.symbol){const r=this._getOrReturnCtx(e);return W(r,{code:Z.invalid_type,expected:te.symbol,received:r.parsedType}),me}return Nt(e.data)}}Cl.create=s=>new Cl({typeName:Y.ZodSymbol,...ye(s)});class js extends Ae{_parse(e){if(this._getType(e)!==te.undefined){const r=this._getOrReturnCtx(e);return W(r,{code:Z.invalid_type,expected:te.undefined,received:r.parsedType}),me}return Nt(e.data)}}js.create=s=>new js({typeName:Y.ZodUndefined,...ye(s)});class Ms extends Ae{_parse(e){if(this._getType(e)!==te.null){const r=this._getOrReturnCtx(e);return W(r,{code:Z.invalid_type,expected:te.null,received:r.parsedType}),me}return Nt(e.data)}}Ms.create=s=>new Ms({typeName:Y.ZodNull,...ye(s)});class di extends Ae{constructor(){super(...arguments),this._any=!0}_parse(e){return Nt(e.data)}}di.create=s=>new di({typeName:Y.ZodAny,...ye(s)});class dr extends Ae{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nt(e.data)}}dr.create=s=>new dr({typeName:Y.ZodUnknown,...ye(s)});class na extends Ae{_parse(e){const a=this._getOrReturnCtx(e);return W(a,{code:Z.invalid_type,expected:te.never,received:a.parsedType}),me}}na.create=s=>new na({typeName:Y.ZodNever,...ye(s)});class xl extends Ae{_parse(e){if(this._getType(e)!==te.undefined){const r=this._getOrReturnCtx(e);return W(r,{code:Z.invalid_type,expected:te.void,received:r.parsedType}),me}return Nt(e.data)}}xl.create=s=>new xl({typeName:Y.ZodVoid,...ye(s)});class bn extends Ae{_parse(e){const{ctx:a,status:r}=this._processInputParams(e),u=this._def;if(a.parsedType!==te.array)return W(a,{code:Z.invalid_type,expected:te.array,received:a.parsedType}),me;if(u.exactLength!==null){const c=a.data.length>u.exactLength.value,d=a.data.length<u.exactLength.value;(c||d)&&(W(a,{code:c?Z.too_big:Z.too_small,minimum:d?u.exactLength.value:void 0,maximum:c?u.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:u.exactLength.message}),r.dirty())}if(u.minLength!==null&&a.data.length<u.minLength.value&&(W(a,{code:Z.too_small,minimum:u.minLength.value,type:"array",inclusive:!0,exact:!1,message:u.minLength.message}),r.dirty()),u.maxLength!==null&&a.data.length>u.maxLength.value&&(W(a,{code:Z.too_big,maximum:u.maxLength.value,type:"array",inclusive:!0,exact:!1,message:u.maxLength.message}),r.dirty()),a.common.async)return Promise.all([...a.data].map((c,d)=>u.type._parseAsync(new Mn(a,c,a.path,d)))).then(c=>At.mergeArray(r,c));const o=[...a.data].map((c,d)=>u.type._parseSync(new Mn(a,c,a.path,d)));return At.mergeArray(r,o)}get element(){return this._def.type}min(e,a){return new bn({...this._def,minLength:{value:e,message:se.toString(a)}})}max(e,a){return new bn({...this._def,maxLength:{value:e,message:se.toString(a)}})}length(e,a){return new bn({...this._def,exactLength:{value:e,message:se.toString(a)}})}nonempty(e){return this.min(1,e)}}bn.create=(s,e)=>new bn({type:s,minLength:null,maxLength:null,exactLength:null,typeName:Y.ZodArray,...ye(e)});function ri(s){if(s instanceof Ge){const e={};for(const a in s.shape){const r=s.shape[a];e[a]=vn.create(ri(r))}return new Ge({...s._def,shape:()=>e})}else return s instanceof bn?new bn({...s._def,type:ri(s.element)}):s instanceof vn?vn.create(ri(s.unwrap())):s instanceof Ia?Ia.create(ri(s.unwrap())):s instanceof Dn?Dn.create(s.items.map(e=>ri(e))):s}class Ge extends Ae{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),a=Ce.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==te.object){const p=this._getOrReturnCtx(e);return W(p,{code:Z.invalid_type,expected:te.object,received:p.parsedType}),me}const{status:r,ctx:u}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),d=[];if(!(this._def.catchall instanceof na&&this._def.unknownKeys==="strip"))for(const p in u.data)c.includes(p)||d.push(p);const m=[];for(const p of c){const g=o[p],b=u.data[p];m.push({key:{status:"valid",value:p},value:g._parse(new Mn(u,b,u.path,p)),alwaysSet:p in u.data})}if(this._def.catchall instanceof na){const p=this._def.unknownKeys;if(p==="passthrough")for(const g of d)m.push({key:{status:"valid",value:g},value:{status:"valid",value:u.data[g]}});else if(p==="strict")d.length>0&&(W(u,{code:Z.unrecognized_keys,keys:d}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const g of d){const b=u.data[g];m.push({key:{status:"valid",value:g},value:p._parse(new Mn(u,b,u.path,g)),alwaysSet:g in u.data})}}return u.common.async?Promise.resolve().then(async()=>{const p=[];for(const g of m){const b=await g.key,v=await g.value;p.push({key:b,value:v,alwaysSet:g.alwaysSet})}return p}).then(p=>At.mergeObjectSync(r,p)):At.mergeObjectSync(r,m)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new Ge({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,r)=>{var u,o,c,d;const m=(c=(o=(u=this._def).errorMap)===null||o===void 0?void 0:o.call(u,a,r).message)!==null&&c!==void 0?c:r.defaultError;return a.code==="unrecognized_keys"?{message:(d=se.errToObj(e).message)!==null&&d!==void 0?d:m}:{message:m}}}:{}})}strip(){return new Ge({...this._def,unknownKeys:"strip"})}passthrough(){return new Ge({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ge({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ge({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Y.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new Ge({...this._def,catchall:e})}pick(e){const a={};return Ce.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(a[r]=this.shape[r])}),new Ge({...this._def,shape:()=>a})}omit(e){const a={};return Ce.objectKeys(this.shape).forEach(r=>{e[r]||(a[r]=this.shape[r])}),new Ge({...this._def,shape:()=>a})}deepPartial(){return ri(this)}partial(e){const a={};return Ce.objectKeys(this.shape).forEach(r=>{const u=this.shape[r];e&&!e[r]?a[r]=u:a[r]=u.optional()}),new Ge({...this._def,shape:()=>a})}required(e){const a={};return Ce.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])a[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof vn;)o=o._def.innerType;a[r]=o}}),new Ge({...this._def,shape:()=>a})}keyof(){return Gb(Ce.objectKeys(this.shape))}}Ge.create=(s,e)=>new Ge({shape:()=>s,unknownKeys:"strip",catchall:na.create(),typeName:Y.ZodObject,...ye(e)});Ge.strictCreate=(s,e)=>new Ge({shape:()=>s,unknownKeys:"strict",catchall:na.create(),typeName:Y.ZodObject,...ye(e)});Ge.lazycreate=(s,e)=>new Ge({shape:s,unknownKeys:"strip",catchall:na.create(),typeName:Y.ZodObject,...ye(e)});class Ds extends Ae{_parse(e){const{ctx:a}=this._processInputParams(e),r=this._def.options;function u(o){for(const d of o)if(d.result.status==="valid")return d.result;for(const d of o)if(d.result.status==="dirty")return a.common.issues.push(...d.ctx.common.issues),d.result;const c=o.map(d=>new Qt(d.ctx.common.issues));return W(a,{code:Z.invalid_union,unionErrors:c}),me}if(a.common.async)return Promise.all(r.map(async o=>{const c={...a,common:{...a.common,issues:[]},parent:null};return{result:await o._parseAsync({data:a.data,path:a.path,parent:c}),ctx:c}})).then(u);{let o;const c=[];for(const m of r){const p={...a,common:{...a.common,issues:[]},parent:null},g=m._parseSync({data:a.data,path:a.path,parent:p});if(g.status==="valid")return g;g.status==="dirty"&&!o&&(o={result:g,ctx:p}),p.common.issues.length&&c.push(p.common.issues)}if(o)return a.common.issues.push(...o.ctx.common.issues),o.result;const d=c.map(m=>new Qt(m));return W(a,{code:Z.invalid_union,unionErrors:d}),me}}get options(){return this._def.options}}Ds.create=(s,e)=>new Ds({options:s,typeName:Y.ZodUnion,...ye(e)});const Wn=s=>s instanceof Ls?Wn(s.schema):s instanceof wn?Wn(s.innerType()):s instanceof Is?[s.value]:s instanceof La?s.options:s instanceof $s?Ce.objectValues(s.enum):s instanceof Bs?Wn(s._def.innerType):s instanceof js?[void 0]:s instanceof Ms?[null]:s instanceof vn?[void 0,...Wn(s.unwrap())]:s instanceof Ia?[null,...Wn(s.unwrap())]:s instanceof Gd||s instanceof zs?Wn(s.unwrap()):s instanceof Ps?Wn(s._def.innerType):[];class zl extends Ae{_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==te.object)return W(a,{code:Z.invalid_type,expected:te.object,received:a.parsedType}),me;const r=this.discriminator,u=a.data[r],o=this.optionsMap.get(u);return o?a.common.async?o._parseAsync({data:a.data,path:a.path,parent:a}):o._parseSync({data:a.data,path:a.path,parent:a}):(W(a,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,r){const u=new Map;for(const o of a){const c=Wn(o.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const d of c){if(u.has(d))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(d)}`);u.set(d,o)}}return new zl({typeName:Y.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:u,...ye(r)})}}function Md(s,e){const a=ea(s),r=ea(e);if(s===e)return{valid:!0,data:s};if(a===te.object&&r===te.object){const u=Ce.objectKeys(e),o=Ce.objectKeys(s).filter(d=>u.indexOf(d)!==-1),c={...s,...e};for(const d of o){const m=Md(s[d],e[d]);if(!m.valid)return{valid:!1};c[d]=m.data}return{valid:!0,data:c}}else if(a===te.array&&r===te.array){if(s.length!==e.length)return{valid:!1};const u=[];for(let o=0;o<s.length;o++){const c=s[o],d=e[o],m=Md(c,d);if(!m.valid)return{valid:!1};u.push(m.data)}return{valid:!0,data:u}}else return a===te.date&&r===te.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class ks extends Ae{_parse(e){const{status:a,ctx:r}=this._processInputParams(e),u=(o,c)=>{if(Nd(o)||Nd(c))return me;const d=Md(o.value,c.value);return d.valid?((jd(o)||jd(c))&&a.dirty(),{status:a.value,value:d.data}):(W(r,{code:Z.invalid_intersection_types}),me)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,c])=>u(o,c)):u(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ks.create=(s,e,a)=>new ks({left:s,right:e,typeName:Y.ZodIntersection,...ye(a)});class Dn extends Ae{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.array)return W(r,{code:Z.invalid_type,expected:te.array,received:r.parsedType}),me;if(r.data.length<this._def.items.length)return W(r,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&r.data.length>this._def.items.length&&(W(r,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const o=[...r.data].map((c,d)=>{const m=this._def.items[d]||this._def.rest;return m?m._parse(new Mn(r,c,r.path,d)):null}).filter(c=>!!c);return r.common.async?Promise.all(o).then(c=>At.mergeArray(a,c)):At.mergeArray(a,o)}get items(){return this._def.items}rest(e){return new Dn({...this._def,rest:e})}}Dn.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dn({items:s,typeName:Y.ZodTuple,rest:null,...ye(e)})};class Us extends Ae{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.object)return W(r,{code:Z.invalid_type,expected:te.object,received:r.parsedType}),me;const u=[],o=this._def.keyType,c=this._def.valueType;for(const d in r.data)u.push({key:o._parse(new Mn(r,d,r.path,d)),value:c._parse(new Mn(r,r.data[d],r.path,d)),alwaysSet:d in r.data});return r.common.async?At.mergeObjectAsync(a,u):At.mergeObjectSync(a,u)}get element(){return this._def.valueType}static create(e,a,r){return a instanceof Ae?new Us({keyType:e,valueType:a,typeName:Y.ZodRecord,...ye(r)}):new Us({keyType:yn.create(),valueType:e,typeName:Y.ZodRecord,...ye(a)})}}class Nl extends Ae{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.map)return W(r,{code:Z.invalid_type,expected:te.map,received:r.parsedType}),me;const u=this._def.keyType,o=this._def.valueType,c=[...r.data.entries()].map(([d,m],p)=>({key:u._parse(new Mn(r,d,r.path,[p,"key"])),value:o._parse(new Mn(r,m,r.path,[p,"value"]))}));if(r.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const m of c){const p=await m.key,g=await m.value;if(p.status==="aborted"||g.status==="aborted")return me;(p.status==="dirty"||g.status==="dirty")&&a.dirty(),d.set(p.value,g.value)}return{status:a.value,value:d}})}else{const d=new Map;for(const m of c){const p=m.key,g=m.value;if(p.status==="aborted"||g.status==="aborted")return me;(p.status==="dirty"||g.status==="dirty")&&a.dirty(),d.set(p.value,g.value)}return{status:a.value,value:d}}}}Nl.create=(s,e,a)=>new Nl({valueType:e,keyType:s,typeName:Y.ZodMap,...ye(a)});class yr extends Ae{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.set)return W(r,{code:Z.invalid_type,expected:te.set,received:r.parsedType}),me;const u=this._def;u.minSize!==null&&r.data.size<u.minSize.value&&(W(r,{code:Z.too_small,minimum:u.minSize.value,type:"set",inclusive:!0,exact:!1,message:u.minSize.message}),a.dirty()),u.maxSize!==null&&r.data.size>u.maxSize.value&&(W(r,{code:Z.too_big,maximum:u.maxSize.value,type:"set",inclusive:!0,exact:!1,message:u.maxSize.message}),a.dirty());const o=this._def.valueType;function c(m){const p=new Set;for(const g of m){if(g.status==="aborted")return me;g.status==="dirty"&&a.dirty(),p.add(g.value)}return{status:a.value,value:p}}const d=[...r.data.values()].map((m,p)=>o._parse(new Mn(r,m,r.path,p)));return r.common.async?Promise.all(d).then(m=>c(m)):c(d)}min(e,a){return new yr({...this._def,minSize:{value:e,message:se.toString(a)}})}max(e,a){return new yr({...this._def,maxSize:{value:e,message:se.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}}yr.create=(s,e)=>new yr({valueType:s,minSize:null,maxSize:null,typeName:Y.ZodSet,...ye(e)});class oi extends Ae{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==te.function)return W(a,{code:Z.invalid_type,expected:te.function,received:a.parsedType}),me;function r(d,m){return Ol({data:d,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Tl(),fi].filter(p=>!!p),issueData:{code:Z.invalid_arguments,argumentsError:m}})}function u(d,m){return Ol({data:d,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Tl(),fi].filter(p=>!!p),issueData:{code:Z.invalid_return_type,returnTypeError:m}})}const o={errorMap:a.common.contextualErrorMap},c=a.data;if(this._def.returns instanceof hi){const d=this;return Nt(async function(...m){const p=new Qt([]),g=await d._def.args.parseAsync(m,o).catch(w=>{throw p.addIssue(r(m,w)),p}),b=await Reflect.apply(c,this,g);return await d._def.returns._def.type.parseAsync(b,o).catch(w=>{throw p.addIssue(u(b,w)),p})})}else{const d=this;return Nt(function(...m){const p=d._def.args.safeParse(m,o);if(!p.success)throw new Qt([r(m,p.error)]);const g=Reflect.apply(c,this,p.data),b=d._def.returns.safeParse(g,o);if(!b.success)throw new Qt([u(g,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new oi({...this._def,args:Dn.create(e).rest(dr.create())})}returns(e){return new oi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,r){return new oi({args:e||Dn.create([]).rest(dr.create()),returns:a||dr.create(),typeName:Y.ZodFunction,...ye(r)})}}class Ls extends Ae{get schema(){return this._def.getter()}_parse(e){const{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}Ls.create=(s,e)=>new Ls({getter:s,typeName:Y.ZodLazy,...ye(e)});class Is extends Ae{_parse(e){if(e.data!==this._def.value){const a=this._getOrReturnCtx(e);return W(a,{received:a.data,code:Z.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Is.create=(s,e)=>new Is({value:s,typeName:Y.ZodLiteral,...ye(e)});function Gb(s,e){return new La({values:s,typeName:Y.ZodEnum,...ye(e)})}class La extends Ae{constructor(){super(...arguments),ws.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const a=this._getOrReturnCtx(e),r=this._def.values;return W(a,{expected:Ce.joinValues(r),received:a.parsedType,code:Z.invalid_type}),me}if(Rl(this,ws)||Pb(this,ws,new Set(this._def.values)),!Rl(this,ws).has(e.data)){const a=this._getOrReturnCtx(e),r=this._def.values;return W(a,{received:a.data,code:Z.invalid_enum_value,options:r}),me}return Nt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const a of this._def.values)e[a]=a;return e}get Values(){const e={};for(const a of this._def.values)e[a]=a;return e}get Enum(){const e={};for(const a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return La.create(e,{...this._def,...a})}exclude(e,a=this._def){return La.create(this.options.filter(r=>!e.includes(r)),{...this._def,...a})}}ws=new WeakMap;La.create=Gb;class $s extends Ae{constructor(){super(...arguments),As.set(this,void 0)}_parse(e){const a=Ce.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==te.string&&r.parsedType!==te.number){const u=Ce.objectValues(a);return W(r,{expected:Ce.joinValues(u),received:r.parsedType,code:Z.invalid_type}),me}if(Rl(this,As)||Pb(this,As,new Set(Ce.getValidEnumValues(this._def.values))),!Rl(this,As).has(e.data)){const u=Ce.objectValues(a);return W(r,{received:r.data,code:Z.invalid_enum_value,options:u}),me}return Nt(e.data)}get enum(){return this._def.values}}As=new WeakMap;$s.create=(s,e)=>new $s({values:s,typeName:Y.ZodNativeEnum,...ye(e)});class hi extends Ae{unwrap(){return this._def.type}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==te.promise&&a.common.async===!1)return W(a,{code:Z.invalid_type,expected:te.promise,received:a.parsedType}),me;const r=a.parsedType===te.promise?a.data:Promise.resolve(a.data);return Nt(r.then(u=>this._def.type.parseAsync(u,{path:a.path,errorMap:a.common.contextualErrorMap})))}}hi.create=(s,e)=>new hi({type:s,typeName:Y.ZodPromise,...ye(e)});class wn extends Ae{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:a,ctx:r}=this._processInputParams(e),u=this._def.effect||null,o={addIssue:c=>{W(r,c),c.fatal?a.abort():a.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),u.type==="preprocess"){const c=u.transform(r.data,o);if(r.common.async)return Promise.resolve(c).then(async d=>{if(a.value==="aborted")return me;const m=await this._def.schema._parseAsync({data:d,path:r.path,parent:r});return m.status==="aborted"?me:m.status==="dirty"||a.value==="dirty"?ii(m.value):m});{if(a.value==="aborted")return me;const d=this._def.schema._parseSync({data:c,path:r.path,parent:r});return d.status==="aborted"?me:d.status==="dirty"||a.value==="dirty"?ii(d.value):d}}if(u.type==="refinement"){const c=d=>{const m=u.refinement(d,o);if(r.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(r.common.async===!1){const d=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return d.status==="aborted"?me:(d.status==="dirty"&&a.dirty(),c(d.value),{status:a.value,value:d.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(d=>d.status==="aborted"?me:(d.status==="dirty"&&a.dirty(),c(d.value).then(()=>({status:a.value,value:d.value}))))}if(u.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!pr(c))return c;const d=u.transform(c.value,o);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:d}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>pr(c)?Promise.resolve(u.transform(c.value,o)).then(d=>({status:a.value,value:d})):c);Ce.assertNever(u)}}wn.create=(s,e,a)=>new wn({schema:s,typeName:Y.ZodEffects,effect:e,...ye(a)});wn.createWithPreprocess=(s,e,a)=>new wn({schema:e,effect:{type:"preprocess",transform:s},typeName:Y.ZodEffects,...ye(a)});class vn extends Ae{_parse(e){return this._getType(e)===te.undefined?Nt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vn.create=(s,e)=>new vn({innerType:s,typeName:Y.ZodOptional,...ye(e)});class Ia extends Ae{_parse(e){return this._getType(e)===te.null?Nt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ia.create=(s,e)=>new Ia({innerType:s,typeName:Y.ZodNullable,...ye(e)});class Bs extends Ae{_parse(e){const{ctx:a}=this._processInputParams(e);let r=a.data;return a.parsedType===te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}Bs.create=(s,e)=>new Bs({innerType:s,typeName:Y.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ye(e)});class Ps extends Ae{_parse(e){const{ctx:a}=this._processInputParams(e),r={...a,common:{...a.common,issues:[]}},u=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return xs(u)?u.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Qt(r.common.issues)},input:r.data})})):{status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new Qt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ps.create=(s,e)=>new Ps({innerType:s,typeName:Y.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ye(e)});class jl extends Ae{_parse(e){if(this._getType(e)!==te.nan){const r=this._getOrReturnCtx(e);return W(r,{code:Z.invalid_type,expected:te.nan,received:r.parsedType}),me}return{status:"valid",value:e.data}}}jl.create=s=>new jl({typeName:Y.ZodNaN,...ye(s)});const gA=Symbol("zod_brand");class Gd extends Ae{_parse(e){const{ctx:a}=this._processInputParams(e),r=a.data;return this._def.type._parse({data:r,path:a.path,parent:a})}unwrap(){return this._def.type}}class Qs extends Ae{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?me:o.status==="dirty"?(a.dirty(),ii(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const u=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?me:u.status==="dirty"?(a.dirty(),{status:"dirty",value:u.value}):this._def.out._parseSync({data:u.value,path:r.path,parent:r})}}static create(e,a){return new Qs({in:e,out:a,typeName:Y.ZodPipeline})}}class zs extends Ae{_parse(e){const a=this._def.innerType._parse(e),r=u=>(pr(u)&&(u.value=Object.freeze(u.value)),u);return xs(a)?a.then(u=>r(u)):r(a)}unwrap(){return this._def.innerType}}zs.create=(s,e)=>new zs({innerType:s,typeName:Y.ZodReadonly,...ye(e)});function ay(s,e){const a=typeof s=="function"?s(e):typeof s=="string"?{message:s}:s;return typeof a=="string"?{message:a}:a}function Zb(s,e={},a){return s?di.create().superRefine((r,u)=>{var o,c;const d=s(r);if(d instanceof Promise)return d.then(m=>{var p,g;if(!m){const b=ay(e,r),v=(g=(p=b.fatal)!==null&&p!==void 0?p:a)!==null&&g!==void 0?g:!0;u.addIssue({code:"custom",...b,fatal:v})}});if(!d){const m=ay(e,r),p=(c=(o=m.fatal)!==null&&o!==void 0?o:a)!==null&&c!==void 0?c:!0;u.addIssue({code:"custom",...m,fatal:p})}}):di.create()}const yA={object:Ge.lazycreate};var Y;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(Y||(Y={}));const bA=(s,e={message:`Input not instance of ${s.name}`})=>Zb(a=>a instanceof s,e),Vb=yn.create,Qb=ka.create,vA=jl.create,_A=Ua.create,Yb=Ns.create,wA=gr.create,AA=Cl.create,EA=js.create,SA=Ms.create,TA=di.create,OA=dr.create,RA=na.create,CA=xl.create,xA=bn.create,NA=Ge.create,jA=Ge.strictCreate,MA=Ds.create,DA=zl.create,kA=ks.create,UA=Dn.create,LA=Us.create,IA=Nl.create,$A=yr.create,BA=oi.create,PA=Ls.create,zA=Is.create,HA=La.create,qA=$s.create,GA=hi.create,ry=wn.create,ZA=vn.create,VA=Ia.create,QA=wn.createWithPreprocess,YA=Qs.create,KA=()=>Vb().optional(),FA=()=>Qb().optional(),XA=()=>Yb().optional(),JA={string:s=>yn.create({...s,coerce:!0}),number:s=>ka.create({...s,coerce:!0}),boolean:s=>Ns.create({...s,coerce:!0}),bigint:s=>Ua.create({...s,coerce:!0}),date:s=>gr.create({...s,coerce:!0})},WA=me;var Es=Object.freeze({__proto__:null,defaultErrorMap:fi,setErrorMap:Qw,getErrorMap:Tl,makeIssue:Ol,EMPTY_PATH:Yw,addIssueToContext:W,ParseStatus:At,INVALID:me,DIRTY:ii,OK:Nt,isAborted:Nd,isDirty:jd,isValid:pr,isAsync:xs,get util(){return Ce},get objectUtil(){return xd},ZodParsedType:te,getParsedType:ea,ZodType:Ae,datetimeRegex:qb,ZodString:yn,ZodNumber:ka,ZodBigInt:Ua,ZodBoolean:Ns,ZodDate:gr,ZodSymbol:Cl,ZodUndefined:js,ZodNull:Ms,ZodAny:di,ZodUnknown:dr,ZodNever:na,ZodVoid:xl,ZodArray:bn,ZodObject:Ge,ZodUnion:Ds,ZodDiscriminatedUnion:zl,ZodIntersection:ks,ZodTuple:Dn,ZodRecord:Us,ZodMap:Nl,ZodSet:yr,ZodFunction:oi,ZodLazy:Ls,ZodLiteral:Is,ZodEnum:La,ZodNativeEnum:$s,ZodPromise:hi,ZodEffects:wn,ZodTransformer:wn,ZodOptional:vn,ZodNullable:Ia,ZodDefault:Bs,ZodCatch:Ps,ZodNaN:jl,BRAND:gA,ZodBranded:Gd,ZodPipeline:Qs,ZodReadonly:zs,custom:Zb,Schema:Ae,ZodSchema:Ae,late:yA,get ZodFirstPartyTypeKind(){return Y},coerce:JA,any:TA,array:xA,bigint:_A,boolean:Yb,date:wA,discriminatedUnion:DA,effect:ry,enum:HA,function:BA,instanceof:bA,intersection:kA,lazy:PA,literal:zA,map:IA,nan:vA,nativeEnum:qA,never:RA,null:SA,nullable:VA,number:Qb,object:NA,oboolean:XA,onumber:FA,optional:ZA,ostring:KA,pipeline:YA,preprocess:QA,promise:GA,record:LA,set:$A,strictObject:jA,string:Vb,symbol:AA,transformer:ry,tuple:UA,undefined:EA,union:MA,unknown:OA,void:CA,NEVER:WA,ZodIssueCode:Z,quotelessJson:Vw,ZodError:Qt}),ys={exports:{}},pf={},gf,iy;function eE(){if(iy)return gf;iy=1;function s(e,a){typeof a=="boolean"&&(a={forever:a}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=a||{},this._maxRetryTime=a&&a.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return gf=s,s.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},s.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},s.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var a=new Date().getTime();if(e&&a-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var u=this;return this._timer=setTimeout(function(){u._attempts++,u._operationTimeoutCb&&(u._timeout=setTimeout(function(){u._operationTimeoutCb(u._attempts)},u._operationTimeout),u._options.unref&&u._timeout.unref()),u._fn(u._attempts)},r),this._options.unref&&this._timer.unref(),!0},s.prototype.attempt=function(e,a){this._fn=e,a&&(a.timeout&&(this._operationTimeout=a.timeout),a.cb&&(this._operationTimeoutCb=a.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},s.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},s.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},s.prototype.start=s.prototype.try,s.prototype.errors=function(){return this._errors},s.prototype.attempts=function(){return this._attempts},s.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},a=null,r=0,u=0;u<this._errors.length;u++){var o=this._errors[u],c=o.message,d=(e[c]||0)+1;e[c]=d,d>=r&&(a=o,r=d)}return a},gf}var sy;function tE(){return sy||(sy=1,function(s){var e=eE();s.operation=function(a){var r=s.timeouts(a);return new e(r,{forever:a&&(a.forever||a.retries===1/0),unref:a&&a.unref,maxRetryTime:a&&a.maxRetryTime})},s.timeouts=function(a){if(a instanceof Array)return[].concat(a);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var u in a)r[u]=a[u];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],c=0;c<r.retries;c++)o.push(this.createTimeout(c,r));return a&&a.forever&&!o.length&&o.push(this.createTimeout(c,r)),o.sort(function(d,m){return d-m}),o},s.createTimeout=function(a,r){var u=r.randomize?Math.random()+1:1,o=Math.round(u*Math.max(r.minTimeout,1)*Math.pow(r.factor,a));return o=Math.min(o,r.maxTimeout),o},s.wrap=function(a,r,u){if(r instanceof Array&&(u=r,r=null),!u){u=[];for(var o in a)typeof a[o]=="function"&&u.push(o)}for(var c=0;c<u.length;c++){var d=u[c],m=a[d];a[d]=(function(g){var b=s.operation(r),v=Array.prototype.slice.call(arguments,1),w=v.pop();v.push(function(A){b.retry(A)||(A&&(arguments[0]=b.mainError()),w.apply(this,arguments))}),b.attempt(function(){g.apply(a,v)})}).bind(a,m),a[d].options=r}}}(pf)),pf}var yf,uy;function nE(){return uy||(uy=1,yf=tE()),yf}var ly;function aE(){if(ly)return ys.exports;ly=1;const s=nE(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class a extends Error{constructor(d){super(),d instanceof Error?(this.originalError=d,{message:d}=d):(this.originalError=new Error(d),this.originalError.stack=this.stack),this.name="AbortError",this.message=d}}const r=(c,d,m)=>{const p=m.retries-(d-1);return c.attemptNumber=d,c.retriesLeft=p,c},u=c=>e.includes(c),o=(c,d)=>new Promise((m,p)=>{d={onFailedAttempt:()=>{},retries:10,...d};const g=s.operation(d);g.attempt(async b=>{try{m(await c(b))}catch(v){if(!(v instanceof Error)){p(new TypeError(`Non-error was thrown: "${v}". You should only throw errors.`));return}if(v instanceof a)g.stop(),p(v.originalError);else if(v instanceof TypeError&&!u(v.message))g.stop(),p(v);else{r(v,b,d);try{await d.onFailedAttempt(v)}catch(w){p(w);return}g.retry(v)||p(g.mainError())}}})});return ys.exports=o,ys.exports.default=o,ys.exports.AbortError=a,ys.exports}var rE=aE();const Ml=_r(rE),iE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Ss(s){return typeof s=="string"&&iE.test(s)}var pt=[];for(var bf=0;bf<256;++bf)pt.push((bf+256).toString(16).slice(1));function sE(s,e=0){return(pt[s[e+0]]+pt[s[e+1]]+pt[s[e+2]]+pt[s[e+3]]+"-"+pt[s[e+4]]+pt[s[e+5]]+"-"+pt[s[e+6]]+pt[s[e+7]]+"-"+pt[s[e+8]]+pt[s[e+9]]+"-"+pt[s[e+10]]+pt[s[e+11]]+pt[s[e+12]]+pt[s[e+13]]+pt[s[e+14]]+pt[s[e+15]]).toLowerCase()}var ml,uE=new Uint8Array(16);function lE(){if(!ml&&(ml=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ml))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ml(uE)}var oE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const oy={randomUUID:oE};function Lt(s,e,a){if(oy.randomUUID&&!e&&!s)return oy.randomUUID();s=s||{};var r=s.random||(s.rng||lE)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,sE(r)}var pl={},vf={exports:{}},cy;function cE(){return cy||(cy=1,function(s){var e=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function u(m,p,g){this.fn=m,this.context=p,this.once=g||!1}function o(m,p,g,b,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var w=new u(g,b||m,v),A=a?a+p:p;return m._events[A]?m._events[A].fn?m._events[A]=[m._events[A],w]:m._events[A].push(w):(m._events[A]=w,m._eventsCount++),m}function c(m,p){--m._eventsCount===0?m._events=new r:delete m._events[p]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],g,b;if(this._eventsCount===0)return p;for(b in g=this._events)e.call(g,b)&&p.push(a?b.slice(1):b);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},d.prototype.listeners=function(p){var g=a?a+p:p,b=this._events[g];if(!b)return[];if(b.fn)return[b.fn];for(var v=0,w=b.length,A=new Array(w);v<w;v++)A[v]=b[v].fn;return A},d.prototype.listenerCount=function(p){var g=a?a+p:p,b=this._events[g];return b?b.fn?1:b.length:0},d.prototype.emit=function(p,g,b,v,w,A){var T=a?a+p:p;if(!this._events[T])return!1;var C=this._events[T],M=arguments.length,B,D;if(C.fn){switch(C.once&&this.removeListener(p,C.fn,void 0,!0),M){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,g),!0;case 3:return C.fn.call(C.context,g,b),!0;case 4:return C.fn.call(C.context,g,b,v),!0;case 5:return C.fn.call(C.context,g,b,v,w),!0;case 6:return C.fn.call(C.context,g,b,v,w,A),!0}for(D=1,B=new Array(M-1);D<M;D++)B[D-1]=arguments[D];C.fn.apply(C.context,B)}else{var ne=C.length,P;for(D=0;D<ne;D++)switch(C[D].once&&this.removeListener(p,C[D].fn,void 0,!0),M){case 1:C[D].fn.call(C[D].context);break;case 2:C[D].fn.call(C[D].context,g);break;case 3:C[D].fn.call(C[D].context,g,b);break;case 4:C[D].fn.call(C[D].context,g,b,v);break;default:if(!B)for(P=1,B=new Array(M-1);P<M;P++)B[P-1]=arguments[P];C[D].fn.apply(C[D].context,B)}}return!0},d.prototype.on=function(p,g,b){return o(this,p,g,b,!1)},d.prototype.once=function(p,g,b){return o(this,p,g,b,!0)},d.prototype.removeListener=function(p,g,b,v){var w=a?a+p:p;if(!this._events[w])return this;if(!g)return c(this,w),this;var A=this._events[w];if(A.fn)A.fn===g&&(!v||A.once)&&(!b||A.context===b)&&c(this,w);else{for(var T=0,C=[],M=A.length;T<M;T++)(A[T].fn!==g||v&&!A[T].once||b&&A[T].context!==b)&&C.push(A[T]);C.length?this._events[w]=C.length===1?C[0]:C:c(this,w)}return this},d.prototype.removeAllListeners=function(p){var g;return p?(g=a?a+p:p,this._events[g]&&c(this,g)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=a,d.EventEmitter=d,s.exports=d}(vf)),vf.exports}var bs={exports:{}},_f,fy;function fE(){return fy||(fy=1,_f=(s,e)=>(e=e||(()=>{}),s.then(a=>new Promise(r=>{r(e())}).then(()=>a),a=>new Promise(r=>{r(e())}).then(()=>{throw a})))),_f}var dy;function dE(){if(dy)return bs.exports;dy=1;const s=fE();class e extends Error{constructor(u){super(u),this.name="TimeoutError"}}const a=(r,u,o)=>new Promise((c,d)=>{if(typeof u!="number"||u<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(u===1/0){c(r);return}const m=setTimeout(()=>{if(typeof o=="function"){try{c(o())}catch(b){d(b)}return}const p=typeof o=="string"?o:`Promise timed out after ${u} milliseconds`,g=o instanceof Error?o:new e(p);typeof r.cancel=="function"&&r.cancel(),d(g)},u);s(r.then(c,d),()=>{clearTimeout(m)})});return bs.exports=a,bs.exports.default=a,bs.exports.TimeoutError=e,bs.exports}var gl={},yl={},hy;function hE(){if(hy)return yl;hy=1,Object.defineProperty(yl,"__esModule",{value:!0});function s(e,a,r){let u=0,o=e.length;for(;o>0;){const c=o/2|0;let d=u+c;r(e[d],a)<=0?(u=++d,o-=c+1):o=c}return u}return yl.default=s,yl}var my;function mE(){if(my)return gl;my=1,Object.defineProperty(gl,"__esModule",{value:!0});const s=hE();class e{constructor(){this._queue=[]}enqueue(r,u){u=Object.assign({priority:0},u);const o={priority:u.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=u.priority){this._queue.push(o);return}const c=s.default(this._queue,o,(d,m)=>m.priority-d.priority);this._queue.splice(c,0,o)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(u=>u.priority===r.priority).map(u=>u.run)}get size(){return this._queue.length}}return gl.default=e,gl}var py;function pE(){if(py)return pl;py=1,Object.defineProperty(pl,"__esModule",{value:!0});const s=cE(),e=dE(),a=mE(),r=()=>{},u=new e.TimeoutError;class o extends s{constructor(d){var m,p,g,b;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,d=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:a.default},d),!(typeof d.intervalCap=="number"&&d.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(p=(m=d.intervalCap)===null||m===void 0?void 0:m.toString())!==null&&p!==void 0?p:""}\` (${typeof d.intervalCap})`);if(d.interval===void 0||!(Number.isFinite(d.interval)&&d.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(b=(g=d.interval)===null||g===void 0?void 0:g.toString())!==null&&b!==void 0?b:""}\` (${typeof d.interval})`);this._carryoverConcurrencyCount=d.carryoverConcurrencyCount,this._isIntervalIgnored=d.intervalCap===1/0||d.interval===0,this._intervalCap=d.intervalCap,this._interval=d.interval,this._queue=new d.queueClass,this._queueClass=d.queueClass,this.concurrency=d.concurrency,this._timeout=d.timeout,this._throwOnTimeout=d.throwOnTimeout===!0,this._isPaused=d.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const d=Date.now();if(this._intervalId===void 0){const m=this._intervalEnd-d;if(m<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},m)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const d=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const m=this._queue.dequeue();return m?(this.emit("active"),m(),d&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(d){if(!(typeof d=="number"&&d>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${d}\` (${typeof d})`);this._concurrency=d,this._processQueue()}async add(d,m={}){return new Promise((p,g)=>{const b=async()=>{this._pendingCount++,this._intervalCount++;try{const v=this._timeout===void 0&&m.timeout===void 0?d():e.default(Promise.resolve(d()),m.timeout===void 0?this._timeout:m.timeout,()=>{(m.throwOnTimeout===void 0?this._throwOnTimeout:m.throwOnTimeout)&&g(u)});p(await v)}catch(v){g(v)}this._next()};this._queue.enqueue(b,m),this._tryToStartAnother(),this.emit("add")})}async addAll(d,m){return Promise.all(d.map(async p=>this.add(p,m)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(d=>{const m=this._resolveEmpty;this._resolveEmpty=()=>{m(),d()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(d=>{const m=this._resolveIdle;this._resolveIdle=()=>{m(),d()}})}get size(){return this._queue.size}sizeBy(d){return this._queue.filter(d).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(d){this._timeout=d}}return pl.default=o,pl}var gE=pE();const ta=_r(gE),yE=(...s)=>fetch(...s),bE=Symbol.for("ls:fetch_implementation"),le=()=>globalThis[bE]??yE,vE=[400,401,403,404,405,406,407,408],_E=[409];let gy=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in ta?this.queue=new ta.default({concurrency:this.maxConcurrency}):this.queue=new ta({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...a){const r=this.onFailedResponseHook;return this.queue.add(()=>Ml(()=>e(...a).catch(u=>{throw u instanceof Error?u:new Error(u)}),{async onFailedAttempt(u){if(u.message.startsWith("Cancel")||u.message.startsWith("TimeoutError")||u.message.startsWith("AbortError")||(u==null?void 0:u.code)==="ECONNABORTED")throw u;const o=u==null?void 0:u.response,c=o==null?void 0:o.status;if(c){if(vE.includes(+c))throw u;if(_E.includes(+c))return;r&&await r(o)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,a,...r){return e.signal?Promise.race([this.call(a,...r),new Promise((u,o)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(a,...r)}fetch(...e){return this.call(()=>le()(...e).then(a=>a.ok?a:Promise.reject(a)))}};function yy(s){return typeof(s==null?void 0:s._getType)=="function"}function by(s){const e={type:s._getType(),data:{content:s.content}};return s!=null&&s.additional_kwargs&&Object.keys(s.additional_kwargs).length>0&&(e.data.additional_kwargs={...s.additional_kwargs}),e}function ve(s,e){if(!Ss(s)){const a=e!==void 0?`Invalid UUID for ${e}: ${s}`:`Invalid UUID: ${s}`;throw new Error(a)}return s}const vy={};function Kb(s){vy[s]||(console.warn(s),vy[s]=!0)}var bl={exports:{}},wf,_y;function Hl(){if(_y)return wf;_y=1;const s="2.0.0",e=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,u=e-6;return wf={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:u,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:s,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},wf}var Af,wy;function ql(){if(wy)return Af;wy=1;var s={};return Af=typeof process=="object"&&s&&s.NODE_DEBUG&&/\bsemver\b/i.test(s.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{},Af}var Ay;function Ys(){return Ay||(Ay=1,function(s,e){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:u}=Hl(),o=ql();e=s.exports={};const c=e.re=[],d=e.safeRe=[],m=e.src=[],p=e.safeSrc=[],g=e.t={};let b=0;const v="[a-zA-Z0-9-]",w=[["\\s",1],["\\d",u],[v,r]],A=C=>{for(const[M,B]of w)C=C.split(`${M}*`).join(`${M}{0,${B}}`).split(`${M}+`).join(`${M}{1,${B}}`);return C},T=(C,M,B)=>{const D=A(M),ne=b++;o(C,ne,M),g[C]=ne,m[ne]=M,p[ne]=D,c[ne]=new RegExp(M,B?"g":void 0),d[ne]=new RegExp(D,B?"g":void 0)};T("NUMERICIDENTIFIER","0|[1-9]\\d*"),T("NUMERICIDENTIFIERLOOSE","\\d+"),T("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),T("MAINVERSION",`(${m[g.NUMERICIDENTIFIER]})\\.(${m[g.NUMERICIDENTIFIER]})\\.(${m[g.NUMERICIDENTIFIER]})`),T("MAINVERSIONLOOSE",`(${m[g.NUMERICIDENTIFIERLOOSE]})\\.(${m[g.NUMERICIDENTIFIERLOOSE]})\\.(${m[g.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASEIDENTIFIER",`(?:${m[g.NUMERICIDENTIFIER]}|${m[g.NONNUMERICIDENTIFIER]})`),T("PRERELEASEIDENTIFIERLOOSE",`(?:${m[g.NUMERICIDENTIFIERLOOSE]}|${m[g.NONNUMERICIDENTIFIER]})`),T("PRERELEASE",`(?:-(${m[g.PRERELEASEIDENTIFIER]}(?:\\.${m[g.PRERELEASEIDENTIFIER]})*))`),T("PRERELEASELOOSE",`(?:-?(${m[g.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${m[g.PRERELEASEIDENTIFIERLOOSE]})*))`),T("BUILDIDENTIFIER",`${v}+`),T("BUILD",`(?:\\+(${m[g.BUILDIDENTIFIER]}(?:\\.${m[g.BUILDIDENTIFIER]})*))`),T("FULLPLAIN",`v?${m[g.MAINVERSION]}${m[g.PRERELEASE]}?${m[g.BUILD]}?`),T("FULL",`^${m[g.FULLPLAIN]}$`),T("LOOSEPLAIN",`[v=\\s]*${m[g.MAINVERSIONLOOSE]}${m[g.PRERELEASELOOSE]}?${m[g.BUILD]}?`),T("LOOSE",`^${m[g.LOOSEPLAIN]}$`),T("GTLT","((?:<|>)?=?)"),T("XRANGEIDENTIFIERLOOSE",`${m[g.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),T("XRANGEIDENTIFIER",`${m[g.NUMERICIDENTIFIER]}|x|X|\\*`),T("XRANGEPLAIN",`[v=\\s]*(${m[g.XRANGEIDENTIFIER]})(?:\\.(${m[g.XRANGEIDENTIFIER]})(?:\\.(${m[g.XRANGEIDENTIFIER]})(?:${m[g.PRERELEASE]})?${m[g.BUILD]}?)?)?`),T("XRANGEPLAINLOOSE",`[v=\\s]*(${m[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${m[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${m[g.XRANGEIDENTIFIERLOOSE]})(?:${m[g.PRERELEASELOOSE]})?${m[g.BUILD]}?)?)?`),T("XRANGE",`^${m[g.GTLT]}\\s*${m[g.XRANGEPLAIN]}$`),T("XRANGELOOSE",`^${m[g.GTLT]}\\s*${m[g.XRANGEPLAINLOOSE]}$`),T("COERCEPLAIN",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?`),T("COERCE",`${m[g.COERCEPLAIN]}(?:$|[^\\d])`),T("COERCEFULL",m[g.COERCEPLAIN]+`(?:${m[g.PRERELEASE]})?(?:${m[g.BUILD]})?(?:$|[^\\d])`),T("COERCERTL",m[g.COERCE],!0),T("COERCERTLFULL",m[g.COERCEFULL],!0),T("LONETILDE","(?:~>?)"),T("TILDETRIM",`(\\s*)${m[g.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",T("TILDE",`^${m[g.LONETILDE]}${m[g.XRANGEPLAIN]}$`),T("TILDELOOSE",`^${m[g.LONETILDE]}${m[g.XRANGEPLAINLOOSE]}$`),T("LONECARET","(?:\\^)"),T("CARETTRIM",`(\\s*)${m[g.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",T("CARET",`^${m[g.LONECARET]}${m[g.XRANGEPLAIN]}$`),T("CARETLOOSE",`^${m[g.LONECARET]}${m[g.XRANGEPLAINLOOSE]}$`),T("COMPARATORLOOSE",`^${m[g.GTLT]}\\s*(${m[g.LOOSEPLAIN]})$|^$`),T("COMPARATOR",`^${m[g.GTLT]}\\s*(${m[g.FULLPLAIN]})$|^$`),T("COMPARATORTRIM",`(\\s*)${m[g.GTLT]}\\s*(${m[g.LOOSEPLAIN]}|${m[g.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",T("HYPHENRANGE",`^\\s*(${m[g.XRANGEPLAIN]})\\s+-\\s+(${m[g.XRANGEPLAIN]})\\s*$`),T("HYPHENRANGELOOSE",`^\\s*(${m[g.XRANGEPLAINLOOSE]})\\s+-\\s+(${m[g.XRANGEPLAINLOOSE]})\\s*$`),T("STAR","(<|>)?=?\\s*\\*"),T("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),T("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(bl,bl.exports)),bl.exports}var Ef,Ey;function Zd(){if(Ey)return Ef;Ey=1;const s=Object.freeze({loose:!0}),e=Object.freeze({});return Ef=r=>r?typeof r!="object"?s:r:e,Ef}var Sf,Sy;function Fb(){if(Sy)return Sf;Sy=1;const s=/^[0-9]+$/,e=(r,u)=>{const o=s.test(r),c=s.test(u);return o&&c&&(r=+r,u=+u),r===u?0:o&&!c?-1:c&&!o?1:r<u?-1:1};return Sf={compareIdentifiers:e,rcompareIdentifiers:(r,u)=>e(u,r)},Sf}var Tf,Ty;function jt(){if(Ty)return Tf;Ty=1;const s=ql(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:a}=Hl(),{safeRe:r,safeSrc:u,t:o}=Ys(),c=Zd(),{compareIdentifiers:d}=Fb();class m{constructor(g,b){if(b=c(b),g instanceof m){if(g.loose===!!b.loose&&g.includePrerelease===!!b.includePrerelease)return g;g=g.version}else if(typeof g!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof g}".`);if(g.length>e)throw new TypeError(`version is longer than ${e} characters`);s("SemVer",g,b),this.options=b,this.loose=!!b.loose,this.includePrerelease=!!b.includePrerelease;const v=g.trim().match(b.loose?r[o.LOOSE]:r[o.FULL]);if(!v)throw new TypeError(`Invalid Version: ${g}`);if(this.raw=g,this.major=+v[1],this.minor=+v[2],this.patch=+v[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");v[4]?this.prerelease=v[4].split(".").map(w=>{if(/^[0-9]+$/.test(w)){const A=+w;if(A>=0&&A<a)return A}return w}):this.prerelease=[],this.build=v[5]?v[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(g){if(s("SemVer.compare",this.version,this.options,g),!(g instanceof m)){if(typeof g=="string"&&g===this.version)return 0;g=new m(g,this.options)}return g.version===this.version?0:this.compareMain(g)||this.comparePre(g)}compareMain(g){return g instanceof m||(g=new m(g,this.options)),d(this.major,g.major)||d(this.minor,g.minor)||d(this.patch,g.patch)}comparePre(g){if(g instanceof m||(g=new m(g,this.options)),this.prerelease.length&&!g.prerelease.length)return-1;if(!this.prerelease.length&&g.prerelease.length)return 1;if(!this.prerelease.length&&!g.prerelease.length)return 0;let b=0;do{const v=this.prerelease[b],w=g.prerelease[b];if(s("prerelease compare",b,v,w),v===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(v===void 0)return-1;if(v===w)continue;return d(v,w)}while(++b)}compareBuild(g){g instanceof m||(g=new m(g,this.options));let b=0;do{const v=this.build[b],w=g.build[b];if(s("build compare",b,v,w),v===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(v===void 0)return-1;if(v===w)continue;return d(v,w)}while(++b)}inc(g,b,v){if(g.startsWith("pre")){if(!b&&v===!1)throw new Error("invalid increment argument: identifier is empty");if(b){const w=new RegExp(`^${this.options.loose?u[o.PRERELEASELOOSE]:u[o.PRERELEASE]}$`),A=`-${b}`.match(w);if(!A||A[1]!==b)throw new Error(`invalid identifier: ${b}`)}}switch(g){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",b,v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",b,v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",b,v),this.inc("pre",b,v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",b,v),this.inc("pre",b,v);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const w=Number(v)?1:0;if(this.prerelease.length===0)this.prerelease=[w];else{let A=this.prerelease.length;for(;--A>=0;)typeof this.prerelease[A]=="number"&&(this.prerelease[A]++,A=-2);if(A===-1){if(b===this.prerelease.join(".")&&v===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(w)}}if(b){let A=[b,w];v===!1&&(A=[b]),d(this.prerelease[0],b)===0?isNaN(this.prerelease[1])&&(this.prerelease=A):this.prerelease=A}break}default:throw new Error(`invalid increment argument: ${g}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Tf=m,Tf}var Of,Oy;function gi(){if(Oy)return Of;Oy=1;const s=jt();return Of=(a,r,u=!1)=>{if(a instanceof s)return a;try{return new s(a,r)}catch(o){if(!u)return null;throw o}},Of}var Rf,Ry;function wE(){if(Ry)return Rf;Ry=1;const s=gi();return Rf=(a,r)=>{const u=s(a,r);return u?u.version:null},Rf}var Cf,Cy;function AE(){if(Cy)return Cf;Cy=1;const s=gi();return Cf=(a,r)=>{const u=s(a.trim().replace(/^[=v]+/,""),r);return u?u.version:null},Cf}var xf,xy;function EE(){if(xy)return xf;xy=1;const s=jt();return xf=(a,r,u,o,c)=>{typeof u=="string"&&(c=o,o=u,u=void 0);try{return new s(a instanceof s?a.version:a,u).inc(r,o,c).version}catch{return null}},xf}var Nf,Ny;function SE(){if(Ny)return Nf;Ny=1;const s=gi();return Nf=(a,r)=>{const u=s(a,null,!0),o=s(r,null,!0),c=u.compare(o);if(c===0)return null;const d=c>0,m=d?u:o,p=d?o:u,g=!!m.prerelease.length;if(!!p.prerelease.length&&!g){if(!p.patch&&!p.minor)return"major";if(p.compareMain(m)===0)return p.minor&&!p.patch?"minor":"patch"}const v=g?"pre":"";return u.major!==o.major?v+"major":u.minor!==o.minor?v+"minor":u.patch!==o.patch?v+"patch":"prerelease"},Nf}var jf,jy;function TE(){if(jy)return jf;jy=1;const s=jt();return jf=(a,r)=>new s(a,r).major,jf}var Mf,My;function OE(){if(My)return Mf;My=1;const s=jt();return Mf=(a,r)=>new s(a,r).minor,Mf}var Df,Dy;function RE(){if(Dy)return Df;Dy=1;const s=jt();return Df=(a,r)=>new s(a,r).patch,Df}var kf,ky;function CE(){if(ky)return kf;ky=1;const s=gi();return kf=(a,r)=>{const u=s(a,r);return u&&u.prerelease.length?u.prerelease:null},kf}var Uf,Uy;function En(){if(Uy)return Uf;Uy=1;const s=jt();return Uf=(a,r,u)=>new s(a,u).compare(new s(r,u)),Uf}var Lf,Ly;function xE(){if(Ly)return Lf;Ly=1;const s=En();return Lf=(a,r,u)=>s(r,a,u),Lf}var If,Iy;function NE(){if(Iy)return If;Iy=1;const s=En();return If=(a,r)=>s(a,r,!0),If}var $f,$y;function Vd(){if($y)return $f;$y=1;const s=jt();return $f=(a,r,u)=>{const o=new s(a,u),c=new s(r,u);return o.compare(c)||o.compareBuild(c)},$f}var Bf,By;function jE(){if(By)return Bf;By=1;const s=Vd();return Bf=(a,r)=>a.sort((u,o)=>s(u,o,r)),Bf}var Pf,Py;function ME(){if(Py)return Pf;Py=1;const s=Vd();return Pf=(a,r)=>a.sort((u,o)=>s(o,u,r)),Pf}var zf,zy;function Gl(){if(zy)return zf;zy=1;const s=En();return zf=(a,r,u)=>s(a,r,u)>0,zf}var Hf,Hy;function Qd(){if(Hy)return Hf;Hy=1;const s=En();return Hf=(a,r,u)=>s(a,r,u)<0,Hf}var qf,qy;function Xb(){if(qy)return qf;qy=1;const s=En();return qf=(a,r,u)=>s(a,r,u)===0,qf}var Gf,Gy;function Jb(){if(Gy)return Gf;Gy=1;const s=En();return Gf=(a,r,u)=>s(a,r,u)!==0,Gf}var Zf,Zy;function Yd(){if(Zy)return Zf;Zy=1;const s=En();return Zf=(a,r,u)=>s(a,r,u)>=0,Zf}var Vf,Vy;function Kd(){if(Vy)return Vf;Vy=1;const s=En();return Vf=(a,r,u)=>s(a,r,u)<=0,Vf}var Qf,Qy;function Wb(){if(Qy)return Qf;Qy=1;const s=Xb(),e=Jb(),a=Gl(),r=Yd(),u=Qd(),o=Kd();return Qf=(d,m,p,g)=>{switch(m){case"===":return typeof d=="object"&&(d=d.version),typeof p=="object"&&(p=p.version),d===p;case"!==":return typeof d=="object"&&(d=d.version),typeof p=="object"&&(p=p.version),d!==p;case"":case"=":case"==":return s(d,p,g);case"!=":return e(d,p,g);case">":return a(d,p,g);case">=":return r(d,p,g);case"<":return u(d,p,g);case"<=":return o(d,p,g);default:throw new TypeError(`Invalid operator: ${m}`)}},Qf}var Yf,Yy;function DE(){if(Yy)return Yf;Yy=1;const s=jt(),e=gi(),{safeRe:a,t:r}=Ys();return Yf=(o,c)=>{if(o instanceof s)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;c=c||{};let d=null;if(!c.rtl)d=o.match(c.includePrerelease?a[r.COERCEFULL]:a[r.COERCE]);else{const w=c.includePrerelease?a[r.COERCERTLFULL]:a[r.COERCERTL];let A;for(;(A=w.exec(o))&&(!d||d.index+d[0].length!==o.length);)(!d||A.index+A[0].length!==d.index+d[0].length)&&(d=A),w.lastIndex=A.index+A[1].length+A[2].length;w.lastIndex=-1}if(d===null)return null;const m=d[2],p=d[3]||"0",g=d[4]||"0",b=c.includePrerelease&&d[5]?`-${d[5]}`:"",v=c.includePrerelease&&d[6]?`+${d[6]}`:"";return e(`${m}.${p}.${g}${b}${v}`,c)},Yf}var Kf,Ky;function kE(){if(Ky)return Kf;Ky=1;class s{constructor(){this.max=1e3,this.map=new Map}get(a){const r=this.map.get(a);if(r!==void 0)return this.map.delete(a),this.map.set(a,r),r}delete(a){return this.map.delete(a)}set(a,r){if(!this.delete(a)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(a,r)}return this}}return Kf=s,Kf}var Ff,Fy;function Sn(){if(Fy)return Ff;Fy=1;const s=/\s+/g;class e{constructor(V,k){if(k=u(k),V instanceof e)return V.loose===!!k.loose&&V.includePrerelease===!!k.includePrerelease?V:new e(V.raw,k);if(V instanceof o)return this.raw=V.value,this.set=[[V]],this.formatted=void 0,this;if(this.options=k,this.loose=!!k.loose,this.includePrerelease=!!k.includePrerelease,this.raw=V.trim().replace(s," "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(q=>!T(q[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&C(q[0])){this.set=[q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let V=0;V<this.set.length;V++){V>0&&(this.formatted+="||");const k=this.set[V];for(let H=0;H<k.length;H++)H>0&&(this.formatted+=" "),this.formatted+=k[H].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(V){const H=((this.options.includePrerelease&&w)|(this.options.loose&&A))+":"+V,q=r.get(H);if(q)return q;const K=this.options.loose,S=K?m[p.HYPHENRANGELOOSE]:m[p.HYPHENRANGE];V=V.replace(S,yt(this.options.includePrerelease)),c("hyphen replace",V),V=V.replace(m[p.COMPARATORTRIM],g),c("comparator trim",V),V=V.replace(m[p.TILDETRIM],b),c("tilde trim",V),V=V.replace(m[p.CARETTRIM],v),c("caret trim",V);let U=V.split(" ").map(oe=>B(oe,this.options)).join(" ").split(/\s+/).map(oe=>et(oe,this.options));K&&(U=U.filter(oe=>(c("loose invalid filter",oe,this.options),!!oe.match(m[p.COMPARATORLOOSE])))),c("range list",U);const Q=new Map,X=U.map(oe=>new o(oe,this.options));for(const oe of X){if(T(oe))return[oe];Q.set(oe.value,oe)}Q.size>1&&Q.has("")&&Q.delete("");const F=[...Q.values()];return r.set(H,F),F}intersects(V,k){if(!(V instanceof e))throw new TypeError("a Range is required");return this.set.some(H=>M(H,k)&&V.set.some(q=>M(q,k)&&H.every(K=>q.every(S=>K.intersects(S,k)))))}test(V){if(!V)return!1;if(typeof V=="string")try{V=new d(V,this.options)}catch{return!1}for(let k=0;k<this.set.length;k++)if(ft(this.set[k],V,this.options))return!0;return!1}}Ff=e;const a=kE(),r=new a,u=Zd(),o=Zl(),c=ql(),d=jt(),{safeRe:m,t:p,comparatorTrimReplace:g,tildeTrimReplace:b,caretTrimReplace:v}=Ys(),{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:A}=Hl(),T=J=>J.value==="<0.0.0-0",C=J=>J.value==="",M=(J,V)=>{let k=!0;const H=J.slice();let q=H.pop();for(;k&&H.length;)k=H.every(K=>q.intersects(K,V)),q=H.pop();return k},B=(J,V)=>(c("comp",J,V),J=ee(J,V),c("caret",J),J=ne(J,V),c("tildes",J),J=ae(J,V),c("xrange",J),J=_e(J,V),c("stars",J),J),D=J=>!J||J.toLowerCase()==="x"||J==="*",ne=(J,V)=>J.trim().split(/\s+/).map(k=>P(k,V)).join(" "),P=(J,V)=>{const k=V.loose?m[p.TILDELOOSE]:m[p.TILDE];return J.replace(k,(H,q,K,S,U)=>{c("tilde",J,H,q,K,S,U);let Q;return D(q)?Q="":D(K)?Q=`>=${q}.0.0 <${+q+1}.0.0-0`:D(S)?Q=`>=${q}.${K}.0 <${q}.${+K+1}.0-0`:U?(c("replaceTilde pr",U),Q=`>=${q}.${K}.${S}-${U} <${q}.${+K+1}.0-0`):Q=`>=${q}.${K}.${S} <${q}.${+K+1}.0-0`,c("tilde return",Q),Q})},ee=(J,V)=>J.trim().split(/\s+/).map(k=>fe(k,V)).join(" "),fe=(J,V)=>{c("caret",J,V);const k=V.loose?m[p.CARETLOOSE]:m[p.CARET],H=V.includePrerelease?"-0":"";return J.replace(k,(q,K,S,U,Q)=>{c("caret",J,q,K,S,U,Q);let X;return D(K)?X="":D(S)?X=`>=${K}.0.0${H} <${+K+1}.0.0-0`:D(U)?K==="0"?X=`>=${K}.${S}.0${H} <${K}.${+S+1}.0-0`:X=`>=${K}.${S}.0${H} <${+K+1}.0.0-0`:Q?(c("replaceCaret pr",Q),K==="0"?S==="0"?X=`>=${K}.${S}.${U}-${Q} <${K}.${S}.${+U+1}-0`:X=`>=${K}.${S}.${U}-${Q} <${K}.${+S+1}.0-0`:X=`>=${K}.${S}.${U}-${Q} <${+K+1}.0.0-0`):(c("no pr"),K==="0"?S==="0"?X=`>=${K}.${S}.${U}${H} <${K}.${S}.${+U+1}-0`:X=`>=${K}.${S}.${U}${H} <${K}.${+S+1}.0-0`:X=`>=${K}.${S}.${U} <${+K+1}.0.0-0`),c("caret return",X),X})},ae=(J,V)=>(c("replaceXRanges",J,V),J.split(/\s+/).map(k=>ie(k,V)).join(" ")),ie=(J,V)=>{J=J.trim();const k=V.loose?m[p.XRANGELOOSE]:m[p.XRANGE];return J.replace(k,(H,q,K,S,U,Q)=>{c("xRange",J,H,q,K,S,U,Q);const X=D(K),F=X||D(S),oe=F||D(U),he=oe;return q==="="&&he&&(q=""),Q=V.includePrerelease?"-0":"",X?q===">"||q==="<"?H="<0.0.0-0":H="*":q&&he?(F&&(S=0),U=0,q===">"?(q=">=",F?(K=+K+1,S=0,U=0):(S=+S+1,U=0)):q==="<="&&(q="<",F?K=+K+1:S=+S+1),q==="<"&&(Q="-0"),H=`${q+K}.${S}.${U}${Q}`):F?H=`>=${K}.0.0${Q} <${+K+1}.0.0-0`:oe&&(H=`>=${K}.${S}.0${Q} <${K}.${+S+1}.0-0`),c("xRange return",H),H})},_e=(J,V)=>(c("replaceStars",J,V),J.trim().replace(m[p.STAR],"")),et=(J,V)=>(c("replaceGTE0",J,V),J.trim().replace(m[V.includePrerelease?p.GTE0PRE:p.GTE0],"")),yt=J=>(V,k,H,q,K,S,U,Q,X,F,oe,he)=>(D(H)?k="":D(q)?k=`>=${H}.0.0${J?"-0":""}`:D(K)?k=`>=${H}.${q}.0${J?"-0":""}`:S?k=`>=${k}`:k=`>=${k}${J?"-0":""}`,D(X)?Q="":D(F)?Q=`<${+X+1}.0.0-0`:D(oe)?Q=`<${X}.${+F+1}.0-0`:he?Q=`<=${X}.${F}.${oe}-${he}`:J?Q=`<${X}.${F}.${+oe+1}-0`:Q=`<=${Q}`,`${k} ${Q}`.trim()),ft=(J,V,k)=>{for(let H=0;H<J.length;H++)if(!J[H].test(V))return!1;if(V.prerelease.length&&!k.includePrerelease){for(let H=0;H<J.length;H++)if(c(J[H].semver),J[H].semver!==o.ANY&&J[H].semver.prerelease.length>0){const q=J[H].semver;if(q.major===V.major&&q.minor===V.minor&&q.patch===V.patch)return!0}return!1}return!0};return Ff}var Xf,Xy;function Zl(){if(Xy)return Xf;Xy=1;const s=Symbol("SemVer ANY");class e{static get ANY(){return s}constructor(g,b){if(b=a(b),g instanceof e){if(g.loose===!!b.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),c("comparator",g,b),this.options=b,this.loose=!!b.loose,this.parse(g),this.semver===s?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(g){const b=this.options.loose?r[u.COMPARATORLOOSE]:r[u.COMPARATOR],v=g.match(b);if(!v)throw new TypeError(`Invalid comparator: ${g}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new d(v[2],this.options.loose):this.semver=s}toString(){return this.value}test(g){if(c("Comparator.test",g,this.options.loose),this.semver===s||g===s)return!0;if(typeof g=="string")try{g=new d(g,this.options)}catch{return!1}return o(g,this.operator,this.semver,this.options)}intersects(g,b){if(!(g instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new m(g.value,b).test(this.value):g.operator===""?g.value===""?!0:new m(this.value,b).test(g.semver):(b=a(b),b.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!b.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||o(this.semver,"<",g.semver,b)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||o(this.semver,">",g.semver,b)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}Xf=e;const a=Zd(),{safeRe:r,t:u}=Ys(),o=Wb(),c=ql(),d=jt(),m=Sn();return Xf}var Jf,Jy;function Vl(){if(Jy)return Jf;Jy=1;const s=Sn();return Jf=(a,r,u)=>{try{r=new s(r,u)}catch{return!1}return r.test(a)},Jf}var Wf,Wy;function UE(){if(Wy)return Wf;Wy=1;const s=Sn();return Wf=(a,r)=>new s(a,r).set.map(u=>u.map(o=>o.value).join(" ").trim().split(" ")),Wf}var ed,eb;function LE(){if(eb)return ed;eb=1;const s=jt(),e=Sn();return ed=(r,u,o)=>{let c=null,d=null,m=null;try{m=new e(u,o)}catch{return null}return r.forEach(p=>{m.test(p)&&(!c||d.compare(p)===-1)&&(c=p,d=new s(c,o))}),c},ed}var td,tb;function IE(){if(tb)return td;tb=1;const s=jt(),e=Sn();return td=(r,u,o)=>{let c=null,d=null,m=null;try{m=new e(u,o)}catch{return null}return r.forEach(p=>{m.test(p)&&(!c||d.compare(p)===1)&&(c=p,d=new s(c,o))}),c},td}var nd,nb;function $E(){if(nb)return nd;nb=1;const s=jt(),e=Sn(),a=Gl();return nd=(u,o)=>{u=new e(u,o);let c=new s("0.0.0");if(u.test(c)||(c=new s("0.0.0-0"),u.test(c)))return c;c=null;for(let d=0;d<u.set.length;++d){const m=u.set[d];let p=null;m.forEach(g=>{const b=new s(g.semver.version);switch(g.operator){case">":b.prerelease.length===0?b.patch++:b.prerelease.push(0),b.raw=b.format();case"":case">=":(!p||a(b,p))&&(p=b);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${g.operator}`)}}),p&&(!c||a(c,p))&&(c=p)}return c&&u.test(c)?c:null},nd}var ad,ab;function BE(){if(ab)return ad;ab=1;const s=Sn();return ad=(a,r)=>{try{return new s(a,r).range||"*"}catch{return null}},ad}var rd,rb;function Fd(){if(rb)return rd;rb=1;const s=jt(),e=Zl(),{ANY:a}=e,r=Sn(),u=Vl(),o=Gl(),c=Qd(),d=Kd(),m=Yd();return rd=(g,b,v,w)=>{g=new s(g,w),b=new r(b,w);let A,T,C,M,B;switch(v){case">":A=o,T=d,C=c,M=">",B=">=";break;case"<":A=c,T=m,C=o,M="<",B="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(g,b,w))return!1;for(let D=0;D<b.set.length;++D){const ne=b.set[D];let P=null,ee=null;if(ne.forEach(fe=>{fe.semver===a&&(fe=new e(">=0.0.0")),P=P||fe,ee=ee||fe,A(fe.semver,P.semver,w)?P=fe:C(fe.semver,ee.semver,w)&&(ee=fe)}),P.operator===M||P.operator===B||(!ee.operator||ee.operator===M)&&T(g,ee.semver))return!1;if(ee.operator===B&&C(g,ee.semver))return!1}return!0},rd}var id,ib;function PE(){if(ib)return id;ib=1;const s=Fd();return id=(a,r,u)=>s(a,r,">",u),id}var sd,sb;function zE(){if(sb)return sd;sb=1;const s=Fd();return sd=(a,r,u)=>s(a,r,"<",u),sd}var ud,ub;function HE(){if(ub)return ud;ub=1;const s=Sn();return ud=(a,r,u)=>(a=new s(a,u),r=new s(r,u),a.intersects(r,u)),ud}var ld,lb;function qE(){if(lb)return ld;lb=1;const s=Vl(),e=En();return ld=(a,r,u)=>{const o=[];let c=null,d=null;const m=a.sort((v,w)=>e(v,w,u));for(const v of m)s(v,r,u)?(d=v,c||(c=v)):(d&&o.push([c,d]),d=null,c=null);c&&o.push([c,null]);const p=[];for(const[v,w]of o)v===w?p.push(v):!w&&v===m[0]?p.push("*"):w?v===m[0]?p.push(`<=${w}`):p.push(`${v} - ${w}`):p.push(`>=${v}`);const g=p.join(" || "),b=typeof r.raw=="string"?r.raw:String(r);return g.length<b.length?g:r},ld}var od,ob;function GE(){if(ob)return od;ob=1;const s=Sn(),e=Zl(),{ANY:a}=e,r=Vl(),u=En(),o=(b,v,w={})=>{if(b===v)return!0;b=new s(b,w),v=new s(v,w);let A=!1;e:for(const T of b.set){for(const C of v.set){const M=m(T,C,w);if(A=A||M!==null,M)continue e}if(A)return!1}return!0},c=[new e(">=0.0.0-0")],d=[new e(">=0.0.0")],m=(b,v,w)=>{if(b===v)return!0;if(b.length===1&&b[0].semver===a){if(v.length===1&&v[0].semver===a)return!0;w.includePrerelease?b=c:b=d}if(v.length===1&&v[0].semver===a){if(w.includePrerelease)return!0;v=d}const A=new Set;let T,C;for(const ae of b)ae.operator===">"||ae.operator===">="?T=p(T,ae,w):ae.operator==="<"||ae.operator==="<="?C=g(C,ae,w):A.add(ae.semver);if(A.size>1)return null;let M;if(T&&C){if(M=u(T.semver,C.semver,w),M>0)return null;if(M===0&&(T.operator!==">="||C.operator!=="<="))return null}for(const ae of A){if(T&&!r(ae,String(T),w)||C&&!r(ae,String(C),w))return null;for(const ie of v)if(!r(ae,String(ie),w))return!1;return!0}let B,D,ne,P,ee=C&&!w.includePrerelease&&C.semver.prerelease.length?C.semver:!1,fe=T&&!w.includePrerelease&&T.semver.prerelease.length?T.semver:!1;ee&&ee.prerelease.length===1&&C.operator==="<"&&ee.prerelease[0]===0&&(ee=!1);for(const ae of v){if(P=P||ae.operator===">"||ae.operator===">=",ne=ne||ae.operator==="<"||ae.operator==="<=",T){if(fe&&ae.semver.prerelease&&ae.semver.prerelease.length&&ae.semver.major===fe.major&&ae.semver.minor===fe.minor&&ae.semver.patch===fe.patch&&(fe=!1),ae.operator===">"||ae.operator===">="){if(B=p(T,ae,w),B===ae&&B!==T)return!1}else if(T.operator===">="&&!r(T.semver,String(ae),w))return!1}if(C){if(ee&&ae.semver.prerelease&&ae.semver.prerelease.length&&ae.semver.major===ee.major&&ae.semver.minor===ee.minor&&ae.semver.patch===ee.patch&&(ee=!1),ae.operator==="<"||ae.operator==="<="){if(D=g(C,ae,w),D===ae&&D!==C)return!1}else if(C.operator==="<="&&!r(C.semver,String(ae),w))return!1}if(!ae.operator&&(C||T)&&M!==0)return!1}return!(T&&ne&&!C&&M!==0||C&&P&&!T&&M!==0||fe||ee)},p=(b,v,w)=>{if(!b)return v;const A=u(b.semver,v.semver,w);return A>0?b:A<0||v.operator===">"&&b.operator===">="?v:b},g=(b,v,w)=>{if(!b)return v;const A=u(b.semver,v.semver,w);return A<0?b:A>0||v.operator==="<"&&b.operator==="<="?v:b};return od=o,od}var cd,cb;function ZE(){if(cb)return cd;cb=1;const s=Ys(),e=Hl(),a=jt(),r=Fb(),u=gi(),o=wE(),c=AE(),d=EE(),m=SE(),p=TE(),g=OE(),b=RE(),v=CE(),w=En(),A=xE(),T=NE(),C=Vd(),M=jE(),B=ME(),D=Gl(),ne=Qd(),P=Xb(),ee=Jb(),fe=Yd(),ae=Kd(),ie=Wb(),_e=DE(),et=Zl(),yt=Sn(),ft=Vl(),J=UE(),V=LE(),k=IE(),H=$E(),q=BE(),K=Fd(),S=PE(),U=zE(),Q=HE(),X=qE(),F=GE();return cd={parse:u,valid:o,clean:c,inc:d,diff:m,major:p,minor:g,patch:b,prerelease:v,compare:w,rcompare:A,compareLoose:T,compareBuild:C,sort:M,rsort:B,gt:D,lt:ne,eq:P,neq:ee,gte:fe,lte:ae,cmp:ie,coerce:_e,Comparator:et,Range:yt,satisfies:ft,toComparators:J,maxSatisfying:V,minSatisfying:k,minVersion:H,validRange:q,outside:K,gtr:S,ltr:U,intersects:Q,simplifyRange:X,subset:F,SemVer:a,re:s.re,src:s.src,tokens:s.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},cd}ZE();function Ca(s){if(!s||s.split("/").length>2||s.startsWith("/")||s.endsWith("/")||s.split(":").length>2)throw new Error(`Invalid identifier format: ${s}`);const[e,a]=s.split(":"),r=a||"latest";if(e.includes("/")){const[u,o]=e.split("/",2);if(!u||!o)throw new Error(`Invalid identifier format: ${s}`);return[u,o,r]}else{if(!e)throw new Error(`Invalid identifier format: ${s}`);return["-",e,r]}}class VE extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function ge(s,e,a){let r;if(s.ok){a&&(r=await s.text());return}r=await s.text();const u=`Failed to ${e}. Received status [${s.status}]: ${s.statusText}. Server response: ${r}`;throw s.status===409?new VE(u):new Error(u)}var fb="[...]",QE={result:"[Circular]"},Dl=[],si=[];const YE=new TextEncoder;function KE(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function vl(s){return YE.encode(s)}function Zt(s,e,a,r){var u;try{const o=JSON.stringify(s,e,a);return vl(o)}catch(o){if(!((u=o.message)!=null&&u.includes("Converting circular structure to JSON")))return console.warn("[WARNING]: LangSmith received unserializable value."),vl("[Unserializable]");console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof r>"u"&&(r=KE()),Dd(s,"",0,[],void 0,0,r);let c;try{si.length===0?c=JSON.stringify(s,e,a):c=JSON.stringify(s,FE(e),a)}catch{return vl("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Dl.length!==0;){const d=Dl.pop();d.length===4?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return vl(c)}}function fd(s,e,a,r){var u=Object.getOwnPropertyDescriptor(r,a);u.get!==void 0?u.configurable?(Object.defineProperty(r,a,{value:s}),Dl.push([r,a,e,u])):si.push([e,a,s]):(r[a]=s,Dl.push([r,a,e]))}function Dd(s,e,a,r,u,o,c){o+=1;var d;if(typeof s=="object"&&s!==null){for(d=0;d<r.length;d++)if(r[d]===s){fd(QE,s,e,u);return}if(typeof c.depthLimit<"u"&&o>c.depthLimit){fd(fb,s,e,u);return}if(typeof c.edgesLimit<"u"&&a+1>c.edgesLimit){fd(fb,s,e,u);return}if(r.push(s),Array.isArray(s))for(d=0;d<s.length;d++)Dd(s[d],d,d,r,s,o,c);else{var m=Object.keys(s);for(d=0;d<m.length;d++){var p=m[d];Dd(s[p],p,d,r,s,o,c)}}r.pop()}}function FE(s){return s=typeof s<"u"?s:function(e,a){return a},function(e,a){if(si.length>0)for(var r=0;r<si.length;r++){var u=si[r];if(u[1]===e&&u[0]===a){a=u[2],si.splice(r,1);break}}return s.call(this,e,a)}}function db(s){const e=nv(),a=oS(),r=s.extra??{},u=r.metadata;return s.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...a,...a.revision_id||s.revision_id?{revision_id:s.revision_id??a.revision_id}:{},...u}},s}const XE=()=>{const s=ja("TRACING_SAMPLING_RATE");if(s===void 0)return;const e=parseFloat(s);if(e<0||e>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},JE=s=>{const a=s.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return a==="localhost"||a==="127.0.0.1"||a==="::1"};async function WE(s){const e=[];for await(const a of s)e.push(a);return e}function dd(s){if(s!==void 0)return s.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const eS=async s=>{if((s==null?void 0:s.status)===429){const e=parseInt(s.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(a=>setTimeout(a,e)),!0}return!1};class tS{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let a;const r=new Promise(o=>{a=o}),u=Zt(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:a,itemPromise:r,size:u}),this.sizeBytes+=u,r}pop(e){var u;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const a=[];let r=0;for(;r+(((u=this.peek())==null?void 0:u.size)??0)<e&&this.items.length>0;){const o=this.items.shift();o&&(a.push(o),r+=o.size,this.sizeBytes-=o.size)}if(a.length===0&&this.items.length>0){const o=this.items.shift();a.push(o),r+=o.size,this.sizeBytes-=o.size}return[a.map(o=>({action:o.action,item:o.payload})),()=>a.forEach(o=>o.itemPromiseResolve())]}}const nS=20971520,aS=2500;class Hs{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new tS}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:hr("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1});const a=Hs.getDefaultClientConfig();if(this.tracingSampleRate=XE(),this.apiUrl=dd(e.apiUrl??a.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=dd(e.apiKey??a.apiKey),this.webUrl=dd(e.webUrl??a.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new gy(e.callerOptions??{}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.batchIngestCaller=new gy({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:eS}),this.hideInputs=e.hideInputs??e.anonymizer??a.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??a.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=ja("API_KEY"),a=ja("ENDPOINT")??"https://api.smith.langchain.com",r=ja("HIDE_INPUTS")==="true",u=ja("HIDE_OUTPUTS")==="true";return{apiUrl:a,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:u}}getHostUrl(){return this.webUrl?this.webUrl:JE(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${ev}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const a={...e};return a.inputs!==void 0&&(a.inputs=this.processInputs(a.inputs)),a.outputs!==void 0&&(a.outputs=this.processOutputs(a.outputs)),a}async _getResponse(e,a){const r=(a==null?void 0:a.toString())??"",u=`${this.apiUrl}${e}?${r}`,o=await this.caller.call(le(),u,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(o,`Failed to fetch ${e}`),o}async _get(e,a){return(await this._getResponse(e,a)).json()}async*_getPaginated(e,a=new URLSearchParams,r){let u=Number(a.get("offset"))||0;const o=Number(a.get("limit"))||100;for(;;){a.set("offset",String(u)),a.set("limit",String(o));const c=`${this.apiUrl}${e}?${a}`,d=await this.caller.call(le(),c,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(d,`Failed to fetch ${e}`);const m=r?r(await d.json()):await d.json();if(m.length===0||(yield m,m.length<o))break;u+=m.length}}async*_getCursorPaginatedList(e,a=null,r="POST",u="runs"){const o=a?{...a}:{};for(;;){const d=await(await this.caller.call(le(),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)})).json();if(!d||!d[u])break;yield d[u];const m=d.cursors;if(!m||!m.next)break;o.cursor=m.next}}_filterForSampling(e,a=!1){if(this.tracingSampleRate===void 0)return e;if(a){const r=[];for(const u of e)this.filteredPostUuids.has(u.id)?this.filteredPostUuids.delete(u.id):r.push(u);return r}else{const r=[];for(const u of e)u.id!==u.trace_id&&!this.filteredPostUuids.has(u.trace_id)||Math.random()<this.tracingSampleRate?r.push(u):this.filteredPostUuids.add(u.id);return r}}async _getBatchSizeLimitBytes(){var a;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((a=e.batch_ingest_config)==null?void 0:a.size_limit_bytes)??nS}async _getMultiPartSupport(){var a;return((a=(await this._ensureServerInfo()).instance_flags)==null?void 0:a.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const a=[];for(;this.autoBatchQueue.items.length>0;){const[r,u]=this.autoBatchQueue.pop(e);if(!r.length){u();break}const o=this._processBatch(r,u).catch(console.error);a.push(o)}return Promise.all(a)}async _processBatch(e,a){var r;if(!e.length){a();return}try{const u={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},o=await this._ensureServerInfo();(r=o==null?void 0:o.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(u):await this.batchIngestRuns(u)}finally{a()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=db(e.item));const a=this.autoBatchQueue.push(e);if(this.manualFlushMode)return a;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),a}async _getServerInfo(){const e=await le()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(aS),...this.fetchOptions});return await ge(e,"get server info"),e.json()}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch{console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to batch operations and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const a={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const u=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&u.trace_id!==void 0&&u.dotted_order!==void 0){this.processRunOperation({action:"create",item:u}).catch(console.error);return}const o=db(u),c=await this.caller.call(le(),`${this.apiUrl}/runs`,{method:"POST",headers:a,body:Zt(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(c,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:a}){if(e===void 0&&a===void 0)return;let r=(e==null?void 0:e.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[],u=(a==null?void 0:a.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[];if(r.length>0&&u.length>0){const d=r.reduce((p,g)=>(g.id&&(p[g.id]=g),p),{}),m=[];for(const p of u)p.id!==void 0&&d[p.id]?d[p.id]={...d[p.id],...p}:m.push(p);r=Object.values(d),u=m}const o={post:this._filterForSampling(r),patch:this._filterForSampling(u,!0)};if(!o.post.length&&!o.patch.length)return;const c={post:[],patch:[]};for(const d of["post","patch"]){const m=d,p=o[m].reverse();let g=p.pop();for(;g!==void 0;)c[m].push(g),g=p.pop()}(c.post.length>0||c.patch.length>0)&&await this._postBatchIngestRuns(Zt(c))}async _postBatchIngestRuns(e){const a={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(le(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:a,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:a}){if(e===void 0&&a===void 0)return;const r={};let u=[];for(const g of e??[]){const b=this.prepareRunCreateOrUpdateInputs(g);b.id!==void 0&&b.attachments!==void 0&&(r[b.id]=b.attachments),delete b.attachments,u.push(b)}let o=[];for(const g of a??[])o.push(this.prepareRunCreateOrUpdateInputs(g));if(u.find(g=>g.trace_id===void 0||g.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(o.find(g=>g.trace_id===void 0||g.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(u.length>0&&o.length>0){const g=u.reduce((v,w)=>(w.id&&(v[w.id]=w),v),{}),b=[];for(const v of o)v.id!==void 0&&g[v.id]?g[v.id]={...g[v.id],...v}:b.push(v);u=Object.values(g),o=b}if(u.length===0&&o.length===0)return;const m=[],p=[];for(const[g,b]of[["post",u],["patch",o]])for(const v of b){const{inputs:w,outputs:A,events:T,attachments:C,...M}=v,B={inputs:w,outputs:A,events:T},D=Zt(M);p.push({name:`${g}.${M.id}`,payload:new Blob([D],{type:`application/json; length=${D.length}`})});for(const[ne,P]of Object.entries(B)){if(P===void 0)continue;const ee=Zt(P);p.push({name:`${g}.${M.id}.${ne}`,payload:new Blob([ee],{type:`application/json; length=${ee.length}`})})}if(M.id!==void 0){const ne=r[M.id];if(ne){delete r[M.id];for(const[P,ee]of Object.entries(ne)){let fe,ae;if(Array.isArray(ee)?[fe,ae]=ee:(fe=ee.mimeType,ae=ee.data),P.includes(".")){console.warn(`Skipping attachment '${P}' for run ${M.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}p.push({name:`attachment.${M.id}.${P}`,payload:new Blob([ae],{type:`${fe}; length=${ae.byteLength}`})})}}}m.push(`trace=${M.trace_id},id=${M.id}`)}await this._sendMultipartRequest(p,m.join("; "))}async _sendMultipartRequest(e,a){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),u=[];for(const m of e)u.push(new Blob([`--${r}\r
`])),u.push(new Blob([`Content-Disposition: form-data; name="${m.name}"\r
`,`Content-Type: ${m.payload.type}\r
\r
`])),u.push(m.payload),u.push(new Blob([`\r
`]));u.push(new Blob([`--${r}--\r
`]));const c=await new Blob(u).arrayBuffer(),d=await this.batchIngestCaller.call(le(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:c,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(d,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${a}`)}}async updateRun(e,a){ve(e),a.inputs&&(a.inputs=this.processInputs(a.inputs)),a.outputs&&(a.outputs=this.processOutputs(a.outputs));const r={...a,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(a.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const u={...this.headers,"Content-Type":"application/json"},o=await this.caller.call(le(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:u,body:Zt(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(o,"update run",!0)}async readRun(e,{loadChildRuns:a}={loadChildRuns:!1}){ve(e);let r=await this._get(`/runs/${e}`);return a&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:a,projectOpts:r}){if(a!==void 0){let u;a.session_id?u=a.session_id:r!=null&&r.projectName?u=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?u=r==null?void 0:r.projectId:u=(await this.readProject({projectName:ja("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${u}/r/${a.id}?poll=true`}else if(e!==void 0){const u=await this.readRun(e);if(!u.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${u.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const a=await WE(this.listRuns({id:e.child_run_ids})),r={},u={};a.sort((o,c)=>((o==null?void 0:o.dotted_order)??"").localeCompare((c==null?void 0:c.dotted_order)??""));for(const o of a){if(o.parent_run_id===null||o.parent_run_id===void 0)throw new Error(`Child run ${o.id} has no parent`);o.parent_run_id in r||(r[o.parent_run_id]=[]),r[o.parent_run_id].push(o),u[o.id]=o}e.child_runs=r[e.id]||[];for(const o in r)o!==e.id&&(u[o].child_runs=r[o]);return e}async*listRuns(e){const{projectId:a,projectName:r,parentRunId:u,traceId:o,referenceExampleId:c,startTime:d,executionOrder:m,isRoot:p,runType:g,error:b,id:v,query:w,filter:A,traceFilter:T,treeFilter:C,limit:M,select:B}=e;let D=[];if(a&&(D=Array.isArray(a)?a:[a]),r){const fe=Array.isArray(r)?r:[r],ae=await Promise.all(fe.map(ie=>this.readProject({projectName:ie}).then(_e=>_e.id)));D.push(...ae)}const ne=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],P={session:D.length?D:null,run_type:g,reference_example:c,query:w,filter:A,trace_filter:T,tree_filter:C,execution_order:m,parent_run:u,start_time:d?d.toISOString():null,error:b,id:v,limit:M,trace:o,select:B||ne,is_root:p};let ee=0;for await(const fe of this._getCursorPaginatedList("/runs/query",P))if(M){if(ee>=M)break;if(fe.length+ee>M){yield*fe.slice(0,M-ee);break}ee+=fe.length,yield*fe}else yield*fe}async getRunStats({id:e,trace:a,parentRun:r,runType:u,projectNames:o,projectIds:c,referenceExampleIds:d,startTime:m,endTime:p,error:g,query:b,filter:v,traceFilter:w,treeFilter:A,isRoot:T,dataSourceType:C}){let M=c||[];o&&(M=[...c||[],...await Promise.all(o.map(ee=>this.readProject({projectName:ee}).then(fe=>fe.id)))]);const D=Object.fromEntries(Object.entries({id:e,trace:a,parent_run:r,run_type:u,session:M,reference_example:d,start_time:m,end_time:p,error:g,query:b,filter:v,trace_filter:w,tree_filter:A,is_root:T,data_source_type:C}).filter(([ee,fe])=>fe!==void 0));return await(await this.caller.call(le(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(D),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:a}={}){const r={run_id:e,share_token:a||Lt()};ve(e);const o=await(await this.caller.call(le(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(o===null||!("share_token"in o))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${o.share_token}/r`}async unshareRun(e){ve(e);const a=await this.caller.call(le(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(a,"unshare run",!0)}async readRunSharedLink(e){ve(e);const r=await(await this.caller.call(le(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:a}={}){const r=new URLSearchParams({share_token:e});if(a!==void 0)for(const c of a)r.append("id",c);return ve(e),await(await this.caller.call(le(),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,a){if(!e&&!a)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:a})).id),ve(e);const u=await(await this.caller.call(le(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return u.url=`${this.getHostUrl()}/public/${u.share_token}/d`,u}async shareDataset(e,a){if(!e&&!a)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:a})).id);const r={dataset_id:e};ve(e);const o=await(await this.caller.call(le(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async unshareDataset(e){ve(e);const a=await this.caller.call(le(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(a,"unshare dataset",!0)}async readSharedDataset(e){return ve(e),await(await this.caller.call(le(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,a){const r={};a!=null&&a.exampleIds&&(r.id=a.exampleIds);const u=new URLSearchParams;Object.entries(r).forEach(([d,m])=>{Array.isArray(m)?m.forEach(p=>u.append(d,p)):u.append(d,m)});const o=await this.caller.call(le(),`${this.apiUrl}/public/${e}/examples?${u.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),c=await o.json();if(!o.ok)throw"detail"in c?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${c.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return c.map(d=>({...d,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:a=null,metadata:r=null,upsert:u=!1,projectExtra:o=null,referenceDatasetId:c=null}){const d=u?"?upsert=true":"",m=`${this.apiUrl}/sessions${d}`,p=o||{};r&&(p.metadata=r);const g={name:e,extra:p,description:a};c!==null&&(g.reference_dataset_id=c);const b=await this.caller.call(le(),m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(b,"create project"),await b.json()}async updateProject(e,{name:a=null,description:r=null,metadata:u=null,projectExtra:o=null,endTime:c=null}){const d=`${this.apiUrl}/sessions/${e}`;let m=o;u&&(m={...m||{},metadata:u});const p={name:a,extra:m,description:r,end_time:c?new Date(c).toISOString():null},g=await this.caller.call(le(),d,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(g,"update project"),await g.json()}async hasProject({projectId:e,projectName:a}){let r="/sessions";const u=new URLSearchParams;if(e!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ve(e),r+=`/${e}`;else if(a!==void 0)u.append("name",a);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(le(),`${this.apiUrl}${r}?${u}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const c=await o.json();return o.ok?Array.isArray(c)?c.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:a,includeStats:r}){let u="/sessions";const o=new URLSearchParams;if(e!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ve(e),u+=`/${e}`;else if(a!==void 0)o.append("name",a);else throw new Error("Must provide projectName or projectId");r!==void 0&&o.append("include_stats",r.toString());const c=await this._get(u,o);let d;if(Array.isArray(c)){if(c.length===0)throw new Error(`Project[id=${e}, name=${a}] not found`);d=c[0]}else d=c;return d}async getProjectUrl({projectId:e,projectName:a}){if(e===void 0&&a===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:a}),u=await this._getTenantId();return`${this.getHostUrl()}/o/${u}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:a}){if(e===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:a}),u=await this._getTenantId();return`${this.getHostUrl()}/o/${u}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const a of this._getPaginated("/sessions",e))return this._tenantId=a[0].tenant_id,a[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:a,nameContains:r,referenceDatasetId:u,referenceDatasetName:o,referenceFree:c,metadata:d}={}){const m=new URLSearchParams;if(e!==void 0)for(const p of e)m.append("id",p);if(a!==void 0&&m.append("name",a),r!==void 0&&m.append("name_contains",r),u!==void 0)m.append("reference_dataset",u);else if(o!==void 0){const p=await this.readDataset({datasetName:o});m.append("reference_dataset",p.id)}c!==void 0&&m.append("reference_free",c.toString()),d!==void 0&&m.append("metadata",JSON.stringify(d));for await(const p of this._getPaginated("/sessions",m))yield*p}async deleteProject({projectId:e,projectName:a}){let r;if(e===void 0&&a===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:a})).id:r=e,ve(r);const u=await this.caller.call(le(),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(u,`delete session ${r} (${a})`,!0)}async uploadCsv({csvFile:e,fileName:a,inputKeys:r,outputKeys:u,description:o,dataType:c,name:d}){const m=`${this.apiUrl}/datasets/upload`,p=new FormData;p.append("file",e,a),r.forEach(v=>{p.append("input_keys",v)}),u.forEach(v=>{p.append("output_keys",v)}),o&&p.append("description",o),c&&p.append("data_type",c),d&&p.append("name",d);const g=await this.caller.call(le(),m,{method:"POST",headers:this.headers,body:p,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(g,"upload CSV"),await g.json()}async createDataset(e,{description:a,dataType:r,inputsSchema:u,outputsSchema:o,metadata:c}={}){const d={name:e,description:a,extra:c?{metadata:c}:void 0};r&&(d.data_type=r),u&&(d.inputs_schema_definition=u),o&&(d.outputs_schema_definition=o);const m=await this.caller.call(le(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(m,"create dataset"),await m.json()}async readDataset({datasetId:e,datasetName:a}){let r="/datasets";const u=new URLSearchParams({limit:"1"});if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)ve(e),r+=`/${e}`;else if(a!==void 0)u.append("name",a);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(r,u);let c;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${a}] not found`);c=o[0]}else c=o;return c}async hasDataset({datasetId:e,datasetName:a}){try{return await this.readDataset({datasetId:e,datasetName:a}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:a,fromVersion:r,toVersion:u}){let o=e;if(o===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:a})).id);const c=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof u=="string"?u:u.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,c)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:a}){const r="/datasets";if(e===void 0)if(a!==void 0)e=(await this.readDataset({datasetName:a})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(d=>JSON.parse(d))}async*listDatasets({limit:e=100,offset:a=0,datasetIds:r,datasetName:u,datasetNameContains:o,metadata:c}={}){const d="/datasets",m=new URLSearchParams({limit:e.toString(),offset:a.toString()});if(r!==void 0)for(const p of r)m.append("id",p);u!==void 0&&m.append("name",u),o!==void 0&&m.append("name_contains",o),c!==void 0&&m.append("metadata",JSON.stringify(c));for await(const p of this._getPaginated(d,m))yield*p}async updateDataset(e){const{datasetId:a,datasetName:r,...u}=e;if(!a&&!r)throw new Error("Must provide either datasetName or datasetId");const o=a??(await this.readDataset({datasetName:r})).id;ve(o);const c=await this.caller.call(le(),`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,"update dataset"),await c.json()}async updateDatasetTag(e){const{datasetId:a,datasetName:r,asOf:u,tag:o}=e;if(!a&&!r)throw new Error("Must provide either datasetName or datasetId");const c=a??(await this.readDataset({datasetName:r})).id;ve(c);const d=await this.caller.call(le(),`${this.apiUrl}/datasets/${c}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof u=="string"?u:u.toISOString(),tag:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(d,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:a}){let r="/datasets",u=e;if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(a!==void 0&&(u=(await this.readDataset({datasetName:a})).id),u!==void 0)ve(u),r+=`/${u}`;else throw new Error("Must provide datasetName or datasetId");const o=await this.caller.call(le(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(o,`delete ${r}`),await o.json()}async indexDataset({datasetId:e,datasetName:a,tag:r}){let u=e;if(!u&&!a)throw new Error("Must provide either datasetName or datasetId");if(u&&a)throw new Error("Must provide either datasetName or datasetId, not both");u||(u=(await this.readDataset({datasetName:a})).id),ve(u);const o={tag:r},c=await this.caller.call(le(),`${this.apiUrl}/datasets/${u}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(c,"index dataset"),await c.json()}async similarExamples(e,a,r,{filter:u}={}){const o={limit:r,inputs:e};u!==void 0&&(o.filter=u),ve(a);const c=await this.caller.call(le(),`${this.apiUrl}/datasets/${a}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,"fetch similar examples"),(await c.json()).examples}async createExample(e,a,{datasetId:r,datasetName:u,createdAt:o,exampleId:c,metadata:d,split:m,sourceRunId:p}){let g=r;if(g===void 0&&u===void 0)throw new Error("Must provide either datasetName or datasetId");if(g!==void 0&&u!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");g===void 0&&(g=(await this.readDataset({datasetName:u})).id);const b=o||new Date,v={dataset_id:g,inputs:e,outputs:a,created_at:b==null?void 0:b.toISOString(),id:c,metadata:d,split:m,source_run_id:p},w=await this.caller.call(le(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(w,"create example"),await w.json()}async createExamples(e){const{inputs:a,outputs:r,metadata:u,sourceRunIds:o,exampleIds:c,datasetId:d,datasetName:m}=e;let p=d;if(p===void 0&&m===void 0)throw new Error("Must provide either datasetName or datasetId");if(p!==void 0&&m!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");p===void 0&&(p=(await this.readDataset({datasetName:m})).id);const g=a.map((w,A)=>({dataset_id:p,inputs:w,outputs:r?r[A]:void 0,metadata:u?u[A]:void 0,split:e.splits?e.splits[A]:void 0,id:c?c[A]:void 0,source_run_id:o?o[A]:void 0})),b=await this.caller.call(le(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(b,"create examples"),await b.json()}async createLLMExample(e,a,r){return this.createExample({input:e},{output:a},r)}async createChatExample(e,a,r){const u=e.map(c=>yy(c)?by(c):c),o=yy(a)?by(a):a;return this.createExample({input:u},{output:o},r)}async readExample(e){ve(e);const a=`/examples/${e}`,r=await this._get(a),{attachment_urls:u,...o}=r,c=o;return u&&(c.attachments=Object.entries(u).reduce((d,[m,p])=>(d[m.slice(11)]={presigned_url:p.presigned_url,mime_type:p.mime_type},d),{})),c}async*listExamples({datasetId:e,datasetName:a,exampleIds:r,asOf:u,splits:o,inlineS3Urls:c,metadata:d,limit:m,offset:p,filter:g,includeAttachments:b}={}){let v;if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)v=e;else if(a!==void 0)v=(await this.readDataset({datasetName:a})).id;else throw new Error("Must provide a datasetName or datasetId");const w=new URLSearchParams({dataset:v}),A=u?typeof u=="string"?u:u==null?void 0:u.toISOString():void 0;A&&w.append("as_of",A);const T=c??!0;if(w.append("inline_s3_urls",T.toString()),r!==void 0)for(const M of r)w.append("id",M);if(o!==void 0)for(const M of o)w.append("splits",M);if(d!==void 0){const M=JSON.stringify(d);w.append("metadata",M)}m!==void 0&&w.append("limit",m.toString()),p!==void 0&&w.append("offset",p.toString()),g!==void 0&&w.append("filter",g),b===!0&&["attachment_urls","outputs","metadata"].forEach(M=>w.append("select",M));let C=0;for await(const M of this._getPaginated("/examples",w)){for(const B of M){const{attachment_urls:D,...ne}=B,P=ne;D&&(P.attachments=Object.entries(D).reduce((ee,[fe,ae])=>(ee[fe.slice(11)]={presigned_url:ae.presigned_url,mime_type:ae.mime_type||void 0},ee),{})),yield P,C++}if(m!==void 0&&C>=m)break}}async deleteExample(e){ve(e);const a=`/examples/${e}`,r=await this.caller.call(le(),this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,`delete ${a}`),await r.json()}async updateExample(e,a){ve(e);const r=await this.caller.call(le(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(r,"update example"),await r.json()}async updateExamples(e){const a=await this.caller.call(le(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(a,"update examples"),await a.json()}async readDatasetVersion({datasetId:e,datasetName:a,asOf:r,tag:u}){let o;if(e?o=e:o=(await this.readDataset({datasetName:a})).id,ve(o),r&&u||!r&&!u)throw new Error("Exactly one of asOf and tag must be specified.");const c=new URLSearchParams;r!==void 0&&c.append("as_of",typeof r=="string"?r:r.toISOString()),u!==void 0&&c.append("tag",u);const d=await this.caller.call(le(),`${this.apiUrl}/datasets/${o}/version?${c.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(d,"read dataset version"),await d.json()}async listDatasetSplits({datasetId:e,datasetName:a,asOf:r}){let u;if(e===void 0&&a===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?u=(await this.readDataset({datasetName:a})).id:u=e,ve(u);const o=new URLSearchParams,c=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return c&&o.append("as_of",c),await this._get(`/datasets/${u}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:a,splitName:r,exampleIds:u,remove:o=!1}){let c;if(e===void 0&&a===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?c=(await this.readDataset({datasetName:a})).id:c=e,ve(c);const d={split_name:r,examples:u.map(p=>(ve(p),p)),remove:o},m=await this.caller.call(le(),`${this.apiUrl}/datasets/${c}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(m,"update dataset splits",!0)}async evaluateRun(e,a,{sourceInfo:r,loadChildRuns:u,referenceExample:o}={loadChildRuns:!1}){Kb("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let c;if(typeof e=="string")c=await this.readRun(e,{loadChildRuns:u});else if(typeof e=="object"&&"id"in e)c=e;else throw new Error(`Invalid run type: ${typeof e}`);c.reference_example_id!==null&&c.reference_example_id!==void 0&&(o=await this.readExample(c.reference_example_id));const d=await a.evaluateRun(c,o),[m,p]=await this._logEvaluationFeedback(d,c,r);return p[0]}async createFeedback(e,a,{score:r,value:u,correction:o,comment:c,sourceInfo:d,feedbackSourceType:m="api",sourceRunId:p,feedbackId:g,feedbackConfig:b,projectId:v,comparativeExperimentId:w}){var B;if(!e&&!v)throw new Error("One of runId or projectId must be provided");if(e&&v)throw new Error("Only one of runId or projectId can be provided");const A={type:m??"api",metadata:d??{}};p!==void 0&&(A==null?void 0:A.metadata)!==void 0&&!A.metadata.__run&&(A.metadata.__run={run_id:p}),(A==null?void 0:A.metadata)!==void 0&&((B=A.metadata.__run)==null?void 0:B.run_id)!==void 0&&ve(A.metadata.__run.run_id);const T={id:g??Lt(),run_id:e,key:a,score:r,value:u,correction:o,comment:c,feedback_source:A,comparative_experiment_id:w,feedbackConfig:b,session_id:v},C=`${this.apiUrl}/feedback`,M=await this.caller.call(le(),C,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(T),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(M,"create feedback",!0),T}async updateFeedback(e,{score:a,value:r,correction:u,comment:o}){const c={};a!=null&&(c.score=a),r!=null&&(c.value=r),u!=null&&(c.correction=u),o!=null&&(c.comment=o),ve(e);const d=await this.caller.call(le(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(d,"update feedback",!0)}async readFeedback(e){ve(e);const a=`/feedback/${e}`;return await this._get(a)}async deleteFeedback(e){ve(e);const a=`/feedback/${e}`,r=await this.caller.call(le(),this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,`delete ${a}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:a,feedbackSourceTypes:r}={}){const u=new URLSearchParams;if(e&&u.append("run",e.join(",")),a)for(const o of a)u.append("key",o);if(r)for(const o of r)u.append("source",o);for await(const o of this._getPaginated("/feedback",u))yield*o}async createPresignedFeedbackToken(e,a,{expiration:r,feedbackConfig:u}={}){const o={run_id:e,feedback_key:a,feedback_config:u};return r?typeof r=="string"?o.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(o.expires_in=r):o.expires_in={hours:3},await(await this.caller.call(le(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:a,referenceDatasetId:r,createdAt:u,description:o,metadata:c,id:d}){var g;if(a.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:a[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const m={id:d,name:e,experiment_ids:a,reference_dataset_id:r,description:o,created_at:(g=u??new Date)==null?void 0:g.toISOString(),extra:{}};return c&&(m.extra.metadata=c),await(await this.caller.call(le(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){ve(e);const a=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",a))yield*r}_selectEvalResults(e){let a;return"results"in e?a=e.results:Array.isArray(e)?a=e:a=[e],a}async _logEvaluationFeedback(e,a,r){const u=this._selectEvalResults(e),o=[];for(const c of u){let d=r||{};c.evaluatorInfo&&(d={...c.evaluatorInfo,...d});let m=null;c.targetRunId?m=c.targetRunId:a&&(m=a.id),o.push(await this.createFeedback(m,c.key,{score:c.score,value:c.value,comment:c.comment,correction:c.correction,sourceInfo:d,sourceRunId:c.sourceRunId,feedbackConfig:c.feedbackConfig,feedbackSourceType:"model"}))}return[u,o]}async logEvaluationFeedback(e,a,r){const[u]=await this._logEvaluationFeedback(e,a,r);return u}async*listAnnotationQueues(e={}){const{queueIds:a,name:r,nameContains:u,limit:o}=e,c=new URLSearchParams;a&&a.forEach((m,p)=>{ve(m,`queueIds[${p}]`),c.append("ids",m)}),r&&c.append("name",r),u&&c.append("name_contains",u),c.append("limit",(o!==void 0?Math.min(o,100):100).toString());let d=0;for await(const m of this._getPaginated("/annotation-queues",c))if(yield*m,d++,o!==void 0&&d>=o)break}async createAnnotationQueue(e){const{name:a,description:r,queueId:u}=e,o={name:a,description:r,id:u||Lt()},c=await this.caller.call(le(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(o).filter(([m,p])=>p!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,"create annotation queue"),await c.json()}async readAnnotationQueue(e){const a=await this.listAnnotationQueues({queueIds:[e]}).next();if(a.done)throw new Error(`Annotation queue with ID ${e} not found`);return a.value}async updateAnnotationQueue(e,a){const{name:r,description:u}=a,o=await this.caller.call(le(),`${this.apiUrl}/annotation-queues/${ve(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:u}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(o,"update annotation queue")}async deleteAnnotationQueue(e){const a=await this.caller.call(le(),`${this.apiUrl}/annotation-queues/${ve(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(a,"delete annotation queue")}async addRunsToAnnotationQueue(e,a){const r=await this.caller.call(le(),`${this.apiUrl}/annotation-queues/${ve(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a.map((u,o)=>ve(u,`runIds[${o}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,a){const r=`/annotation-queues/${ve(e,"queueId")}/run`,u=await this.caller.call(le(),`${this.apiUrl}${r}/${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(u,"get run from annotation queue"),await u.json()}async deleteRunFromAnnotationQueue(e,a){const r=await this.caller.call(le(),`${this.apiUrl}/annotation-queues/${ve(e,"queueId")}/runs/${ve(a,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const a=await this.caller.call(le(),`${this.apiUrl}/annotation-queues/${ve(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(a,"get size from annotation queue"),await a.json()}async _currentTenantIsOwner(e){const a=await this._getSettings();return e=="-"||a.tenant_handle===e}async _ownerConflictError(e,a){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${a}`)}async _getLatestCommitHash(e){const a=await this.caller.call(le(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await a.json();if(!a.ok){const u=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),o=new Error(`Error ${a.status}: ${a.statusText}
${u}`);throw o.statusCode=a.status,o}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,a){const[r,u,o]=Ca(e),c=await this.caller.call(le(),`${this.apiUrl}/likes/${r}/${u}`,{method:"POST",body:JSON.stringify({like:a}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,`${a?"like":"unlike"} prompt`),await c.json()}async _getPromptUrl(e){const[a,r,u]=Ca(e);if(await this._currentTenantIsOwner(a)){const o=await this._getSettings();return u!=="latest"?`${this.getHostUrl()}/prompts/${r}/${u.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${o.id}`}else return u!=="latest"?`${this.getHostUrl()}/hub/${a}/${r}/${u.substring(0,8)}`:`${this.getHostUrl()}/hub/${a}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const a of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*a}async*listPrompts(e){const a=new URLSearchParams;a.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),a.append("sort_direction","desc"),a.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&a.append("is_public",e.isPublic.toString()),e!=null&&e.query&&a.append("query",e.query);for await(const r of this._getPaginated("/repos",a,u=>u.repos))yield*r}async getPrompt(e){const[a,r,u]=Ca(e),o=await this.caller.call(le(),`${this.apiUrl}/repos/${a}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(o.status===404)return null;await ge(o,"get prompt");const c=await o.json();return c.repo?c.repo:null}async createPrompt(e,a){const r=await this._getSettings();if(a!=null&&a.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[u,o,c]=Ca(e);if(!await this._currentTenantIsOwner(u))throw await this._ownerConflictError("create a prompt",u);const d={repo_handle:o,...(a==null?void 0:a.description)&&{description:a.description},...(a==null?void 0:a.readme)&&{readme:a.readme},...(a==null?void 0:a.tags)&&{tags:a.tags},is_public:!!(a!=null&&a.isPublic)},m=await this.caller.call(le(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(m,"create prompt");const{repo:p}=await m.json();return p}async createCommit(e,a,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[u,o,c]=Ca(e),d=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${u}/${o}`):r==null?void 0:r.parentCommitHash,m={manifest:JSON.parse(JSON.stringify(a)),parent_commit:d},p=await this.caller.call(le(),`${this.apiUrl}/commits/${u}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(p,"create commit");const g=await p.json();return this._getPromptUrl(`${u}/${o}${g.commit_hash?`:${g.commit_hash}`:""}`)}async updateExamplesMultipart(e,a=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const r=new FormData;for(const c of a){const d=c.id,m={...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},p=Zt(m),g=new Blob([p],{type:"application/json"});if(r.append(d,g),c.inputs){const b=Zt(c.inputs),v=new Blob([b],{type:"application/json"});r.append(`${d}.inputs`,v)}if(c.outputs){const b=Zt(c.outputs),v=new Blob([b],{type:"application/json"});r.append(`${d}.outputs`,v)}if(c.attachments)for(const[b,v]of Object.entries(c.attachments)){let w,A;Array.isArray(v)?[w,A]=v:(w=v.mimeType,A=v.data);const T=new Blob([A],{type:`${w}; length=${A.byteLength}`});r.append(`${d}.attachment.${b}`,T)}if(c.attachments_operations){const b=Zt(c.attachments_operations),v=new Blob([b],{type:"application/json"});r.append(`${d}.attachments_operations`,v)}}return await(await this.caller.call(le(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(e,a=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const r=new FormData;for(const c of a){const d=(c.id??Lt()).toString(),m={created_at:c.created_at,...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},p=Zt(m),g=new Blob([p],{type:"application/json"});r.append(d,g);const b=Zt(c.inputs),v=new Blob([b],{type:"application/json"});if(r.append(`${d}.inputs`,v),c.outputs){const w=Zt(c.outputs),A=new Blob([w],{type:"application/json"});r.append(`${d}.outputs`,A)}if(c.attachments)for(const[w,A]of Object.entries(c.attachments)){let T,C;Array.isArray(A)?[T,C]=A:(T=A.mimeType,C=A.data);const M=new Blob([C],{type:`${T}; length=${C.byteLength}`});r.append(`${d}.attachment.${w}`,M)}}return await(await this.caller.call(le(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r})).json()}async updatePrompt(e,a){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,u]=Ca(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const o={};if((a==null?void 0:a.description)!==void 0&&(o.description=a.description),(a==null?void 0:a.readme)!==void 0&&(o.readme=a.readme),(a==null?void 0:a.tags)!==void 0&&(o.tags=a.tags),(a==null?void 0:a.isPublic)!==void 0&&(o.is_public=a.isPublic),(a==null?void 0:a.isArchived)!==void 0&&(o.is_archived=a.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const c=await this.caller.call(le(),`${this.apiUrl}/repos/${r}/${u}`,{method:"PATCH",body:JSON.stringify(o),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,"update prompt"),c.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[a,r,u]=Ca(e);if(!await this._currentTenantIsOwner(a))throw await this._ownerConflictError("delete a prompt",a);return await(await this.caller.call(le(),`${this.apiUrl}/repos/${a}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,a){const[r,u,o]=Ca(e),c=await this.caller.call(le(),`${this.apiUrl}/commits/${r}/${u}/${o}${a!=null&&a.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(c,"pull prompt commit");const d=await c.json();return{owner:r,repo:u,commit_hash:d.commit_hash,manifest:d.manifest,examples:d.examples}}async _pullPrompt(e,a){const r=await this.pullPromptCommit(e,{includeModel:a==null?void 0:a.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,a){return await this.promptExists(e)?a&&Object.keys(a).some(u=>u!=="object")&&await this.updatePrompt(e,{description:a==null?void 0:a.description,readme:a==null?void 0:a.readme,tags:a==null?void 0:a.tags,isPublic:a==null?void 0:a.isPublic}):await this.createPrompt(e,{description:a==null?void 0:a.description,readme:a==null?void 0:a.readme,tags:a==null?void 0:a.tags,isPublic:a==null?void 0:a.isPublic}),a!=null&&a.object?await this.createCommit(e,a==null?void 0:a.object,{parentCommitHash:a==null?void 0:a.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,a={}){const{sourceApiUrl:r=this.apiUrl,datasetName:u}=a,[o,c]=this.parseTokenOrUrl(e,r),d=new Hs({apiUrl:o,apiKey:"placeholder"}),m=await d.readSharedDataset(c),p=u||m.name;try{if(await this.hasDataset({datasetId:p})){console.log(`Dataset ${p} already exists in your tenant. Skipping.`);return}}catch{}const g=await d.listSharedExamples(c),b=await this.createDataset(p,{description:m.description,dataType:m.data_type||"kv",inputsSchema:m.inputs_schema_definition??void 0,outputsSchema:m.outputs_schema_definition??void 0});try{await this.createExamples({inputs:g.map(v=>v.inputs),outputs:g.flatMap(v=>v.outputs?[v.outputs]:[]),datasetId:b.id})}catch(v){throw console.error(`An error occurred while creating dataset ${p}. You should delete it manually.`),v}}parseTokenOrUrl(e,a,r=2,u="dataset"){try{return ve(e),[a,e]}catch{}try{const c=new URL(e).pathname.split("/").filter(d=>d!=="");if(c.length>=r){const d=c[c.length-r];return[a,d]}else throw new Error(`Invalid public ${u} URL: ${e}`)}catch{throw new Error(`Invalid public ${u} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}const ev="0.3.11";var Ts={};let Jn;const rS=()=>typeof window<"u"&&typeof window.document<"u",iS=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",sS=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),tv=()=>typeof Deno<"u",uS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!tv(),lS=()=>Jn||(rS()?Jn="browser":uS()?Jn="node":iS()?Jn="webworker":sS()?Jn="jsdom":tv()?Jn="deno":Jn="other",Jn);let hd;function nv(){if(hd===void 0){const s=lS(),e=fS();hd={library:"langsmith",runtime:s,sdk:"langsmith-js",sdk_version:ev,...e}}return hd}function oS(){const s=cS()||{},e={},a=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,u]of Object.entries(s))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof u=="string"&&!a.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=u:e[r]=u);return e}function cS(){try{return typeof process<"u"&&Ts?Object.entries(Ts).reduce((s,[e,a])=>(s[e]=String(a),s),{}):void 0}catch{return}}function hr(s){try{return typeof process<"u"?Ts==null?void 0:Ts[s]:void 0}catch{return}}function ja(s){return hr(`LANGSMITH_${s}`)||hr(`LANGCHAIN_${s}`)}let md;function fS(){if(md!==void 0)return md;const s=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const a of s){const r=hr(a);r!==void 0&&(e[a]=r)}return md=e,e}const dS=s=>!!["TRACING_V2","TRACING"].find(a=>ja(a)==="true"),pd=Symbol.for("lc:context_variables");function hS(s){return s.replace(/[-:.]/g,"")}function mS(s,e,a=1){const r=a.toFixed(0).slice(0,3).padStart(3,"0");return hS(`${new Date(s).toISOString().slice(0,-1)}${r}Z`)+e}class kl{constructor(e,a){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=a}static fromHeader(e){const a=e.split(",");let r={},u=[];for(const o of a){const[c,d]=o.split("="),m=decodeURIComponent(d);c==="langsmith-metadata"?r=JSON.parse(m):c==="langsmith-tags"&&(u=m.split(","))}return new kl(r,u)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class Vt{constructor(e){var d;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),av(e)){Object.assign(this,{...e});return}const a=Vt.getDefaultConfig(),{metadata:r,...u}=e,o=u.client??Vt.getSharedClient(),c={...r,...(d=u==null?void 0:u.extra)==null?void 0:d.metadata};if(u.extra={...u.extra,metadata:c},Object.assign(this,{...a,...u,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const m=mS(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+m:this.dotted_order=m}}static getDefaultConfig(){return{id:Lt(),run_type:"chain",project_name:ja("PROJECT")??hr("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:hr("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:hr("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Vt.sharedClient||(Vt.sharedClient=new Hs),Vt.sharedClient}createChild(e){var m,p,g,b,v,w;const a=this.child_execution_order+1,r=new Vt({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:a,child_execution_order:a});pd in this&&(r[pd]=this[pd]);const u=Symbol.for("lc:child_config"),o=((m=e.extra)==null?void 0:m[u])??this.extra[u];if(gS(o)){const A={...o},T=pS(A.callbacks)?(g=(p=A.callbacks).copy)==null?void 0:g.call(p):void 0;T&&(Object.assign(T,{_parentRunId:r.id}),(w=(v=(b=T.handlers)==null?void 0:b.find(rv))==null?void 0:v.updateFromRunTree)==null||w.call(v,r),A.callbacks=T),r.extra[u]=A}const c=new Set;let d=this;for(;d!=null&&!c.has(d.id);)c.add(d.id),d.child_execution_order=Math.max(d.child_execution_order,a),d=d.parent_run;return this.child_runs.push(r),r}async end(e,a,r=Date.now(),u){this.outputs=this.outputs??e,this.error=this.error??a,this.end_time=this.end_time??r,u&&Object.keys(u).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...u}}:{metadata:u})}_convertToCreate(e,a,r=!0){var m;const u=e.extra??{};if(u.runtime||(u.runtime={}),a)for(const[p,g]of Object.entries(a))u.runtime[p]||(u.runtime[p]=g);let o,c;return r?(c=(m=e.parent_run)==null?void 0:m.id,o=[]):(o=e.child_runs.map(p=>this._convertToCreate(p,a,r)),c=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:u,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:c,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const a=nv(),r=await this._convertToCreate(this,a,!0);if(await this.client.createRun(r),!e){Kb("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const u of this.child_runs)await u.postRun(!1)}}catch(a){console.error(`Error in postRun for run ${this.id}:`,a)}}async patchRun(){var e;try{const a={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments};await this.client.updateRun(this.id,a)}catch(a){console.error(`Error in patchRun for run ${this.id}`,a)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,a){var p,g,b,v;const r=e==null?void 0:e.callbacks;let u,o,c,d=dS();if(r){const w=((p=r==null?void 0:r.getParentRunId)==null?void 0:p.call(r))??"",A=(g=r==null?void 0:r.handlers)==null?void 0:g.find(T=>(T==null?void 0:T.name)=="langchain_tracer");u=(b=A==null?void 0:A.getRun)==null?void 0:b.call(A,w),o=A==null?void 0:A.projectName,c=A==null?void 0:A.client,d=d||!!A}return u?new Vt({name:u.name,id:u.id,trace_id:u.trace_id,dotted_order:u.dotted_order,client:c,tracingEnabled:d,project_name:o,tags:[...new Set(((u==null?void 0:u.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(v=u==null?void 0:u.extra)==null?void 0:v.metadata,...e==null?void 0:e.metadata}}}).createChild(a):new Vt({...a,client:c,tracingEnabled:d,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,a){var p;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,u=r["langsmith-trace"];if(!u||typeof u!="string")return;const o=u.trim(),c=o.split(".").map(g=>{const[b,v]=g.split("Z");return{strTime:b,time:Date.parse(b+"Z"),uuid:v}}),d=c[0].uuid,m={...a,name:(a==null?void 0:a.name)??"parent",run_type:(a==null?void 0:a.run_type)??"chain",start_time:(a==null?void 0:a.start_time)??Date.now(),id:(p=c.at(-1))==null?void 0:p.uuid,trace_id:d,dotted_order:o};if(r.baggage&&typeof r.baggage=="string"){const g=kl.fromHeader(r.baggage);m.metadata=g.metadata,m.tags=g.tags}return new Vt(m)}toHeaders(e){var r;const a={"langsmith-trace":this.dotted_order,baggage:new kl((r=this.extra)==null?void 0:r.metadata,this.tags).toHeader()};if(e)for(const[u,o]of Object.entries(a))e.set(u,o);return a}}Object.defineProperty(Vt,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function av(s){return s!==void 0&&typeof s.createChild=="function"&&typeof s.postRun=="function"}function rv(s){return typeof s=="object"&&s!=null&&typeof s.name=="string"&&s.name==="langchain_tracer"}function hb(s){return Array.isArray(s)&&s.some(e=>rv(e))}function pS(s){return typeof s=="object"&&s!=null&&Array.isArray(s.handlers)}function gS(s){var e;return s!==void 0&&typeof s.callbacks=="object"&&(hb((e=s.callbacks)==null?void 0:e.handlers)||hb(s.callbacks))}let yS=class{getStore(){}run(e,a){return a()}};const gd=Symbol.for("ls:tracing_async_local_storage"),bS=new yS;let vS=class{getInstance(){return globalThis[gd]??bS}initializeGlobalInstance(e){globalThis[gd]===void 0&&(globalThis[gd]=e)}};const _S=new vS,wS=()=>{const s=_S.getInstance().getStore();if(!av(s))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join(`
`));return s};function Xd(s){return typeof s=="function"&&"langsmith:traceable"in s}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const AS=Object.prototype.hasOwnProperty;function ES(s,e){return AS.call(s,e)}function SS(s){if(Array.isArray(s)){const a=new Array(s.length);for(let r=0;r<a.length;r++)a[r]=""+r;return a}if(Object.keys)return Object.keys(s);let e=[];for(let a in s)ES(s,a)&&e.push(a);return e}function mi(s){switch(typeof s){case"object":return JSON.parse(JSON.stringify(s));case"undefined":return null;default:return s}}function kd(s){let e=0;const a=s.length;let r;for(;e<a;){if(r=s.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function TS(s){return s.replace(/~1/g,"/").replace(/~0/g,"~")}function Ud(s){if(s===void 0)return!0;if(s){if(Array.isArray(s)){for(let a=0,r=s.length;a<r;a++)if(Ud(s[a]))return!0}else if(typeof s=="object"){const a=SS(s),r=a.length;for(var e=0;e<r;e++)if(Ud(s[a[e]]))return!0}}return!1}function mb(s,e){const a=[s];for(const r in e){const u=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof u<"u"&&a.push(`${r}: ${u}`)}return a.join(`
`)}class OS extends Error{constructor(e,a,r,u,o){super(mb(e,{name:a,index:r,operation:u,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=mb(e,{name:a,index:r,operation:u,tree:o})}}const We=OS,ui={add:function(s,e,a){return s[e]=this.value,{newDocument:a}},remove:function(s,e,a){var r=s[e];return delete s[e],{newDocument:a,removed:r}},replace:function(s,e,a){var r=s[e];return s[e]=this.value,{newDocument:a,removed:r}},move:function(s,e,a){let r=Ld(a,this.path);r&&(r=mi(r));const u=Os(a,{op:"remove",path:this.from}).removed;return Os(a,{op:"add",path:this.path,value:u}),{newDocument:a,removed:r}},copy:function(s,e,a){const r=Ld(a,this.from);return Os(a,{op:"add",path:this.path,value:mi(r)}),{newDocument:a}},test:function(s,e,a){return{newDocument:a,test:Ll(s[e],this.value)}},_get:function(s,e,a){return this.value=s[e],{newDocument:a}}};var RS={add:function(s,e,a){return kd(e)?s.splice(e,0,this.value):s[e]=this.value,{newDocument:a,index:e}},remove:function(s,e,a){var r=s.splice(e,1);return{newDocument:a,removed:r[0]}},replace:function(s,e,a){var r=s[e];return s[e]=this.value,{newDocument:a,removed:r}},move:ui.move,copy:ui.copy,test:ui.test,_get:ui._get};function Ld(s,e){if(e=="")return s;var a={op:"_get",path:e};return Os(s,a),a.value}function Os(s,e,a=!1,r=!0,u=!0,o=0){if(a&&(typeof a=="function"?a(e,0,s,e.path):Id(e,0)),e.path===""){let c={newDocument:s};if(e.op==="add")return c.newDocument=e.value,c;if(e.op==="replace")return c.newDocument=e.value,c.removed=s,c;if(e.op==="move"||e.op==="copy")return c.newDocument=Ld(s,e.from),e.op==="move"&&(c.removed=s),c;if(e.op==="test"){if(c.test=Ll(s,e.value),c.test===!1)throw new We("Test operation failed","TEST_OPERATION_FAILED",o,e,s);return c.newDocument=s,c}else{if(e.op==="remove")return c.removed=s,c.newDocument=null,c;if(e.op==="_get")return e.value=s,c;if(a)throw new We("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,s);return c}}else{r||(s=mi(s));const d=(e.path||"").split("/");let m=s,p=1,g=d.length,b,v,w;for(typeof a=="function"?w=a:w=Id;;){if(v=d[p],v&&v.indexOf("~")!=-1&&(v=TS(v)),u&&(v=="__proto__"||v=="prototype"&&p>0&&d[p-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(a&&b===void 0&&(m[v]===void 0?b=d.slice(0,p).join("/"):p==g-1&&(b=e.path),b!==void 0&&w(e,0,s,b)),p++,Array.isArray(m)){if(v==="-")v=m.length;else{if(a&&!kd(v))throw new We("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,s);kd(v)&&(v=~~v)}if(p>=g){if(a&&e.op==="add"&&v>m.length)throw new We("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,s);const A=RS[e.op].call(e,m,v,s);if(A.test===!1)throw new We("Test operation failed","TEST_OPERATION_FAILED",o,e,s);return A}}else if(p>=g){const A=ui[e.op].call(e,m,v,s);if(A.test===!1)throw new We("Test operation failed","TEST_OPERATION_FAILED",o,e,s);return A}if(m=m[v],a&&p<g&&(!m||typeof m!="object"))throw new We("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,s)}}}function Ul(s,e,a,r=!0,u=!0){if(a&&!Array.isArray(e))throw new We("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(s=mi(s));const o=new Array(e.length);for(let c=0,d=e.length;c<d;c++)o[c]=Os(s,e[c],a,!0,u,c),s=o[c].newDocument;return o.newDocument=s,o}function Id(s,e,a,r){if(typeof s!="object"||s===null||Array.isArray(s))throw new We("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,s,a);if(ui[s.op]){if(typeof s.path!="string")throw new We("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,s,a);if(s.path.indexOf("/")!==0&&s.path.length>0)throw new We('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,s,a);if((s.op==="move"||s.op==="copy")&&typeof s.from!="string")throw new We("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,s,a);if((s.op==="add"||s.op==="replace"||s.op==="test")&&s.value===void 0)throw new We("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,s,a);if((s.op==="add"||s.op==="replace"||s.op==="test")&&Ud(s.value))throw new We("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,s,a);if(a){if(s.op=="add"){var u=s.path.split("/").length,o=r.split("/").length;if(u!==o+1&&u!==o)throw new We("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,s,a)}else if(s.op==="replace"||s.op==="remove"||s.op==="_get"){if(s.path!==r)throw new We("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,s,a)}else if(s.op==="move"||s.op==="copy"){var c={op:"_get",path:s.from,value:void 0},d=CS([c],a);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new We("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,s,a)}}}else throw new We("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,s,a)}function CS(s,e,a){try{if(!Array.isArray(s))throw new We("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Ul(mi(e),mi(s),a||!0);else{a=a||Id;for(var r=0;r<s.length;r++)a(s[r],r,e,void 0)}}catch(u){if(u instanceof We)return u;throw u}}function Ll(s,e){if(s===e)return!0;if(s&&e&&typeof s=="object"&&typeof e=="object"){var a=Array.isArray(s),r=Array.isArray(e),u,o,c;if(a&&r){if(o=s.length,o!=e.length)return!1;for(u=o;u--!==0;)if(!Ll(s[u],e[u]))return!1;return!0}if(a!=r)return!1;var d=Object.keys(s);if(o=d.length,o!==Object.keys(e).length)return!1;for(u=o;u--!==0;)if(!e.hasOwnProperty(d[u]))return!1;for(u=o;u--!==0;)if(c=d[u],!Ll(s[c],e[c]))return!1;return!0}return s!==s&&e!==e}var yd={};const xS=()=>typeof window<"u"&&typeof window.document<"u",NS=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",jS=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Jd=()=>typeof Deno<"u",MS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Jd(),DS=()=>{let s;return xS()?s="browser":MS()?s="node":NS()?s="webworker":jS()?s="jsdom":Jd()?s="deno":s="other",s};let bd;async function kS(){return bd===void 0&&(bd={library:"langchain-js",runtime:DS()}),bd}function Ma(s){try{return typeof process<"u"?yd==null?void 0:yd[s]:Jd()?Deno==null?void 0:Deno.env.get(s):void 0}catch{return}}class US{}function LS(s){return"lc_prefer_streaming"in s&&s.lc_prefer_streaming}class Ks extends US{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Ib(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Ma("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Da.prototype.toJSON.call(this)}toJSONNotImplemented(){return Da.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class a extends Ks{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Lt()}),Object.assign(this,e)}}return new a}}const IS=s=>{const e=s;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function vd(s,e){return s&&!Array.isArray(s)&&typeof s=="object"?s:{[e]:s}}function $S(s){return s.replace(/[-:.]/g,"")}function BS(s,e,a){const r=a.toFixed(0).slice(0,3).padStart(3,"0");return $S(`${new Date(s).toISOString().slice(0,-1)}${r}Z`)+e}function vs(s){return typeof s._addRunToRunMap=="function"}class Fs extends Ks{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,a){e.child_runs.push(a)}_addRunToRunMap(e){const a=BS(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const u=this.runMap.get(r.parent_run_id);u&&(this._addChildRun(u,r),u.child_execution_order=Math.max(u.child_execution_order,r.child_execution_order),r.trace_id=u.trace_id,u.dotted_order!==void 0&&(r.dotted_order=[u.dotted_order,a].join(".")))}else r.trace_id=r.id,r.dotted_order=a;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const a=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);a?a.child_execution_order=Math.max(a.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const a=e!==void 0&&this.runMap.get(e);return a?a.child_execution_order+1:1}_createRunForLLMStart(e,a,r,u,o,c,d,m){const p=this._getExecutionOrder(u),g=Date.now(),b=d?{...o,metadata:d}:o,v={id:r,name:m??e.id[e.id.length-1],parent_run_id:u,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:{prompts:a},execution_order:p,child_runs:[],child_execution_order:p,run_type:"llm",extra:b??{},tags:c||[]};return this._addRunToRunMap(v)}async handleLLMStart(e,a,r,u,o,c,d,m){var g,b;const p=this.runMap.get(r)??this._createRunForLLMStart(e,a,r,u,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,p)),await((b=this.onLLMStart)==null?void 0:b.call(this,p)),p}_createRunForChatModelStart(e,a,r,u,o,c,d,m){const p=this._getExecutionOrder(u),g=Date.now(),b=d?{...o,metadata:d}:o,v={id:r,name:m??e.id[e.id.length-1],parent_run_id:u,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:{messages:a},execution_order:p,child_runs:[],child_execution_order:p,run_type:"llm",extra:b??{},tags:c||[]};return this._addRunToRunMap(v)}async handleChatModelStart(e,a,r,u,o,c,d,m){var g,b;const p=this.runMap.get(r)??this._createRunForChatModelStart(e,a,r,u,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,p)),await((b=this.onLLMStart)==null?void 0:b.call(this,p)),p}async handleLLMEnd(e,a,r,u,o){var d;const c=this.runMap.get(a);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.outputs=e,c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((d=this.onLLMEnd)==null?void 0:d.call(this,c)),await this._endTrace(c),c}async handleLLMError(e,a,r,u,o){var d;const c=this.runMap.get(a);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((d=this.onLLMError)==null?void 0:d.call(this,c)),await this._endTrace(c),c}_createRunForChainStart(e,a,r,u,o,c,d,m){const p=this._getExecutionOrder(u),g=Date.now(),b={id:r,name:m??e.id[e.id.length-1],parent_run_id:u,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:a,execution_order:p,child_execution_order:p,run_type:d??"chain",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(b)}async handleChainStart(e,a,r,u,o,c,d,m){var g,b;const p=this.runMap.get(r)??this._createRunForChainStart(e,a,r,u,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,p)),await((b=this.onChainStart)==null?void 0:b.call(this,p)),p}async handleChainEnd(e,a,r,u,o){var d;const c=this.runMap.get(a);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.outputs=vd(e,"output"),c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=vd(o.inputs,"input")),await((d=this.onChainEnd)==null?void 0:d.call(this,c)),await this._endTrace(c),c}async handleChainError(e,a,r,u,o){var d;const c=this.runMap.get(a);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=vd(o.inputs,"input")),await((d=this.onChainError)==null?void 0:d.call(this,c)),await this._endTrace(c),c}_createRunForToolStart(e,a,r,u,o,c,d){const m=this._getExecutionOrder(u),p=Date.now(),g={id:r,name:d??e.id[e.id.length-1],parent_run_id:u,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{input:a},execution_order:m,child_execution_order:m,run_type:"tool",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(g)}async handleToolStart(e,a,r,u,o,c,d){var p,g;const m=this.runMap.get(r)??this._createRunForToolStart(e,a,r,u,o,c,d);return await((p=this.onRunCreate)==null?void 0:p.call(this,m)),await((g=this.onToolStart)==null?void 0:g.call(this,m)),m}async handleToolEnd(e,a){var u;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((u=this.onToolEnd)==null?void 0:u.call(this,r)),await this._endTrace(r),r}async handleToolError(e,a){var u;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((u=this.onToolError)==null?void 0:u.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,a){var o;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const u=r;u.actions=u.actions||[],u.actions.push(e),u.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,r))}async handleAgentEnd(e,a){var u;const r=this.runMap.get(a);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((u=this.onAgentEnd)==null?void 0:u.call(this,r)))}_createRunForRetrieverStart(e,a,r,u,o,c,d){const m=this._getExecutionOrder(u),p=Date.now(),g={id:r,name:d??e.id[e.id.length-1],parent_run_id:u,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{query:a},execution_order:m,child_execution_order:m,run_type:"retriever",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(g)}async handleRetrieverStart(e,a,r,u,o,c,d){var p,g;const m=this.runMap.get(r)??this._createRunForRetrieverStart(e,a,r,u,o,c,d);return await((p=this.onRunCreate)==null?void 0:p.call(this,m)),await((g=this.onRetrieverStart)==null?void 0:g.call(this,m)),m}async handleRetrieverEnd(e,a){var u;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((u=this.onRetrieverEnd)==null?void 0:u.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,a){var u;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((u=this.onRetrieverError)==null?void 0:u.call(this,r)),await this._endTrace(r),r}async handleText(e,a){var u;const r=this.runMap.get(a);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((u=this.onText)==null?void 0:u.call(this,r)))}async handleLLMNewToken(e,a,r,u,o,c){var m;const d=this.runMap.get(r);if(!d||(d==null?void 0:d.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return d.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:a,chunk:c==null?void 0:c.chunk}}),await((m=this.onLLMNewToken)==null?void 0:m.call(this,d,e,{chunk:c==null?void 0:c.chunk})),d}}var Al={exports:{}};Al.exports;var pb;function PS(){return pb||(pb=1,function(s){const a=(o=0)=>c=>`\x1B[${38+o};5;${c}m`,r=(o=0)=>(c,d,m)=>`\x1B[${38+o};2;${c};${d};${m}m`;function u(){const o=new Map,c={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};c.color.gray=c.color.blackBright,c.bgColor.bgGray=c.bgColor.bgBlackBright,c.color.grey=c.color.blackBright,c.bgColor.bgGrey=c.bgColor.bgBlackBright;for(const[d,m]of Object.entries(c)){for(const[p,g]of Object.entries(m))c[p]={open:`\x1B[${g[0]}m`,close:`\x1B[${g[1]}m`},m[p]=c[p],o.set(g[0],g[1]);Object.defineProperty(c,d,{value:m,enumerable:!1})}return Object.defineProperty(c,"codes",{value:o,enumerable:!1}),c.color.close="\x1B[39m",c.bgColor.close="\x1B[49m",c.color.ansi256=a(),c.color.ansi16m=r(),c.bgColor.ansi256=a(10),c.bgColor.ansi16m=r(10),Object.defineProperties(c,{rgbToAnsi256:{value:(d,m,p)=>d===m&&m===p?d<8?16:d>248?231:Math.round((d-8)/247*24)+232:16+36*Math.round(d/255*5)+6*Math.round(m/255*5)+Math.round(p/255*5),enumerable:!1},hexToRgb:{value:d=>{const m=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(d.toString(16));if(!m)return[0,0,0];let{colorString:p}=m.groups;p.length===3&&(p=p.split("").map(b=>b+b).join(""));const g=Number.parseInt(p,16);return[g>>16&255,g>>8&255,g&255]},enumerable:!1},hexToAnsi256:{value:d=>c.rgbToAnsi256(...c.hexToRgb(d)),enumerable:!1}}),c}Object.defineProperty(s,"exports",{enumerable:!0,get:u})}(Al)),Al.exports}var zS=PS();const iv=_r(zS);function Tt(s,e){return`${s.open}${e}${s.close}`}function on(s,e){try{return JSON.stringify(s,null,2)}catch{return e}}function gb(s){return typeof s=="string"?s.trim():s==null?s:on(s,s.toString())}function xa(s){if(!s.end_time)return"";const e=s.end_time-s.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:Ut}=iv;class yb extends Fs{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const a=[];let r=e;for(;r.parent_run_id;){const u=this.runMap.get(r.parent_run_id);if(u)a.push(u),r=u;else break}return a}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((u,o,c)=>{const d=`${u.execution_order}:${u.run_type}:${u.name}`;return o===c.length-1?Tt(iv.bold,d):d}).join(" > ");return Tt(Ut.grey,r)}onChainStart(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.green,"[chain/start]")} [${a}] Entering Chain run with input: ${on(e.inputs,"[inputs]")}`)}onChainEnd(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.cyan,"[chain/end]")} [${a}] [${xa(e)}] Exiting Chain run with output: ${on(e.outputs,"[outputs]")}`)}onChainError(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.red,"[chain/error]")} [${a}] [${xa(e)}] Chain run errored with error: ${on(e.error,"[error]")}`)}onLLMStart(e){const a=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(u=>u.trim())}:e.inputs;console.log(`${Tt(Ut.green,"[llm/start]")} [${a}] Entering LLM run with input: ${on(r,"[inputs]")}`)}onLLMEnd(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.cyan,"[llm/end]")} [${a}] [${xa(e)}] Exiting LLM run with output: ${on(e.outputs,"[response]")}`)}onLLMError(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.red,"[llm/error]")} [${a}] [${xa(e)}] LLM run errored with error: ${on(e.error,"[error]")}`)}onToolStart(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.green,"[tool/start]")} [${a}] Entering Tool run with input: "${gb(e.inputs.input)}"`)}onToolEnd(e){var r;const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.cyan,"[tool/end]")} [${a}] [${xa(e)}] Exiting Tool run with output: "${gb((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.red,"[tool/error]")} [${a}] [${xa(e)}] Tool run errored with error: ${on(e.error,"[error]")}`)}onRetrieverStart(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.green,"[retriever/start]")} [${a}] Entering Retriever run with input: ${on(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.cyan,"[retriever/end]")} [${a}] [${xa(e)}] Exiting Retriever run with output: ${on(e.outputs,"[outputs]")}`)}onRetrieverError(e){const a=this.getBreadcrumbs(e);console.log(`${Tt(Ut.red,"[retriever/error]")} [${a}] [${xa(e)}] Retriever run errored with error: ${on(e.error,"[error]")}`)}onAgentAction(e){const a=e,r=this.getBreadcrumbs(e);console.log(`${Tt(Ut.blue,"[agent/action]")} [${r}] Agent selected action: ${on(a.actions[a.actions.length-1],"[action]")}`)}}let _d;const HS=()=>{if(_d===void 0){const s=Ma("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};_d=new Hs(s)}return _d};class Rs extends Fs{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:a,projectName:r,client:u}=e;this.projectName=r??Ma("LANGCHAIN_PROJECT")??Ma("LANGCHAIN_SESSION"),this.exampleId=a,this.client=u??HS();const o=Rs.getTraceableRunTree();o&&this.updateFromRunTree(o)}async _convertToCreate(e,a=void 0){return{...e,extra:{...e.extra,runtime:await kS()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:a}}async persistRun(e){}async onRunCreate(e){const a=await this._convertToCreate(e,this.exampleId);await this.client.createRun(a)}async onRunUpdate(e){const a={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra};await this.client.updateRun(e.id,a)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let a=e;const r=new Set;for(;a.parent_run&&!(r.has(a.id)||(r.add(a.id),!a.parent_run));)a=a.parent_run;r.clear();const u=[a];for(;u.length>0;){const o=u.shift();!o||r.has(o.id)||(r.add(o.id),this.runMap.set(o.id,o),o.child_runs&&u.push(...o.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const a={},r=[];for(const[u,o]of this.runMap){const c=new Vt({...o,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});a[u]=c,r.push([u,o.dotted_order])}r.sort((u,o)=>!u[1]||!o[1]?0:u[1].localeCompare(o[1]));for(const[u]of r){const o=this.runMap.get(u),c=a[u];if(!(!o||!c)&&o.parent_run_id){const d=a[o.parent_run_id];d&&(d.child_runs.push(c),c.parent_run=d)}}return a[e]}static getTraceableRunTree(){try{return wS()}catch{return}}}const sv=Symbol.for("ls:tracing_async_local_storage"),El=Symbol.for("lc:context_variables"),qS=s=>{globalThis[sv]=s},qs=()=>globalThis[sv];let Cs;function GS(){const s="default"in ta?ta.default:ta;return new s({autoStart:!0,concurrency:1})}function ZS(){return typeof Cs>"u"&&(Cs=GS()),Cs}async function at(s,e){if(e===!0){const a=qs();a!==void 0?await a.run(void 0,async()=>s()):await s()}else Cs=ZS(),Cs.add(async()=>{const a=qs();a!==void 0?await a.run(void 0,async()=>s()):await s()})}const VS=s=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(a=>Ma(a)==="true");function uv(s){var r;const e=qs();if(e===void 0)return;const a=e.getStore();return(r=a==null?void 0:a[El])==null?void 0:r[s]}const QS=Symbol("lc:configure_hooks"),YS=()=>uv(QS)||[];class KS{setHandler(e){return this.setHandlers([e])}}class Ql{constructor(e,a,r,u,o,c,d,m){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:m})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(a=>at(async()=>{var r;try{await((r=a.handleText)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleText: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}async handleCustomEvent(e,a,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;try{await((d=c.handleCustomEvent)==null?void 0:d.call(c,e,a,this.runId,this.tags,this.metadata))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}}class FS extends Ql{getChild(e){const a=new It(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),e&&a.addTags([e],!1),a}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreRetriever)try{await((r=a.handleRetrieverEnd)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleRetriever`),a.raiseError)throw u}},a.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreRetriever)try{await((r=a.handleRetrieverError)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleRetrieverError: ${u}`),a.raiseError)throw e}},a.awaitHandlers)))}}class bb extends Ql{async handleLLMNewToken(e,a,r,u,o,c){await Promise.all(this.handlers.map(d=>at(async()=>{var m;if(!d.ignoreLLM)try{await((m=d.handleLLMNewToken)==null?void 0:m.call(d,e,a??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,c))}catch(p){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMNewToken: ${p}`),d.raiseError)throw p}},d.awaitHandlers)))}async handleLLMError(e,a,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMError: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleLLMEnd(e,a,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMEnd: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}}class XS extends Ql{getChild(e){const a=new It(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),e&&a.addTags([e],!1),a}async handleChainError(e,a,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreChain)try{await((d=c.handleChainError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainError: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleChainEnd(e,a,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreChain)try{await((d=c.handleChainEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainEnd: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleAgentAction)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleAgentAction: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleAgentEnd)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleAgentEnd: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}}class JS extends Ql{getChild(e){const a=new It(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),e&&a.addTags([e],!1),a}async handleToolError(e){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleToolError)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleToolError: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleToolEnd)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleToolEnd: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}}class It extends KS{constructor(e,a){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(a==null?void 0:a.handlers)??this.handlers,this.inheritableHandlers=(a==null?void 0:a.inheritableHandlers)??this.inheritableHandlers,this.tags=(a==null?void 0:a.tags)??this.tags,this.inheritableTags=(a==null?void 0:a.inheritableTags)??this.inheritableTags,this.metadata=(a==null?void 0:a.metadata)??this.metadata,this.inheritableMetadata=(a==null?void 0:a.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,a,r=void 0,u=void 0,o=void 0,c=void 0,d=void 0,m=void 0){return Promise.all(a.map(async(p,g)=>{const b=g===0&&r?r:Lt();return await Promise.all(this.handlers.map(v=>{if(!v.ignoreLLM)return vs(v)&&v._createRunForLLMStart(e,[p],b,this._parentRunId,o,this.tags,this.metadata,m),at(async()=>{var w;try{await((w=v.handleLLMStart)==null?void 0:w.call(v,e,[p],b,this._parentRunId,o,this.tags,this.metadata,m))}catch(A){if((v.raiseError?console.error:console.warn)(`Error in handler ${v.constructor.name}, handleLLMStart: ${A}`),v.raiseError)throw A}},v.awaitHandlers)})),new bb(b,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,a,r=void 0,u=void 0,o=void 0,c=void 0,d=void 0,m=void 0){return Promise.all(a.map(async(p,g)=>{const b=g===0&&r?r:Lt();return await Promise.all(this.handlers.map(v=>{if(!v.ignoreLLM)return vs(v)&&v._createRunForChatModelStart(e,[p],b,this._parentRunId,o,this.tags,this.metadata,m),at(async()=>{var w,A;try{if(v.handleChatModelStart)await((w=v.handleChatModelStart)==null?void 0:w.call(v,e,[p],b,this._parentRunId,o,this.tags,this.metadata,m));else if(v.handleLLMStart){const T=qd(p);await((A=v.handleLLMStart)==null?void 0:A.call(v,e,[T],b,this._parentRunId,o,this.tags,this.metadata,m))}}catch(T){if((v.raiseError?console.error:console.warn)(`Error in handler ${v.constructor.name}, handleLLMStart: ${T}`),v.raiseError)throw T}},v.awaitHandlers)})),new bb(b,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,a,r=Lt(),u=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreChain)return vs(m)&&m._createRunForChainStart(e,a,r,this._parentRunId,this.tags,this.metadata,u,d),at(async()=>{var p;try{await((p=m.handleChainStart)==null?void 0:p.call(m,e,a,r,this._parentRunId,this.tags,this.metadata,u,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleChainStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new XS(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,a,r=Lt(),u=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreAgent)return vs(m)&&m._createRunForToolStart(e,a,r,this._parentRunId,this.tags,this.metadata,d),at(async()=>{var p;try{await((p=m.handleToolStart)==null?void 0:p.call(m,e,a,r,this._parentRunId,this.tags,this.metadata,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleToolStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new JS(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,a,r=Lt(),u=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreRetriever)return vs(m)&&m._createRunForRetrieverStart(e,a,r,this._parentRunId,this.tags,this.metadata,d),at(async()=>{var p;try{await((p=m.handleRetrieverStart)==null?void 0:p.call(m,e,a,r,this._parentRunId,this.tags,this.metadata,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleRetrieverStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new FS(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,a,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreCustomEvent)try{await((d=c.handleCustomEvent)==null?void 0:d.call(c,e,a,r,this.tags,this.metadata))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}addHandler(e,a=!0){this.handlers.push(e),a&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(a=>a!==e),this.inheritableHandlers=this.inheritableHandlers.filter(a=>a!==e)}setHandlers(e,a=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,a)}addTags(e,a=!0){this.removeTags(e),this.tags.push(...e),a&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(a=>!e.includes(a)),this.inheritableTags=this.inheritableTags.filter(a=>!e.includes(a))}addMetadata(e,a=!0){this.metadata={...this.metadata,...e},a&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const a of Object.keys(e))delete this.metadata[a],delete this.inheritableMetadata[a]}copy(e=[],a=!0){const r=new It(this._parentRunId);for(const u of this.handlers){const o=this.inheritableHandlers.includes(u);r.addHandler(u,o)}for(const u of this.tags){const o=this.inheritableTags.includes(u);r.addTags([u],o)}for(const u of Object.keys(this.metadata)){const o=Object.keys(this.inheritableMetadata).includes(u);r.addMetadata({[u]:this.metadata[u]},o)}for(const u of e)r.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===u.name)||r.addHandler(u,a);return r}static fromHandlers(e){class a extends Ks{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Lt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new a),r}static configure(e,a,r,u,o,c,d){return this._configureSync(e,a,r,u,o,c,d)}static _configureSync(e,a,r,u,o,c,d){var v,w;let m;(e||a)&&(Array.isArray(e)||!e?(m=new It,m.setHandlers((e==null?void 0:e.map(Il))??[],!0)):m=e,m=m.copy(Array.isArray(a)?a.map(Il):a==null?void 0:a.handlers,!1));const p=Ma("LANGCHAIN_VERBOSE")==="true"||(d==null?void 0:d.verbose),g=((v=Rs.getTraceableRunTree())==null?void 0:v.tracingEnabled)||VS(),b=g||(Ma("LANGCHAIN_TRACING")??!1);if(p||b){if(m||(m=new It),p&&!m.handlers.some(A=>A.name===yb.prototype.name)){const A=new yb;m.addHandler(A,!0)}if(b&&!m.handlers.some(A=>A.name==="langchain_tracer")&&g){const A=new Rs;m.addHandler(A,!0),m._parentRunId=((w=Rs.getTraceableRunTree())==null?void 0:w.id)??m._parentRunId}}for(const{contextVar:A,inheritable:T=!0,handlerClass:C,envVar:M}of YS()){const B=M&&Ma(M)==="true"&&C;let D;const ne=A!==void 0?uv(A):void 0;ne&&IS(ne)?D=ne:B&&(D=new C({})),D!==void 0&&(m||(m=new It),m.handlers.some(P=>P.name===D.name)||m.addHandler(D,T))}return(r||u)&&m&&(m.addTags(r??[]),m.addTags(u??[],!1)),(o||c)&&m&&(m.addMetadata(o??{}),m.addMetadata(c??{},!1)),m}}function Il(s){return"name"in s?s:Ks.fromMethods(s)}class WS{getStore(){}run(e,a){return a()}enterWith(e){}}const e1=new WS,vb=Symbol.for("lc:child_config");class t1{getInstance(){return qs()??e1}getRunnableConfig(){var a,r;return(r=(a=this.getInstance().getStore())==null?void 0:a.extra)==null?void 0:r[vb]}runWithConfig(e,a,r){var g;const u=It._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),o=this.getInstance(),c=o.getStore(),d=u==null?void 0:u.getParentRunId(),m=(g=u==null?void 0:u.handlers)==null?void 0:g.find(b=>(b==null?void 0:b.name)==="langchain_tracer");let p;return m&&d?p=m.convertToRunTree(d):r||(p=new Vt({name:"<runnable_lambda>",tracingEnabled:!1})),p&&(p.extra={...p.extra,[vb]:e}),c!==void 0&&c[El]!==void 0&&(p[El]=c[El]),o.run(p,a)}initializeGlobalInstance(e){qs()===void 0&&qS(e)}}const $a=new t1,wd=25;async function _n(s){return It._configureSync(s==null?void 0:s.callbacks,void 0,s==null?void 0:s.tags,void 0,s==null?void 0:s.metadata)}function _b(...s){const e={};for(const a of s.filter(r=>!!r))for(const r of Object.keys(a))if(r==="metadata")e[r]={...e[r],...a[r]};else if(r==="tags"){const u=e[r]??[];e[r]=[...new Set(u.concat(a[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...a[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=a.timeout:a.timeout!==void 0&&(e.timeout=Math.min(e.timeout,a.timeout));else if(r==="signal")e.signal===void 0?e.signal=a.signal:a.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,a.signal]):e.signal=a.signal);else if(r==="callbacks"){const u=e.callbacks,o=a.callbacks;if(Array.isArray(o))if(!u)e.callbacks=o;else if(Array.isArray(u))e.callbacks=u.concat(o);else{const c=u.copy();for(const d of o)c.addHandler(Il(d),!0);e.callbacks=c}else if(o)if(!u)e.callbacks=o;else if(Array.isArray(u)){const c=o.copy();for(const d of u)c.addHandler(Il(d),!0);e.callbacks=c}else e.callbacks=new It(o._parentRunId,{handlers:u.handlers.concat(o.handlers),inheritableHandlers:u.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(u.tags.concat(o.tags))),inheritableTags:Array.from(new Set(u.inheritableTags.concat(o.inheritableTags))),metadata:{...u.metadata,...o.metadata}})}else{const u=r;e[u]=a[u]??e[u]}return e}const n1=new Set(["string","number","boolean"]);function Ie(s){var r;const e=$a.getRunnableConfig();let a={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:u,runName:o,...c}=e;a=Object.entries(c).reduce((d,[m,p])=>(p!==void 0&&(d[m]=p),d),a)}if(s&&(a=Object.entries(s).reduce((u,[o,c])=>(c!==void 0&&(u[o]=c),u),a)),a!=null&&a.configurable)for(const u of Object.keys(a.configurable))n1.has(typeof a.configurable[u])&&!((r=a.metadata)!=null&&r[u])&&(a.metadata||(a.metadata={}),a.metadata[u]=a.configurable[u]);if(a.timeout!==void 0){if(a.timeout<=0)throw new Error("Timeout must be a positive number");const u=AbortSignal.timeout(a.timeout);a.signal!==void 0?"any"in AbortSignal&&(a.signal=AbortSignal.any([a.signal,u])):a.signal=u,delete a.timeout}return a}function wt(s={},{callbacks:e,maxConcurrency:a,recursionLimit:r,runName:u,configurable:o,runId:c}={}){const d=Ie(s);return e!==void 0&&(delete d.runName,d.callbacks=e),r!==void 0&&(d.recursionLimit=r),a!==void 0&&(d.maxConcurrency=a),u!==void 0&&(d.runName=u),o!==void 0&&(d.configurable={...d.configurable,...o}),c!==void 0&&delete d.runId,d}function pi(s){return s?{configurable:s.configurable,recursionLimit:s.recursionLimit,callbacks:s.callbacks,tags:s.tags,metadata:s.metadata,maxConcurrency:s.maxConcurrency,timeout:s.timeout,signal:s.signal}:void 0}async function Ba(s,e){if(e===void 0)return s;let a;return Promise.race([s.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,u)=>{a=()=>{u(new Error("Aborted"))},e.addEventListener("abort",a),e.aborted&&u(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",a))}class Yt extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const a=this.reader.cancel();this.reader.releaseLock(),await a}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const a=e.getReader();return new Yt({start(r){return u();function u(){return a.read().then(({done:o,value:c})=>{if(o){r.close();return}return r.enqueue(c),u()})}},cancel(){a.releaseLock()}})}static fromAsyncGenerator(e){return new Yt({async pull(a){const{value:r,done:u}=await e.next();u&&a.close(),a.enqueue(r)},async cancel(a){await e.return(a)}})}}function lv(s,e=2){const a=Array.from({length:e},()=>[]);return a.map(async function*(u){for(;;)if(u.length===0){const o=await s.next();for(const c of a)c.push(o)}else{if(u[0].done)return;yield u.shift().value}})}function jn(s,e){if(Array.isArray(s)&&Array.isArray(e))return s.concat(e);if(typeof s=="string"&&typeof e=="string")return s+e;if(typeof s=="number"&&typeof e=="number")return s+e;if("concat"in s&&typeof s.concat=="function")return s.concat(e);if(typeof s=="object"&&typeof e=="object"){const a={...s};for(const[r,u]of Object.entries(e))r in a&&!Array.isArray(a[r])?a[r]=jn(a[r],u):a[r]=u;return a}else throw new Error(`Cannot concat ${typeof s} and ${typeof e}`)}class yi{constructor(e){var a;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((a=this.config)==null?void 0:a.signal),this.setup=new Promise((r,u)=>{$a.runWithConfig(pi(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,u):this.firstResult.then(o=>r(void 0),u)},!0)})}async next(...e){var a;return(a=this.signal)==null||a.throwIfAborted(),this.firstResultUsed?$a.runWithConfig(pi(this.config),this.signal?async()=>Ba(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function a1(s,e,a,r,...u){const o=new yi({generator:e,startSetup:a,signal:r}),c=await o.setup;return{output:s(o,c,...u),setup:c}}class Na{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const a=this.ops.concat(e.ops),r=Ul({},a);return new Gs({ops:a,state:r[r.length-1].newDocument})}}class Gs extends Na{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const a=this.ops.concat(e.ops),r=Ul(this.state,e.ops);return new Gs({ops:a,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const a=Ul({},e.ops);return new Gs({ops:e.ops,state:a[a.length-1].newDocument})}}const r1=s=>s.name==="log_stream_tracer";async function wb(s,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:a}=s;if(["retriever","llm","prompt"].includes(s.run_type))return a;if(!(Object.keys(a).length===1&&(a==null?void 0:a.input)===""))return a.input}async function Ab(s,e){const{outputs:a}=s;return e==="original"||["retriever","llm","prompt"].includes(s.run_type)?a:a!==void 0&&Object.keys(a).length===1&&(a==null?void 0:a.output)!==void 0?a.output:a}function i1(s){return s!==void 0&&s.message!==void 0}class Eb extends Fs{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Yt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const a=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||a.find(u=>{var o;return(o=this.includeTags)==null?void 0:o.includes(u)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&a.every(u=>{var o;return!((o=this.excludeTags)!=null&&o.includes(u))})),r}async*tapOutputIterable(e,a){for await(const r of a){if(e!==this.rootId){const u=this.keyMapByRunId[e];u&&await this.writer.write(new Na({ops:[{op:"add",path:`/logs/${u}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var u;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Na({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const a=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=a===1?e.name:`${e.name}:${a}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await wb(e,this._schemaFormat)),await this.writer.write(new Na({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const a=this.keyMapByRunId[e.id];if(a===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${a}/inputs`,value:await wb(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${a}/final_output`,value:await Ab(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${a}/end_time`,value:new Date(e.end_time).toISOString()});const u=new Na({ops:r});await this.writer.write(u)}finally{if(e.id===this.rootId){const a=new Na({ops:[{op:"replace",path:"/final_output",value:await Ab(e,this._schemaFormat)}]});await this.writer.write(a),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,a,r){const u=this.keyMapByRunId[e.id];if(u===void 0)return;const o=e.inputs.messages!==void 0;let c;o?i1(r==null?void 0:r.chunk)?c=r==null?void 0:r.chunk:c=new Pl({id:`run-${e.id}`,content:a}):c=a;const d=new Na({ops:[{op:"add",path:`/logs/${u}/streamed_output_str/-`,value:a},{op:"add",path:`/logs/${u}/streamed_output/-`,value:c}]});await this.writer.write(d)}}const Sb="__run";class br{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new br({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}function _l({name:s,serialized:e}){return s!==void 0?s:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const s1=s=>s.name==="event_stream_tracer";class u1 extends Fs{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Yt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const a=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||a.find(u=>{var o;return(o=this.includeTags)==null?void 0:o.includes(u)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&a.every(u=>{var o;return!((o=this.excludeTags)!=null&&o.includes(u))})),r}async*tapOutputIterable(e,a){const r=await a.next();if(r.done)return;const u=this.runInfoMap.get(e);if(u===void 0){yield r.value;return}function o(d,m){return d==="llm"&&typeof m=="string"?new br({text:m}):m}let c=this.tappedPromises.get(e);if(c===void 0){let d;c=new Promise(m=>{d=m}),this.tappedPromises.set(e,c);try{const m={event:`on_${u.runType}_stream`,run_id:e,name:u.name,tags:u.tags,metadata:u.metadata,data:{}};await this.send({...m,data:{chunk:o(u.runType,r.value)}},u),yield r.value;for await(const p of a)u.runType!=="tool"&&u.runType!=="retriever"&&await this.send({...m,data:{chunk:o(u.runType,p)}},u),yield p}finally{d()}}else{yield r.value;for await(const d of a)yield d}}async send(e,a){this._includeRun(a)&&await this.writer.write(e)}async sendEndEvent(e,a){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,a)}):await this.send(e,a)}async onLLMStart(e){var c,d;const a=_l(e),r=e.inputs.messages!==void 0?"chat_model":"llm",u={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:a,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,u);const o=`on_${r}_start`;await this.send({event:o,data:{input:e.inputs},name:a,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},u)}async onLLMNewToken(e,a,r){const u=this.runInfoMap.get(e.id);let o,c;if(u===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(u.runType==="chat_model")c="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?o=new Pl({content:a,id:`run-${e.id}`}):o=r.chunk.message;else if(u.runType==="llm")c="on_llm_stream",(r==null?void 0:r.chunk)===void 0?o=new br({text:a}):o=r.chunk;else throw new Error(`Unexpected run type ${u.runType}`);await this.send({event:c,data:{chunk:o},run_id:e.id,name:u.name,tags:u.tags,metadata:u.metadata},u)}}async onLLMEnd(e){var c,d,m;const a=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(a===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const u=(c=e.outputs)==null?void 0:c.generations;let o;if(a.runType==="chat_model"){for(const p of u??[]){if(o!==void 0)break;o=(d=p[0])==null?void 0:d.message}r="on_chat_model_end"}else if(a.runType==="llm")o={generations:u==null?void 0:u.map(p=>p.map(g=>({text:g.text,generationInfo:g.generationInfo}))),llmOutput:((m=e.outputs)==null?void 0:m.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${a.runType}`);await this.sendEndEvent({event:r,data:{output:o,input:a.inputs},run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async onChainStart(e){var c,d;const a=_l(e),r=e.run_type??"chain",u={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:a,runType:e.run_type};let o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},u.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,u.inputs=e.inputs.input):(o.input=e.inputs,u.inputs=e.inputs),this.runInfoMap.set(e.id,u),await this.send({event:`on_${r}_start`,data:o,name:a,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},u)}async onChainEnd(e){var d;const a=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),a===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,u=e.inputs??a.inputs??{},c={output:((d=e.outputs)==null?void 0:d.output)??e.outputs,input:u};u.input&&Object.keys(u).length===1&&(c.input=u.input,a.inputs=u.input),await this.sendEndEvent({event:r,data:c,run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata??{}},a)}async onToolStart(e){var u,o;const a=_l(e),r={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:a,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:a,run_id:e.id,tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{}},r)}async onToolEnd(e){var u;const a=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),a===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(a.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((u=e.outputs)==null?void 0:u.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:a.inputs},run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async onRetrieverStart(e){var o,c;const a=_l(e),u={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:a,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,u),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:a,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},u)}async onRetrieverEnd(e){var r;const a=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),a===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:a.inputs},run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async handleCustomEvent(e,a,r){const u=this.runInfoMap.get(r);if(u===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:u.tags,metadata:u.metadata,data:a},u)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const l1=[400,401,402,403,404,405,406,407,409],o1=s=>{var a,r;if(s.message.startsWith("Cancel")||s.message.startsWith("AbortError")||s.name==="AbortError"||(s==null?void 0:s.code)==="ECONNABORTED")throw s;const e=((a=s==null?void 0:s.response)==null?void 0:a.status)??(s==null?void 0:s.status);if(e&&l1.includes(+e))throw s;if(((r=s==null?void 0:s.error)==null?void 0:r.code)==="insufficient_quota"){const u=new Error(s==null?void 0:s.message);throw u.name="InsufficientQuotaError",u}};class Wd{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??o1;const a="default"in ta?ta.default:ta;this.queue=new a({concurrency:this.maxConcurrency})}call(e,...a){return this.queue.add(()=>Ml(()=>e(...a).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,a,...r){return e.signal?Promise.race([this.call(a,...r),new Promise((u,o)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(a,...r)}fetch(...e){return this.call(()=>fetch(...e).then(a=>a.ok?a:Promise.reject(a)))}}class ov extends Fs{constructor({config:e,onStart:a,onEnd:r,onError:u}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=a,this.argOnEnd=r,this.argOnError=u}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function eh(s){return s?s.lc_runnable:!1}class c1{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,a){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const u=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(a)),this.includeTags!==void 0&&(r=r||u.some(o=>{var c;return(c=this.includeTags)==null?void 0:c.includes(o)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(a)),this.excludeTags!==void 0&&(r=r&&u.every(o=>{var c;return!((c=this.excludeTags)!=null&&c.includes(o))})),r}}const f1=Symbol("Let zodToJsonSchema decide on which parser to use"),Tb={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},d1=s=>typeof s=="string"?{...Tb,name:s}:{...Tb,...s},h1=s=>{const e=d1(s),a=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:a,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,u])=>[u._def,{def:u._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function cv(s,e,a,r){r!=null&&r.errorMessages&&a&&(s.errorMessage={...s.errorMessage,[e]:a})}function De(s,e,a,r,u){s[e]=a,cv(s,e,r,u)}function m1(){return{}}function p1(s,e){var r,u,o;const a={type:"array"};return(r=s.type)!=null&&r._def&&((o=(u=s.type)==null?void 0:u._def)==null?void 0:o.typeName)!==Y.ZodAny&&(a.items=Me(s.type._def,{...e,currentPath:[...e.currentPath,"items"]})),s.minLength&&De(a,"minItems",s.minLength.value,s.minLength.message,e),s.maxLength&&De(a,"maxItems",s.maxLength.value,s.maxLength.message,e),s.exactLength&&(De(a,"minItems",s.exactLength.value,s.exactLength.message,e),De(a,"maxItems",s.exactLength.value,s.exactLength.message,e)),a}function g1(s,e){const a={type:"integer",format:"int64"};if(!s.checks)return a;for(const r of s.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?De(a,"minimum",r.value,r.message,e):De(a,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(a.exclusiveMinimum=!0),De(a,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?De(a,"maximum",r.value,r.message,e):De(a,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(a.exclusiveMaximum=!0),De(a,"maximum",r.value,r.message,e));break;case"multipleOf":De(a,"multipleOf",r.value,r.message,e);break}return a}function y1(){return{type:"boolean"}}function fv(s,e){return Me(s.type._def,e)}const b1=(s,e)=>Me(s.innerType._def,e);function dv(s,e,a){const r=a??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((u,o)=>dv(s,e,u))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return v1(s,e)}}const v1=(s,e)=>{const a={type:"integer",format:"unix-time"};if(e.target==="openApi3")return a;for(const r of s.checks)switch(r.kind){case"min":De(a,"minimum",r.value,r.message,e);break;case"max":De(a,"maximum",r.value,r.message,e);break}return a};function _1(s,e){return{...Me(s.innerType._def,e),default:s.defaultValue()}}function w1(s,e){return e.effectStrategy==="input"?Me(s.schema._def,e):{}}function A1(s){return{type:"string",enum:Array.from(s.values)}}const E1=s=>"type"in s&&s.type==="string"?!1:"allOf"in s;function S1(s,e){const a=[Me(s.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Me(s.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const u=[];return a.forEach(o=>{if(E1(o))u.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:d,...m}=o;c=m}else r=void 0;u.push(c)}}),u.length?{allOf:u,...r}:void 0}function T1(s,e){const a=typeof s.value;return a!=="bigint"&&a!=="number"&&a!=="boolean"&&a!=="string"?{type:Array.isArray(s.value)?"array":"object"}:e.target==="openApi3"?{type:a==="bigint"?"integer":a,enum:[s.value]}:{type:a==="bigint"?"integer":a,const:s.value}}let Ad;const mn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Ad===void 0&&(Ad=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ad),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function hv(s,e){const a={type:"string"};if(s.checks)for(const r of s.checks)switch(r.kind){case"min":De(a,"minLength",typeof a.minLength=="number"?Math.max(a.minLength,r.value):r.value,r.message,e);break;case"max":De(a,"maxLength",typeof a.maxLength=="number"?Math.min(a.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":pn(a,"email",r.message,e);break;case"format:idn-email":pn(a,"idn-email",r.message,e);break;case"pattern:zod":Ot(a,mn.email,r.message,e);break}break;case"url":pn(a,"uri",r.message,e);break;case"uuid":pn(a,"uuid",r.message,e);break;case"regex":Ot(a,r.regex,r.message,e);break;case"cuid":Ot(a,mn.cuid,r.message,e);break;case"cuid2":Ot(a,mn.cuid2,r.message,e);break;case"startsWith":Ot(a,RegExp(`^${Ed(r.value,e)}`),r.message,e);break;case"endsWith":Ot(a,RegExp(`${Ed(r.value,e)}$`),r.message,e);break;case"datetime":pn(a,"date-time",r.message,e);break;case"date":pn(a,"date",r.message,e);break;case"time":pn(a,"time",r.message,e);break;case"duration":pn(a,"duration",r.message,e);break;case"length":De(a,"minLength",typeof a.minLength=="number"?Math.max(a.minLength,r.value):r.value,r.message,e),De(a,"maxLength",typeof a.maxLength=="number"?Math.min(a.maxLength,r.value):r.value,r.message,e);break;case"includes":{Ot(a,RegExp(Ed(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&pn(a,"ipv4",r.message,e),r.version!=="v4"&&pn(a,"ipv6",r.message,e);break}case"base64url":Ot(a,mn.base64url,r.message,e);break;case"jwt":Ot(a,mn.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Ot(a,mn.ipv4Cidr,r.message,e),r.version!=="v4"&&Ot(a,mn.ipv6Cidr,r.message,e);break}case"emoji":Ot(a,mn.emoji(),r.message,e);break;case"ulid":{Ot(a,mn.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{pn(a,"binary",r.message,e);break}case"contentEncoding:base64":{De(a,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Ot(a,mn.base64,r.message,e);break}}break}case"nanoid":Ot(a,mn.nanoid,r.message,e)}return a}function Ed(s,e){return e.patternStrategy==="escape"?R1(s):s}const O1=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function R1(s){let e="";for(let a=0;a<s.length;a++)O1.has(s[a])||(e+="\\"),e+=s[a];return e}function pn(s,e,a,r){var u;s.format||(u=s.anyOf)!=null&&u.some(o=>o.format)?(s.anyOf||(s.anyOf=[]),s.format&&(s.anyOf.push({format:s.format,...s.errorMessage&&r.errorMessages&&{errorMessage:{format:s.errorMessage.format}}}),delete s.format,s.errorMessage&&(delete s.errorMessage.format,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.anyOf.push({format:e,...a&&r.errorMessages&&{errorMessage:{format:a}}})):De(s,"format",e,a,r)}function Ot(s,e,a,r){var u;s.pattern||(u=s.allOf)!=null&&u.some(o=>o.pattern)?(s.allOf||(s.allOf=[]),s.pattern&&(s.allOf.push({pattern:s.pattern,...s.errorMessage&&r.errorMessages&&{errorMessage:{pattern:s.errorMessage.pattern}}}),delete s.pattern,s.errorMessage&&(delete s.errorMessage.pattern,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.allOf.push({pattern:Ob(e,r),...a&&r.errorMessages&&{errorMessage:{pattern:a}}})):De(s,"pattern",Ob(e,r),a,r)}function Ob(s,e){var m;if(!e.applyRegexFlags||!s.flags)return s.source;const a={i:s.flags.includes("i"),m:s.flags.includes("m"),s:s.flags.includes("s")},r=a.i?s.source.toLowerCase():s.source;let u="",o=!1,c=!1,d=!1;for(let p=0;p<r.length;p++){if(o){u+=r[p],o=!1;continue}if(a.i){if(c){if(r[p].match(/[a-z]/)){d?(u+=r[p],u+=`${r[p-2]}-${r[p]}`.toUpperCase(),d=!1):r[p+1]==="-"&&((m=r[p+2])!=null&&m.match(/[a-z]/))?(u+=r[p],d=!0):u+=`${r[p]}${r[p].toUpperCase()}`;continue}}else if(r[p].match(/[a-z]/)){u+=`[${r[p]}${r[p].toUpperCase()}]`;continue}}if(a.m){if(r[p]==="^"){u+=`(^|(?<=[\r
]))`;continue}else if(r[p]==="$"){u+=`($|(?=[\r
]))`;continue}}if(a.s&&r[p]==="."){u+=c?`${r[p]}\r
`:`[${r[p]}\r
]`;continue}u+=r[p],r[p]==="\\"?o=!0:c&&r[p]==="]"?c=!1:!c&&r[p]==="["&&(c=!0)}try{new RegExp(u)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),s.source}return u}function mv(s,e){var r,u,o,c,d,m;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=s.keyType)==null?void 0:r._def.typeName)===Y.ZodEnum)return{type:"object",required:s.keyType._def.values,properties:s.keyType._def.values.reduce((p,g)=>({...p,[g]:Me(s.valueType._def,{...e,currentPath:[...e.currentPath,"properties",g]})??{}}),{}),additionalProperties:!1};const a={type:"object",additionalProperties:Me(s.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return a;if(((u=s.keyType)==null?void 0:u._def.typeName)===Y.ZodString&&((o=s.keyType._def.checks)!=null&&o.length)){const{type:p,...g}=hv(s.keyType._def,e);return{...a,propertyNames:g}}else{if(((c=s.keyType)==null?void 0:c._def.typeName)===Y.ZodEnum)return{...a,propertyNames:{enum:s.keyType._def.values}};if(((d=s.keyType)==null?void 0:d._def.typeName)===Y.ZodBranded&&s.keyType._def.type._def.typeName===Y.ZodString&&((m=s.keyType._def.type._def.checks)!=null&&m.length)){const{type:p,...g}=fv(s.keyType._def,e);return{...a,propertyNames:g}}}return a}function C1(s,e){if(e.mapStrategy==="record")return mv(s,e);const a=Me(s.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Me(s.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[a,r],minItems:2,maxItems:2}}}function x1(s){const e=s.values,r=Object.keys(s.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),u=Array.from(new Set(r.map(o=>typeof o)));return{type:u.length===1?u[0]==="string"?"string":"number":["string","number"],enum:r}}function N1(){return{not:{}}}function j1(s){return s.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const $l={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function M1(s,e){if(e.target==="openApi3")return Rb(s,e);const a=s.options instanceof Map?Array.from(s.options.values()):s.options;if(a.every(r=>r._def.typeName in $l&&(!r._def.checks||!r._def.checks.length))){const r=a.reduce((u,o)=>{const c=$l[o._def.typeName];return c&&!u.includes(c)?[...u,c]:u},[]);return{type:r.length>1?r:r[0]}}else if(a.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=a.reduce((u,o)=>{const c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...u,c];case"bigint":return[...u,"integer"];case"object":if(o._def.value===null)return[...u,"null"];case"symbol":case"undefined":case"function":default:return u}},[]);if(r.length===a.length){const u=r.filter((o,c,d)=>d.indexOf(o)===c);return{type:u.length>1?u:u[0],enum:a.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(a.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((r,u)=>[...r,...u._def.values.filter(o=>!r.includes(o))],[])};return Rb(s,e)}const Rb=(s,e)=>{const a=(s.options instanceof Map?Array.from(s.options.values()):s.options).map((r,u)=>Me(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${u}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return a.length?{anyOf:a}:void 0};function D1(s,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(s.innerType._def.typeName)&&(!s.innerType._def.checks||!s.innerType._def.checks.length))return e.target==="openApi3"?{type:$l[s.innerType._def.typeName],nullable:!0}:{type:[$l[s.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Me(s.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const a=Me(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return a&&{anyOf:[a,{type:"null"}]}}function k1(s,e){const a={type:"number"};if(!s.checks)return a;for(const r of s.checks)switch(r.kind){case"int":a.type="integer",cv(a,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?De(a,"minimum",r.value,r.message,e):De(a,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(a.exclusiveMinimum=!0),De(a,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?De(a,"maximum",r.value,r.message,e):De(a,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(a.exclusiveMaximum=!0),De(a,"maximum",r.value,r.message,e));break;case"multipleOf":De(a,"multipleOf",r.value,r.message,e);break}return a}function U1(s,e){return e.removeAdditionalStrategy==="strict"?s.catchall._def.typeName==="ZodNever"?s.unknownKeys!=="strict":Me(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:s.catchall._def.typeName==="ZodNever"?s.unknownKeys==="passthrough":Me(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function L1(s,e){const a=e.target==="openAi",r={type:"object",...Object.entries(s.shape()).reduce((u,[o,c])=>{if(c===void 0||c._def===void 0)return u;let d=c.isOptional();d&&a&&(c instanceof vn&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),d=!1);const m=Me(c._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});return m===void 0?u:{properties:{...u.properties,[o]:m},required:d?u.required:[...u.required,o]}},{properties:{},required:[]}),additionalProperties:U1(s,e)};return r.required.length||delete r.required,r}const I1=(s,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Me(s.innerType._def,e);const a=Me(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return a?{anyOf:[{not:{}},a]}:{}},$1=(s,e)=>{if(e.pipeStrategy==="input")return Me(s.in._def,e);if(e.pipeStrategy==="output")return Me(s.out._def,e);const a=Me(s.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Me(s.out._def,{...e,currentPath:[...e.currentPath,"allOf",a?"1":"0"]});return{allOf:[a,r].filter(u=>u!==void 0)}};function B1(s,e){return Me(s.type._def,e)}function P1(s,e){const r={type:"array",uniqueItems:!0,items:Me(s.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return s.minSize&&De(r,"minItems",s.minSize.value,s.minSize.message,e),s.maxSize&&De(r,"maxItems",s.maxSize.value,s.maxSize.message,e),r}function z1(s,e){return s.rest?{type:"array",minItems:s.items.length,items:s.items.map((a,r)=>Me(a._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((a,r)=>r===void 0?a:[...a,r],[]),additionalItems:Me(s.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:s.items.length,maxItems:s.items.length,items:s.items.map((a,r)=>Me(a._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((a,r)=>r===void 0?a:[...a,r],[])}}function H1(){return{not:{}}}function q1(){return{}}const G1=(s,e)=>Me(s.innerType._def,e),Z1=(s,e,a)=>{switch(e){case Y.ZodString:return hv(s,a);case Y.ZodNumber:return k1(s,a);case Y.ZodObject:return L1(s,a);case Y.ZodBigInt:return g1(s,a);case Y.ZodBoolean:return y1();case Y.ZodDate:return dv(s,a);case Y.ZodUndefined:return H1();case Y.ZodNull:return j1(a);case Y.ZodArray:return p1(s,a);case Y.ZodUnion:case Y.ZodDiscriminatedUnion:return M1(s,a);case Y.ZodIntersection:return S1(s,a);case Y.ZodTuple:return z1(s,a);case Y.ZodRecord:return mv(s,a);case Y.ZodLiteral:return T1(s,a);case Y.ZodEnum:return A1(s);case Y.ZodNativeEnum:return x1(s);case Y.ZodNullable:return D1(s,a);case Y.ZodOptional:return I1(s,a);case Y.ZodMap:return C1(s,a);case Y.ZodSet:return P1(s,a);case Y.ZodLazy:return()=>s.getter()._def;case Y.ZodPromise:return B1(s,a);case Y.ZodNaN:case Y.ZodNever:return N1();case Y.ZodEffects:return w1(s,a);case Y.ZodAny:return m1();case Y.ZodUnknown:return q1();case Y.ZodDefault:return _1(s,a);case Y.ZodBranded:return fv(s,a);case Y.ZodReadonly:return G1(s,a);case Y.ZodCatch:return b1(s,a);case Y.ZodPipeline:return $1(s,a);case Y.ZodFunction:case Y.ZodVoid:case Y.ZodSymbol:return;default:return(r=>{})()}};function Me(s,e,a=!1){var d;const r=e.seen.get(s);if(e.override){const m=(d=e.override)==null?void 0:d.call(e,s,e,r,a);if(m!==f1)return m}if(r&&!a){const m=V1(r,e);if(m!==void 0)return m}const u={def:s,path:e.currentPath,jsonSchema:void 0};e.seen.set(s,u);const o=Z1(s,s.typeName,e),c=typeof o=="function"?Me(o(),e):o;if(c&&Y1(s,e,c),e.postProcess){const m=e.postProcess(c,s,e);return u.jsonSchema=c,m}return u.jsonSchema=c,c}const V1=(s,e)=>{switch(e.$refStrategy){case"root":return{$ref:s.path.join("/")};case"relative":return{$ref:Q1(e.currentPath,s.path)};case"none":case"seen":return s.path.length<e.currentPath.length&&s.path.every((a,r)=>e.currentPath[r]===a)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},Q1=(s,e)=>{let a=0;for(;a<s.length&&a<e.length&&s[a]===e[a];a++);return[(s.length-a).toString(),...e.slice(a)].join("/")},Y1=(s,e,a)=>(s.description&&(a.description=s.description,e.markdownDescription&&(a.markdownDescription=s.description)),a),K1=(s,e)=>{const a=h1(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((m,[p,g])=>({...m,[p]:Me(g._def,{...a,currentPath:[...a.basePath,a.definitionPath,p]},!0)??{}}),{}):void 0,u=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,o=Me(s._def,u===void 0?a:{...a,currentPath:[...a.basePath,a.definitionPath,u]},!1)??{},c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(o.title=c);const d=u===void 0?r?{...o,[a.definitionPath]:r}:o:{$ref:[...a.$refStrategy==="relative"?[]:a.basePath,a.definitionPath,u].join("/"),[a.definitionPath]:{...r,[u]:o}};return a.target==="jsonSchema7"?d.$schema="http://json-schema.org/draft-07/schema#":(a.target==="jsonSchema2019-09"||a.target==="openAi")&&(d.$schema="https://json-schema.org/draft/2019-09/schema#"),a.target==="openAi"&&("anyOf"in d||"oneOf"in d||"allOf"in d||"type"in d&&Array.isArray(d.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),d};function Sd(s){return s.replace(/[^a-zA-Z-_0-9]/g,"_")}const F1=["*","_","`"];function X1(s){let e="";for(const[a,r]of Object.entries(s))e+=`	classDef ${a} ${r};
`;return e}function J1(s,e,a){const{firstNode:r,lastNode:u,nodeColors:o,withStyles:c=!0,curveStyle:d="linear",wrapLabelNWords:m=9}=a??{};let p=c?`%%{init: {'flowchart': {'curve': '${d}'}}}%%
graph TD;
`:`graph TD;
`;if(c){const w="default",A={[w]:"{0}({1})"};r!==void 0&&(A[r]="{0}([{1}]):::first"),u!==void 0&&(A[u]="{0}([{1}]):::last");for(const[T,C]of Object.entries(s)){const M=C.name.split(":").pop()??"";let D=F1.some(P=>M.startsWith(P)&&M.endsWith(P))?`<p>${M}</p>`:M;Object.keys(C.metadata??{}).length&&(D+=`<hr/><small><em>${Object.entries(C.metadata??{}).map(([P,ee])=>`${P} = ${ee}`).join(`
`)}</em></small>`);const ne=(A[T]??A[w]).replace("{0}",Sd(T)).replace("{1}",D);p+=`	${ne}
`}}const g={};for(const w of e){const A=w.source.split(":"),T=w.target.split(":"),C=A.filter((M,B)=>M===T[B]).join(":");g[C]||(g[C]=[]),g[C].push(w)}const b=new Set;function v(w,A){const T=w.length===1&&w[0].source===w[0].target;if(A&&!T){const C=A.split(":").pop();if(b.has(C))throw new Error(`Found duplicate subgraph '${C}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);b.add(C),p+=`	subgraph ${C}
`}for(const C of w){const{source:M,target:B,data:D,conditional:ne}=C;let P="";if(D!==void 0){let ee=D;const fe=ee.split(" ");fe.length>m&&(ee=Array.from({length:Math.ceil(fe.length/m)},(ae,ie)=>fe.slice(ie*m,(ie+1)*m).join(" ")).join("&nbsp;<br>&nbsp;")),P=ne?` -. &nbsp;${ee}&nbsp; .-> `:` -- &nbsp;${ee}&nbsp; --> `}else P=ne?" -.-> ":" --> ";p+=`	${Sd(M)}${P}${Sd(B)};
`}for(const C in g)C.startsWith(`${A}:`)&&C!==A&&v(g[C],C);A&&!T&&(p+=`	end
`)}v(g[""]??[],"");for(const w in g)!w.includes(":")&&w!==""&&v(g[w],w);return c&&(p+=X1(o??{})),p}async function W1(s,e){let{backgroundColor:a="white"}=e??{};const r=btoa(s);a!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(a)||(a=`!${a}`));const u=`https://mermaid.ink/img/${r}?bgColor=${a}`,o=await fetch(u);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join(`
`));return await o.blob()}function eT(s,e){if(s!==void 0&&!Ss(s))return s;if(eh(e))try{let a=e.getName();return a=a.startsWith("Runnable")?a.slice(8):a,a}catch{return e.getName()}else return e.name??"UnknownSchema"}function tT(s){return eh(s.data)?{type:"runnable",data:{id:s.data.lc_id,name:s.data.getName()}}:{type:"schema",data:{...K1(s.data.schema),title:s.data.name}}}class Yl{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((a,r)=>{e[a.id]=Ss(a.id)?r:a.id}),{nodes:Object.values(this.nodes).map(a=>({id:e[a.id],...tT(a)})),edges:this.edges.map(a=>{const r={source:e[a.source],target:e[a.target]};return typeof a.data<"u"&&(r.data=a.data),typeof a.conditional<"u"&&(r.conditional=a.conditional),r})}}addNode(e,a,r){if(a!==void 0&&this.nodes[a]!==void 0)throw new Error(`Node with id ${a} already exists`);const u=a??Lt(),o={id:u,data:e,name:eT(a,e),metadata:r};return this.nodes[u]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(a=>a.source!==e.id&&a.target!==e.id)}addEdge(e,a,r,u){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[a.id]===void 0)throw new Error(`Target node ${a.id} not in graph`);const o={source:e.id,target:a.id,data:r,conditional:u};return this.edges.push(o),o}firstNode(){return Cb(this)}lastNode(){return xb(this)}extend(e,a=""){let r=a;Object.values(e.nodes).map(p=>p.id).every(Ss)&&(r="");const o=p=>r?`${r}:${p}`:p;Object.entries(e.nodes).forEach(([p,g])=>{this.nodes[o(p)]={...g,id:o(p)}});const c=e.edges.map(p=>({...p,source:o(p.source),target:o(p.target)}));this.edges=[...this.edges,...c];const d=e.firstNode(),m=e.lastNode();return[d?{id:o(d.id),data:d.data}:void 0,m?{id:o(m.id),data:m.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&Cb(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&xb(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(u=>[u.id,u.name])),a=new Map;Object.values(e).forEach(u=>{a.set(u,(a.get(u)||0)+1)});const r=u=>{const o=e[u];return Ss(u)&&a.get(o)===1?o:u};return new Yl({nodes:Object.fromEntries(Object.entries(this.nodes).map(([u,o])=>[r(u),{...o,id:r(u)}])),edges:this.edges.map(u=>({...u,source:r(u.source),target:r(u.target)}))})}drawMermaid(e){const{withStyles:a,curveStyle:r,nodeColors:u={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},c=this.reid(),d=c.firstNode(),m=c.lastNode();return J1(c.nodes,c.edges,{firstNode:d==null?void 0:d.id,lastNode:m==null?void 0:m.id,withStyles:a,curveStyle:r,nodeColors:u,wrapLabelNWords:o})}async drawMermaidPng(e){const a=this.drawMermaid(e);return W1(a,{backgroundColor:e==null?void 0:e.backgroundColor})}}function Cb(s,e=[]){const a=new Set(s.edges.filter(u=>!e.includes(u.source)).map(u=>u.target)),r=[];for(const u of Object.values(s.nodes))!e.includes(u.id)&&!a.has(u.id)&&r.push(u);return r.length===1?r[0]:void 0}function xb(s,e=[]){const a=new Set(s.edges.filter(u=>!e.includes(u.target)).map(u=>u.source)),r=[];for(const u of Object.values(s.nodes))!e.includes(u.id)&&!a.has(u.id)&&r.push(u);return r.length===1?r[0]:void 0}function nT(s){const e=new TextEncoder,a=new ReadableStream({async start(r){for await(const u of s)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(u)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Yt.fromReadableStream(a)}function Nb(s){return typeof s=="object"&&s!==null&&typeof s[Symbol.iterator]=="function"&&typeof s.next=="function"}const aT=s=>s!=null&&typeof s=="object"&&"next"in s&&typeof s.next=="function";function $d(s){return typeof s=="object"&&s!==null&&typeof s[Symbol.asyncIterator]=="function"}function*jb(s,e){for(;;){const{value:a,done:r}=$a.runWithConfig(pi(s),e.next.bind(e),!0);if(r)break;yield a}}async function*Bd(s,e){const a=e[Symbol.asyncIterator]();for(;;){const{value:r,done:u}=await $a.runWithConfig(pi(s),a.next.bind(e),!0);if(u)break;yield r}}function ct(s,e){return s&&!Array.isArray(s)&&!(s instanceof Date)&&typeof s=="object"?s:{[e]:s}}class xt extends Da{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const a=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${a}${e}`:a}bind(e){return new mr({bound:this,kwargs:e,config:{}})}map(){return new Bl({bound:this})}withRetry(e){return new rT({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new mr({bound:this,config:e,kwargs:{}})}withFallbacks(e){const a=Array.isArray(e)?e:e.fallbacks;return new sT({runnable:this,fallbacks:a})}_getOptionsList(e,a=0){if(Array.isArray(e)&&e.length!==a)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${a} inputs`);if(Array.isArray(e))return e.map(Ie);if(a>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([u])=>u!=="runId"));return Array.from({length:a},(u,o)=>Ie(o===0?e:r))}return Array.from({length:a},()=>Ie(e))}async batch(e,a,r){var m;const u=this._getOptionsList(a??{},e.length),o=((m=u[0])==null?void 0:m.maxConcurrency)??(r==null?void 0:r.maxConcurrency),c=new Wd({maxConcurrency:o,onFailedAttempt:p=>{throw p}}),d=e.map((p,g)=>c.call(async()=>{try{return await this.invoke(p,u[g])}catch(b){if(r!=null&&r.returnExceptions)return b;throw b}}));return Promise.all(d)}async*_streamIterator(e,a){yield this.invoke(e,a)}async stream(e,a){const r=Ie(a),u=new yi({generator:this._streamIterator(e,r),config:r});return await u.setup,Yt.fromAsyncGenerator(u)}_separateRunnableConfigFromCallOptions(e){let a;e===void 0?a=Ie(e):a=Ie({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[a,r]}async _callWithConfig(e,a,r){const u=Ie(r),o=await _n(u),c=await(o==null?void 0:o.handleChainStart(this.toJSON(),ct(a,"input"),u.runId,u==null?void 0:u.runType,void 0,void 0,(u==null?void 0:u.runName)??this.getName()));delete u.runId;let d;try{const m=e.call(this,a,u,c);d=await Ba(m,r==null?void 0:r.signal)}catch(m){throw await(c==null?void 0:c.handleChainError(m)),m}return await(c==null?void 0:c.handleChainEnd(ct(d,"output"))),d}async _batchWithConfig(e,a,r,u){var p;const o=this._getOptionsList(r??{},a.length),c=await Promise.all(o.map(_n)),d=await Promise.all(c.map(async(g,b)=>{const v=await(g==null?void 0:g.handleChainStart(this.toJSON(),ct(a[b],"input"),o[b].runId,o[b].runType,void 0,void 0,o[b].runName??this.getName()));return delete o[b].runId,v}));let m;try{const g=e.call(this,a,o,d,u);m=await Ba(g,(p=o==null?void 0:o[0])==null?void 0:p.signal)}catch(g){throw await Promise.all(d.map(b=>b==null?void 0:b.handleChainError(g))),g}return await Promise.all(d.map(g=>g==null?void 0:g.handleChainEnd(ct(m,"output")))),m}async*_transformStreamWithConfig(e,a,r){let u,o=!0,c,d=!0;const m=Ie(r),p=await _n(m);async function*g(){for await(const v of e){if(o)if(u===void 0)u=v;else try{u=jn(u,v)}catch{u=void 0,o=!1}yield v}}let b;try{const v=await a1(a.bind(this),g(),async()=>p==null?void 0:p.handleChainStart(this.toJSON(),{input:""},m.runId,m.runType,void 0,void 0,m.runName??this.getName()),r==null?void 0:r.signal,m);delete m.runId,b=v.setup;const w=b==null?void 0:b.handlers.find(s1);let A=v.output;w!==void 0&&b!==void 0&&(A=w.tapOutputIterable(b.runId,A));const T=b==null?void 0:b.handlers.find(r1);T!==void 0&&b!==void 0&&(A=T.tapOutputIterable(b.runId,A));for await(const C of A)if(yield C,d)if(c===void 0)c=C;else try{c=jn(c,C)}catch{c=void 0,d=!1}}catch(v){throw await(b==null?void 0:b.handleChainError(v,void 0,void 0,void 0,{inputs:ct(u,"input")})),v}await(b==null?void 0:b.handleChainEnd(c??{},void 0,void 0,void 0,{inputs:ct(u,"input")}))}getGraph(e){const a=new Yl,r=a.addNode({name:`${this.getName()}Input`,schema:Es.any()}),u=a.addNode(this),o=a.addNode({name:`${this.getName()}Output`,schema:Es.any()});return a.addEdge(r,u),a.addEdge(u,o),a}pipe(e){return new cr({first:this,last:fr(e)})}pick(e){return this.pipe(new lT(e))}assign(e){return this.pipe(new uT(new Xs({steps:e})))}async*transform(e,a){let r;for await(const u of e)r===void 0?r=u:r=jn(r,u);yield*this._streamIterator(r,Ie(a))}async*streamLog(e,a,r){const u=new Eb({...r,autoClose:!1,_schemaFormat:"original"}),o=Ie(a);yield*this._streamLog(e,u,o)}async*_streamLog(e,a,r){const{callbacks:u}=r;if(u===void 0)r.callbacks=[a];else if(Array.isArray(u))r.callbacks=u.concat([a]);else{const m=u.copy();m.addHandler(a,!0),r.callbacks=m}const o=this.stream(e,r);async function c(){try{const m=await o;for await(const p of m){const g=new Na({ops:[{op:"add",path:"/streamed_output/-",value:p}]});await a.writer.write(g)}}finally{await a.writer.close()}}const d=c();try{for await(const m of a)yield m}finally{await d}}streamEvents(e,a,r){let u;if(a.version==="v1")u=this._streamEventsV1(e,a,r);else if(a.version==="v2")u=this._streamEventsV2(e,a,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return a.encoding==="text/event-stream"?nT(u):Yt.fromAsyncGenerator(u)}async*_streamEventsV2(e,a,r){var A;const u=new u1({...r,autoClose:!1}),o=Ie(a),c=o.runId??Lt();o.runId=c;const d=o.callbacks;if(d===void 0)o.callbacks=[u];else if(Array.isArray(d))o.callbacks=d.concat(u);else{const T=d.copy();T.addHandler(u,!0),o.callbacks=T}const m=new AbortController,p=this;async function g(){try{let T;a!=null&&a.signal?"any"in AbortSignal?T=AbortSignal.any([m.signal,a.signal]):(T=a.signal,a.signal.addEventListener("abort",()=>{m.abort()},{once:!0})):T=m.signal;const C=await p.stream(e,{...o,signal:T}),M=u.tapOutputIterable(c,C);for await(const B of M)if(m.signal.aborted)break}finally{await u.finish()}}const b=g();let v=!1,w;try{for await(const T of u){if(!v){T.data.input=e,v=!0,w=T.run_id,yield T;continue}T.run_id===w&&T.event.endsWith("_end")&&(A=T.data)!=null&&A.input&&delete T.data.input,yield T}}finally{m.abort(),await b}}async*_streamEventsV1(e,a,r){let u,o=!1;const c=Ie(a),d=c.tags??[],m=c.metadata??{},p=c.runName??this.getName(),g=new Eb({...r,autoClose:!1,_schemaFormat:"streaming_events"}),b=new c1({...r}),v=this._streamLog(e,g,c);for await(const A of v){if(u?u=u.concat(A):u=Gs.fromRunLogPatch(A),u.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const B={...u.state},D={run_id:B.id,event:`on_${B.type}_start`,name:p,tags:d,metadata:m,data:{input:e}};b.includeEvent(D,B.type)&&(yield D)}const T=A.ops.filter(B=>B.path.startsWith("/logs/")).map(B=>B.path.split("/")[2]),C=[...new Set(T)];for(const B of C){let D,ne={};const P=u.state.logs[B];if(P.end_time===void 0?P.streamed_output.length>0?D="stream":D="start":D="end",D==="start")P.inputs!==void 0&&(ne.input=P.inputs);else if(D==="end")P.inputs!==void 0&&(ne.input=P.inputs),ne.output=P.final_output;else if(D==="stream"){const ee=P.streamed_output.length;if(ee!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${ee} instead. Encountered in: "${P.name}"`);ne={chunk:P.streamed_output[0]},P.streamed_output=[]}yield{event:`on_${P.type}_${D}`,name:P.name,run_id:P.id,tags:P.tags,metadata:P.metadata,data:ne}}const{state:M}=u;if(M.streamed_output.length>0){const B=M.streamed_output.length;if(B!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${B} instead. Encountered in: "${M.name}"`);const D={chunk:M.streamed_output[0]};M.streamed_output=[];const ne={event:`on_${M.type}_stream`,run_id:M.id,tags:d,metadata:m,name:p,data:D};b.includeEvent(ne,M.type)&&(yield ne)}}const w=u==null?void 0:u.state;if(w!==void 0){const A={event:`on_${w.type}_end`,name:p,run_id:w.id,tags:d,metadata:m,data:{output:w.final_output}};b.includeEvent(A,w.type)&&(yield A)}}static isRunnable(e){return eh(e)}withListeners({onStart:e,onEnd:a,onError:r}){return new mr({bound:this,config:{},configFactories:[u=>({callbacks:[new ov({config:u,onStart:e,onEnd:a,onError:r})]})]})}asTool(e){return oT(this,e)}}class mr extends xt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const a=_b(this.config,...e);return _b(a,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(a))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,a){return this.bound.invoke(e,await this._mergeConfig(Ie(a),this.kwargs))}async batch(e,a,r){const u=Array.isArray(a)?await Promise.all(a.map(async o=>this._mergeConfig(Ie(o),this.kwargs))):await this._mergeConfig(Ie(a),this.kwargs);return this.bound.batch(e,u,r)}async*_streamIterator(e,a){yield*this.bound._streamIterator(e,await this._mergeConfig(Ie(a),this.kwargs))}async stream(e,a){return this.bound.stream(e,await this._mergeConfig(Ie(a),this.kwargs))}async*transform(e,a){yield*this.bound.transform(e,await this._mergeConfig(Ie(a),this.kwargs))}streamEvents(e,a,r){const u=this,o=async function*(){yield*u.bound.streamEvents(e,{...await u._mergeConfig(Ie(a),u.kwargs),version:a.version},r)};return Yt.fromAsyncGenerator(o())}static isRunnableBinding(e){return e.bound&&xt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:a,onError:r}){return new mr({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[u=>({callbacks:[new ov({config:u,onStart:e,onEnd:a,onError:r})]})]})}}class Bl extends xt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Bl({bound:this.bound.bind(e)})}async invoke(e,a){return this._callWithConfig(this._invoke.bind(this),e,a)}async _invoke(e,a,r){return this.bound.batch(e,wt(a,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:a,onError:r}){return new Bl({bound:this.bound.withListeners({onStart:e,onEnd:a,onError:r})})}}class rT extends mr{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,a,r){const u=e>1?`retry:attempt:${e}`:void 0;return wt(a,{callbacks:r==null?void 0:r.getChild(u)})}async _invoke(e,a,r){return Ml(u=>super.invoke(e,this._patchConfigForRetry(u,a,r)),{onFailedAttempt:u=>this.onFailedAttempt(u,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,a){return this._callWithConfig(this._invoke.bind(this),e,a)}async _batch(e,a,r,u){const o={};try{await Ml(async c=>{const d=e.map((v,w)=>w).filter(v=>o[v.toString()]===void 0||o[v.toString()]instanceof Error),m=d.map(v=>e[v]),p=d.map(v=>this._patchConfigForRetry(c,a==null?void 0:a[v],r==null?void 0:r[v])),g=await super.batch(m,p,{...u,returnExceptions:!0});let b;for(let v=0;v<g.length;v+=1){const w=g[v],A=d[v];w instanceof Error&&b===void 0&&(b=w,b.input=m[v]),o[A.toString()]=w}if(b)throw b;return g},{onFailedAttempt:c=>this.onFailedAttempt(c,c.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(c){if((u==null?void 0:u.returnExceptions)!==!0)throw c}return Object.keys(o).sort((c,d)=>parseInt(c,10)-parseInt(d,10)).map(c=>o[parseInt(c,10)])}async batch(e,a,r){return this._batchWithConfig(this._batch.bind(this),e,a,r)}}class cr extends xt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,a){var m;const r=Ie(a),u=await _n(r),o=await(u==null?void 0:u.handleChainStart(this.toJSON(),ct(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let c=e,d;try{const p=[this.first,...this.middle];for(let g=0;g<p.length;g+=1){const v=p[g].invoke(c,wt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${g+1}`)}));c=await Ba(v,a==null?void 0:a.signal)}if((m=a==null?void 0:a.signal)!=null&&m.aborted)throw new Error("Aborted");d=await this.last.invoke(c,wt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(p){throw await(o==null?void 0:o.handleChainError(p)),p}return await(o==null?void 0:o.handleChainEnd(ct(d,"output"))),d}async batch(e,a,r){var m;const u=this._getOptionsList(a??{},e.length),o=await Promise.all(u.map(_n)),c=await Promise.all(o.map(async(p,g)=>{const b=await(p==null?void 0:p.handleChainStart(this.toJSON(),ct(e[g],"input"),u[g].runId,void 0,void 0,void 0,u[g].runName));return delete u[g].runId,b}));let d=e;try{for(let p=0;p<this.steps.length;p+=1){const b=this.steps[p].batch(d,c.map((v,w)=>{const A=v==null?void 0:v.getChild(this.omitSequenceTags?void 0:`seq:step:${p+1}`);return wt(u[w],{callbacks:A})}),r);d=await Ba(b,(m=u[0])==null?void 0:m.signal)}}catch(p){throw await Promise.all(c.map(g=>g==null?void 0:g.handleChainError(p))),p}return await Promise.all(c.map(p=>p==null?void 0:p.handleChainEnd(ct(d,"output")))),d}async*_streamIterator(e,a){var b;const r=await _n(a),{runId:u,...o}=a??{},c=await(r==null?void 0:r.handleChainStart(this.toJSON(),ct(e,"input"),u,void 0,void 0,void 0,o==null?void 0:o.runName)),d=[this.first,...this.middle,this.last];let m=!0,p;async function*g(){yield e}try{let v=d[0].transform(g(),wt(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let w=1;w<d.length;w+=1)v=await d[w].transform(v,wt(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:`seq:step:${w+1}`)}));for await(const w of v)if((b=a==null?void 0:a.signal)==null||b.throwIfAborted(),yield w,m)if(p===void 0)p=w;else try{p=jn(p,w)}catch{p=void 0,m=!1}}catch(v){throw await(c==null?void 0:c.handleChainError(v)),v}await(c==null?void 0:c.handleChainEnd(ct(p,"output")))}getGraph(e){const a=new Yl;let r=null;return this.steps.forEach((u,o)=>{const c=u.getGraph(e);o!==0&&c.trimFirstNode(),o!==this.steps.length-1&&c.trimLastNode(),a.extend(c);const d=c.firstNode();if(!d)throw new Error(`Runnable ${u} has no first node`);r&&a.addEdge(r,d),r=c.lastNode()}),a}pipe(e){return cr.isRunnableSequence(e)?new cr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new cr({first:this.first,middle:[...this.middle,this.last],last:fr(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&xt.isRunnable(e)}static from([e,...a],r){let u={};return typeof r=="string"?u.name=r:r!==void 0&&(u=r),new cr({...u,first:fr(e),middle:a.slice(0,-1).map(fr),last:fr(a[a.length-1])})}}class Xs extends xt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[a,r]of Object.entries(e.steps))this.steps[a]=fr(r)}static from(e){return new Xs({steps:e})}async invoke(e,a){const r=Ie(a),u=await _n(r),o=await(u==null?void 0:u.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const c={};try{const d=Object.entries(this.steps).map(async([m,p])=>{c[m]=await p.invoke(e,wt(r,{callbacks:o==null?void 0:o.getChild(`map:key:${m}`)}))});await Ba(Promise.all(d),a==null?void 0:a.signal)}catch(d){throw await(o==null?void 0:o.handleChainError(d)),d}return await(o==null?void 0:o.handleChainEnd(c)),c}async*_transform(e,a,r){const u={...this.steps},o=lv(e,Object.keys(u).length),c=new Map(Object.entries(u).map(([d,m],p)=>{const g=m.transform(o[p],wt(r,{callbacks:a==null?void 0:a.getChild(`map:key:${d}`)}));return[d,g.next().then(b=>({key:d,gen:g,result:b}))]}));for(;c.size;){const d=Promise.race(c.values()),{key:m,result:p,gen:g}=await Ba(d,r==null?void 0:r.signal);c.delete(m),p.done||(yield{[m]:p.value},c.set(m,g.next().then(b=>({key:m,gen:g,result:b}))))}}transform(e,a){return this._transformStreamWithConfig(e,this._transform.bind(this),a)}async stream(e,a){async function*r(){yield e}const u=Ie(a),o=new yi({generator:this.transform(r(),u),config:u});return await o.setup,Yt.fromAsyncGenerator(o)}}class th extends xt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!Xd(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,a){const[r]=this._getOptionsList(a??{},1),u=await _n(r),o=this.func(wt(r,{callbacks:u}),e);return Ba(o,r==null?void 0:r.signal)}async*_streamIterator(e,a){var o,c;const[r]=this._getOptionsList(a??{},1),u=await this.invoke(e,a);if($d(u)){for await(const d of u)(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield d;return}if(aT(u)){for(;;){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();const d=u.next();if(d.done)break;yield d.value}return}yield u}static from(e){return new th({func:e})}}function iT(s){if(Xd(s))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class Kl extends xt{static lc_name(){return"RunnableLambda"}constructor(e){if(Xd(e.func))return th.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),iT(e.func),this.func=e.func}static from(e){return new Kl({func:e})}async _invoke(e,a,r){return new Promise((u,o)=>{const c=wt(a,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((a==null?void 0:a.recursionLimit)??wd)-1});$a.runWithConfig(pi(c),async()=>{var d,m;try{let p=await this.func(e,{...c});if(p&&xt.isRunnable(p)){if((a==null?void 0:a.recursionLimit)===0)throw new Error("Recursion limit reached.");p=await p.invoke(e,{...c,recursionLimit:(c.recursionLimit??wd)-1})}else if($d(p)){let g;for await(const b of Bd(c,p))if((d=a==null?void 0:a.signal)==null||d.throwIfAborted(),g===void 0)g=b;else try{g=jn(g,b)}catch{g=b}p=g}else if(Nb(p)){let g;for(const b of jb(c,p))if((m=a==null?void 0:a.signal)==null||m.throwIfAborted(),g===void 0)g=b;else try{g=jn(g,b)}catch{g=b}p=g}u(p)}catch(p){o(p)}})})}async invoke(e,a){return this._callWithConfig(this._invoke.bind(this),e,a)}async*_transform(e,a,r){var d,m;let u;for await(const p of e)if(u===void 0)u=p;else try{u=jn(u,p)}catch{u=p}const o=wt(r,{callbacks:a==null?void 0:a.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??wd)-1}),c=await new Promise((p,g)=>{$a.runWithConfig(pi(o),async()=>{try{const b=await this.func(u,{...o,config:o});p(b)}catch(b){g(b)}})});if(c&&xt.isRunnable(c)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const p=await c.stream(u,o);for await(const g of p)yield g}else if($d(c))for await(const p of Bd(o,c))(d=r==null?void 0:r.signal)==null||d.throwIfAborted(),yield p;else if(Nb(c))for(const p of jb(o,c))(m=r==null?void 0:r.signal)==null||m.throwIfAborted(),yield p;else yield c}transform(e,a){return this._transformStreamWithConfig(e,this._transform.bind(this),a)}async stream(e,a){async function*r(){yield e}const u=Ie(a),o=new yi({generator:this.transform(r(),u),config:u});return await o.setup,Yt.fromAsyncGenerator(o)}}class sT extends xt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,a){const r=Ie(a),u=await _n(r),{runId:o,...c}=r,d=await(u==null?void 0:u.handleChainStart(this.toJSON(),ct(e,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName)),m=wt(c,{callbacks:d==null?void 0:d.getChild()});return await $a.runWithConfig(m,async()=>{var b;let g;for(const v of this.runnables()){(b=r==null?void 0:r.signal)==null||b.throwIfAborted();try{const w=await v.invoke(e,m);return await(d==null?void 0:d.handleChainEnd(ct(w,"output"))),w}catch(w){g===void 0&&(g=w)}}throw g===void 0?new Error("No error stored at end of fallback."):(await(d==null?void 0:d.handleChainError(g)),g)})}async*_streamIterator(e,a){var b;const r=Ie(a),u=await _n(r),{runId:o,...c}=r,d=await(u==null?void 0:u.handleChainStart(this.toJSON(),ct(e,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName));let m,p;for(const v of this.runnables()){(b=r==null?void 0:r.signal)==null||b.throwIfAborted();const w=wt(c,{callbacks:d==null?void 0:d.getChild()});try{const A=await v.stream(e,w);p=Bd(w,A);break}catch(A){m===void 0&&(m=A)}}if(p===void 0){const v=m??new Error("No error stored at end of fallback.");throw await(d==null?void 0:d.handleChainError(v)),v}let g;try{for await(const v of p){yield v;try{g=g===void 0?g:jn(g,v)}catch{g=void 0}}}catch(v){throw await(d==null?void 0:d.handleChainError(v)),v}await(d==null?void 0:d.handleChainEnd(ct(g,"output")))}async batch(e,a,r){var m;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const u=this._getOptionsList(a??{},e.length),o=await Promise.all(u.map(p=>_n(p))),c=await Promise.all(o.map(async(p,g)=>{const b=await(p==null?void 0:p.handleChainStart(this.toJSON(),ct(e[g],"input"),u[g].runId,void 0,void 0,void 0,u[g].runName));return delete u[g].runId,b}));let d;for(const p of this.runnables()){(m=u[0].signal)==null||m.throwIfAborted();try{const g=await p.batch(e,c.map((b,v)=>wt(u[v],{callbacks:b==null?void 0:b.getChild()})),r);return await Promise.all(c.map((b,v)=>b==null?void 0:b.handleChainEnd(ct(g[v],"output")))),g}catch(g){d===void 0&&(d=g)}}throw d?(await Promise.all(c.map(p=>p==null?void 0:p.handleChainError(d))),d):new Error("No error stored at end of fallbacks.")}}function fr(s){if(typeof s=="function")return new Kl({func:s});if(xt.isRunnable(s))return s;if(!Array.isArray(s)&&typeof s=="object"){const e={};for(const[a,r]of Object.entries(s))e[a]=fr(r);return new Xs({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class uT extends xt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Xs&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,a){const r=await this.mapper.invoke(e,a);return{...e,...r}}async*_transform(e,a,r){const u=this.mapper.getStepsKeys(),[o,c]=lv(e),d=this.mapper.transform(c,wt(r,{callbacks:a==null?void 0:a.getChild()})),m=d.next();for await(const p of o){if(typeof p!="object"||Array.isArray(p))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof p}`);const g=Object.fromEntries(Object.entries(p).filter(([b])=>!u.includes(b)));Object.keys(g).length>0&&(yield g)}yield(await m).value;for await(const p of d)yield p}transform(e,a){return this._transformStreamWithConfig(e,this._transform.bind(this),a)}async stream(e,a){async function*r(){yield e}const u=Ie(a),o=new yi({generator:this.transform(r(),u),config:u});return await o.setup,Yt.fromAsyncGenerator(o)}}class lT extends xt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const a=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return a.length===0?void 0:Object.fromEntries(a)}}async invoke(e,a){return this._callWithConfig(this._pick.bind(this),e,a)}async*_transform(e){for await(const a of e){const r=await this._pick(a);r!==void 0&&(yield r)}}transform(e,a){return this._transformStreamWithConfig(e,this._transform.bind(this),a)}async stream(e,a){async function*r(){yield e}const u=Ie(a),o=new yi({generator:this.transform(r(),u),config:u});return await o.setup,Yt.fromAsyncGenerator(o)}}class Mb extends mr{constructor(e){const a=cr.from([Kl.from(async r=>{let u;if($b(r))try{u=await this.schema.parseAsync(r.args)}catch{throw new Hw("Received tool input did not match expected schema",JSON.stringify(r.args))}else u=r;return u}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:a,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function oT(s,e){var u;const a=e.name??s.getName(),r=e.description??((u=e.schema)==null?void 0:u.description);return e.schema.constructor===Es.ZodString?new Mb({name:a,description:r,schema:Es.object({input:Es.string()}).transform(o=>o.input),bound:s}):new Mb({name:a,description:r,schema:e.schema,bound:s})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var cT=typeof window=="object"?window:{},we="0123456789abcdef".split(""),fT=[-2147483648,8388608,32768,128],gn=[24,16,8,0],ot=[];function An(s){s?(ot[0]=ot[16]=ot[1]=ot[2]=ot[3]=ot[4]=ot[5]=ot[6]=ot[7]=ot[8]=ot[9]=ot[10]=ot[11]=ot[12]=ot[13]=ot[14]=ot[15]=0,this.blocks=ot):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}An.prototype.update=function(s){if(!this.finalized){var e=typeof s!="string";e&&s.constructor===cT.ArrayBuffer&&(s=new Uint8Array(s));for(var a,r=0,u,o=s.length||0,c=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(u=this.start;r<o&&u<64;++r)c[u>>2]|=s[r]<<gn[u++&3];else for(u=this.start;r<o&&u<64;++r)a=s.charCodeAt(r),a<128?c[u>>2]|=a<<gn[u++&3]:a<2048?(c[u>>2]|=(192|a>>6)<<gn[u++&3],c[u>>2]|=(128|a&63)<<gn[u++&3]):a<55296||a>=57344?(c[u>>2]|=(224|a>>12)<<gn[u++&3],c[u>>2]|=(128|a>>6&63)<<gn[u++&3],c[u>>2]|=(128|a&63)<<gn[u++&3]):(a=65536+((a&1023)<<10|s.charCodeAt(++r)&1023),c[u>>2]|=(240|a>>18)<<gn[u++&3],c[u>>2]|=(128|a>>12&63)<<gn[u++&3],c[u>>2]|=(128|a>>6&63)<<gn[u++&3],c[u>>2]|=(128|a&63)<<gn[u++&3]);this.lastByteIndex=u,this.bytes+=u-this.start,u>=64?(this.block=c[16],this.start=u-64,this.hash(),this.hashed=!0):this.start=u}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};An.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,e=this.lastByteIndex;s[16]=this.block,s[e>>2]|=fT[e&3],this.block=s[16],e>=56&&(this.hashed||this.hash(),s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),s[14]=this.hBytes<<3|this.bytes>>>29,s[15]=this.bytes<<3,this.hash()}};An.prototype.hash=function(){var s=this.h0,e=this.h1,a=this.h2,r=this.h3,u=this.h4,o,c,d,m=this.blocks;for(c=16;c<80;++c)d=m[c-3]^m[c-8]^m[c-14]^m[c-16],m[c]=d<<1|d>>>31;for(c=0;c<20;c+=5)o=e&a|~e&r,d=s<<5|s>>>27,u=d+o+u+1518500249+m[c]<<0,e=e<<30|e>>>2,o=s&e|~s&a,d=u<<5|u>>>27,r=d+o+r+1518500249+m[c+1]<<0,s=s<<30|s>>>2,o=u&s|~u&e,d=r<<5|r>>>27,a=d+o+a+1518500249+m[c+2]<<0,u=u<<30|u>>>2,o=r&u|~r&s,d=a<<5|a>>>27,e=d+o+e+1518500249+m[c+3]<<0,r=r<<30|r>>>2,o=a&r|~a&u,d=e<<5|e>>>27,s=d+o+s+1518500249+m[c+4]<<0,a=a<<30|a>>>2;for(;c<40;c+=5)o=e^a^r,d=s<<5|s>>>27,u=d+o+u+1859775393+m[c]<<0,e=e<<30|e>>>2,o=s^e^a,d=u<<5|u>>>27,r=d+o+r+1859775393+m[c+1]<<0,s=s<<30|s>>>2,o=u^s^e,d=r<<5|r>>>27,a=d+o+a+1859775393+m[c+2]<<0,u=u<<30|u>>>2,o=r^u^s,d=a<<5|a>>>27,e=d+o+e+1859775393+m[c+3]<<0,r=r<<30|r>>>2,o=a^r^u,d=e<<5|e>>>27,s=d+o+s+1859775393+m[c+4]<<0,a=a<<30|a>>>2;for(;c<60;c+=5)o=e&a|e&r|a&r,d=s<<5|s>>>27,u=d+o+u-1894007588+m[c]<<0,e=e<<30|e>>>2,o=s&e|s&a|e&a,d=u<<5|u>>>27,r=d+o+r-1894007588+m[c+1]<<0,s=s<<30|s>>>2,o=u&s|u&e|s&e,d=r<<5|r>>>27,a=d+o+a-1894007588+m[c+2]<<0,u=u<<30|u>>>2,o=r&u|r&s|u&s,d=a<<5|a>>>27,e=d+o+e-1894007588+m[c+3]<<0,r=r<<30|r>>>2,o=a&r|a&u|r&u,d=e<<5|e>>>27,s=d+o+s-1894007588+m[c+4]<<0,a=a<<30|a>>>2;for(;c<80;c+=5)o=e^a^r,d=s<<5|s>>>27,u=d+o+u-899497514+m[c]<<0,e=e<<30|e>>>2,o=s^e^a,d=u<<5|u>>>27,r=d+o+r-899497514+m[c+1]<<0,s=s<<30|s>>>2,o=u^s^e,d=r<<5|r>>>27,a=d+o+a-899497514+m[c+2]<<0,u=u<<30|u>>>2,o=r^u^s,d=a<<5|a>>>27,e=d+o+e-899497514+m[c+3]<<0,r=r<<30|r>>>2,o=a^r^u,d=e<<5|e>>>27,s=d+o+s-899497514+m[c+4]<<0,a=a<<30|a>>>2;this.h0=this.h0+s<<0,this.h1=this.h1+e<<0,this.h2=this.h2+a<<0,this.h3=this.h3+r<<0,this.h4=this.h4+u<<0};An.prototype.hex=function(){this.finalize();var s=this.h0,e=this.h1,a=this.h2,r=this.h3,u=this.h4;return we[s>>28&15]+we[s>>24&15]+we[s>>20&15]+we[s>>16&15]+we[s>>12&15]+we[s>>8&15]+we[s>>4&15]+we[s&15]+we[e>>28&15]+we[e>>24&15]+we[e>>20&15]+we[e>>16&15]+we[e>>12&15]+we[e>>8&15]+we[e>>4&15]+we[e&15]+we[a>>28&15]+we[a>>24&15]+we[a>>20&15]+we[a>>16&15]+we[a>>12&15]+we[a>>8&15]+we[a>>4&15]+we[a&15]+we[r>>28&15]+we[r>>24&15]+we[r>>20&15]+we[r>>16&15]+we[r>>12&15]+we[r>>8&15]+we[r>>4&15]+we[r&15]+we[u>>28&15]+we[u>>24&15]+we[u>>20&15]+we[u>>16&15]+we[u>>12&15]+we[u>>8&15]+we[u>>4&15]+we[u&15]};An.prototype.toString=An.prototype.hex;An.prototype.digest=function(){this.finalize();var s=this.h0,e=this.h1,a=this.h2,r=this.h3,u=this.h4;return[s>>24&255,s>>16&255,s>>8&255,s&255,e>>24&255,e>>16&255,e>>8&255,e&255,a>>24&255,a>>16&255,a>>8&255,a&255,r>>24&255,r>>16&255,r>>8&255,r&255,u>>24&255,u>>16&255,u>>8&255,u&255]};An.prototype.array=An.prototype.digest;An.prototype.arrayBuffer=function(){this.finalize();var s=new ArrayBuffer(20),e=new DataView(s);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),s};const dT=s=>new An(!0).update(s).hex(),Db=(...s)=>dT(s.join("_"));class hT{}const mT=new Map;class nh extends hT{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,a){return Promise.resolve(this.cache.get(Db(e,a))??null)}async update(e,a,r){this.cache.set(Db(e,a),r)}static global(){return new nh(mT)}}class pv extends Da{}class pT extends pv{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Vs(this.value)]}}class gT extends pv{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return qd(this.messages)}toChatMessages(){return this.messages}}var _s={},kb;function yT(){if(kb)return _s;kb=1,_s.byteLength=d,_s.toByteArray=p,_s.fromByteArray=v;for(var s=[],e=[],a=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,o=r.length;u<o;++u)s[u]=r[u],e[r.charCodeAt(u)]=u;e[45]=62,e[95]=63;function c(w){var A=w.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=w.indexOf("=");T===-1&&(T=A);var C=T===A?0:4-T%4;return[T,C]}function d(w){var A=c(w),T=A[0],C=A[1];return(T+C)*3/4-C}function m(w,A,T){return(A+T)*3/4-T}function p(w){var A,T=c(w),C=T[0],M=T[1],B=new a(m(w,C,M)),D=0,ne=M>0?C-4:C,P;for(P=0;P<ne;P+=4)A=e[w.charCodeAt(P)]<<18|e[w.charCodeAt(P+1)]<<12|e[w.charCodeAt(P+2)]<<6|e[w.charCodeAt(P+3)],B[D++]=A>>16&255,B[D++]=A>>8&255,B[D++]=A&255;return M===2&&(A=e[w.charCodeAt(P)]<<2|e[w.charCodeAt(P+1)]>>4,B[D++]=A&255),M===1&&(A=e[w.charCodeAt(P)]<<10|e[w.charCodeAt(P+1)]<<4|e[w.charCodeAt(P+2)]>>2,B[D++]=A>>8&255,B[D++]=A&255),B}function g(w){return s[w>>18&63]+s[w>>12&63]+s[w>>6&63]+s[w&63]}function b(w,A,T){for(var C,M=[],B=A;B<T;B+=3)C=(w[B]<<16&16711680)+(w[B+1]<<8&65280)+(w[B+2]&255),M.push(g(C));return M.join("")}function v(w){for(var A,T=w.length,C=T%3,M=[],B=16383,D=0,ne=T-C;D<ne;D+=B)M.push(b(w,D,D+B>ne?ne:D+B));return C===1?(A=w[T-1],M.push(s[A>>2]+s[A<<4&63]+"==")):C===2&&(A=(w[T-2]<<8)+w[T-1],M.push(s[A>>10]+s[A>>4&63]+s[A<<2&63]+"=")),M.join("")}return _s}var bT=yT();const vT=_r(bT);var _T=Object.defineProperty,wT=(s,e,a)=>e in s?_T(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,AT=(s,e,a)=>(wT(s,e+"",a),a);function ET(s,e){let a=Array.from({length:s.length},(r,u)=>({start:u,end:u+1}));for(;a.length>1;){let r=null;for(let u=0;u<a.length-1;u++){const o=s.slice(a[u].start,a[u+1].end),c=e.get(o.join(","));c!=null&&(r==null||c<r[0])&&(r=[c,u])}if(r!=null){const u=r[1];a[u]={start:a[u].start,end:a[u+1].end},a.splice(u+1,1)}else break}return a}function ST(s,e){return s.length===1?[e.get(s.join(","))]:ET(s,e).map(a=>e.get(s.slice(a.start,a.end).join(","))).filter(a=>a!=null)}function TT(s){return s.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Pd=class{constructor(s,e){Ra(this,"specialTokens");Ra(this,"inverseSpecialTokens");Ra(this,"patStr");Ra(this,"textEncoder",new TextEncoder);Ra(this,"textDecoder",new TextDecoder("utf-8"));Ra(this,"rankMap",new Map);Ra(this,"textMap",new Map);this.patStr=s.pat_str;const a=s.bpe_ranks.split(`
`).filter(Boolean).reduce((r,u)=>{const[o,c,...d]=u.split(" "),m=Number.parseInt(c,10);return d.forEach((p,g)=>r[p]=m+g),r},{});for(const[r,u]of Object.entries(a)){const o=vT.toByteArray(r);this.rankMap.set(o.join(","),u),this.textMap.set(u,o)}this.specialTokens={...s.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[u,o])=>(r[o]=this.textEncoder.encode(u),r),{})}encode(s,e=[],a="all"){const r=new RegExp(this.patStr,"ug"),u=Pd.specialTokenRegex(Object.keys(this.specialTokens)),o=[],c=new Set(e==="all"?Object.keys(this.specialTokens):e),d=new Set(a==="all"?Object.keys(this.specialTokens).filter(p=>!c.has(p)):a);if(d.size>0){const p=Pd.specialTokenRegex([...d]),g=s.match(p);if(g!=null)throw new Error(`The text contains a special token that is not allowed: ${g[0]}`)}let m=0;for(;;){let p=null,g=m;for(;u.lastIndex=g,p=u.exec(s),!(p==null||c.has(p[0]));)g=p.index+1;const b=(p==null?void 0:p.index)??s.length;for(const w of s.substring(m,b).matchAll(r)){const A=this.textEncoder.encode(w[0]),T=this.rankMap.get(A.join(","));if(T!=null){o.push(T);continue}o.push(...ST(A,this.rankMap))}if(p==null)break;let v=this.specialTokens[p[0]];o.push(v),m=p.index+p[0].length}return o}decode(s){const e=[];let a=0;for(let o=0;o<s.length;++o){const c=s[o],d=this.textMap.get(c)??this.inverseSpecialTokens[c];d!=null&&(e.push(d),a+=d.length)}const r=new Uint8Array(a);let u=0;for(const o of e)r.set(o,u),u+=o.length;return this.textDecoder.decode(r)}},gv=Pd;AT(gv,"specialTokenRegex",s=>new RegExp(s.map(e=>TT(e)).join("|"),"g"));function OT(s){switch(s){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"o3-mini":case"o3-mini-2025-01-31":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw new Error("Unknown model")}}const wl={},RT=new Wd({});async function CT(s){return s in wl||(wl[s]=RT.fetch(`https://tiktoken.pages.dev/js/${s}.json`).then(e=>e.json()).then(e=>new gv(e)).catch(e=>{throw delete wl[s],e})),await wl[s]}async function xT(s){return CT(OT(s))}const NT=s=>s.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":s.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":s.startsWith("gpt-4-32k")?"gpt-4-32k":s.startsWith("gpt-4-")?"gpt-4":s.startsWith("gpt-4o")?"gpt-4o":s,jT=()=>!1;class MT extends xt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??jT(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class DT extends MT{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:a,...r}){const{cache:u,...o}=r;super({callbacks:e??a,...o}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof u=="object"?this.cache=u:u?this.cache=nh.global():this.cache=void 0,this.caller=new Wd(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let a=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await xT("modelName"in this?NT(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{a=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return a}static _convertInputToPromptValue(e){return typeof e=="string"?new pT(e):Array.isArray(e)?new gT(e.map(Zw)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...a}){const r={...this._identifyingParams(),...a,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([c,d])=>d!==void 0).map(([c,d])=>`${c}:${JSON.stringify(d)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}var gt=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},Rt={searchParams:"URLSearchParams"in gt,iterable:"Symbol"in gt&&"iterator"in Symbol,blob:"FileReader"in gt&&"Blob"in gt&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in gt,arrayBuffer:"ArrayBuffer"in gt};function kT(s){return s&&DataView.prototype.isPrototypeOf(s)}if(Rt.arrayBuffer)var UT=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],LT=ArrayBuffer.isView||function(s){return s&&UT.indexOf(Object.prototype.toString.call(s))>-1};function bi(s){if(typeof s!="string"&&(s=String(s)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(s)||s==="")throw new TypeError('Invalid character in header field name: "'+s+'"');return s.toLowerCase()}function ah(s){return typeof s!="string"&&(s=String(s)),s}function rh(s){var e={next:function(){var a=s.shift();return{done:a===void 0,value:a}}};return Rt.iterable&&(e[Symbol.iterator]=function(){return e}),e}function rt(s){this.map={},s instanceof rt?s.forEach(function(e,a){this.append(a,e)},this):Array.isArray(s)?s.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):s&&Object.getOwnPropertyNames(s).forEach(function(e){this.append(e,s[e])},this)}rt.prototype.append=function(s,e){s=bi(s),e=ah(e);var a=this.map[s];this.map[s]=a?a+", "+e:e};rt.prototype.delete=function(s){delete this.map[bi(s)]};rt.prototype.get=function(s){return s=bi(s),this.has(s)?this.map[s]:null};rt.prototype.has=function(s){return this.map.hasOwnProperty(bi(s))};rt.prototype.set=function(s,e){this.map[bi(s)]=ah(e)};rt.prototype.forEach=function(s,e){for(var a in this.map)this.map.hasOwnProperty(a)&&s.call(e,this.map[a],a,this)};rt.prototype.keys=function(){var s=[];return this.forEach(function(e,a){s.push(a)}),rh(s)};rt.prototype.values=function(){var s=[];return this.forEach(function(e){s.push(e)}),rh(s)};rt.prototype.entries=function(){var s=[];return this.forEach(function(e,a){s.push([a,e])}),rh(s)};Rt.iterable&&(rt.prototype[Symbol.iterator]=rt.prototype.entries);function Td(s){if(!s._noBody){if(s.bodyUsed)return Promise.reject(new TypeError("Already read"));s.bodyUsed=!0}}function yv(s){return new Promise(function(e,a){s.onload=function(){e(s.result)},s.onerror=function(){a(s.error)}})}function IT(s){var e=new FileReader,a=yv(e);return e.readAsArrayBuffer(s),a}function $T(s){var e=new FileReader,a=yv(e),r=/charset=([A-Za-z0-9_-]+)/.exec(s.type),u=r?r[1]:"utf-8";return e.readAsText(s,u),a}function BT(s){for(var e=new Uint8Array(s),a=new Array(e.length),r=0;r<e.length;r++)a[r]=String.fromCharCode(e[r]);return a.join("")}function Ub(s){if(s.slice)return s.slice(0);var e=new Uint8Array(s.byteLength);return e.set(new Uint8Array(s)),e.buffer}function bv(){return this.bodyUsed=!1,this._initBody=function(s){this.bodyUsed=this.bodyUsed,this._bodyInit=s,s?typeof s=="string"?this._bodyText=s:Rt.blob&&Blob.prototype.isPrototypeOf(s)?this._bodyBlob=s:Rt.formData&&FormData.prototype.isPrototypeOf(s)?this._bodyFormData=s:Rt.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)?this._bodyText=s.toString():Rt.arrayBuffer&&Rt.blob&&kT(s)?(this._bodyArrayBuffer=Ub(s.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Rt.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(s)||LT(s))?this._bodyArrayBuffer=Ub(s):this._bodyText=s=Object.prototype.toString.call(s):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof s=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Rt.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Rt.blob&&(this.blob=function(){var s=Td(this);if(s)return s;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var s=Td(this);return s||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(Rt.blob)return this.blob().then(IT);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var s=Td(this);if(s)return s;if(this._bodyBlob)return $T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(BT(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Rt.formData&&(this.formData=function(){return this.text().then(HT)}),this.json=function(){return this.text().then(JSON.parse)},this}var PT=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function zT(s){var e=s.toUpperCase();return PT.indexOf(e)>-1?e:s}function vr(s,e){if(!(this instanceof vr))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var a=e.body;if(s instanceof vr){if(s.bodyUsed)throw new TypeError("Already read");this.url=s.url,this.credentials=s.credentials,e.headers||(this.headers=new rt(s.headers)),this.method=s.method,this.mode=s.mode,this.signal=s.signal,!a&&s._bodyInit!=null&&(a=s._bodyInit,s.bodyUsed=!0)}else this.url=String(s);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new rt(e.headers)),this.method=zT(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in gt){var o=new AbortController;return o.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var u=/\?/;this.url+=(u.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}vr.prototype.clone=function(){return new vr(this,{body:this._bodyInit})};function HT(s){var e=new FormData;return s.trim().split("&").forEach(function(a){if(a){var r=a.split("="),u=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(u),decodeURIComponent(o))}}),e}function qT(s){var e=new rt,a=s.replace(/\r?\n[\t ]+/g," ");return a.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var u=r.split(":"),o=u.shift().trim();if(o){var c=u.join(":").trim();try{e.append(o,c)}catch(d){console.warn("Response "+d.message)}}}),e}bv.call(vr.prototype);function kn(s,e){if(!(this instanceof kn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new rt(e.headers),this.url=e.url||"",this._initBody(s)}bv.call(kn.prototype);kn.prototype.clone=function(){return new kn(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new rt(this.headers),url:this.url})};kn.error=function(){var s=new kn(null,{status:200,statusText:""});return s.ok=!1,s.status=0,s.type="error",s};var GT=[301,302,303,307,308];kn.redirect=function(s,e){if(GT.indexOf(e)===-1)throw new RangeError("Invalid status code");return new kn(null,{status:e,headers:{location:s}})};var or=gt.DOMException;try{new or}catch{or=function(e,a){this.message=e,this.name=a;var r=Error(e);this.stack=r.stack},or.prototype=Object.create(Error.prototype),or.prototype.constructor=or}function vv(s,e){return new Promise(function(a,r){var u=new vr(s,e);if(u.signal&&u.signal.aborted)return r(new or("Aborted","AbortError"));var o=new XMLHttpRequest;function c(){o.abort()}o.onload=function(){var p={statusText:o.statusText,headers:qT(o.getAllResponseHeaders()||"")};u.url.indexOf("file://")===0&&(o.status<200||o.status>599)?p.status=200:p.status=o.status,p.url="responseURL"in o?o.responseURL:p.headers.get("X-Request-URL");var g="response"in o?o.response:o.responseText;setTimeout(function(){a(new kn(g,p))},0)},o.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},o.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request timed out"))},0)},o.onabort=function(){setTimeout(function(){r(new or("Aborted","AbortError"))},0)};function d(p){try{return p===""&&gt.location.href?gt.location.href:p}catch{return p}}if(o.open(u.method,d(u.url),!0),u.credentials==="include"?o.withCredentials=!0:u.credentials==="omit"&&(o.withCredentials=!1),"responseType"in o&&(Rt.blob?o.responseType="blob":Rt.arrayBuffer&&(o.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof rt||gt.Headers&&e.headers instanceof gt.Headers)){var m=[];Object.getOwnPropertyNames(e.headers).forEach(function(p){m.push(bi(p)),o.setRequestHeader(p,ah(e.headers[p]))}),u.headers.forEach(function(p,g){m.indexOf(g)===-1&&o.setRequestHeader(g,p)})}else u.headers.forEach(function(p,g){o.setRequestHeader(g,p)});u.signal&&(u.signal.addEventListener("abort",c),o.onreadystatechange=function(){o.readyState===4&&u.signal.removeEventListener("abort",c)}),o.send(typeof u._bodyInit>"u"?null:u._bodyInit)})}vv.polyfill=!0;gt.fetch||(gt.fetch=vv,gt.Headers=rt,gt.Request=vr,gt.Response=kn);const ZT="0.5.14",_v="11434",wv=`http://127.0.0.1:${_v}`;var VT=Object.defineProperty,QT=(s,e,a)=>e in s?VT(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,Od=(s,e,a)=>(QT(s,typeof e!="symbol"?e+"":e,a),a);class ih extends Error{constructor(e,a){super(e),this.error=e,this.status_code=a,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,ih)}}class YT{constructor(e,a,r){Od(this,"abortController"),Od(this,"itr"),Od(this,"doneCallback"),this.abortController=e,this.itr=a,this.doneCallback=r}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(const e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}}const sh=async s=>{var r;if(s.ok)return;let e=`Error ${s.status}: ${s.statusText}`,a=null;if((r=s.headers.get("content-type"))!=null&&r.includes("application/json"))try{a=await s.json(),e=a.error||e}catch{console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await s.text()||e}catch{console.log("Failed to get text from error response")}throw new ih(e,s.status)};function KT(){var s;if(typeof window<"u"&&window.navigator){const e=navigator;return"userAgentData"in e&&((s=e.userAgentData)!=null&&s.platform)?`${e.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process<"u")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function FT(s){if(s instanceof Headers){const e={};return s.forEach((a,r)=>{e[r]=a}),e}else return Array.isArray(s)?Object.fromEntries(s):s||{}}const uh=async(s,e,a={})=>{const r={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${ZT} (${KT()})`};a.headers=FT(a.headers);const u=Object.fromEntries(Object.entries(a.headers).filter(([o])=>!Object.keys(r).some(c=>c.toLowerCase()===o.toLowerCase())));return a.headers={...r,...u},s(e,a)},Lb=async(s,e,a)=>{const r=await uh(s,e,{headers:a==null?void 0:a.headers});return await sh(r),r},ai=async(s,e,a,r)=>{const o=(d=>d!==null&&typeof d=="object"&&!Array.isArray(d))(a)?JSON.stringify(a):a,c=await uh(s,e,{method:"POST",body:o,signal:r==null?void 0:r.signal,headers:r==null?void 0:r.headers});return await sh(c),c},XT=async(s,e,a,r)=>{const u=await uh(s,e,{method:"DELETE",body:JSON.stringify(a),headers:r==null?void 0:r.headers});return await sh(u),u},JT=async function*(s){const e=new TextDecoder("utf-8");let a="";const r=s.getReader();for(;;){const{done:u,value:o}=await r.read();if(u)break;a+=e.decode(o);const c=a.split(`
`);a=c.pop()??"";for(const d of c)try{yield JSON.parse(d)}catch{console.warn("invalid json: ",d)}}for(const u of a.split(`
`).filter(o=>o!==""))try{yield JSON.parse(u)}catch{console.warn("invalid json: ",u)}},WT=s=>{if(!s)return wv;let e=s.includes("://");s.startsWith(":")&&(s=`http://127.0.0.1${s}`,e=!0),e||(s=`http://${s}`);const a=new URL(s);let r=a.port;r||(e?r=a.protocol==="https:"?"443":"80":r=_v);let u=`${a.protocol}//${a.hostname}:${r}${a.pathname}`;return u.endsWith("/")&&(u=u.slice(0,-1)),u};var eO=Object.defineProperty,tO=(s,e,a)=>e in s?eO(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,Rd=(s,e,a)=>(tO(s,typeof e!="symbol"?e+"":e,a),a);let Av=class{constructor(e){Rd(this,"config"),Rd(this,"fetch"),Rd(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e==null?void 0:e.headers},e!=null&&e.proxy||(this.config.host=WT((e==null?void 0:e.host)??wv)),this.fetch=(e==null?void 0:e.fetch)??fetch}abort(){for(const e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,a){a.stream=a.stream??!1;const r=`${this.config.host}/api/${e}`;if(a.stream){const o=new AbortController,c=await ai(this.fetch,r,a,{signal:o.signal,headers:this.config.headers});if(!c.body)throw new Error("Missing body");const d=JT(c.body),m=new YT(o,d,()=>{const p=this.ongoingStreamedRequests.indexOf(m);p>-1&&this.ongoingStreamedRequests.splice(p,1)});return this.ongoingStreamedRequests.push(m),m}return await(await ai(this.fetch,r,a,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){const a=new Uint8Array(e);let r="";const u=a.byteLength;for(let o=0;o<u;o++)r+=String.fromCharCode(a[o]);return btoa(r)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(const a of e.messages)a.images&&(a.images=await Promise.all(a.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await XT(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await ai(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await Lb(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await ai(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await ai(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await ai(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await Lb(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}};new Av;class li extends DT{constructor({concurrency:e,...a}){super(e?{maxConcurrency:e,...a}:a),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}async invoke(e,a){const r=li._convertInputToPromptValue(e);return(await this.generatePrompt([r],a,a==null?void 0:a.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,a,r){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){const[a,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=a.signal,[a,r]}async*_streamIterator(e,a){if(this._streamResponseChunks===li.prototype._streamResponseChunks)yield this.invoke(e,a);else{const r=li._convertInputToPromptValue(e),[u,o]=this._separateRunnableConfigFromCallOptionsCompat(a),c=await It.configure(u.callbacks,this.callbacks,u.tags,this.tags,u.metadata,this.metadata,{verbose:this.verbose}),d={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:1},m=await(c==null?void 0:c.handleLLMStart(this.toJSON(),[r.toString()],u.runId,void 0,d,void 0,void 0,u.runName));let p=new br({text:""});try{for await(const g of this._streamResponseChunks(r.toString(),o,m==null?void 0:m[0]))p?p=p.concat(g):p=g,typeof g.text=="string"&&(yield g.text)}catch(g){throw await Promise.all((m??[]).map(b=>b==null?void 0:b.handleLLMError(g))),g}await Promise.all((m??[]).map(g=>g==null?void 0:g.handleLLMEnd({generations:[[p]]})))}}async generatePrompt(e,a,r){const u=e.map(o=>o.toString());return this.generate(u,a,r)}invocationParams(e){return{}}_flattenLLMResult(e){const a=[];for(let r=0;r<e.generations.length;r+=1){const u=e.generations[r];if(r===0)a.push({generations:[u],llmOutput:e.llmOutput});else{const o=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;a.push({generations:[u],llmOutput:o})}}return a}async _generateUncached(e,a,r,u){let o;if(u!==void 0&&u.length===e.length)o=u;else{const p=await It.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),g={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:e.length};o=await(p==null?void 0:p.handleLLMStart(this.toJSON(),e,r.runId,void 0,g,void 0,void 0,r==null?void 0:r.runName))}const c=!!(o!=null&&o[0].handlers.find(LS));let d;if(c&&e.length===1&&this._streamResponseChunks!==li.prototype._streamResponseChunks)try{const p=await this._streamResponseChunks(e[0],a,o==null?void 0:o[0]);let g;for await(const b of p)g===void 0?g=b:g=jn(g,b);if(g===void 0)throw new Error("Received empty response from chat model call.");d={generations:[[g]],llmOutput:{}},await(o==null?void 0:o[0].handleLLMEnd(d))}catch(p){throw await(o==null?void 0:o[0].handleLLMError(p)),p}else{try{d=await this._generate(e,a,o==null?void 0:o[0])}catch(g){throw await Promise.all((o??[]).map(b=>b==null?void 0:b.handleLLMError(g))),g}const p=this._flattenLLMResult(d);await Promise.all((o??[]).map((g,b)=>g==null?void 0:g.handleLLMEnd(p[b])))}const m=(o==null?void 0:o.map(p=>p.runId))||void 0;return Object.defineProperty(d,Sb,{value:m?{runIds:m}:void 0,configurable:!0}),d}async _generateCached({prompts:e,cache:a,llmStringKey:r,parsedOptions:u,handledOptions:o,runId:c}){const d=await It.configure(o.callbacks,this.callbacks,o.tags,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),m={options:u,invocation_params:this==null?void 0:this.invocationParams(u),batch_size:e.length},p=await(d==null?void 0:d.handleLLMStart(this.toJSON(),e,c,void 0,m,void 0,void 0,o==null?void 0:o.runName)),g=[],v=(await Promise.allSettled(e.map(async(T,C)=>{const M=await a.lookup(T,r);return M==null&&g.push(C),M}))).map((T,C)=>({result:T,runManager:p==null?void 0:p[C]})).filter(({result:T})=>T.status==="fulfilled"&&T.value!=null||T.status==="rejected"),w=[];await Promise.all(v.map(async({result:T,runManager:C},M)=>{if(T.status==="fulfilled"){const B=T.value;return w[M]=B.map(D=>(D.generationInfo={...D.generationInfo,tokenUsage:{}},D)),B.length&&await(C==null?void 0:C.handleLLMNewToken(B[0].text)),C==null?void 0:C.handleLLMEnd({generations:[B]},void 0,void 0,void 0,{cached:!0})}else return await(C==null?void 0:C.handleLLMError(T.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(T.reason)}));const A={generations:w,missingPromptIndices:g,startedRunManagers:p};return Object.defineProperty(A,Sb,{value:p?{runIds:p==null?void 0:p.map(T=>T.runId)}:void 0,configurable:!0}),A}async generate(e,a,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let u;Array.isArray(a)?u={stop:a}:u=a;const[o,c]=this._separateRunnableConfigFromCallOptionsCompat(u);if(o.callbacks=o.callbacks??r,!this.cache)return this._generateUncached(e,c,o);const{cache:d}=this,m=this._getSerializedCacheKeyParametersForCall(c),{generations:p,missingPromptIndices:g,startedRunManagers:b}=await this._generateCached({prompts:e,cache:d,llmStringKey:m,parsedOptions:c,handledOptions:o,runId:o.runId});let v={};if(g.length>0){const w=await this._generateUncached(g.map(A=>e[A]),c,o,b!==void 0?g.map(A=>b==null?void 0:b[A]):void 0);await Promise.all(w.generations.map(async(A,T)=>{const C=g[T];return p[C]=A,d.update(e[C],m,A)})),v=w.llmOutput??{}}return{generations:p,llmOutput:v}}async call(e,a,r){const{generations:u}=await this.generate([e],a,r);return u[0][0].text}async predict(e,a,r){return this.call(e,a,r)}async predictMessages(e,a,r){const u=qd(e),o=await this.call(u,a,r);return new ci(o)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}}class nO extends li{async _generate(e,a,r){return{generations:await Promise.all(e.map((o,c)=>this._call(o,{...a,promptIndex:c},r).then(d=>[{text:d}])))}}}class aO extends nO{static lc_name(){return"Ollama"}constructor(e){var a;super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16KV",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMLock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.baseUrl=(a=e==null?void 0:e.baseUrl)!=null&&a.endsWith("/")?e==null?void 0:e.baseUrl.slice(0,-1):(e==null?void 0:e.baseUrl)??this.baseUrl,this.client=new Av({host:this.baseUrl,headers:e==null?void 0:e.headers}),this.keepAlive=e==null?void 0:e.keepAlive,this.embeddingOnly=e==null?void 0:e.embeddingOnly,this.f16KV=e==null?void 0:e.f16Kv,this.frequencyPenalty=e==null?void 0:e.frequencyPenalty,this.logitsAll=e==null?void 0:e.logitsAll,this.lowVram=e==null?void 0:e.lowVram,this.mainGpu=e==null?void 0:e.mainGpu,this.mirostat=e==null?void 0:e.mirostat,this.mirostatEta=e==null?void 0:e.mirostatEta,this.mirostatTau=e==null?void 0:e.mirostatTau,this.numBatch=e==null?void 0:e.numBatch,this.numCtx=e==null?void 0:e.numCtx,this.numGpu=e==null?void 0:e.numGpu,this.numKeep=e==null?void 0:e.numKeep,this.numPredict=e==null?void 0:e.numPredict,this.numThread=e==null?void 0:e.numThread,this.penalizeNewline=e==null?void 0:e.penalizeNewline,this.presencePenalty=e==null?void 0:e.presencePenalty,this.repeatLastN=e==null?void 0:e.repeatLastN,this.repeatPenalty=e==null?void 0:e.repeatPenalty,this.temperature=e==null?void 0:e.temperature,this.stop=e==null?void 0:e.stop,this.tfsZ=e==null?void 0:e.tfsZ,this.topK=e==null?void 0:e.topK,this.topP=e==null?void 0:e.topP,this.typicalP=e==null?void 0:e.typicalP,this.useMLock=e==null?void 0:e.useMlock,this.useMMap=e==null?void 0:e.useMmap,this.vocabOnly=e==null?void 0:e.vocabOnly,this.format=e==null?void 0:e.format}_llmType(){return"ollama"}invocationParams(e){return{model:this.model,format:this.format,keep_alive:this.keepAlive,images:e==null?void 0:e.images,options:{embedding_only:this.embeddingOnly,f16_kv:this.f16KV,frequency_penalty:this.frequencyPenalty,logits_all:this.logitsAll,low_vram:this.lowVram,main_gpu:this.mainGpu,mirostat:this.mirostat,mirostat_eta:this.mirostatEta,mirostat_tau:this.mirostatTau,num_batch:this.numBatch,num_ctx:this.numCtx,num_gpu:this.numGpu,num_keep:this.numKeep,num_predict:this.numPredict,num_thread:this.numThread,penalize_newline:this.penalizeNewline,presence_penalty:this.presencePenalty,repeat_last_n:this.repeatLastN,repeat_penalty:this.repeatPenalty,temperature:this.temperature,stop:(e==null?void 0:e.stop)??this.stop,tfs_z:this.tfsZ,top_k:this.topK,top_p:this.topP,typical_p:this.typicalP,use_mlock:this.useMLock,use_mmap:this.useMMap,vocab_only:this.vocabOnly}}}async*_streamResponseChunks(e,a,r){var o;const u=await this.caller.call(async()=>this.client.generate({...this.invocationParams(a),prompt:e,stream:!0}));for await(const c of u){if((o=a.signal)!=null&&o.aborted)throw new Error("This operation was aborted");c.done?yield new br({text:"",generationInfo:{model:c.model,total_duration:c.total_duration,load_duration:c.load_duration,prompt_eval_count:c.prompt_eval_count,prompt_eval_duration:c.prompt_eval_duration,eval_count:c.eval_count,eval_duration:c.eval_duration}}):(yield new br({text:c.response,generationInfo:{...c,response:void 0}}),await(r==null?void 0:r.handleLLMNewToken(c.response??"")))}}async _call(e,a,r){const u=[];for await(const o of this._streamResponseChunks(e,a,r))u.push(o.text);return u.join("")}}class rO extends Da{addUserMessage(e){return this.addMessage(new Vs(e))}addAIChatMessage(e){return this.addMessage(new ci(e))}addAIMessage(e){return this.addMessage(new ci(e))}async addMessages(e){for(const a of e)await this.addMessage(a)}clear(){throw new Error("Not implemented.")}}class iO extends rO{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}}const sO=new aO({model:"llama3.2"}),Cd=new iO,uO=async({input_message:s})=>{await Cd.addMessage(new Vs(s));const e=await Cd.getMessages(),a=await sO.invoke(e);return await Cd.addMessage(new ci(a)),a},lO="/assets/tick-JVtJza_6.png",oO=()=>G.createElement("div",{className:"AiSettings"},G.createElement("div",{className:"inputContainer"},G.createElement("input",{placeholder:"Server IP"}),G.createElement("div",{className:"ipSubmitButton"},G.createElement("img",{src:lO,alt:""})))),cO=()=>{const[s,e]=Ct.useState([]),[a,r]=Ct.useState("chat"),u=(o,c)=>{o.trim()!==""&&e(d=>[...d,{text:o,sender:c}])};return G.createElement("div",{className:"Chatbot"},G.createElement("div",{className:"titleBar"},G.createElement("div",{className:"settingsButton",onClick:()=>r(a==="settings"?"chat":"settings")}," "),G.createElement("h2",null,"Ollama AI in ReactJS")),a==="settings"&&G.createElement(oO,null),a==="help"&&G.createElement(mO,null),a==="chat"&&G.createElement(G.Fragment,null,G.createElement(fO,{messages:s}),G.createElement(dO,{addMessage:u})))},fO=({messages:s})=>G.createElement("div",{className:"chatBody"},G.createElement("div",{className:"responseBox"},s.map((e,a)=>G.createElement(hO,{key:a,message:e})))),dO=({addMessage:s})=>{const[e,a]=Ct.useState(""),r=()=>{e.trim()!==""&&(s(e,"user"),a(""),uO({input_message:e}).then(u=>{s(u,"ai")}).catch(u=>console.error("Error generating reply:",u)))};return G.createElement("div",{className:"userInput"},G.createElement("input",{placeholder:"Enter Your Prompt",value:e,onChange:u=>a(u.target.value),onKeyDown:u=>u.key==="Enter"&&r()}),G.createElement("div",{className:"submitButton",onClick:r},G.createElement("h3",null,"Enter")))},hO=({message:s})=>G.createElement("div",{className:`Message ${s.sender}`},G.createElement("p",null,s.text)),mO=()=>G.createElement("div",{className:"helpMenu"},G.createElement("h3",null,"Help & FAQs"),G.createElement("p",null,"Here you can find help and frequently asked questions.")),pO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEUAAACAgID//wDAwMAAAAAA//8A/wD///8AgACE6PTJAAAAAXRSTlMAQObYZgAAAAFiS0dEBxZhiOsAAAAHdElNRQfiBBMBIhnib8pPAAABdUlEQVQ4y3WUTW6DMBBGQcoBOjIk6xKpe3eS0GWQuEBLfYCK4n3EIgfopseu58fBxcm3Aj89z3iMKIokEPJUZCmhafZ46LP12hFAuyLl1glYE/ARoD2ngvdTBFglYEvgQ0GilCfv/Q3MiwKYgLZdlHoIyqRgni8RlM4hV9+z0JpqAaQICII9KDCOFQYkGNC9DLIyESDB2htAUqZnMCwYI6CkXoLyVfWdYcFWC0CH1bnYdCyYFBwHeutY0LYEyIg2JjMi4Gc1rCQHosMjg6fdYWbsWm4X00sEFuYLHVBAHAkLLVqohwXQ98fCjK/N6G6d0yGsCIgBDLE2bapCMPzRaW05tQpIYJCddlcKsBCMlzFcDB4ISDERkMFA81eAhgQywl7OdguwRg0Cn7AABDEaP7r3TgBo2CDQg4Cq59CU2AjrAqTh6/UCZHz3gJDWoDmwGPAahOFKKQUnP+L/KHj7/bkP8jwGdON3QbzYdfgT2fR50j9Dlj/uX7Pd5lE/IwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNC0xOVQwMTozNDoyNS0wNDowMHQ28t4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDQtMTlUMDE6MzQ6MjUtMDQ6MDAFa0piAAAAAElFTkSuQmCC",gO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAHlBMVEUAAAB/f3/AwMD///8AAAAAgIAAAIAAAP8A/wAAgABTa5L5AAAAAXRSTlMAQObYZgAAAAFiS0dEAxEMTPIAAAAHdElNRQfiBBMBJCt84jxJAAAA8ElEQVQ4y62U0Q2CMBBAS+ICBzeAqB/6WTD6SwUGMJENjBOYsIIruK2FK9iWq8HoSz9IX6537bUI0ROBgxiJVzayGOYjZ34No0hyGzmKKHMi0lniXVHiimrEE3Uz8AfRrV9z4qZhRbd7Xhx0yJUTx7Zt75yQeq09V5UKiOb8tbh0W5x/JMF+WC3XQsGSbS1CXLBCQVpw91AHmCxYOegAEuATQy+i3Eca4abub9yvIjW5J2JjyrXE9hFYavecmxxFQBR0hCVKGif6UEgvc5guMaUPpADpB0AowKSWCsEZVKv39jsyZP4ifbHU1kU1QXzkBXbdlY4knE+xAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA0LTE5VDAxOjM2OjQzLTA0OjAw1XweXgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNC0xOVQwMTozNjo0My0wNDowMKQhpuIAAAAASUVORK5CYII=",yO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEUAAACAgID///8AAADAwMCAgAD//wDIuPtlAAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAHdElNRQfiBhoANCCn+IFNAAABIUlEQVQ4y73SS3KEIBAGYKzJHAD0AoK4NoUeQCRcYMB9GOf+Vwj44iFu0wvL4qtfmkYAbBUwLOCrwEHV3R2UdzB2N9CUN4B9JAEfScBHUjgjKZwRB5QdwGwFoHpkn3DDxgOd+Hiuh6AmXPNjPQAq7WKFr6BMnwUqGwd879aDMssOEIXwlC2x36l5HbX71LMxG6BoDyVmjFcQ0eZP/LGv5BtdgTpAZSZhjHlnoKVta7tysP5X6IDmsyzLu8okfqSUE7zClmB9CkDr2SWqCzzYYBOQW4hPDsQ0y2k9eTwr8DUO6tdNV6TTLYhWOyT3gQd9XFRytUTDPODh5SaSAfLio+CZ/woP/drUFQgT58EjwELwPDQ+EENY/woirR0eLK0O/AHxOomaeb43LQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNi0yNlQwMDo1MjozMi0wNDowMOzClQAAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDYtMjZUMDA6NTI6MzItMDQ6MDCdny28AAAAAElFTkSuQmCC",bO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfiBhoAKix6D/K5AAABr0lEQVRYw9VWwZGDMAyUPBRGBbSTGmhHFdCZ7mEMtpGsBe4yc5tHEiztWlpbCVMMNZ8ykAmEKdFmLsygzPSEPGMjolkjieTTb0P6Q0THESnkeCnxWGArLgR4XUGECQnC9mrDPwNVZz9mwIqwjCr4UIQSsQ4O65978FWTu/O8XoLjpl1x9k63MHjGmJ4LQOKdUP1ViQiYP/eEroXtTvyCENsCjcwL7MzQqLhLWiO4B7cKMbthC2j98V23LAEtpD41LpsQCnUi4gbBs0jNb0gV8CnyqmBSGv0guBWA/6tCWAI8Jr8nPbjJCiVpeeIwTS7HwME7N+P//2R6Au+n6Q7bAxXybGi9LBYLLYoOO830RGJmaPM6Ic6A6jl28oIF6hWTHPE9Z3ekpUtdKLaDqd9UzVr9qxAzPZZgc1uFOZXGiktgu8fdew3JjhzrKruqV0OW0IZej3cmv3ZirvfuiSzuSFazRTknb5tF+wVLZDmHGkBfc1wumhzq7VOGL3ebnaKAu+izUxRQ19AabTdIsrmewGj319Fh29tKNAJxc9j57Eskb8FORHEyJW8Bo/Fw9uIHOR2I4H61TfIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjZUMDA6NDI6NDQtMDQ6MDBEWXbjAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI2VDAwOjQyOjQ0LTA0OjAwNQTOXwAAAABJRU5ErkJggg==";function vO(){const[s,e]=Ct.useState(!1),[a,r]=Ct.useState(!1),[u,o]=Ct.useState(!1),[c,d]=Ct.useState(!1),[m,p]=Ct.useState("https://api.github.com/repos/amberleafhash/toonStorage/contents/"),g=[{id:1,name:"Settings",icon:gO,onClick:()=>b()},{id:2,name:"Music Player",icon:pO,onClick:()=>w()},{id:3,name:"Equalizer",icon:yO,onClick:()=>T()},{id:4,name:"Assistant",icon:bO,onClick:()=>M()}],b=()=>r(!0),v=()=>r(!1),w=()=>e(!0),A=()=>e(!1),T=()=>o(!0),C=()=>o(!1),M=()=>d(!0),B=()=>d(!1),D=ne=>{p(ne),v()};return G.createElement("div",{className:"App"},s&&G.createElement(dl,{title:"Music Player",width:750,height:800,onClose:A},G.createElement(Sw,{repoUrl:m})," "),a&&G.createElement(dl,{title:"Settings",width:350,height:100,onClose:v},G.createElement(Tw,{onSubmitRepo:D})," "),u&&G.createElement(dl,{title:"Equalizer",width:800,height:800,onClose:C},G.createElement("h2",null,"Work in progress lad")),c&&G.createElement(dl,{title:"Assistant",width:800,height:800,onClose:B},G.createElement(cO,null)),G.createElement(ow,{icons:g}),G.createElement(rw,{icons:g}))}tw.createRoot(document.querySelector("#main")).render(G.createElement(G.StrictMode,null," ",G.createElement(vO,null)));
