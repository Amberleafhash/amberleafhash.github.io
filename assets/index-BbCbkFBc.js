var Jh=Object.defineProperty;var Wh=(s,e,a)=>e in s?Jh(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var $a=(s,e,a)=>Wh(s,typeof e!="symbol"?e+"":e,a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=a(l);fetch(l.href,u)}})();function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.iterator;function A(C){return C===null||typeof C!="object"?null:(C=v&&C[v]||C["@@iterator"],typeof C=="function"?C:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function O(C,U,G){this.props=C,this.context=U,this.refs=T,this.updater=G||E}O.prototype.isReactComponent={},O.prototype.setState=function(C,U){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,U,"setState")},O.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function N(){}N.prototype=O.prototype;function P(C,U,G){this.props=C,this.context=U,this.refs=T,this.updater=G||E}var k=P.prototype=new N;k.constructor=P,S(k,O.prototype),k.isPureReactComponent=!0;var ae=Array.isArray,Z={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function te(C,U,G,W,J,se){return G=se.ref,{$$typeof:s,type:C,key:U,ref:G!==void 0?G:null,props:se}}function Q(C,U){return te(C.type,U,void 0,void 0,void 0,C.props)}function ne(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function ue(C){var U={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(G){return U[G]})}var me=/\/+/g;function Oe(C,U){return typeof C=="object"&&C!==null&&C.key!=null?ue(""+C.key):U.toString(36)}function Te(){}function ee(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Te,Te):(C.status="pending",C.then(function(U){C.status==="pending"&&(C.status="fulfilled",C.value=U)},function(U){C.status==="pending"&&(C.status="rejected",C.reason=U)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function K(C,U,G,W,J){var se=typeof C;(se==="undefined"||se==="boolean")&&(C=null);var oe=!1;if(C===null)oe=!0;else switch(se){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(C.$$typeof){case s:case e:oe=!0;break;case b:return oe=C._init,K(oe(C._payload),U,G,W,J)}}if(oe)return J=J(C),oe=W===""?"."+Oe(C,0):W,ae(J)?(G="",oe!=null&&(G=oe.replace(me,"$&/")+"/"),K(J,U,G,"",function(Re){return Re})):J!=null&&(ne(J)&&(J=Q(J,G+(J.key==null||C&&C.key===J.key?"":(""+J.key).replace(me,"$&/")+"/")+oe)),U.push(J)),1;oe=0;var Ne=W===""?".":W+":";if(ae(C))for(var be=0;be<C.length;be++)W=C[be],se=Ne+Oe(W,be),oe+=K(W,U,G,se,J);else if(be=A(C),typeof be=="function")for(C=be.call(C),be=0;!(W=C.next()).done;)W=W.value,se=Ne+Oe(W,be++),oe+=K(W,U,G,se,J);else if(se==="object"){if(typeof C.then=="function")return K(ee(C),U,G,W,J);throw U=String(C),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return oe}function j(C,U,G){if(C==null)return C;var W=[],J=0;return K(C,W,"","",function(se){return U.call(G,se,J++)}),W}function $(C){if(C._status===-1){var U=C._result;U=U(),U.then(function(G){(C._status===0||C._status===-1)&&(C._status=1,C._result=G)},function(G){(C._status===0||C._status===-1)&&(C._status=2,C._result=G)}),C._status===-1&&(C._status=0,C._result=U)}if(C._status===1)return C._result.default;throw C._result}var F=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Y(){}return react_production.Children={map:j,forEach:function(C,U,G){j(C,function(){U.apply(this,arguments)},G)},count:function(C){var U=0;return j(C,function(){U++}),U},toArray:function(C){return j(C,function(U){return U})||[]},only:function(C){if(!ne(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},react_production.Component=O,react_production.Fragment=a,react_production.Profiler=l,react_production.PureComponent=P,react_production.StrictMode=r,react_production.Suspense=p,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,react_production.act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production.cache=function(C){return function(){return C.apply(null,arguments)}},react_production.cloneElement=function(C,U,G){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var W=S({},C.props),J=C.key,se=void 0;if(U!=null)for(oe in U.ref!==void 0&&(se=void 0),U.key!==void 0&&(J=""+U.key),U)!X.call(U,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&U.ref===void 0||(W[oe]=U[oe]);var oe=arguments.length-2;if(oe===1)W.children=G;else if(1<oe){for(var Ne=Array(oe),be=0;be<oe;be++)Ne[be]=arguments[be+2];W.children=Ne}return te(C.type,J,void 0,void 0,se,W)},react_production.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},react_production.createElement=function(C,U,G){var W,J={},se=null;if(U!=null)for(W in U.key!==void 0&&(se=""+U.key),U)X.call(U,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(J[W]=U[W]);var oe=arguments.length-2;if(oe===1)J.children=G;else if(1<oe){for(var Ne=Array(oe),be=0;be<oe;be++)Ne[be]=arguments[be+2];J.children=Ne}if(C&&C.defaultProps)for(W in oe=C.defaultProps,oe)J[W]===void 0&&(J[W]=oe[W]);return te(C,se,void 0,void 0,null,J)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(C){return{$$typeof:h,render:C}},react_production.isValidElement=ne,react_production.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:$}},react_production.memo=function(C,U){return{$$typeof:m,type:C,compare:U===void 0?null:U}},react_production.startTransition=function(C){var U=Z.T,G={};Z.T=G;try{var W=C(),J=Z.S;J!==null&&J(G,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Y,F)}catch(se){F(se)}finally{Z.T=U}},react_production.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},react_production.use=function(C){return Z.H.use(C)},react_production.useActionState=function(C,U,G){return Z.H.useActionState(C,U,G)},react_production.useCallback=function(C,U){return Z.H.useCallback(C,U)},react_production.useContext=function(C){return Z.H.useContext(C)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(C,U){return Z.H.useDeferredValue(C,U)},react_production.useEffect=function(C,U){return Z.H.useEffect(C,U)},react_production.useId=function(){return Z.H.useId()},react_production.useImperativeHandle=function(C,U,G){return Z.H.useImperativeHandle(C,U,G)},react_production.useInsertionEffect=function(C,U){return Z.H.useInsertionEffect(C,U)},react_production.useLayoutEffect=function(C,U){return Z.H.useLayoutEffect(C,U)},react_production.useMemo=function(C,U){return Z.H.useMemo(C,U)},react_production.useOptimistic=function(C,U){return Z.H.useOptimistic(C,U)},react_production.useReducer=function(C,U,G){return Z.H.useReducer(C,U,G)},react_production.useRef=function(C){return Z.H.useRef(C)},react_production.useState=function(C){return Z.H.useState(C)},react_production.useSyncExternalStore=function(C,U,G){return Z.H.useSyncExternalStore(C,U,G)},react_production.useTransition=function(){return Z.H.useTransition()},react_production.version="19.0.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client$1={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(s){function e(j,$){var F=j.length;j.push($);e:for(;0<F;){var Y=F-1>>>1,C=j[Y];if(0<l(C,$))j[Y]=$,j[F]=C,F=Y;else break e}}function a(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],F=j.pop();if(F!==$){j[0]=F;e:for(var Y=0,C=j.length,U=C>>>1;Y<U;){var G=2*(Y+1)-1,W=j[G],J=G+1,se=j[J];if(0>l(W,F))J<C&&0>l(se,W)?(j[Y]=se,j[J]=F,Y=J):(j[Y]=W,j[G]=F,Y=G);else if(J<C&&0>l(se,F))j[Y]=se,j[J]=F,Y=J;else break e}}return $}function l(j,$){var F=j.sortIndex-$.sortIndex;return F!==0?F:j.id-$.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();s.unstable_now=function(){return d.now()-h}}var p=[],m=[],b=1,v=null,A=3,E=!1,S=!1,T=!1,O=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function k(j){for(var $=a(m);$!==null;){if($.callback===null)r(m);else if($.startTime<=j)r(m),$.sortIndex=$.expirationTime,e(p,$);else break;$=a(m)}}function ae(j){if(T=!1,k(j),!S)if(a(p)!==null)S=!0,ee();else{var $=a(m);$!==null&&K(ae,$.startTime-j)}}var Z=!1,X=-1,te=5,Q=-1;function ne(){return!(s.unstable_now()-Q<te)}function ue(){if(Z){var j=s.unstable_now();Q=j;var $=!0;try{e:{S=!1,T&&(T=!1,N(X),X=-1),E=!0;var F=A;try{t:{for(k(j),v=a(p);v!==null&&!(v.expirationTime>j&&ne());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,A=v.priorityLevel;var C=Y(v.expirationTime<=j);if(j=s.unstable_now(),typeof C=="function"){v.callback=C,k(j),$=!0;break t}v===a(p)&&r(p),k(j)}else r(p);v=a(p)}if(v!==null)$=!0;else{var U=a(m);U!==null&&K(ae,U.startTime-j),$=!1}}break e}finally{v=null,A=F,E=!1}$=void 0}}finally{$?me():Z=!1}}}var me;if(typeof P=="function")me=function(){P(ue)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Te=Oe.port2;Oe.port1.onmessage=ue,me=function(){Te.postMessage(null)}}else me=function(){O(ue,0)};function ee(){Z||(Z=!0,me())}function K(j,$){X=O(function(){j(s.unstable_now())},$)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(j){j.callback=null},s.unstable_continueExecution=function(){S||E||(S=!0,ee())},s.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<j?Math.floor(1e3/j):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_getFirstCallbackNode=function(){return a(p)},s.unstable_next=function(j){switch(A){case 1:case 2:case 3:var $=3;break;default:$=A}var F=A;A=$;try{return j()}finally{A=F}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var F=A;A=j;try{return $()}finally{A=F}},s.unstable_scheduleCallback=function(j,$,F){var Y=s.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,j){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=F+C,j={id:b++,callback:$,priorityLevel:j,startTime:F,expirationTime:C,sortIndex:-1},F>Y?(j.sortIndex=F,e(m,j),a(p)===null&&j===a(m)&&(T?(N(X),X=-1):T=!0,K(ae,F-Y))):(j.sortIndex=C,e(p,j),S||E||(S=!0,ee())),j},s.unstable_shouldYield=ne,s.unstable_wrapCallback=function(j){var $=A;return function(){var F=A;A=$;try{return j.apply(this,arguments)}finally{A=F}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var s=requireReact();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,m,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:p,containerInfo:m,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,reactDom_production.createPortal=function(p,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(p,m,null,b)},reactDom_production.flushSync=function(p){var m=d.T,b=r.p;try{if(d.T=null,r.p=2,p)return p()}finally{d.T=m,r.p=b,r.d.f()}},reactDom_production.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(p,m))},reactDom_production.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},reactDom_production.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var b=m.as,v=h(b,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;b==="style"?r.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:A,fetchPriority:E}):b==="script"&&r.d.X(p,{crossOrigin:v,integrity:A,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},reactDom_production.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var b=h(m.as,m.crossOrigin);r.d.M(p,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(p)},reactDom_production.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var b=m.as,v=h(b,m.crossOrigin);r.d.L(p,b,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},reactDom_production.preloadModule=function(p,m){if(typeof p=="string")if(m){var b=h(m.as,m.crossOrigin);r.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(p)},reactDom_production.requestFormReset=function(p){r.d.r(p)},reactDom_production.unstable_batchedUpdates=function(p,m){return p(m)},reactDom_production.useFormState=function(p,m,b){return d.H.useFormState(p,m,b)},reactDom_production.useFormStatus=function(){return d.H.useHostTransitionStatus()},reactDom_production.version="19.0.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var s=requireScheduler(),e=requireReact(),a=requireReactDom();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var u=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),E=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),ae=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function X(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var te=Symbol.for("react.client.reference");function Q(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===te?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case p:return"Fragment";case h:return"Portal";case b:return"Profiler";case m:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case E:return(t.displayName||"Context")+".Provider";case A:return(t._context.displayName||"Context")+".Consumer";case S:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:Q(t.type)||"Memo";case P:n=t._payload,t=t._init;try{return Q(t(n))}catch{}}return null}var ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=Object.assign,me,Oe;function Te(t){if(me===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);me=n&&n[1]||"",Oe=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+t+Oe}var ee=!1;function K(t,n){if(!t||ee)return"";ee=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(B){var L=B}Reflect.construct(t,[],V)}else{try{V.call()}catch(B){L=B}t.call(V.prototype)}}else{try{throw Error()}catch(B){L=B}(V=t())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(B){if(B&&L&&typeof B.stack=="string")return[B.stack,L.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),_=y[0],w=y[1];if(_&&w){var R=_.split(`
`),D=w.split(`
`);for(f=c=0;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;for(;f<D.length&&!D[f].includes("DetermineComponentFrameRoot");)f++;if(c===R.length||f===D.length)for(c=R.length-1,f=D.length-1;1<=c&&0<=f&&R[c]!==D[f];)f--;for(;1<=c&&0<=f;c--,f--)if(R[c]!==D[f]){if(c!==1||f!==1)do if(c--,f--,0>f||R[c]!==D[f]){var q=`
`+R[c].replace(" at new "," at ");return t.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",t.displayName)),q}while(1<=c&&0<=f);break}}}finally{ee=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?Te(o):""}function j(t){switch(t.tag){case 26:case 27:case 5:return Te(t.type);case 16:return Te("Lazy");case 13:return Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return t=K(t.type,!1),t;case 11:return t=K(t.type.render,!1),t;case 1:return t=K(t.type,!0),t;default:return""}}function $(t){try{var n="";do n+=j(t),t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function F(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function Y(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function C(t){if(F(t)!==t)throw Error(r(188))}function U(t){var n=t.alternate;if(!n){if(n=F(t),n===null)throw Error(r(188));return n!==t?null:t}for(var o=t,c=n;;){var f=o.return;if(f===null)break;var y=f.alternate;if(y===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===o)return C(f),t;if(y===c)return C(f),n;y=y.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=y;else{for(var _=!1,w=f.child;w;){if(w===o){_=!0,o=f,c=y;break}if(w===c){_=!0,c=f,o=y;break}w=w.sibling}if(!_){for(w=y.child;w;){if(w===o){_=!0,o=y,c=f;break}if(w===c){_=!0,c=y,o=f;break}w=w.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?t:n}function G(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=G(t),n!==null)return n;t=t.sibling}return null}var W=Array.isArray,J=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},oe=[],Ne=-1;function be(t){return{current:t}}function Re(t){0>Ne||(t.current=oe[Ne],oe[Ne]=null,Ne--)}function he(t,n){Ne++,oe[Ne]=t.current,t.current=n}var tt=be(null),pt=be(null),Zt=be(null),St=be(null);function ta(t,n){switch(he(Zt,n),he(pt,t),he(tt,null),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)&&(n=n.namespaceURI)?yd(n):0;break;default:if(t=t===8?n.parentNode:n,n=t.tagName,t=t.namespaceURI)t=yd(t),n=bd(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Re(tt),he(tt,n)}function mt(){Re(tt),Re(pt),Re(Zt)}function yn(t){t.memoizedState!==null&&he(St,t);var n=tt.current,o=bd(n,t.type);n!==o&&(he(pt,t),he(tt,o))}function Fa(t){pt.current===t&&(Re(tt),Re(pt)),St.current===t&&(Re(St),Fr._currentValue=se)}var Va=Object.prototype.hasOwnProperty,Tt=s.unstable_scheduleCallback,_a=s.unstable_cancelCallback,bn=s.unstable_shouldYield,Yr=s.unstable_requestPaint,gt=s.unstable_now,os=s.unstable_getCurrentPriorityLevel,Xr=s.unstable_ImmediatePriority,aa=s.unstable_UserBlockingPriority,Bt=s.unstable_NormalPriority,Ga=s.unstable_LowPriority,tr=s.unstable_IdlePriority,Vt=s.log,Jr=s.unstable_setDisableYieldValue,Ka=null,rt=null;function ar(t){if(rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Ka,t,void 0,(t.current.flags&128)===128)}catch{}}function qt(t){if(typeof Vt=="function"&&Jr(t),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Ka,t)}catch{}}var it=Math.clz32?Math.clz32:us,Wr=Math.log,ls=Math.LN2;function us(t){return t>>>=0,t===0?32:31-(Wr(t)/ls|0)|0}var vn=128,Ue=4194304;function Ze(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ge(t,n){var o=t.pendingLanes;if(o===0)return 0;var c=0,f=t.suspendedLanes,y=t.pingedLanes,_=t.warmLanes;t=t.finishedLanes!==0;var w=o&134217727;return w!==0?(o=w&~f,o!==0?c=Ze(o):(y&=w,y!==0?c=Ze(y):t||(_=w&~_,_!==0&&(c=Ze(_))))):(w=o&~f,w!==0?c=Ze(w):y!==0?c=Ze(y):t||(_=o&~_,_!==0&&(c=Ze(_)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,_=n&-n,f>=_||f===32&&(_&4194176)!==0)?n:c}function lt(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ut(t,n){switch(t){case 1:case 2:case 4:case 8:return n+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function at(){var t=vn;return vn<<=1,(vn&4194176)===0&&(vn=128),t}function yt(){var t=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),t}function Gt(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function Ie(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Kt(t,n,o,c,f,y){var _=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var w=t.entanglements,R=t.expirationTimes,D=t.hiddenUpdates;for(o=_&~o;0<o;){var q=31-it(o),V=1<<q;w[q]=0,R[q]=-1;var L=D[q];if(L!==null)for(D[q]=null,q=0;q<L.length;q++){var B=L[q];B!==null&&(B.lane&=-536870913)}o&=~V}c!==0&&bt(t,c,0),y!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=y&~(_&~n))}function bt(t,n,o){t.pendingLanes|=n,t.suspendedLanes&=~n;var c=31-it(n);t.entangledLanes|=n,t.entanglements[c]=t.entanglements[c]|1073741824|o&4194218}function Rt(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var c=31-it(o),f=1<<c;f&n|t[c]&n&&(t[c]|=n),o&=~f}}function Aa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ea(){var t=J.p;return t!==0?t:(t=window.event,t===void 0?32:Pd(t.type))}function Qt(t,n){var o=J.p;try{return J.p=t,n()}finally{J.p=o}}var ct=Math.random().toString(36).slice(2),qe="__reactFiber$"+ct,dt="__reactProps$"+ct,_n="__reactContainer$"+ct,cs="__reactEvents$"+ct,zd="__reactListeners$"+ct,Hd="__reactHandles$"+ct,ml="__reactResources$"+ct,nr="__reactMarker$"+ct;function ds(t){delete t[qe],delete t[dt],delete t[cs],delete t[zd],delete t[Hd]}function Qa(t){var n=t[qe];if(n)return n;for(var o=t.parentNode;o;){if(n=o[_n]||o[qe]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=Ad(t);t!==null;){if(o=t[qe])return o;t=Ad(t)}return n}t=o,o=t.parentNode}return null}function An(t){if(t=t[qe]||t[_n]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function rr(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function En(t){var n=t[ml];return n||(n=t[ml]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ke(t){t[nr]=!0}var gl=new Set,yl={};function Ya(t,n){wn(t,n),wn(t+"Capture",n)}function wn(t,n){for(yl[t]=n,t=0;t<n.length;t++)gl.add(n[t])}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$d=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bl={},vl={};function Fd(t){return Va.call(vl,t)?!0:Va.call(bl,t)?!1:$d.test(t)?vl[t]=!0:(bl[t]=!0,!1)}function ei(t,n,o){if(Fd(n))if(o===null)t.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+o)}}function ti(t,n,o){if(o===null)t.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+o)}}function ra(t,n,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(n,o,""+c)}}function Ct(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _l(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Vd(t){var n=_l(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),c=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,y=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return f.call(this)},set:function(_){c=""+_,y.call(this,_)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ai(t){t._valueTracker||(t._valueTracker=Vd(t))}function Al(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),c="";return t&&(c=_l(t)?t.checked?"true":"false":t.value),t=c,t!==o?(n.setValue(t),!0):!1}function ni(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Gd=/[\n"\\]/g;function Ot(t){return t.replace(Gd,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function fs(t,n,o,c,f,y,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ct(n)):t.value!==""+Ct(n)&&(t.value=""+Ct(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?hs(t,_,Ct(n)):o!=null?hs(t,_,Ct(o)):c!=null&&t.removeAttribute("value"),f==null&&y!=null&&(t.defaultChecked=!!y),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Ct(w):t.removeAttribute("name")}function El(t,n,o,c,f,y,_,w){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),n!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||n!=null))return;o=o!=null?""+Ct(o):"",n=n!=null?""+Ct(n):o,w||n===t.value||(t.value=n),t.defaultValue=n}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=w?t.checked:!!c,t.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function hs(t,n,o){n==="number"&&ni(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function Sn(t,n,o,c){if(t=t.options,n){n={};for(var f=0;f<o.length;f++)n["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=n.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Ct(o),n=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}n!==null||t[f].disabled||(n=t[f])}n!==null&&(n.selected=!0)}}function wl(t,n,o){if(n!=null&&(n=""+Ct(n),n!==t.value&&(t.value=n),o==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=o!=null?""+Ct(o):""}function Sl(t,n,o,c){if(n==null){if(c!=null){if(o!=null)throw Error(r(92));if(W(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),n=o}o=Ct(n),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c)}function Tn(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var Kd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tl(t,n,o){var c=n.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":c?t.setProperty(n,o):typeof o!="number"||o===0||Kd.has(n)?n==="float"?t.cssFloat=o:t[n]=(""+o).trim():t[n]=o+"px"}function Rl(t,n,o){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in n)c=n[f],n.hasOwnProperty(f)&&o[f]!==c&&Tl(t,f,c)}else for(var y in n)n.hasOwnProperty(y)&&Tl(t,y,n[y])}function ps(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ri(t){return Yd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ms=null;function gs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rn=null,Cn=null;function Cl(t){var n=An(t);if(n&&(t=n.stateNode)){var o=t[dt]||null;e:switch(t=n.stateNode,n.type){case"input":if(fs(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ot(""+n)+'"][type="radio"]'),n=0;n<o.length;n++){var c=o[n];if(c!==t&&c.form===t.form){var f=c[dt]||null;if(!f)throw Error(r(90));fs(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<o.length;n++)c=o[n],c.form===t.form&&Al(c)}break e;case"textarea":wl(t,o.value,o.defaultValue);break e;case"select":n=o.value,n!=null&&Sn(t,!!o.multiple,n,!1)}}}var ys=!1;function Ol(t,n,o){if(ys)return t(n,o);ys=!0;try{var c=t(n);return c}finally{if(ys=!1,(Rn!==null||Cn!==null)&&(qi(),Rn&&(n=Rn,t=Cn,Cn=Rn=null,Cl(n),t)))for(n=0;n<t.length;n++)Cl(t[n])}}function ir(t,n){var o=t.stateNode;if(o===null)return null;var c=o[dt]||null;if(c===null)return null;o=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(r(231,n,typeof o));return o}var bs=!1;if(na)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){bs=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{bs=!1}var wa=null,vs=null,ii=null;function xl(){if(ii)return ii;var t,n=vs,o=n.length,c,f="value"in wa?wa.value:wa.textContent,y=f.length;for(t=0;t<o&&n[t]===f[t];t++);var _=o-t;for(c=1;c<=_&&n[o-c]===f[y-c];c++);return ii=f.slice(t,1<c?1-c:void 0)}function si(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function oi(){return!0}function Dl(){return!1}function ft(t){function n(o,c,f,y,_){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(o=t[w],this[w]=o?o(y):y[w]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?oi:Dl,this.isPropagationStopped=Dl,this}return ue(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),n}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},li=ft(Xa),or=ue({},Xa,{view:0,detail:0}),Xd=ft(or),_s,As,lr,ui=ue({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lr&&(lr&&t.type==="mousemove"?(_s=t.screenX-lr.screenX,As=t.screenY-lr.screenY):As=_s=0,lr=t),_s)},movementY:function(t){return"movementY"in t?t.movementY:As}}),Nl=ft(ui),Jd=ue({},ui,{dataTransfer:0}),Wd=ft(Jd),ef=ue({},or,{relatedTarget:0}),Es=ft(ef),tf=ue({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),af=ft(tf),nf=ue({},Xa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rf=ft(nf),sf=ue({},Xa,{data:0}),Il=ft(sf),of={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cf(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=uf[t])?!!n[t]:!1}function ws(){return cf}var df=ue({},or,{key:function(t){if(t.key){var n=of[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=si(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(t){return t.type==="keypress"?si(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?si(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ff=ft(df),hf=ue({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ml=ft(hf),pf=ue({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),mf=ft(pf),gf=ue({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),yf=ft(gf),bf=ue({},ui,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vf=ft(bf),_f=ue({},Xa,{newState:0,oldState:0}),Af=ft(_f),Ef=[9,13,27,32],Ss=na&&"CompositionEvent"in window,ur=null;na&&"documentMode"in document&&(ur=document.documentMode);var wf=na&&"TextEvent"in window&&!ur,kl=na&&(!Ss||ur&&8<ur&&11>=ur),Ll=" ",Pl=!1;function jl(t,n){switch(t){case"keyup":return Ef.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ul(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var On=!1;function Sf(t,n){switch(t){case"compositionend":return Ul(n);case"keypress":return n.which!==32?null:(Pl=!0,Ll);case"textInput":return t=n.data,t===Ll&&Pl?null:t;default:return null}}function Tf(t,n){if(On)return t==="compositionend"||!Ss&&jl(t,n)?(t=xl(),ii=vs=wa=null,On=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return kl&&n.locale!=="ko"?null:n.data;default:return null}}var Rf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zl(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Rf[t.type]:n==="textarea"}function Bl(t,n,o,c){Rn?Cn?Cn.push(c):Cn=[c]:Rn=c,n=Vi(n,"onChange"),0<n.length&&(o=new li("onChange","change",null,o,c),t.push({event:o,listeners:n}))}var cr=null,dr=null;function Cf(t){fd(t,0)}function ci(t){var n=rr(t);if(Al(n))return t}function ql(t,n){if(t==="change")return n}var zl=!1;if(na){var Ts;if(na){var Rs="oninput"in document;if(!Rs){var Hl=document.createElement("div");Hl.setAttribute("oninput","return;"),Rs=typeof Hl.oninput=="function"}Ts=Rs}else Ts=!1;zl=Ts&&(!document.documentMode||9<document.documentMode)}function $l(){cr&&(cr.detachEvent("onpropertychange",Fl),dr=cr=null)}function Fl(t){if(t.propertyName==="value"&&ci(dr)){var n=[];Bl(n,dr,t,gs(t)),Ol(Cf,n)}}function Of(t,n,o){t==="focusin"?($l(),cr=n,dr=o,cr.attachEvent("onpropertychange",Fl)):t==="focusout"&&$l()}function xf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ci(dr)}function Df(t,n){if(t==="click")return ci(n)}function Nf(t,n){if(t==="input"||t==="change")return ci(n)}function If(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var vt=typeof Object.is=="function"?Object.is:If;function fr(t,n){if(vt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),c=Object.keys(n);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Va.call(n,f)||!vt(t[f],n[f]))return!1}return!0}function Vl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gl(t,n){var o=Vl(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=n&&c>=n)return{node:o,offset:n-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Vl(o)}}function Kl(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Kl(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Ql(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=ni(t.document);n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=ni(t.document)}return n}function Cs(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function Mf(t,n){var o=Ql(n);n=t.focusedElem;var c=t.selectionRange;if(o!==n&&n&&n.ownerDocument&&Kl(n.ownerDocument.documentElement,n)){if(c!==null&&Cs(n)){if(t=c.start,o=c.end,o===void 0&&(o=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(o,n.value.length);else if(o=(t=n.ownerDocument||document)&&t.defaultView||window,o.getSelection){o=o.getSelection();var f=n.textContent.length,y=Math.min(c.start,f);c=c.end===void 0?y:Math.min(c.end,f),!o.extend&&y>c&&(f=c,c=y,y=f),f=Gl(n,y);var _=Gl(n,c);f&&_&&(o.rangeCount!==1||o.anchorNode!==f.node||o.anchorOffset!==f.offset||o.focusNode!==_.node||o.focusOffset!==_.offset)&&(t=t.createRange(),t.setStart(f.node,f.offset),o.removeAllRanges(),y>c?(o.addRange(t),o.extend(_.node,_.offset)):(t.setEnd(_.node,_.offset),o.addRange(t)))}}for(t=[],o=n;o=o.parentNode;)o.nodeType===1&&t.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)o=t[n],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var kf=na&&"documentMode"in document&&11>=document.documentMode,xn=null,Os=null,hr=null,xs=!1;function Yl(t,n,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xs||xn==null||xn!==ni(c)||(c=xn,"selectionStart"in c&&Cs(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),hr&&fr(hr,c)||(hr=c,c=Vi(Os,"onSelect"),0<c.length&&(n=new li("onSelect","select",null,n,o),t.push({event:n,listeners:c}),n.target=xn)))}function Ja(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var Dn={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionrun:Ja("Transition","TransitionRun"),transitionstart:Ja("Transition","TransitionStart"),transitioncancel:Ja("Transition","TransitionCancel"),transitionend:Ja("Transition","TransitionEnd")},Ds={},Xl={};na&&(Xl=document.createElement("div").style,"AnimationEvent"in window||(delete Dn.animationend.animation,delete Dn.animationiteration.animation,delete Dn.animationstart.animation),"TransitionEvent"in window||delete Dn.transitionend.transition);function Wa(t){if(Ds[t])return Ds[t];if(!Dn[t])return t;var n=Dn[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in Xl)return Ds[t]=n[o];return t}var Jl=Wa("animationend"),Wl=Wa("animationiteration"),eu=Wa("animationstart"),Lf=Wa("transitionrun"),Pf=Wa("transitionstart"),jf=Wa("transitioncancel"),tu=Wa("transitionend"),au=new Map,nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function zt(t,n){au.set(t,n),Ya(n,[t])}var xt=[],Nn=0,Ns=0;function di(){for(var t=Nn,n=Ns=Nn=0;n<t;){var o=xt[n];xt[n++]=null;var c=xt[n];xt[n++]=null;var f=xt[n];xt[n++]=null;var y=xt[n];if(xt[n++]=null,c!==null&&f!==null){var _=c.pending;_===null?f.next=f:(f.next=_.next,_.next=f),c.pending=f}y!==0&&ru(o,f,y)}}function fi(t,n,o,c){xt[Nn++]=t,xt[Nn++]=n,xt[Nn++]=o,xt[Nn++]=c,Ns|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function Is(t,n,o,c){return fi(t,n,o,c),hi(t)}function Sa(t,n){return fi(t,null,null,n),hi(t)}function ru(t,n,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,y=t.return;y!==null;)y.childLanes|=o,c=y.alternate,c!==null&&(c.childLanes|=o),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(f=!0)),t=y,y=y.return;f&&n!==null&&t.tag===3&&(y=t.stateNode,f=31-it(o),y=y.hiddenUpdates,t=y[f],t===null?y[f]=[n]:t.push(n),n.lane=o|536870912)}function hi(t){if(50<Ur)throw Ur=0,Zo=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var In={},iu=new WeakMap;function Dt(t,n){if(typeof t=="object"&&t!==null){var o=iu.get(t);return o!==void 0?o:(n={value:t,source:n,stack:$(n)},iu.set(t,n),n)}return{value:t,source:n,stack:$(n)}}var Mn=[],kn=0,pi=null,mi=0,Nt=[],It=0,en=null,ia=1,sa="";function tn(t,n){Mn[kn++]=mi,Mn[kn++]=pi,pi=t,mi=n}function su(t,n,o){Nt[It++]=ia,Nt[It++]=sa,Nt[It++]=en,en=t;var c=ia;t=sa;var f=32-it(c)-1;c&=~(1<<f),o+=1;var y=32-it(n)+f;if(30<y){var _=f-f%5;y=(c&(1<<_)-1).toString(32),c>>=_,f-=_,ia=1<<32-it(n)+f|o<<f|c,sa=y+t}else ia=1<<y|o<<f|c,sa=t}function Ms(t){t.return!==null&&(tn(t,1),su(t,1,0))}function ks(t){for(;t===pi;)pi=Mn[--kn],Mn[kn]=null,mi=Mn[--kn],Mn[kn]=null;for(;t===en;)en=Nt[--It],Nt[It]=null,sa=Nt[--It],Nt[It]=null,ia=Nt[--It],Nt[It]=null}var st=null,Je=null,Ae=!1,Ht=null,Yt=!1,Ls=Error(r(519));function an(t){var n=Error(r(418,""));throw gr(Dt(n,t)),Ls}function ou(t){var n=t.stateNode,o=t.type,c=t.memoizedProps;switch(n[qe]=t,n[dt]=c,o){case"dialog":ve("cancel",n),ve("close",n);break;case"iframe":case"object":case"embed":ve("load",n);break;case"video":case"audio":for(o=0;o<Br.length;o++)ve(Br[o],n);break;case"source":ve("error",n);break;case"img":case"image":case"link":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"input":ve("invalid",n),El(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ai(n);break;case"select":ve("invalid",n);break;case"textarea":ve("invalid",n),Sl(n,c.value,c.defaultValue,c.children),ai(n)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||n.textContent===""+o||c.suppressHydrationWarning===!0||gd(n.textContent,o)?(c.popover!=null&&(ve("beforetoggle",n),ve("toggle",n)),c.onScroll!=null&&ve("scroll",n),c.onScrollEnd!=null&&ve("scrollend",n),c.onClick!=null&&(n.onclick=Gi),n=!0):n=!1,n||an(t)}function lu(t){for(st=t.return;st;)switch(st.tag){case 3:case 27:Yt=!0;return;case 5:case 13:Yt=!1;return;default:st=st.return}}function pr(t){if(t!==st)return!1;if(!Ae)return lu(t),Ae=!0,!1;var n=!1,o;if((o=t.tag!==3&&t.tag!==27)&&((o=t.tag===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||al(t.type,t.memoizedProps)),o=!o),o&&(n=!0),n&&Je&&an(t),lu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(o=t.data,o==="/$"){if(n===0){Je=Ft(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++;t=t.nextSibling}Je=null}}else Je=st?Ft(t.stateNode.nextSibling):null;return!0}function mr(){Je=st=null,Ae=!1}function gr(t){Ht===null?Ht=[t]:Ht.push(t)}var yr=Error(r(460)),uu=Error(r(474)),Ps={then:function(){}};function cu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function gi(){}function du(t,n,o){switch(o=t[o],o===void 0?t.push(n):o!==n&&(n.then(gi,gi),n=o),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,t===yr?Error(r(483)):t;default:if(typeof n.status=="string")n.then(gi,gi);else{if(t=xe,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(c){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=c}},function(c){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,t===yr?Error(r(483)):t}throw br=n,yr}}var br=null;function fu(){if(br===null)throw Error(r(459));var t=br;return br=null,t}var Ln=null,vr=0;function yi(t){var n=vr;return vr+=1,Ln===null&&(Ln=[]),du(Ln,t,n)}function _r(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function bi(t,n){throw n.$$typeof===u?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function hu(t){var n=t._init;return n(t._payload)}function pu(t){function n(I,x){if(t){var M=I.deletions;M===null?(I.deletions=[x],I.flags|=16):M.push(x)}}function o(I,x){if(!t)return null;for(;x!==null;)n(I,x),x=x.sibling;return null}function c(I){for(var x=new Map;I!==null;)I.key!==null?x.set(I.key,I):x.set(I.index,I),I=I.sibling;return x}function f(I,x){return I=Pa(I,x),I.index=0,I.sibling=null,I}function y(I,x,M){return I.index=M,t?(M=I.alternate,M!==null?(M=M.index,M<x?(I.flags|=33554434,x):M):(I.flags|=33554434,x)):(I.flags|=1048576,x)}function _(I){return t&&I.alternate===null&&(I.flags|=33554434),I}function w(I,x,M,H){return x===null||x.tag!==6?(x=No(M,I.mode,H),x.return=I,x):(x=f(x,M),x.return=I,x)}function R(I,x,M,H){var ie=M.type;return ie===p?q(I,x,M.props.children,H,M.key):x!==null&&(x.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===P&&hu(ie)===x.type)?(x=f(x,M.props),_r(x,M),x.return=I,x):(x=Pi(M.type,M.key,M.props,null,I.mode,H),_r(x,M),x.return=I,x)}function D(I,x,M,H){return x===null||x.tag!==4||x.stateNode.containerInfo!==M.containerInfo||x.stateNode.implementation!==M.implementation?(x=Io(M,I.mode,H),x.return=I,x):(x=f(x,M.children||[]),x.return=I,x)}function q(I,x,M,H,ie){return x===null||x.tag!==7?(x=hn(M,I.mode,H,ie),x.return=I,x):(x=f(x,M),x.return=I,x)}function V(I,x,M){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=No(""+x,I.mode,M),x.return=I,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case d:return M=Pi(x.type,x.key,x.props,null,I.mode,M),_r(M,x),M.return=I,M;case h:return x=Io(x,I.mode,M),x.return=I,x;case P:var H=x._init;return x=H(x._payload),V(I,x,M)}if(W(x)||X(x))return x=hn(x,I.mode,M,null),x.return=I,x;if(typeof x.then=="function")return V(I,yi(x),M);if(x.$$typeof===E)return V(I,Mi(I,x),M);bi(I,x)}return null}function L(I,x,M,H){var ie=x!==null?x.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return ie!==null?null:w(I,x,""+M,H);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case d:return M.key===ie?R(I,x,M,H):null;case h:return M.key===ie?D(I,x,M,H):null;case P:return ie=M._init,M=ie(M._payload),L(I,x,M,H)}if(W(M)||X(M))return ie!==null?null:q(I,x,M,H,null);if(typeof M.then=="function")return L(I,x,yi(M),H);if(M.$$typeof===E)return L(I,x,Mi(I,M),H);bi(I,M)}return null}function B(I,x,M,H,ie){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return I=I.get(M)||null,w(x,I,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case d:return I=I.get(H.key===null?M:H.key)||null,R(x,I,H,ie);case h:return I=I.get(H.key===null?M:H.key)||null,D(x,I,H,ie);case P:var ge=H._init;return H=ge(H._payload),B(I,x,M,H,ie)}if(W(H)||X(H))return I=I.get(M)||null,q(x,I,H,ie,null);if(typeof H.then=="function")return B(I,x,M,yi(H),ie);if(H.$$typeof===E)return B(I,x,M,Mi(x,H),ie);bi(x,H)}return null}function le(I,x,M,H){for(var ie=null,ge=null,ce=x,de=x=0,Xe=null;ce!==null&&de<M.length;de++){ce.index>de?(Xe=ce,ce=null):Xe=ce.sibling;var Ee=L(I,ce,M[de],H);if(Ee===null){ce===null&&(ce=Xe);break}t&&ce&&Ee.alternate===null&&n(I,ce),x=y(Ee,x,de),ge===null?ie=Ee:ge.sibling=Ee,ge=Ee,ce=Xe}if(de===M.length)return o(I,ce),Ae&&tn(I,de),ie;if(ce===null){for(;de<M.length;de++)ce=V(I,M[de],H),ce!==null&&(x=y(ce,x,de),ge===null?ie=ce:ge.sibling=ce,ge=ce);return Ae&&tn(I,de),ie}for(ce=c(ce);de<M.length;de++)Xe=B(ce,I,de,M[de],H),Xe!==null&&(t&&Xe.alternate!==null&&ce.delete(Xe.key===null?de:Xe.key),x=y(Xe,x,de),ge===null?ie=Xe:ge.sibling=Xe,ge=Xe);return t&&ce.forEach(function(Ha){return n(I,Ha)}),Ae&&tn(I,de),ie}function fe(I,x,M,H){if(M==null)throw Error(r(151));for(var ie=null,ge=null,ce=x,de=x=0,Xe=null,Ee=M.next();ce!==null&&!Ee.done;de++,Ee=M.next()){ce.index>de?(Xe=ce,ce=null):Xe=ce.sibling;var Ha=L(I,ce,Ee.value,H);if(Ha===null){ce===null&&(ce=Xe);break}t&&ce&&Ha.alternate===null&&n(I,ce),x=y(Ha,x,de),ge===null?ie=Ha:ge.sibling=Ha,ge=Ha,ce=Xe}if(Ee.done)return o(I,ce),Ae&&tn(I,de),ie;if(ce===null){for(;!Ee.done;de++,Ee=M.next())Ee=V(I,Ee.value,H),Ee!==null&&(x=y(Ee,x,de),ge===null?ie=Ee:ge.sibling=Ee,ge=Ee);return Ae&&tn(I,de),ie}for(ce=c(ce);!Ee.done;de++,Ee=M.next())Ee=B(ce,I,de,Ee.value,H),Ee!==null&&(t&&Ee.alternate!==null&&ce.delete(Ee.key===null?de:Ee.key),x=y(Ee,x,de),ge===null?ie=Ee:ge.sibling=Ee,ge=Ee);return t&&ce.forEach(function(Xh){return n(I,Xh)}),Ae&&tn(I,de),ie}function je(I,x,M,H){if(typeof M=="object"&&M!==null&&M.type===p&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case d:e:{for(var ie=M.key;x!==null;){if(x.key===ie){if(ie=M.type,ie===p){if(x.tag===7){o(I,x.sibling),H=f(x,M.props.children),H.return=I,I=H;break e}}else if(x.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===P&&hu(ie)===x.type){o(I,x.sibling),H=f(x,M.props),_r(H,M),H.return=I,I=H;break e}o(I,x);break}else n(I,x);x=x.sibling}M.type===p?(H=hn(M.props.children,I.mode,H,M.key),H.return=I,I=H):(H=Pi(M.type,M.key,M.props,null,I.mode,H),_r(H,M),H.return=I,I=H)}return _(I);case h:e:{for(ie=M.key;x!==null;){if(x.key===ie)if(x.tag===4&&x.stateNode.containerInfo===M.containerInfo&&x.stateNode.implementation===M.implementation){o(I,x.sibling),H=f(x,M.children||[]),H.return=I,I=H;break e}else{o(I,x);break}else n(I,x);x=x.sibling}H=Io(M,I.mode,H),H.return=I,I=H}return _(I);case P:return ie=M._init,M=ie(M._payload),je(I,x,M,H)}if(W(M))return le(I,x,M,H);if(X(M)){if(ie=X(M),typeof ie!="function")throw Error(r(150));return M=ie.call(M),fe(I,x,M,H)}if(typeof M.then=="function")return je(I,x,yi(M),H);if(M.$$typeof===E)return je(I,x,Mi(I,M),H);bi(I,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,x!==null&&x.tag===6?(o(I,x.sibling),H=f(x,M),H.return=I,I=H):(o(I,x),H=No(M,I.mode,H),H.return=I,I=H),_(I)):o(I,x)}return function(I,x,M,H){try{vr=0;var ie=je(I,x,M,H);return Ln=null,ie}catch(ce){if(ce===yr)throw ce;var ge=Pt(29,ce,null,I.mode);return ge.lanes=H,ge.return=I,ge}finally{}}}var nn=pu(!0),mu=pu(!1),Pn=be(null),vi=be(0);function gu(t,n){t=ya,he(vi,t),he(Pn,n),ya=t|n.baseLanes}function js(){he(vi,ya),he(Pn,Pn.current)}function Us(){ya=vi.current,Re(Pn),Re(vi)}var Mt=be(null),Xt=null;function Ta(t){var n=t.alternate;he(Fe,Fe.current&1),he(Mt,t),Xt===null&&(n===null||Pn.current!==null||n.memoizedState!==null)&&(Xt=t)}function yu(t){if(t.tag===22){if(he(Fe,Fe.current),he(Mt,t),Xt===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Xt=t)}}else Ra()}function Ra(){he(Fe,Fe.current),he(Mt,Mt.current)}function oa(t){Re(Mt),Xt===t&&(Xt=null),Re(Fe)}var Fe=be(0);function _i(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Uf=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){n.aborted=!0,t.forEach(function(o){return o()})}},Zf=s.unstable_scheduleCallback,Bf=s.unstable_NormalPriority,Ve={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zs(){return{controller:new Uf,data:new Map,refCount:0}}function Ar(t){t.refCount--,t.refCount===0&&Zf(Bf,function(){t.controller.abort()})}var Er=null,Bs=0,jn=0,Un=null;function qf(t,n){if(Er===null){var o=Er=[];Bs=0,jn=Go(),Un={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Bs++,n.then(bu,bu),n}function bu(){if(--Bs===0&&Er!==null){Un!==null&&(Un.status="fulfilled");var t=Er;Er=null,jn=0,Un=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function zf(t,n){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=n;for(var f=0;f<o.length;f++)(0,o[f])(n)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var vu=ne.S;ne.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&qf(t,n),vu!==null&&vu(t,n)};var rn=be(null);function qs(){var t=rn.current;return t!==null?t:xe.pooledCache}function Ai(t,n){n===null?he(rn,rn.current):he(rn,n.pool)}function _u(){var t=qs();return t===null?null:{parent:Ve._currentValue,pool:t}}var Ca=0,pe=null,we=null,ze=null,Ei=!1,Zn=!1,sn=!1,wi=0,wr=0,Bn=null,Hf=0;function Be(){throw Error(r(321))}function zs(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!vt(t[o],n[o]))return!1;return!0}function Hs(t,n,o,c,f,y){return Ca=y,pe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ne.H=t===null||t.memoizedState===null?on:Oa,sn=!1,y=o(c,f),sn=!1,Zn&&(y=Eu(n,o,c,f)),Au(t),y}function Au(t){ne.H=Jt;var n=we!==null&&we.next!==null;if(Ca=0,ze=we=pe=null,Ei=!1,wr=0,Bn=null,n)throw Error(r(300));t===null||Qe||(t=t.dependencies,t!==null&&Ii(t)&&(Qe=!0))}function Eu(t,n,o,c){pe=t;var f=0;do{if(Zn&&(Bn=null),wr=0,Zn=!1,25<=f)throw Error(r(301));if(f+=1,ze=we=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ne.H=ln,y=n(o,c)}while(Zn);return y}function $f(){var t=ne.H,n=t.useState()[0];return n=typeof n.then=="function"?Sr(n):n,t=t.useState()[0],(we!==null?we.memoizedState:null)!==t&&(pe.flags|=1024),n}function $s(){var t=wi!==0;return wi=0,t}function Fs(t,n,o){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~o}function Vs(t){if(Ei){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ei=!1}Ca=0,ze=we=pe=null,Zn=!1,wr=wi=0,Bn=null}function ht(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?pe.memoizedState=ze=t:ze=ze.next=t,ze}function He(){if(we===null){var t=pe.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var n=ze===null?pe.memoizedState:ze.next;if(n!==null)ze=n,we=t;else{if(t===null)throw pe.alternate===null?Error(r(467)):Error(r(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},ze===null?pe.memoizedState=ze=t:ze=ze.next=t}return ze}var Si;Si=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Sr(t){var n=wr;return wr+=1,Bn===null&&(Bn=[]),t=du(Bn,t,n),n=pe,(ze===null?n.memoizedState:ze.next)===null&&(n=n.alternate,ne.H=n===null||n.memoizedState===null?on:Oa),t}function Ti(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Sr(t);if(t.$$typeof===E)return nt(t)}throw Error(r(438,String(t)))}function Gs(t){var n=null,o=pe.updateQueue;if(o!==null&&(n=o.memoCache),n==null){var c=pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),o===null&&(o=Si(),pe.updateQueue=o),o.memoCache=n,o=n.data[n.index],o===void 0)for(o=n.data[n.index]=Array(t),c=0;c<t;c++)o[c]=ae;return n.index++,o}function la(t,n){return typeof n=="function"?n(t):n}function Ri(t){var n=He();return Ks(n,we,t)}function Ks(t,n,o){var c=t.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=t.baseQueue,y=c.pending;if(y!==null){if(f!==null){var _=f.next;f.next=y.next,y.next=_}n.baseQueue=f=y,c.pending=null}if(y=t.baseState,f===null)t.memoizedState=y;else{n=f.next;var w=_=null,R=null,D=n,q=!1;do{var V=D.lane&-536870913;if(V!==D.lane?(_e&V)===V:(Ca&V)===V){var L=D.revertLane;if(L===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),V===jn&&(q=!0);else if((Ca&L)===L){D=D.next,L===jn&&(q=!0);continue}else V={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},R===null?(w=R=V,_=y):R=R.next=V,pe.lanes|=L,ja|=L;V=D.action,sn&&o(y,V),y=D.hasEagerState?D.eagerState:o(y,V)}else L={lane:V,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},R===null?(w=R=L,_=y):R=R.next=L,pe.lanes|=V,ja|=V;D=D.next}while(D!==null&&D!==n);if(R===null?_=y:R.next=w,!vt(y,t.memoizedState)&&(Qe=!0,q&&(o=Un,o!==null)))throw o;t.memoizedState=y,t.baseState=_,t.baseQueue=R,c.lastRenderedState=y}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Qs(t){var n=He(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,y=n.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do y=t(y,_.action),_=_.next;while(_!==f);vt(y,n.memoizedState)||(Qe=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),o.lastRenderedState=y}return[y,c]}function wu(t,n,o){var c=pe,f=He(),y=Ae;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=n();var _=!vt((we||f).memoizedState,o);if(_&&(f.memoizedState=o,Qe=!0),f=f.queue,Js(Ru.bind(null,c,f,t),[t]),f.getSnapshot!==n||_||ze!==null&&ze.memoizedState.tag&1){if(c.flags|=2048,qn(9,Tu.bind(null,c,f,o,n),{destroy:void 0},null),xe===null)throw Error(r(349));y||(Ca&60)!==0||Su(c,n,o)}return o}function Su(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=pe.updateQueue,n===null?(n=Si(),pe.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function Tu(t,n,o,c){n.value=o,n.getSnapshot=c,Cu(n)&&Ou(t)}function Ru(t,n,o){return o(function(){Cu(n)&&Ou(t)})}function Cu(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!vt(t,o)}catch{return!0}}function Ou(t){var n=Sa(t,2);n!==null&&ot(n,t,2)}function Ys(t){var n=ht();if(typeof t=="function"){var o=t;if(t=o(),sn){qt(!0);try{o()}finally{qt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n}function xu(t,n,o,c){return t.baseState=o,Ks(t,we,typeof c=="function"?c:la)}function Ff(t,n,o,c,f){if(xi(t))throw Error(r(485));if(t=n.action,t!==null){var y={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};ne.T!==null?o(!0):y.isTransition=!1,c(y),o=n.pending,o===null?(y.next=n.pending=y,Du(n,y)):(y.next=o.next,n.pending=o.next=y)}}function Du(t,n){var o=n.action,c=n.payload,f=t.state;if(n.isTransition){var y=ne.T,_={};ne.T=_;try{var w=o(f,c),R=ne.S;R!==null&&R(_,w),Nu(t,n,w)}catch(D){Xs(t,n,D)}finally{ne.T=y}}else try{y=o(f,c),Nu(t,n,y)}catch(D){Xs(t,n,D)}}function Nu(t,n,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Iu(t,n,c)},function(c){return Xs(t,n,c)}):Iu(t,n,o)}function Iu(t,n,o){n.status="fulfilled",n.value=o,Mu(n),t.state=o,n=t.pending,n!==null&&(o=n.next,o===n?t.pending=null:(o=o.next,n.next=o,Du(t,o)))}function Xs(t,n,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=o,Mu(n),n=n.next;while(n!==c)}t.action=null}function Mu(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function ku(t,n){return n}function Lu(t,n){if(Ae){var o=xe.formState;if(o!==null){e:{var c=pe;if(Ae){if(Je){t:{for(var f=Je,y=Yt;f.nodeType!==8;){if(!y){f=null;break t}if(f=Ft(f.nextSibling),f===null){f=null;break t}}y=f.data,f=y==="F!"||y==="F"?f:null}if(f){Je=Ft(f.nextSibling),c=f.data==="F!";break e}}an(c)}c=!1}c&&(n=o[0])}}return o=ht(),o.memoizedState=o.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ku,lastRenderedState:n},o.queue=c,o=Wu.bind(null,pe,c),c.dispatch=o,c=Ys(!1),y=no.bind(null,pe,!1,c.queue),c=ht(),f={state:n,dispatch:null,action:t,pending:null},c.queue=f,o=Ff.bind(null,pe,f,y,o),f.dispatch=o,c.memoizedState=t,[n,o,!1]}function Pu(t){var n=He();return ju(n,we,t)}function ju(t,n,o){n=Ks(t,n,ku)[0],t=Ri(la)[0],n=typeof n=="object"&&n!==null&&typeof n.then=="function"?Sr(n):n;var c=He(),f=c.queue,y=f.dispatch;return o!==c.memoizedState&&(pe.flags|=2048,qn(9,Vf.bind(null,f,o),{destroy:void 0},null)),[n,y,t]}function Vf(t,n){t.action=n}function Uu(t){var n=He(),o=we;if(o!==null)return ju(n,o,t);He(),n=n.memoizedState,o=He();var c=o.queue.dispatch;return o.memoizedState=t,[n,c,!1]}function qn(t,n,o,c){return t={tag:t,create:n,inst:o,deps:c,next:null},n=pe.updateQueue,n===null&&(n=Si(),pe.updateQueue=n),o=n.lastEffect,o===null?n.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,n.lastEffect=t),t}function Zu(){return He().memoizedState}function Ci(t,n,o,c){var f=ht();pe.flags|=t,f.memoizedState=qn(1|n,o,{destroy:void 0},c===void 0?null:c)}function Oi(t,n,o,c){var f=He();c=c===void 0?null:c;var y=f.memoizedState.inst;we!==null&&c!==null&&zs(c,we.memoizedState.deps)?f.memoizedState=qn(n,o,y,c):(pe.flags|=t,f.memoizedState=qn(1|n,o,y,c))}function Bu(t,n){Ci(8390656,8,t,n)}function Js(t,n){Oi(2048,8,t,n)}function qu(t,n){return Oi(4,2,t,n)}function zu(t,n){return Oi(4,4,t,n)}function Hu(t,n){if(typeof n=="function"){t=t();var o=n(t);return function(){typeof o=="function"?o():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function $u(t,n,o){o=o!=null?o.concat([t]):null,Oi(4,4,Hu.bind(null,n,t),o)}function Ws(){}function Fu(t,n){var o=He();n=n===void 0?null:n;var c=o.memoizedState;return n!==null&&zs(n,c[1])?c[0]:(o.memoizedState=[t,n],t)}function Vu(t,n){var o=He();n=n===void 0?null:n;var c=o.memoizedState;if(n!==null&&zs(n,c[1]))return c[0];if(c=t(),sn){qt(!0);try{t()}finally{qt(!1)}}return o.memoizedState=[c,n],c}function eo(t,n,o){return o===void 0||(Ca&1073741824)!==0?t.memoizedState=n:(t.memoizedState=o,t=Kc(),pe.lanes|=t,ja|=t,o)}function Gu(t,n,o,c){return vt(o,n)?o:Pn.current!==null?(t=eo(t,o,c),vt(t,n)||(Qe=!0),t):(Ca&42)===0?(Qe=!0,t.memoizedState=o):(t=Kc(),pe.lanes|=t,ja|=t,n)}function Ku(t,n,o,c,f){var y=J.p;J.p=y!==0&&8>y?y:8;var _=ne.T,w={};ne.T=w,no(t,!1,n,o);try{var R=f(),D=ne.S;if(D!==null&&D(w,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var q=zf(R,c);Tr(t,n,q,wt(t))}else Tr(t,n,c,wt(t))}catch(V){Tr(t,n,{then:function(){},status:"rejected",reason:V},wt())}finally{J.p=y,ne.T=_}}function Gf(){}function to(t,n,o,c){if(t.tag!==5)throw Error(r(476));var f=Qu(t).queue;Ku(t,f,n,se,o===null?Gf:function(){return Yu(t),o(c)})}function Qu(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:se},next:null};var o={};return n.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:o},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Yu(t){var n=Qu(t).next.queue;Tr(t,n,{},wt())}function ao(){return nt(Fr)}function Xu(){return He().memoizedState}function Ju(){return He().memoizedState}function Kf(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var o=wt();t=Na(o);var c=Ia(n,t,o);c!==null&&(ot(c,n,o),Or(c,n,o)),n={cache:Zs()},t.payload=n;return}n=n.return}}function Qf(t,n,o){var c=wt();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},xi(t)?ec(n,o):(o=Is(t,n,o,c),o!==null&&(ot(o,t,c),tc(o,n,c)))}function Wu(t,n,o){var c=wt();Tr(t,n,o,c)}function Tr(t,n,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(xi(t))ec(n,f);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var _=n.lastRenderedState,w=y(_,o);if(f.hasEagerState=!0,f.eagerState=w,vt(w,_))return fi(t,n,f,0),xe===null&&di(),!1}catch{}finally{}if(o=Is(t,n,f,c),o!==null)return ot(o,t,c),tc(o,n,c),!0}return!1}function no(t,n,o,c){if(c={lane:2,revertLane:Go(),action:c,hasEagerState:!1,eagerState:null,next:null},xi(t)){if(n)throw Error(r(479))}else n=Is(t,o,c,2),n!==null&&ot(n,t,2)}function xi(t){var n=t.alternate;return t===pe||n!==null&&n===pe}function ec(t,n){Zn=Ei=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function tc(t,n,o){if((o&4194176)!==0){var c=n.lanes;c&=t.pendingLanes,o|=c,n.lanes=o,Rt(t,o)}}var Jt={readContext:nt,use:Ti,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be};Jt.useCacheRefresh=Be,Jt.useMemoCache=Be,Jt.useHostTransitionStatus=Be,Jt.useFormState=Be,Jt.useActionState=Be,Jt.useOptimistic=Be;var on={readContext:nt,use:Ti,useCallback:function(t,n){return ht().memoizedState=[t,n===void 0?null:n],t},useContext:nt,useEffect:Bu,useImperativeHandle:function(t,n,o){o=o!=null?o.concat([t]):null,Ci(4194308,4,Hu.bind(null,n,t),o)},useLayoutEffect:function(t,n){return Ci(4194308,4,t,n)},useInsertionEffect:function(t,n){Ci(4,2,t,n)},useMemo:function(t,n){var o=ht();n=n===void 0?null:n;var c=t();if(sn){qt(!0);try{t()}finally{qt(!1)}}return o.memoizedState=[c,n],c},useReducer:function(t,n,o){var c=ht();if(o!==void 0){var f=o(n);if(sn){qt(!0);try{o(n)}finally{qt(!1)}}}else f=n;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Qf.bind(null,pe,t),[c.memoizedState,t]},useRef:function(t){var n=ht();return t={current:t},n.memoizedState=t},useState:function(t){t=Ys(t);var n=t.queue,o=Wu.bind(null,pe,n);return n.dispatch=o,[t.memoizedState,o]},useDebugValue:Ws,useDeferredValue:function(t,n){var o=ht();return eo(o,t,n)},useTransition:function(){var t=Ys(!1);return t=Ku.bind(null,pe,t.queue,!0,!1),ht().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,o){var c=pe,f=ht();if(Ae){if(o===void 0)throw Error(r(407));o=o()}else{if(o=n(),xe===null)throw Error(r(349));(_e&60)!==0||Su(c,n,o)}f.memoizedState=o;var y={value:o,getSnapshot:n};return f.queue=y,Bu(Ru.bind(null,c,y,t),[t]),c.flags|=2048,qn(9,Tu.bind(null,c,y,o,n),{destroy:void 0},null),o},useId:function(){var t=ht(),n=xe.identifierPrefix;if(Ae){var o=sa,c=ia;o=(c&~(1<<32-it(c)-1)).toString(32)+o,n=":"+n+"R"+o,o=wi++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=Hf++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},useCacheRefresh:function(){return ht().memoizedState=Kf.bind(null,pe)}};on.useMemoCache=Gs,on.useHostTransitionStatus=ao,on.useFormState=Lu,on.useActionState=Lu,on.useOptimistic=function(t){var n=ht();n.memoizedState=n.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=o,n=no.bind(null,pe,!0,o),o.dispatch=n,[t,n]};var Oa={readContext:nt,use:Ti,useCallback:Fu,useContext:nt,useEffect:Js,useImperativeHandle:$u,useInsertionEffect:qu,useLayoutEffect:zu,useMemo:Vu,useReducer:Ri,useRef:Zu,useState:function(){return Ri(la)},useDebugValue:Ws,useDeferredValue:function(t,n){var o=He();return Gu(o,we.memoizedState,t,n)},useTransition:function(){var t=Ri(la)[0],n=He().memoizedState;return[typeof t=="boolean"?t:Sr(t),n]},useSyncExternalStore:wu,useId:Xu};Oa.useCacheRefresh=Ju,Oa.useMemoCache=Gs,Oa.useHostTransitionStatus=ao,Oa.useFormState=Pu,Oa.useActionState=Pu,Oa.useOptimistic=function(t,n){var o=He();return xu(o,we,t,n)};var ln={readContext:nt,use:Ti,useCallback:Fu,useContext:nt,useEffect:Js,useImperativeHandle:$u,useInsertionEffect:qu,useLayoutEffect:zu,useMemo:Vu,useReducer:Qs,useRef:Zu,useState:function(){return Qs(la)},useDebugValue:Ws,useDeferredValue:function(t,n){var o=He();return we===null?eo(o,t,n):Gu(o,we.memoizedState,t,n)},useTransition:function(){var t=Qs(la)[0],n=He().memoizedState;return[typeof t=="boolean"?t:Sr(t),n]},useSyncExternalStore:wu,useId:Xu};ln.useCacheRefresh=Ju,ln.useMemoCache=Gs,ln.useHostTransitionStatus=ao,ln.useFormState=Uu,ln.useActionState=Uu,ln.useOptimistic=function(t,n){var o=He();return we!==null?xu(o,we,t,n):(o.baseState=t,[t,o.queue.dispatch])};function ro(t,n,o,c){n=t.memoizedState,o=o(c,n),o=o==null?n:ue({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var io={isMounted:function(t){return(t=t._reactInternals)?F(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var c=wt(),f=Na(c);f.payload=n,o!=null&&(f.callback=o),n=Ia(t,f,c),n!==null&&(ot(n,t,c),Or(n,t,c))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var c=wt(),f=Na(c);f.tag=1,f.payload=n,o!=null&&(f.callback=o),n=Ia(t,f,c),n!==null&&(ot(n,t,c),Or(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=wt(),c=Na(o);c.tag=2,n!=null&&(c.callback=n),n=Ia(t,c,o),n!==null&&(ot(n,t,o),Or(n,t,o))}};function ac(t,n,o,c,f,y,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,y,_):n.prototype&&n.prototype.isPureReactComponent?!fr(o,c)||!fr(f,y):!0}function nc(t,n,o,c){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,c),n.state!==t&&io.enqueueReplaceState(n,n.state,null)}function un(t,n){var o=n;if("ref"in n){o={};for(var c in n)c!=="ref"&&(o[c]=n[c])}if(t=t.defaultProps){o===n&&(o=ue({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}var Di=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function rc(t){Di(t)}function ic(t){console.error(t)}function sc(t){Di(t)}function Ni(t,n){try{var o=t.onUncaughtError;o(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function oc(t,n,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function so(t,n,o){return o=Na(o),o.tag=3,o.payload={element:null},o.callback=function(){Ni(t,n)},o}function lc(t){return t=Na(t),t.tag=3,t}function uc(t,n,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var y=c.value;t.payload=function(){return f(y)},t.callback=function(){oc(n,o,c)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){oc(n,o,c),typeof f!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function Yf(t,n,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=o.alternate,n!==null&&Cr(n,o,f,!0),o=Mt.current,o!==null){switch(o.tag){case 13:return Xt===null?zo():o.alternate===null&&Pe===0&&(Pe=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Ps?o.flags|=16384:(n=o.updateQueue,n===null?o.updateQueue=new Set([c]):n.add(c),$o(t,c,f)),!1;case 22:return o.flags|=65536,c===Ps?o.flags|=16384:(n=o.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=n):(o=n.retryQueue,o===null?n.retryQueue=new Set([c]):o.add(c)),$o(t,c,f)),!1}throw Error(r(435,o.tag))}return $o(t,c,f),zo(),!1}if(Ae)return n=Mt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,c!==Ls&&(t=Error(r(422),{cause:c}),gr(Dt(t,o)))):(c!==Ls&&(n=Error(r(423),{cause:c}),gr(Dt(n,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=Dt(c,o),f=so(t.stateNode,c,f),Eo(t,f),Pe!==4&&(Pe=2)),!1;var y=Error(r(520),{cause:c});if(y=Dt(y,o),Pr===null?Pr=[y]:Pr.push(y),Pe!==4&&(Pe=2),n===null)return!0;c=Dt(c,o),o=n;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=so(o.stateNode,c,t),Eo(o,t),!1;case 1:if(n=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ua===null||!Ua.has(y))))return o.flags|=65536,f&=-f,o.lanes|=f,f=lc(f),uc(f,t,o,c),Eo(o,f),!1}o=o.return}while(o!==null);return!1}var cc=Error(r(461)),Qe=!1;function We(t,n,o,c){n.child=t===null?mu(n,null,o,c):nn(n,t.child,o,c)}function dc(t,n,o,c,f){o=o.render;var y=n.ref;if("ref"in c){var _={};for(var w in c)w!=="ref"&&(_[w]=c[w])}else _=c;return dn(n),c=Hs(t,n,o,_,y,f),w=$s(),t!==null&&!Qe?(Fs(t,n,f),ua(t,n,f)):(Ae&&w&&Ms(n),n.flags|=1,We(t,n,c,f),n.child)}function fc(t,n,o,c,f){if(t===null){var y=o.type;return typeof y=="function"&&!Do(y)&&y.defaultProps===void 0&&o.compare===null?(n.tag=15,n.type=y,hc(t,n,y,c,f)):(t=Pi(o.type,null,c,n,n.mode,f),t.ref=n.ref,t.return=n,n.child=t)}if(y=t.child,!go(t,f)){var _=y.memoizedProps;if(o=o.compare,o=o!==null?o:fr,o(_,c)&&t.ref===n.ref)return ua(t,n,f)}return n.flags|=1,t=Pa(y,c),t.ref=n.ref,t.return=n,n.child=t}function hc(t,n,o,c,f){if(t!==null){var y=t.memoizedProps;if(fr(y,c)&&t.ref===n.ref)if(Qe=!1,n.pendingProps=c=y,go(t,f))(t.flags&131072)!==0&&(Qe=!0);else return n.lanes=t.lanes,ua(t,n,f)}return oo(t,n,o,c,f)}function pc(t,n,o){var c=n.pendingProps,f=c.children,y=(n.stateNode._pendingVisibility&2)!==0,_=t!==null?t.memoizedState:null;if(Rr(t,n),c.mode==="hidden"||y){if((n.flags&128)!==0){if(c=_!==null?_.baseLanes|o:o,t!==null){for(f=n.child=t.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;n.childLanes=y&~c}else n.childLanes=0,n.child=null;return mc(t,n,c,o)}if((o&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ai(n,_!==null?_.cachePool:null),_!==null?gu(n,_):js(),yu(n);else return n.lanes=n.childLanes=536870912,mc(t,n,_!==null?_.baseLanes|o:o,o)}else _!==null?(Ai(n,_.cachePool),gu(n,_),Ra(),n.memoizedState=null):(t!==null&&Ai(n,null),js(),Ra());return We(t,n,f,o),n.child}function mc(t,n,o,c){var f=qs();return f=f===null?null:{parent:Ve._currentValue,pool:f},n.memoizedState={baseLanes:o,cachePool:f},t!==null&&Ai(n,null),js(),yu(n),t!==null&&Cr(t,n,c,!0),null}function Rr(t,n){var o=n.ref;if(o===null)t!==null&&t.ref!==null&&(n.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(t===null||t.ref!==o)&&(n.flags|=2097664)}}function oo(t,n,o,c,f){return dn(n),o=Hs(t,n,o,c,void 0,f),c=$s(),t!==null&&!Qe?(Fs(t,n,f),ua(t,n,f)):(Ae&&c&&Ms(n),n.flags|=1,We(t,n,o,f),n.child)}function gc(t,n,o,c,f,y){return dn(n),n.updateQueue=null,o=Eu(n,c,o,f),Au(t),c=$s(),t!==null&&!Qe?(Fs(t,n,y),ua(t,n,y)):(Ae&&c&&Ms(n),n.flags|=1,We(t,n,o,y),n.child)}function yc(t,n,o,c,f){if(dn(n),n.stateNode===null){var y=In,_=o.contextType;typeof _=="object"&&_!==null&&(y=nt(_)),y=new o(c,y),n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=io,n.stateNode=y,y._reactInternals=n,y=n.stateNode,y.props=c,y.state=n.memoizedState,y.refs={},_o(n),_=o.contextType,y.context=typeof _=="object"&&_!==null?nt(_):In,y.state=n.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(ro(n,o,_,c),y.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&io.enqueueReplaceState(y,y.state,null),Dr(n,c,y,f),xr(),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(t===null){y=n.stateNode;var w=n.memoizedProps,R=un(o,w);y.props=R;var D=y.context,q=o.contextType;_=In,typeof q=="object"&&q!==null&&(_=nt(q));var V=o.getDerivedStateFromProps;q=typeof V=="function"||typeof y.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w||D!==_)&&nc(n,y,c,_),Da=!1;var L=n.memoizedState;y.state=L,Dr(n,c,y,f),xr(),D=n.memoizedState,w||L!==D||Da?(typeof V=="function"&&(ro(n,o,V,c),D=n.memoizedState),(R=Da||ac(n,o,R,c,L,D,_))?(q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=D),y.props=c,y.state=D,y.context=_,c=R):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{y=n.stateNode,Ao(t,n),_=n.memoizedProps,q=un(o,_),y.props=q,V=n.pendingProps,L=y.context,D=o.contextType,R=In,typeof D=="object"&&D!==null&&(R=nt(D)),w=o.getDerivedStateFromProps,(D=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==V||L!==R)&&nc(n,y,c,R),Da=!1,L=n.memoizedState,y.state=L,Dr(n,c,y,f),xr();var B=n.memoizedState;_!==V||L!==B||Da||t!==null&&t.dependencies!==null&&Ii(t.dependencies)?(typeof w=="function"&&(ro(n,o,w,c),B=n.memoizedState),(q=Da||ac(n,o,q,c,L,B,R)||t!==null&&t.dependencies!==null&&Ii(t.dependencies))?(D||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,B,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,B,R)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===t.memoizedProps&&L===t.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&L===t.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=B),y.props=c,y.state=B,y.context=R,c=q):(typeof y.componentDidUpdate!="function"||_===t.memoizedProps&&L===t.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&L===t.memoizedState||(n.flags|=1024),c=!1)}return y=c,Rr(t,n),c=(n.flags&128)!==0,y||c?(y=n.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:y.render(),n.flags|=1,t!==null&&c?(n.child=nn(n,t.child,null,f),n.child=nn(n,null,o,f)):We(t,n,o,f),n.memoizedState=y.state,t=n.child):t=ua(t,n,f),t}function bc(t,n,o,c){return mr(),n.flags|=256,We(t,n,o,c),n.child}var lo={dehydrated:null,treeContext:null,retryLane:0};function uo(t){return{baseLanes:t,cachePool:_u()}}function co(t,n,o){return t=t!==null?t.childLanes&~o:0,n&&(t|=jt),t}function vc(t,n,o){var c=n.pendingProps,f=!1,y=(n.flags&128)!==0,_;if((_=y)||(_=t!==null&&t.memoizedState===null?!1:(Fe.current&2)!==0),_&&(f=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ae){if(f?Ta(n):Ra(),Ae){var w=Je,R;if(R=w){e:{for(R=w,w=Yt;R.nodeType!==8;){if(!w){w=null;break e}if(R=Ft(R.nextSibling),R===null){w=null;break e}}w=R}w!==null?(n.memoizedState={dehydrated:w,treeContext:en!==null?{id:ia,overflow:sa}:null,retryLane:536870912},R=Pt(18,null,null,0),R.stateNode=w,R.return=n,n.child=R,st=n,Je=null,R=!0):R=!1}R||an(n)}if(w=n.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return w.data==="$!"?n.lanes=16:n.lanes=536870912,null;oa(n)}return w=c.children,c=c.fallback,f?(Ra(),f=n.mode,w=ho({mode:"hidden",children:w},f),c=hn(c,f,o,null),w.return=n,c.return=n,w.sibling=c,n.child=w,f=n.child,f.memoizedState=uo(o),f.childLanes=co(t,_,o),n.memoizedState=lo,c):(Ta(n),fo(n,w))}if(R=t.memoizedState,R!==null&&(w=R.dehydrated,w!==null)){if(y)n.flags&256?(Ta(n),n.flags&=-257,n=po(t,n,o)):n.memoizedState!==null?(Ra(),n.child=t.child,n.flags|=128,n=null):(Ra(),f=c.fallback,w=n.mode,c=ho({mode:"visible",children:c.children},w),f=hn(f,w,o,null),f.flags|=2,c.return=n,f.return=n,c.sibling=f,n.child=c,nn(n,t.child,null,o),c=n.child,c.memoizedState=uo(o),c.childLanes=co(t,_,o),n.memoizedState=lo,n=f);else if(Ta(n),w.data==="$!"){if(_=w.nextSibling&&w.nextSibling.dataset,_)var D=_.dgst;_=D,c=Error(r(419)),c.stack="",c.digest=_,gr({value:c,source:null,stack:null}),n=po(t,n,o)}else if(Qe||Cr(t,n,o,!1),_=(o&t.childLanes)!==0,Qe||_){if(_=xe,_!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(_.suspendedLanes|o))!==0?0:c,c!==0&&c!==R.retryLane)throw R.retryLane=c,Sa(t,c),ot(_,t,c),cc}w.data==="$?"||zo(),n=po(t,n,o)}else w.data==="$?"?(n.flags|=128,n.child=t.child,n=dh.bind(null,t),w._reactRetry=n,n=null):(t=R.treeContext,Je=Ft(w.nextSibling),st=n,Ae=!0,Ht=null,Yt=!1,t!==null&&(Nt[It++]=ia,Nt[It++]=sa,Nt[It++]=en,ia=t.id,sa=t.overflow,en=n),n=fo(n,c.children),n.flags|=4096);return n}return f?(Ra(),f=c.fallback,w=n.mode,R=t.child,D=R.sibling,c=Pa(R,{mode:"hidden",children:c.children}),c.subtreeFlags=R.subtreeFlags&31457280,D!==null?f=Pa(D,f):(f=hn(f,w,o,null),f.flags|=2),f.return=n,c.return=n,c.sibling=f,n.child=c,c=f,f=n.child,w=t.child.memoizedState,w===null?w=uo(o):(R=w.cachePool,R!==null?(D=Ve._currentValue,R=R.parent!==D?{parent:D,pool:D}:R):R=_u(),w={baseLanes:w.baseLanes|o,cachePool:R}),f.memoizedState=w,f.childLanes=co(t,_,o),n.memoizedState=lo,c):(Ta(n),o=t.child,t=o.sibling,o=Pa(o,{mode:"visible",children:c.children}),o.return=n,o.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=o,n.memoizedState=null,o)}function fo(t,n){return n=ho({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function ho(t,n){return Fc(t,n,0,null)}function po(t,n,o){return nn(n,t.child,null,o),t=fo(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function _c(t,n,o){t.lanes|=n;var c=t.alternate;c!==null&&(c.lanes|=n),bo(t.return,n,o)}function mo(t,n,o,c,f){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=o,y.tailMode=f)}function Ac(t,n,o){var c=n.pendingProps,f=c.revealOrder,y=c.tail;if(We(t,n,c.children,o),c=Fe.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_c(t,o,n);else if(t.tag===19)_c(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}switch(he(Fe,c),f){case"forwards":for(o=n.child,f=null;o!==null;)t=o.alternate,t!==null&&_i(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=n.child,n.child=null):(f=o.sibling,o.sibling=null),mo(n,!1,f,o,y);break;case"backwards":for(o=null,f=n.child,n.child=null;f!==null;){if(t=f.alternate,t!==null&&_i(t)===null){n.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}mo(n,!0,o,null,y);break;case"together":mo(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ua(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),ja|=n.lanes,(o&n.childLanes)===0)if(t!==null){if(Cr(t,n,o,!1),(o&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,o=Pa(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=Pa(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function go(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Ii(t)))}function Xf(t,n,o){switch(n.tag){case 3:ta(n,n.stateNode.containerInfo),xa(n,Ve,t.memoizedState.cache),mr();break;case 27:case 5:yn(n);break;case 4:ta(n,n.stateNode.containerInfo);break;case 10:xa(n,n.type,n.memoizedProps.value);break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Ta(n),n.flags|=128,null):(o&n.child.childLanes)!==0?vc(t,n,o):(Ta(n),t=ua(t,n,o),t!==null?t.sibling:null);Ta(n);break;case 19:var f=(t.flags&128)!==0;if(c=(o&n.childLanes)!==0,c||(Cr(t,n,o,!1),c=(o&n.childLanes)!==0),f){if(c)return Ac(t,n,o);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),he(Fe,Fe.current),c)break;return null;case 22:case 23:return n.lanes=0,pc(t,n,o);case 24:xa(n,Ve,t.memoizedState.cache)}return ua(t,n,o)}function Ec(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps)Qe=!0;else{if(!go(t,o)&&(n.flags&128)===0)return Qe=!1,Xf(t,n,o);Qe=(t.flags&131072)!==0}else Qe=!1,Ae&&(n.flags&1048576)!==0&&su(n,mi,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var c=n.elementType,f=c._init;if(c=f(c._payload),n.type=c,typeof c=="function")Do(c)?(t=un(c,t),n.tag=1,n=yc(null,n,c,t,o)):(n.tag=0,n=oo(null,n,c,t,o));else{if(c!=null){if(f=c.$$typeof,f===S){n.tag=11,n=dc(null,n,c,t,o);break e}else if(f===N){n.tag=14,n=fc(null,n,c,t,o);break e}}throw n=Q(c)||c,Error(r(306,n,""))}}return n;case 0:return oo(t,n,n.type,n.pendingProps,o);case 1:return c=n.type,f=un(c,n.pendingProps),yc(t,n,c,f,o);case 3:e:{if(ta(n,n.stateNode.containerInfo),t===null)throw Error(r(387));var y=n.pendingProps;f=n.memoizedState,c=f.element,Ao(t,n),Dr(n,y,null,o);var _=n.memoizedState;if(y=_.cache,xa(n,Ve,y),y!==f.cache&&vo(n,[Ve],o,!0),xr(),y=_.element,f.isDehydrated)if(f={element:y,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=bc(t,n,y,o);break e}else if(y!==c){c=Dt(Error(r(424)),n),gr(c),n=bc(t,n,y,o);break e}else for(Je=Ft(n.stateNode.containerInfo.firstChild),st=n,Ae=!0,Ht=null,Yt=!0,o=mu(n,null,y,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(mr(),y===c){n=ua(t,n,o);break e}We(t,n,y,o)}n=n.child}return n;case 26:return Rr(t,n),t===null?(o=Td(n.type,null,n.pendingProps,null))?n.memoizedState=o:Ae||(o=n.type,t=n.pendingProps,c=Ki(Zt.current).createElement(o),c[qe]=n,c[dt]=t,et(c,o,t),Ke(c),n.stateNode=c):n.memoizedState=Td(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return yn(n),t===null&&Ae&&(c=n.stateNode=Ed(n.type,n.pendingProps,Zt.current),st=n,Yt=!0,Je=Ft(c.firstChild)),c=n.pendingProps.children,t!==null||Ae?We(t,n,c,o):n.child=nn(n,null,c,o),Rr(t,n),n.child;case 5:return t===null&&Ae&&((f=c=Je)&&(c=Ch(c,n.type,n.pendingProps,Yt),c!==null?(n.stateNode=c,st=n,Je=Ft(c.firstChild),Yt=!1,f=!0):f=!1),f||an(n)),yn(n),f=n.type,y=n.pendingProps,_=t!==null?t.memoizedProps:null,c=y.children,al(f,y)?c=null:_!==null&&al(f,_)&&(n.flags|=32),n.memoizedState!==null&&(f=Hs(t,n,$f,null,null,o),Fr._currentValue=f),Rr(t,n),We(t,n,c,o),n.child;case 6:return t===null&&Ae&&((t=o=Je)&&(o=Oh(o,n.pendingProps,Yt),o!==null?(n.stateNode=o,st=n,Je=null,t=!0):t=!1),t||an(n)),null;case 13:return vc(t,n,o);case 4:return ta(n,n.stateNode.containerInfo),c=n.pendingProps,t===null?n.child=nn(n,null,c,o):We(t,n,c,o),n.child;case 11:return dc(t,n,n.type,n.pendingProps,o);case 7:return We(t,n,n.pendingProps,o),n.child;case 8:return We(t,n,n.pendingProps.children,o),n.child;case 12:return We(t,n,n.pendingProps.children,o),n.child;case 10:return c=n.pendingProps,xa(n,n.type,c.value),We(t,n,c.children,o),n.child;case 9:return f=n.type._context,c=n.pendingProps.children,dn(n),f=nt(f),c=c(f),n.flags|=1,We(t,n,c,o),n.child;case 14:return fc(t,n,n.type,n.pendingProps,o);case 15:return hc(t,n,n.type,n.pendingProps,o);case 19:return Ac(t,n,o);case 22:return pc(t,n,o);case 24:return dn(n),c=nt(Ve),t===null?(f=qs(),f===null&&(f=xe,y=Zs(),f.pooledCache=y,y.refCount++,y!==null&&(f.pooledCacheLanes|=o),f=y),n.memoizedState={parent:c,cache:f},_o(n),xa(n,Ve,f)):((t.lanes&o)!==0&&(Ao(t,n),Dr(n,null,null,o),xr()),f=t.memoizedState,y=n.memoizedState,f.parent!==c?(f={parent:c,cache:c},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),xa(n,Ve,c)):(c=y.cache,xa(n,Ve,c),c!==f.cache&&vo(n,[Ve],o,!0))),We(t,n,n.pendingProps.children,o),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}var yo=be(null),cn=null,ca=null;function xa(t,n,o){he(yo,n._currentValue),n._currentValue=o}function da(t){t._currentValue=yo.current,Re(yo)}function bo(t,n,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),t===o)break;t=t.return}}function vo(t,n,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var y=f.dependencies;if(y!==null){var _=f.child;y=y.firstContext;e:for(;y!==null;){var w=y;y=f;for(var R=0;R<n.length;R++)if(w.context===n[R]){y.lanes|=o,w=y.alternate,w!==null&&(w.lanes|=o),bo(y.return,o,t),c||(_=null);break e}y=w.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=o,y=_.alternate,y!==null&&(y.lanes|=o),bo(_,o,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Cr(t,n,o,c){t=null;for(var f=n,y=!1;f!==null;){if(!y){if((f.flags&524288)!==0)y=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var w=f.type;vt(f.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(f===St.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Fr):t=[Fr])}f=f.return}t!==null&&vo(n,t,o,c),n.flags|=262144}function Ii(t){for(t=t.firstContext;t!==null;){if(!vt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function dn(t){cn=t,ca=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function nt(t){return wc(cn,t)}function Mi(t,n){return cn===null&&dn(t),wc(t,n)}function wc(t,n){var o=n._currentValue;if(n={context:n,memoizedValue:o,next:null},ca===null){if(t===null)throw Error(r(308));ca=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else ca=ca.next=n;return o}var Da=!1;function _o(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ao(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Na(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(t,n,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(ke&2)!==0){var f=c.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),c.pending=n,n=hi(t),ru(t,null,o),n}return fi(t,c,n,o),hi(t)}function Or(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194176)!==0)){var c=n.lanes;c&=t.pendingLanes,o|=c,n.lanes=o,Rt(t,o)}}function Eo(t,n){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?f=y=_:y=y.next=_,o=o.next}while(o!==null);y===null?f=y=n:y=y.next=n}else f=y=n;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}var wo=!1;function xr(){if(wo){var t=Un;if(t!==null)throw t}}function Dr(t,n,o,c){wo=!1;var f=t.updateQueue;Da=!1;var y=f.firstBaseUpdate,_=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var R=w,D=R.next;R.next=null,_===null?y=D:_.next=D,_=R;var q=t.alternate;q!==null&&(q=q.updateQueue,w=q.lastBaseUpdate,w!==_&&(w===null?q.firstBaseUpdate=D:w.next=D,q.lastBaseUpdate=R))}if(y!==null){var V=f.baseState;_=0,q=D=R=null,w=y;do{var L=w.lane&-536870913,B=L!==w.lane;if(B?(_e&L)===L:(c&L)===L){L!==0&&L===jn&&(wo=!0),q!==null&&(q=q.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var le=t,fe=w;L=n;var je=o;switch(fe.tag){case 1:if(le=fe.payload,typeof le=="function"){V=le.call(je,V,L);break e}V=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=fe.payload,L=typeof le=="function"?le.call(je,V,L):le,L==null)break e;V=ue({},V,L);break e;case 2:Da=!0}}L=w.callback,L!==null&&(t.flags|=64,B&&(t.flags|=8192),B=f.callbacks,B===null?f.callbacks=[L]:B.push(L))}else B={lane:L,tag:w.tag,payload:w.payload,callback:w.callback,next:null},q===null?(D=q=B,R=V):q=q.next=B,_|=L;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;B=w,w=B.next,B.next=null,f.lastBaseUpdate=B,f.shared.pending=null}}while(!0);q===null&&(R=V),f.baseState=R,f.firstBaseUpdate=D,f.lastBaseUpdate=q,y===null&&(f.shared.lanes=0),ja|=_,t.lanes=_,t.memoizedState=V}}function Sc(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Tc(t,n){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)Sc(o[t],n)}function Nr(t,n){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var y=o.create,_=o.inst;c=y(),_.destroy=c}o=o.next}while(o!==f)}}catch(w){Ce(n,n.return,w)}}function Ma(t,n,o){try{var c=n.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var y=f.next;c=y;do{if((c.tag&t)===t){var _=c.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,f=n;var R=o;try{w()}catch(D){Ce(f,R,D)}}}c=c.next}while(c!==y)}}catch(D){Ce(n,n.return,D)}}function Rc(t){var n=t.updateQueue;if(n!==null){var o=t.stateNode;try{Tc(n,o)}catch(c){Ce(t,t.return,c)}}}function Cc(t,n,o){o.props=un(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){Ce(t,n,c)}}function fn(t,n){try{var o=t.ref;if(o!==null){var c=t.stateNode;switch(t.tag){case 26:case 27:case 5:var f=c;break;default:f=c}typeof o=="function"?t.refCleanup=o(f):o.current=f}}catch(y){Ce(t,n,y)}}function _t(t,n){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){Ce(t,n,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Ce(t,n,f)}else o.current=null}function Oc(t){var n=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){Ce(t,t.return,f)}}function xc(t,n,o){try{var c=t.stateNode;Eh(c,t.type,o,n),c[dt]=n}catch(f){Ce(t,t.return,f)}}function Dc(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function So(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function To(t,n,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Gi));else if(c!==4&&c!==27&&(t=t.child,t!==null))for(To(t,n,o),t=t.sibling;t!==null;)To(t,n,o),t=t.sibling}function ki(t,n,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(c!==4&&c!==27&&(t=t.child,t!==null))for(ki(t,n,o),t=t.sibling;t!==null;)ki(t,n,o),t=t.sibling}var fa=!1,Le=!1,Ro=!1,Nc=typeof WeakSet=="function"?WeakSet:Set,Ye=null,Ic=!1;function Jf(t,n){if(t=t.containerInfo,el=es,t=Ql(t),Cs(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var _=0,w=-1,R=-1,D=0,q=0,V=t,L=null;t:for(;;){for(var B;V!==o||f!==0&&V.nodeType!==3||(w=_+f),V!==y||c!==0&&V.nodeType!==3||(R=_+c),V.nodeType===3&&(_+=V.nodeValue.length),(B=V.firstChild)!==null;)L=V,V=B;for(;;){if(V===t)break t;if(L===o&&++D===f&&(w=_),L===y&&++q===c&&(R=_),(B=V.nextSibling)!==null)break;V=L,L=V.parentNode}V=B}o=w===-1||R===-1?null:{start:w,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(tl={focusedElem:t,selectionRange:o},es=!1,Ye=n;Ye!==null;)if(n=Ye,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Ye=t;else for(;Ye!==null;){switch(n=Ye,y=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,o=n,f=y.memoizedProps,y=y.memoizedState,c=o.stateNode;try{var le=un(o.type,f,o.elementType===o.type);t=c.getSnapshotBeforeUpdate(le,y),c.__reactInternalSnapshotBeforeUpdate=t}catch(fe){Ce(o,o.return,fe)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,o=t.nodeType,o===9)il(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":il(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,Ye=t;break}Ye=n.return}return le=Ic,Ic=!1,le}function Mc(t,n,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:pa(t,o),c&4&&Nr(5,o);break;case 1:if(pa(t,o),c&4)if(t=o.stateNode,n===null)try{t.componentDidMount()}catch(w){Ce(o,o.return,w)}else{var f=un(o.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(f,n,t.__reactInternalSnapshotBeforeUpdate)}catch(w){Ce(o,o.return,w)}}c&64&&Rc(o),c&512&&fn(o,o.return);break;case 3:if(pa(t,o),c&64&&(c=o.updateQueue,c!==null)){if(t=null,o.child!==null)switch(o.child.tag){case 27:case 5:t=o.child.stateNode;break;case 1:t=o.child.stateNode}try{Tc(c,t)}catch(w){Ce(o,o.return,w)}}break;case 26:pa(t,o),c&512&&fn(o,o.return);break;case 27:case 5:pa(t,o),n===null&&c&4&&Oc(o),c&512&&fn(o,o.return);break;case 12:pa(t,o);break;case 13:pa(t,o),c&4&&Pc(t,o);break;case 22:if(f=o.memoizedState!==null||fa,!f){n=n!==null&&n.memoizedState!==null||Le;var y=fa,_=Le;fa=f,(Le=n)&&!_?ka(t,o,(o.subtreeFlags&8772)!==0):pa(t,o),fa=y,Le=_}c&512&&(o.memoizedProps.mode==="manual"?fn(o,o.return):_t(o,o.return));break;default:pa(t,o)}}function kc(t){var n=t.alternate;n!==null&&(t.alternate=null,kc(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ds(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $e=null,At=!1;function ha(t,n,o){for(o=o.child;o!==null;)Lc(t,n,o),o=o.sibling}function Lc(t,n,o){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Ka,o)}catch{}switch(o.tag){case 26:Le||_t(o,n),ha(t,n,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Le||_t(o,n);var c=$e,f=At;for($e=o.stateNode,ha(t,n,o),o=o.stateNode,n=o.attributes;n.length;)o.removeAttributeNode(n[0]);ds(o),$e=c,At=f;break;case 5:Le||_t(o,n);case 6:f=$e;var y=At;if($e=null,ha(t,n,o),$e=f,At=y,$e!==null)if(At)try{t=$e,c=o.stateNode,t.nodeType===8?t.parentNode.removeChild(c):t.removeChild(c)}catch(_){Ce(o,n,_)}else try{$e.removeChild(o.stateNode)}catch(_){Ce(o,n,_)}break;case 18:$e!==null&&(At?(n=$e,o=o.stateNode,n.nodeType===8?rl(n.parentNode,o):n.nodeType===1&&rl(n,o),Qr(n)):rl($e,o.stateNode));break;case 4:c=$e,f=At,$e=o.stateNode.containerInfo,At=!0,ha(t,n,o),$e=c,At=f;break;case 0:case 11:case 14:case 15:Le||Ma(2,o,n),Le||Ma(4,o,n),ha(t,n,o);break;case 1:Le||(_t(o,n),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Cc(o,n,c)),ha(t,n,o);break;case 21:ha(t,n,o);break;case 22:Le||_t(o,n),Le=(c=Le)||o.memoizedState!==null,ha(t,n,o),Le=c;break;default:ha(t,n,o)}}function Pc(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Qr(t)}catch(o){Ce(n,n.return,o)}}function Wf(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Nc),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Nc),n;default:throw Error(r(435,t.tag))}}function Co(t,n){var o=Wf(t);n.forEach(function(c){var f=fh.bind(null,t,c);o.has(c)||(o.add(c),c.then(f,f))})}function kt(t,n){var o=n.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],y=t,_=n,w=_;e:for(;w!==null;){switch(w.tag){case 27:case 5:$e=w.stateNode,At=!1;break e;case 3:$e=w.stateNode.containerInfo,At=!0;break e;case 4:$e=w.stateNode.containerInfo,At=!0;break e}w=w.return}if($e===null)throw Error(r(160));Lc(y,_,f),$e=null,At=!1,y=f.alternate,y!==null&&(y.return=null),f.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)jc(n,t),n=n.sibling}var $t=null;function jc(t,n){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:kt(n,t),Lt(t),c&4&&(Ma(3,t,t.return),Nr(3,t),Ma(5,t,t.return));break;case 1:kt(n,t),Lt(t),c&512&&(Le||o===null||_t(o,o.return)),c&64&&fa&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=$t;if(kt(n,t),Lt(t),c&512&&(Le||o===null||_t(o,o.return)),c&4){var y=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":y=f.getElementsByTagName("title")[0],(!y||y[nr]||y[qe]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=f.createElement(c),f.head.insertBefore(y,f.querySelector("head > title"))),et(y,c,o),y[qe]=t,Ke(y),c=y;break e;case"link":var _=Od("link","href",f).get(c+(o.href||""));if(_){for(var w=0;w<_.length;w++)if(y=_[w],y.getAttribute("href")===(o.href==null?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(w,1);break t}}y=f.createElement(c),et(y,c,o),f.head.appendChild(y);break;case"meta":if(_=Od("meta","content",f).get(c+(o.content||""))){for(w=0;w<_.length;w++)if(y=_[w],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(w,1);break t}}y=f.createElement(c),et(y,c,o),f.head.appendChild(y);break;default:throw Error(r(468,c))}y[qe]=t,Ke(y),c=y}t.stateNode=c}else xd(f,t.type,t.stateNode);else t.stateNode=Cd(f,c,t.memoizedProps);else y!==c?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,c===null?xd(f,t.type,t.stateNode):Cd(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&xc(t,t.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&t.alternate===null){f=t.stateNode,y=t.memoizedProps;try{for(var R=f.firstChild;R;){var D=R.nextSibling,q=R.nodeName;R[nr]||q==="HEAD"||q==="BODY"||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&R.rel.toLowerCase()==="stylesheet"||f.removeChild(R),R=D}for(var V=t.type,L=f.attributes;L.length;)f.removeAttributeNode(L[0]);et(f,V,y),f[qe]=t,f[dt]=y}catch(le){Ce(t,t.return,le)}}case 5:if(kt(n,t),Lt(t),c&512&&(Le||o===null||_t(o,o.return)),t.flags&32){f=t.stateNode;try{Tn(f,"")}catch(le){Ce(t,t.return,le)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,xc(t,f,o!==null?o.memoizedProps:f)),c&1024&&(Ro=!0);break;case 6:if(kt(n,t),Lt(t),c&4){if(t.stateNode===null)throw Error(r(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(le){Ce(t,t.return,le)}}break;case 3:if(Xi=null,f=$t,$t=Qi(n.containerInfo),kt(n,t),$t=f,Lt(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Qr(n.containerInfo)}catch(le){Ce(t,t.return,le)}Ro&&(Ro=!1,Uc(t));break;case 4:c=$t,$t=Qi(t.stateNode.containerInfo),kt(n,t),Lt(t),$t=c;break;case 12:kt(n,t),Lt(t);break;case 13:kt(n,t),Lt(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Po=gt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Co(t,c)));break;case 22:if(c&512&&(Le||o===null||_t(o,o.return)),R=t.memoizedState!==null,D=o!==null&&o.memoizedState!==null,q=fa,V=Le,fa=q||R,Le=V||D,kt(n,t),Le=V,fa=q,Lt(t),n=t.stateNode,n._current=t,n._visibility&=-3,n._visibility|=n._pendingVisibility&2,c&8192&&(n._visibility=R?n._visibility&-2:n._visibility|1,R&&(n=fa||Le,o===null||D||n||zn(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(o=null,n=t;;){if(n.tag===5||n.tag===26||n.tag===27){if(o===null){D=o=n;try{if(f=D.stateNode,R)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{_=D.stateNode,w=D.memoizedProps.style;var B=w!=null&&w.hasOwnProperty("display")?w.display:null;_.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(le){Ce(D,D.return,le)}}}else if(n.tag===6){if(o===null){D=n;try{D.stateNode.nodeValue=R?"":D.memoizedProps}catch(le){Ce(D,D.return,le)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;o===n&&(o=null),n=n.return}o===n&&(o=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Co(t,o))));break;case 19:kt(n,t),Lt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Co(t,c)));break;case 21:break;default:kt(n,t),Lt(t)}}function Lt(t){var n=t.flags;if(n&2){try{if(t.tag!==27){e:{for(var o=t.return;o!==null;){if(Dc(o)){var c=o;break e}o=o.return}throw Error(r(160))}switch(c.tag){case 27:var f=c.stateNode,y=So(t);ki(t,y,f);break;case 5:var _=c.stateNode;c.flags&32&&(Tn(_,""),c.flags&=-33);var w=So(t);ki(t,w,_);break;case 3:case 4:var R=c.stateNode.containerInfo,D=So(t);To(t,D,R);break;default:throw Error(r(161))}}}catch(q){Ce(t,t.return,q)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Uc(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Uc(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function pa(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Mc(t,n.alternate,n),n=n.sibling}function zn(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Ma(4,n,n.return),zn(n);break;case 1:_t(n,n.return);var o=n.stateNode;typeof o.componentWillUnmount=="function"&&Cc(n,n.return,o),zn(n);break;case 26:case 27:case 5:_t(n,n.return),zn(n);break;case 22:_t(n,n.return),n.memoizedState===null&&zn(n);break;default:zn(n)}t=t.sibling}}function ka(t,n,o){for(o=o&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,f=t,y=n,_=y.flags;switch(y.tag){case 0:case 11:case 15:ka(f,y,o),Nr(4,y);break;case 1:if(ka(f,y,o),c=y,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(D){Ce(c,c.return,D)}if(c=y,f=c.updateQueue,f!==null){var w=c.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)Sc(R[f],w)}catch(D){Ce(c,c.return,D)}}o&&_&64&&Rc(y),fn(y,y.return);break;case 26:case 27:case 5:ka(f,y,o),o&&c===null&&_&4&&Oc(y),fn(y,y.return);break;case 12:ka(f,y,o);break;case 13:ka(f,y,o),o&&_&4&&Pc(f,y);break;case 22:y.memoizedState===null&&ka(f,y,o),fn(y,y.return);break;default:ka(f,y,o)}n=n.sibling}}function Oo(t,n){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&Ar(o))}function xo(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ar(t))}function La(t,n,o,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Zc(t,n,o,c),n=n.sibling}function Zc(t,n,o,c){var f=n.flags;switch(n.tag){case 0:case 11:case 15:La(t,n,o,c),f&2048&&Nr(9,n);break;case 3:La(t,n,o,c),f&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ar(t)));break;case 12:if(f&2048){La(t,n,o,c),t=n.stateNode;try{var y=n.memoizedProps,_=y.id,w=y.onPostCommit;typeof w=="function"&&w(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){Ce(n,n.return,R)}}else La(t,n,o,c);break;case 23:break;case 22:y=n.stateNode,n.memoizedState!==null?y._visibility&4?La(t,n,o,c):Ir(t,n):y._visibility&4?La(t,n,o,c):(y._visibility|=4,Hn(t,n,o,c,(n.subtreeFlags&10256)!==0)),f&2048&&Oo(n.alternate,n);break;case 24:La(t,n,o,c),f&2048&&xo(n.alternate,n);break;default:La(t,n,o,c)}}function Hn(t,n,o,c,f){for(f=f&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var y=t,_=n,w=o,R=c,D=_.flags;switch(_.tag){case 0:case 11:case 15:Hn(y,_,w,R,f),Nr(8,_);break;case 23:break;case 22:var q=_.stateNode;_.memoizedState!==null?q._visibility&4?Hn(y,_,w,R,f):Ir(y,_):(q._visibility|=4,Hn(y,_,w,R,f)),f&&D&2048&&Oo(_.alternate,_);break;case 24:Hn(y,_,w,R,f),f&&D&2048&&xo(_.alternate,_);break;default:Hn(y,_,w,R,f)}n=n.sibling}}function Ir(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var o=t,c=n,f=c.flags;switch(c.tag){case 22:Ir(o,c),f&2048&&Oo(c.alternate,c);break;case 24:Ir(o,c),f&2048&&xo(c.alternate,c);break;default:Ir(o,c)}n=n.sibling}}var Mr=8192;function $n(t){if(t.subtreeFlags&Mr)for(t=t.child;t!==null;)Bc(t),t=t.sibling}function Bc(t){switch(t.tag){case 26:$n(t),t.flags&Mr&&t.memoizedState!==null&&qh($t,t.memoizedState,t.memoizedProps);break;case 5:$n(t);break;case 3:case 4:var n=$t;$t=Qi(t.stateNode.containerInfo),$n(t),$t=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Mr,Mr=16777216,$n(t),Mr=n):$n(t));break;default:$n(t)}}function qc(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function kr(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var c=n[o];Ye=c,Hc(c,t)}qc(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zc(t),t=t.sibling}function zc(t){switch(t.tag){case 0:case 11:case 15:kr(t),t.flags&2048&&Ma(9,t,t.return);break;case 3:kr(t);break;case 12:kr(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&4&&(t.return===null||t.return.tag!==13)?(n._visibility&=-5,Li(t)):kr(t);break;default:kr(t)}}function Li(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var c=n[o];Ye=c,Hc(c,t)}qc(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Ma(8,n,n.return),Li(n);break;case 22:o=n.stateNode,o._visibility&4&&(o._visibility&=-5,Li(n));break;default:Li(n)}t=t.sibling}}function Hc(t,n){for(;Ye!==null;){var o=Ye;switch(o.tag){case 0:case 11:case 15:Ma(8,o,n);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ar(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Ye=c;else e:for(o=t;Ye!==null;){c=Ye;var f=c.sibling,y=c.return;if(kc(c),c===o){Ye=null;break e}if(f!==null){f.return=y,Ye=f;break e}Ye=y}}}function eh(t,n,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,n,o,c){return new eh(t,n,o,c)}function Do(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pa(t,n){var o=t.alternate;return o===null?(o=Pt(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&31457280,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function $c(t,n){t.flags&=31457282;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,n=o.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Pi(t,n,o,c,f,y){var _=0;if(c=t,typeof t=="function")Do(t)&&(_=1);else if(typeof t=="string")_=Zh(t,o,tt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case p:return hn(o.children,f,y,n);case m:_=8,f|=24;break;case b:return t=Pt(12,o,n,f|2),t.elementType=b,t.lanes=y,t;case T:return t=Pt(13,o,n,f),t.elementType=T,t.lanes=y,t;case O:return t=Pt(19,o,n,f),t.elementType=O,t.lanes=y,t;case k:return Fc(o,f,y,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case v:case E:_=10;break e;case A:_=9;break e;case S:_=11;break e;case N:_=14;break e;case P:_=16,c=null;break e}_=29,o=Error(r(130,t===null?"null":typeof t,"")),c=null}return n=Pt(_,o,n,f),n.elementType=t,n.type=c,n.lanes=y,n}function hn(t,n,o,c){return t=Pt(7,t,c,n),t.lanes=o,t}function Fc(t,n,o,c){t=Pt(22,t,c,n),t.elementType=k,t.lanes=o;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=f._current;if(y===null)throw Error(r(456));if((f._pendingVisibility&2)===0){var _=Sa(y,2);_!==null&&(f._pendingVisibility|=2,ot(_,y,2))}},attach:function(){var y=f._current;if(y===null)throw Error(r(456));if((f._pendingVisibility&2)!==0){var _=Sa(y,2);_!==null&&(f._pendingVisibility&=-3,ot(_,y,2))}}};return t.stateNode=f,t}function No(t,n,o){return t=Pt(6,t,null,n),t.lanes=o,t}function Io(t,n,o){return n=Pt(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function ma(t){t.flags|=4}function Vc(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Dd(n)){if(n=Mt.current,n!==null&&((_e&4194176)===_e?Xt!==null:(_e&62914560)!==_e&&(_e&536870912)===0||n!==Xt))throw br=Ps,uu;t.flags|=8192}}function ji(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?yt():536870912,t.lanes|=n,Vn|=n)}function Lr(t,n){if(!Ae)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Me(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(n)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&31457280,c|=f.flags&31457280,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,n}function th(t,n,o){var c=n.pendingProps;switch(ks(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(n),null;case 1:return Me(n),null;case 3:return o=n.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),da(Ve),mt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(pr(n)?ma(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ht!==null&&(Bo(Ht),Ht=null))),Me(n),null;case 26:return o=n.memoizedState,t===null?(ma(n),o!==null?(Me(n),Vc(n,o)):(Me(n),n.flags&=-16777217)):o?o!==t.memoizedState?(ma(n),Me(n),Vc(n,o)):(Me(n),n.flags&=-16777217):(t.memoizedProps!==c&&ma(n),Me(n),n.flags&=-16777217),null;case 27:Fa(n),o=Zt.current;var f=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==c&&ma(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return Me(n),null}t=tt.current,pr(n)?ou(n):(t=Ed(f,c,o),n.stateNode=t,ma(n))}return Me(n),null;case 5:if(Fa(n),o=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==c&&ma(n);else{if(!c){if(n.stateNode===null)throw Error(r(166));return Me(n),null}if(t=tt.current,pr(n))ou(n);else{switch(f=Ki(Zt.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?t.multiple=!0:c.size&&(t.size=c.size);break;default:t=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}t[qe]=n,t[dt]=c;e:for(f=n.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}n.stateNode=t;e:switch(et(t,o,c),o){case"button":case"input":case"select":case"textarea":t=!!c.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ma(n)}}return Me(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==c&&ma(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(r(166));if(t=Zt.current,pr(n)){if(t=n.stateNode,o=n.memoizedProps,c=null,f=st,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[qe]=n,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||gd(t.nodeValue,o)),t||an(n)}else t=Ki(t).createTextNode(c),t[qe]=n,n.stateNode=t}return Me(n),null;case 13:if(c=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=pr(n),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[qe]=n}else mr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Me(n),f=!1}else Ht!==null&&(Bo(Ht),Ht=null),f=!0;if(!f)return n.flags&256?(oa(n),n):(oa(n),null)}if(oa(n),(n.flags&128)!==0)return n.lanes=o,n;if(o=c!==null,t=t!==null&&t.memoizedState!==null,o){c=n.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==f&&(c.flags|=2048)}return o!==t&&o&&(n.child.flags|=8192),ji(n,n.updateQueue),Me(n),null;case 4:return mt(),t===null&&Xo(n.stateNode.containerInfo),Me(n),null;case 10:return da(n.type),Me(n),null;case 19:if(Re(Fe),f=n.memoizedState,f===null)return Me(n),null;if(c=(n.flags&128)!==0,y=f.rendering,y===null)if(c)Lr(f,!1);else{if(Pe!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(y=_i(t),y!==null){for(n.flags|=128,Lr(f,!1),t=y.updateQueue,n.updateQueue=t,ji(n,t),n.subtreeFlags=0,t=o,o=n.child;o!==null;)$c(o,t),o=o.sibling;return he(Fe,Fe.current&1|2),n.child}t=t.sibling}f.tail!==null&&gt()>Ui&&(n.flags|=128,c=!0,Lr(f,!1),n.lanes=4194304)}else{if(!c)if(t=_i(y),t!==null){if(n.flags|=128,c=!0,t=t.updateQueue,n.updateQueue=t,ji(n,t),Lr(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Ae)return Me(n),null}else 2*gt()-f.renderingStartTime>Ui&&o!==536870912&&(n.flags|=128,c=!0,Lr(f,!1),n.lanes=4194304);f.isBackwards?(y.sibling=n.child,n.child=y):(t=f.last,t!==null?t.sibling=y:n.child=y,f.last=y)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=gt(),n.sibling=null,t=Fe.current,he(Fe,c?t&1|2:t&1),n):(Me(n),null);case 22:case 23:return oa(n),Us(),c=n.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(o&536870912)!==0&&(n.flags&128)===0&&(Me(n),n.subtreeFlags&6&&(n.flags|=8192)):Me(n),o=n.updateQueue,o!==null&&ji(n,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==o&&(n.flags|=2048),t!==null&&Re(rn),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),da(Ve),Me(n),null;case 25:return null}throw Error(r(156,n.tag))}function ah(t,n){switch(ks(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return da(Ve),mt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Fa(n),null;case 13:if(oa(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));mr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Re(Fe),null;case 4:return mt(),null;case 10:return da(n.type),null;case 22:case 23:return oa(n),Us(),t!==null&&Re(rn),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return da(Ve),null;case 25:return null;default:return null}}function Gc(t,n){switch(ks(n),n.tag){case 3:da(Ve),mt();break;case 26:case 27:case 5:Fa(n);break;case 4:mt();break;case 13:oa(n);break;case 19:Re(Fe);break;case 10:da(n.type);break;case 22:case 23:oa(n),Us(),t!==null&&Re(rn);break;case 24:da(Ve)}}var nh={getCacheForType:function(t){var n=nt(Ve),o=n.data.get(t);return o===void 0&&(o=t(),n.data.set(t,o)),o}},rh=typeof WeakMap=="function"?WeakMap:Map,ke=0,xe=null,ye=null,_e=0,De=0,Et=null,ga=!1,Fn=!1,Mo=!1,ya=0,Pe=0,ja=0,pn=0,ko=0,jt=0,Vn=0,Pr=null,Wt=null,Lo=!1,Po=0,Ui=1/0,Zi=null,Ua=null,Bi=!1,mn=null,jr=0,jo=0,Uo=null,Ur=0,Zo=null;function wt(){if((ke&2)!==0&&_e!==0)return _e&-_e;if(ne.T!==null){var t=jn;return t!==0?t:Go()}return Ea()}function Kc(){jt===0&&(jt=(_e&536870912)===0||Ae?at():536870912);var t=Mt.current;return t!==null&&(t.flags|=32),jt}function ot(t,n,o){(t===xe&&De===2||t.cancelPendingCommit!==null)&&(Gn(t,0),ba(t,_e,jt,!1)),Ie(t,o),((ke&2)===0||t!==xe)&&(t===xe&&((ke&2)===0&&(pn|=o),Pe===4&&ba(t,_e,jt,!1)),ea(t))}function Qc(t,n,o){if((ke&6)!==0)throw Error(r(327));var c=!o&&(n&60)===0&&(n&t.expiredLanes)===0||lt(t,n),f=c?oh(t,n):Ho(t,n,!0),y=c;do{if(f===0){Fn&&!c&&ba(t,n,0,!1);break}else if(f===6)ba(t,n,0,!ga);else{if(o=t.current.alternate,y&&!ih(o)){f=Ho(t,n,!1),y=!1;continue}if(f===2){if(y=n,t.errorRecoveryDisabledLanes&y)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var w=t;f=Pr;var R=w.current.memoizedState.isDehydrated;if(R&&(Gn(w,_).flags|=256),_=Ho(w,_,!1),_!==2){if(Mo&&!R){w.errorRecoveryDisabledLanes|=y,pn|=y,f=4;break e}y=Wt,Wt=f,y!==null&&Bo(y)}f=_}if(y=!1,f!==2)continue}}if(f===1){Gn(t,0),ba(t,n,0,!0);break}e:{switch(c=t,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194176)===n){ba(c,n,jt,!ga);break e}break;case 2:Wt=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=o,c.finishedLanes=n,(n&62914560)===n&&(y=Po+300-gt(),10<y)){if(ba(c,n,jt,!ga),Ge(c,0)!==0)break e;c.timeoutHandle=vd(Yc.bind(null,c,o,Wt,Zi,Lo,n,jt,pn,Vn,ga,2,-0,0),y);break e}Yc(c,o,Wt,Zi,Lo,n,jt,pn,Vn,ga,0,-0,0)}}break}while(!0);ea(t)}function Bo(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function Yc(t,n,o,c,f,y,_,w,R,D,q,V,L){var B=n.subtreeFlags;if((B&8192||(B&16785408)===16785408)&&($r={stylesheets:null,count:0,unsuspend:Bh},Bc(n),n=zh(),n!==null)){t.cancelPendingCommit=n(nd.bind(null,t,o,c,f,_,w,R,1,V,L)),ba(t,y,_,!D);return}nd(t,o,c,f,_,w,R,q,V,L)}function ih(t){for(var n=t;;){var o=n.tag;if((o===0||o===11||o===15)&&n.flags&16384&&(o=n.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],y=f.getSnapshot;f=f.value;try{if(!vt(y(),f))return!1}catch{return!1}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ba(t,n,o,c){n&=~ko,n&=~pn,t.suspendedLanes|=n,t.pingedLanes&=~n,c&&(t.warmLanes|=n),c=t.expirationTimes;for(var f=n;0<f;){var y=31-it(f),_=1<<y;c[y]=-1,f&=~_}o!==0&&bt(t,o,n)}function qi(){return(ke&6)===0?(Zr(0),!1):!0}function qo(){if(ye!==null){if(De===0)var t=ye.return;else t=ye,ca=cn=null,Vs(t),Ln=null,vr=0,t=ye;for(;t!==null;)Gc(t.alternate,t),t=t.return;ye=null}}function Gn(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,Sh(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),qo(),xe=t,ye=o=Pa(t.current,null),_e=n,De=0,Et=null,ga=!1,Fn=lt(t,n),Mo=!1,Vn=jt=ko=pn=ja=Pe=0,Wt=Pr=null,Lo=!1,(n&8)!==0&&(n|=n&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=n;0<c;){var f=31-it(c),y=1<<f;n|=t[f],c&=~y}return ya=n,di(),o}function Xc(t,n){pe=null,ne.H=Jt,n===yr?(n=fu(),De=3):n===uu?(n=fu(),De=4):De=n===cc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Et=n,ye===null&&(Pe=1,Ni(t,Dt(n,t.current)))}function Jc(){var t=ne.H;return ne.H=Jt,t===null?Jt:t}function Wc(){var t=ne.A;return ne.A=nh,t}function zo(){Pe=4,ga||(_e&4194176)!==_e&&Mt.current!==null||(Fn=!0),(ja&134217727)===0&&(pn&134217727)===0||xe===null||ba(xe,_e,jt,!1)}function Ho(t,n,o){var c=ke;ke|=2;var f=Jc(),y=Wc();(xe!==t||_e!==n)&&(Zi=null,Gn(t,n)),n=!1;var _=Pe;e:do try{if(De!==0&&ye!==null){var w=ye,R=Et;switch(De){case 8:qo(),_=6;break e;case 3:case 2:case 6:Mt.current===null&&(n=!0);var D=De;if(De=0,Et=null,Kn(t,w,R,D),o&&Fn){_=0;break e}break;default:D=De,De=0,Et=null,Kn(t,w,R,D)}}sh(),_=Pe;break}catch(q){Xc(t,q)}while(!0);return n&&t.shellSuspendCounter++,ca=cn=null,ke=c,ne.H=f,ne.A=y,ye===null&&(xe=null,_e=0,di()),_}function sh(){for(;ye!==null;)ed(ye)}function oh(t,n){var o=ke;ke|=2;var c=Jc(),f=Wc();xe!==t||_e!==n?(Zi=null,Ui=gt()+500,Gn(t,n)):Fn=lt(t,n);e:do try{if(De!==0&&ye!==null){n=ye;var y=Et;t:switch(De){case 1:De=0,Et=null,Kn(t,n,y,1);break;case 2:if(cu(y)){De=0,Et=null,td(n);break}n=function(){De===2&&xe===t&&(De=7),ea(t)},y.then(n,n);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:cu(y)?(De=0,Et=null,td(n)):(De=0,Et=null,Kn(t,n,y,7));break;case 5:var _=null;switch(ye.tag){case 26:_=ye.memoizedState;case 5:case 27:var w=ye;if(!_||Dd(_)){De=0,Et=null;var R=w.sibling;if(R!==null)ye=R;else{var D=w.return;D!==null?(ye=D,zi(D)):ye=null}break t}}De=0,Et=null,Kn(t,n,y,5);break;case 6:De=0,Et=null,Kn(t,n,y,6);break;case 8:qo(),Pe=6;break e;default:throw Error(r(462))}}lh();break}catch(q){Xc(t,q)}while(!0);return ca=cn=null,ne.H=c,ne.A=f,ke=o,ye!==null?0:(xe=null,_e=0,di(),Pe)}function lh(){for(;ye!==null&&!bn();)ed(ye)}function ed(t){var n=Ec(t.alternate,t,ya);t.memoizedProps=t.pendingProps,n===null?zi(t):ye=n}function td(t){var n=t,o=n.alternate;switch(n.tag){case 15:case 0:n=gc(o,n,n.pendingProps,n.type,void 0,_e);break;case 11:n=gc(o,n,n.pendingProps,n.type.render,n.ref,_e);break;case 5:Vs(n);default:Gc(o,n),n=ye=$c(n,ya),n=Ec(o,n,ya)}t.memoizedProps=t.pendingProps,n===null?zi(t):ye=n}function Kn(t,n,o,c){ca=cn=null,Vs(n),Ln=null,vr=0;var f=n.return;try{if(Yf(t,f,n,o,_e)){Pe=1,Ni(t,Dt(o,t.current)),ye=null;return}}catch(y){if(f!==null)throw ye=f,y;Pe=1,Ni(t,Dt(o,t.current)),ye=null;return}n.flags&32768?(Ae||c===1?t=!0:Fn||(_e&536870912)!==0?t=!1:(ga=t=!0,(c===2||c===3||c===6)&&(c=Mt.current,c!==null&&c.tag===13&&(c.flags|=16384))),ad(n,t)):zi(n)}function zi(t){var n=t;do{if((n.flags&32768)!==0){ad(n,ga);return}t=n.return;var o=th(n.alternate,n,ya);if(o!==null){ye=o;return}if(n=n.sibling,n!==null){ye=n;return}ye=n=t}while(n!==null);Pe===0&&(Pe=5)}function ad(t,n){do{var o=ah(t.alternate,t);if(o!==null){o.flags&=32767,ye=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!n&&(t=t.sibling,t!==null)){ye=t;return}ye=t=o}while(t!==null);Pe=6,ye=null}function nd(t,n,o,c,f,y,_,w,R,D){var q=ne.T,V=J.p;try{J.p=2,ne.T=null,uh(t,n,o,c,V,f,y,_,w,R,D)}finally{ne.T=q,J.p=V}}function uh(t,n,o,c,f,y,_,w){do Qn();while(mn!==null);if((ke&6)!==0)throw Error(r(327));var R=t.finishedWork;if(c=t.finishedLanes,R===null)return null;if(t.finishedWork=null,t.finishedLanes=0,R===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var D=R.lanes|R.childLanes;if(D|=Ns,Kt(t,c,D,y,_,w),t===xe&&(ye=xe=null,_e=0),(R.subtreeFlags&10256)===0&&(R.flags&10256)===0||Bi||(Bi=!0,jo=D,Uo=o,hh(Bt,function(){return Qn(),null})),o=(R.flags&15990)!==0,(R.subtreeFlags&15990)!==0||o?(o=ne.T,ne.T=null,y=J.p,J.p=2,_=ke,ke|=4,Jf(t,R),jc(R,t),Mf(tl,t.containerInfo),es=!!el,tl=el=null,t.current=R,Mc(t,R.alternate,R),Yr(),ke=_,J.p=y,ne.T=o):t.current=R,Bi?(Bi=!1,mn=t,jr=c):rd(t,D),D=t.pendingLanes,D===0&&(Ua=null),ar(R.stateNode),ea(t),n!==null)for(f=t.onRecoverableError,R=0;R<n.length;R++)D=n[R],f(D.value,{componentStack:D.stack});return(jr&3)!==0&&Qn(),D=t.pendingLanes,(c&4194218)!==0&&(D&42)!==0?t===Zo?Ur++:(Ur=0,Zo=t):Ur=0,Zr(0),null}function rd(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ar(n)))}function Qn(){if(mn!==null){var t=mn,n=jo;jo=0;var o=Aa(jr),c=ne.T,f=J.p;try{if(J.p=32>o?32:o,ne.T=null,mn===null)var y=!1;else{o=Uo,Uo=null;var _=mn,w=jr;if(mn=null,jr=0,(ke&6)!==0)throw Error(r(331));var R=ke;if(ke|=4,zc(_.current),Zc(_,_.current,w,o),ke=R,Zr(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Ka,_)}catch{}y=!0}return y}finally{J.p=f,ne.T=c,rd(t,n)}}return!1}function id(t,n,o){n=Dt(o,n),n=so(t.stateNode,n,2),t=Ia(t,n,2),t!==null&&(Ie(t,2),ea(t))}function Ce(t,n,o){if(t.tag===3)id(t,t,o);else for(;n!==null;){if(n.tag===3){id(n,t,o);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ua===null||!Ua.has(c))){t=Dt(o,t),o=lc(2),c=Ia(n,o,2),c!==null&&(uc(o,c,n,t),Ie(c,2),ea(c));break}}n=n.return}}function $o(t,n,o){var c=t.pingCache;if(c===null){c=t.pingCache=new rh;var f=new Set;c.set(n,f)}else f=c.get(n),f===void 0&&(f=new Set,c.set(n,f));f.has(o)||(Mo=!0,f.add(o),t=ch.bind(null,t,n,o),n.then(t,t))}function ch(t,n,o){var c=t.pingCache;c!==null&&c.delete(n),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,xe===t&&(_e&o)===o&&(Pe===4||Pe===3&&(_e&62914560)===_e&&300>gt()-Po?(ke&2)===0&&Gn(t,0):ko|=o,Vn===_e&&(Vn=0)),ea(t)}function sd(t,n){n===0&&(n=yt()),t=Sa(t,n),t!==null&&(Ie(t,n),ea(t))}function dh(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),sd(t,o)}function fh(t,n){var o=0;switch(t.tag){case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(n),sd(t,o)}function hh(t,n){return Tt(t,n)}var Hi=null,Yn=null,Fo=!1,$i=!1,Vo=!1,gn=0;function ea(t){t!==Yn&&t.next===null&&(Yn===null?Hi=Yn=t:Yn=Yn.next=t),$i=!0,Fo||(Fo=!0,mh(ph))}function Zr(t,n){if(!Vo&&$i){Vo=!0;do for(var o=!1,c=Hi;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var y=0;else{var _=c.suspendedLanes,w=c.pingedLanes;y=(1<<31-it(42|t)+1)-1,y&=f&~(_&~w),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(o=!0,ud(c,y))}else y=_e,y=Ge(c,c===xe?y:0),(y&3)===0||lt(c,y)||(o=!0,ud(c,y));c=c.next}while(o);Vo=!1}}function ph(){$i=Fo=!1;var t=0;gn!==0&&(wh()&&(t=gn),gn=0);for(var n=gt(),o=null,c=Hi;c!==null;){var f=c.next,y=od(c,n);y===0?(c.next=null,o===null?Hi=f:o.next=f,f===null&&(Yn=o)):(o=c,(t!==0||(y&3)!==0)&&($i=!0)),c=f}Zr(t)}function od(t,n){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var _=31-it(y),w=1<<_,R=f[_];R===-1?((w&o)===0||(w&c)!==0)&&(f[_]=ut(w,n)):R<=n&&(t.expiredLanes|=w),y&=~w}if(n=xe,o=_e,o=Ge(t,t===n?o:0),c=t.callbackNode,o===0||t===n&&De===2||t.cancelPendingCommit!==null)return c!==null&&c!==null&&_a(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||lt(t,o)){if(n=o&-o,n===t.callbackPriority)return n;switch(c!==null&&_a(c),Aa(o)){case 2:case 8:o=aa;break;case 32:o=Bt;break;case 268435456:o=tr;break;default:o=Bt}return c=ld.bind(null,t),o=Tt(o,c),t.callbackPriority=n,t.callbackNode=o,n}return c!==null&&c!==null&&_a(c),t.callbackPriority=2,t.callbackNode=null,2}function ld(t,n){var o=t.callbackNode;if(Qn()&&t.callbackNode!==o)return null;var c=_e;return c=Ge(t,t===xe?c:0),c===0?null:(Qc(t,c,n),od(t,gt()),t.callbackNode!=null&&t.callbackNode===o?ld.bind(null,t):null)}function ud(t,n){if(Qn())return null;Qc(t,n,!0)}function mh(t){Th(function(){(ke&6)!==0?Tt(Xr,t):t()})}function Go(){return gn===0&&(gn=at()),gn}function cd(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ri(""+t)}function dd(t,n){var o=n.ownerDocument.createElement("input");return o.name=n.name,o.value=n.value,t.id&&o.setAttribute("form",t.id),n.parentNode.insertBefore(o,n),t=new FormData(t),o.parentNode.removeChild(o),t}function gh(t,n,o,c,f){if(n==="submit"&&o&&o.stateNode===f){var y=cd((f[dt]||null).action),_=c.submitter;_&&(n=(n=_[dt]||null)?cd(n.formAction):_.getAttribute("formAction"),n!==null&&(y=n,_=null));var w=new li("action","action",null,c,f);t.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(gn!==0){var R=_?dd(f,_):new FormData(f);to(o,{pending:!0,data:R,method:f.method,action:y},null,R)}}else typeof y=="function"&&(w.preventDefault(),R=_?dd(f,_):new FormData(f),to(o,{pending:!0,data:R,method:f.method,action:y},y,R))},currentTarget:f}]})}}for(var Ko=0;Ko<nu.length;Ko++){var Qo=nu[Ko],yh=Qo.toLowerCase(),bh=Qo[0].toUpperCase()+Qo.slice(1);zt(yh,"on"+bh)}zt(Jl,"onAnimationEnd"),zt(Wl,"onAnimationIteration"),zt(eu,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(Lf,"onTransitionRun"),zt(Pf,"onTransitionStart"),zt(jf,"onTransitionCancel"),zt(tu,"onTransitionEnd"),wn("onMouseEnter",["mouseout","mouseover"]),wn("onMouseLeave",["mouseout","mouseover"]),wn("onPointerEnter",["pointerout","pointerover"]),wn("onPointerLeave",["pointerout","pointerover"]),Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Br));function fd(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var y=void 0;if(n)for(var _=c.length-1;0<=_;_--){var w=c[_],R=w.instance,D=w.currentTarget;if(w=w.listener,R!==y&&f.isPropagationStopped())break e;y=w,f.currentTarget=D;try{y(f)}catch(q){Di(q)}f.currentTarget=null,y=R}else for(_=0;_<c.length;_++){if(w=c[_],R=w.instance,D=w.currentTarget,w=w.listener,R!==y&&f.isPropagationStopped())break e;y=w,f.currentTarget=D;try{y(f)}catch(q){Di(q)}f.currentTarget=null,y=R}}}}function ve(t,n){var o=n[cs];o===void 0&&(o=n[cs]=new Set);var c=t+"__bubble";o.has(c)||(hd(n,t,2,!1),o.add(c))}function Yo(t,n,o){var c=0;n&&(c|=4),hd(o,t,c,n)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function Xo(t){if(!t[Fi]){t[Fi]=!0,gl.forEach(function(o){o!=="selectionchange"&&(vh.has(o)||Yo(o,!1,t),Yo(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Fi]||(n[Fi]=!0,Yo("selectionchange",!1,n))}}function hd(t,n,o,c){switch(Pd(n)){case 2:var f=Fh;break;case 8:f=Vh;break;default:f=cl}o=f.bind(null,n,o,t),f=void 0,!bs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(n,o,{capture:!0,passive:f}):t.addEventListener(n,o,!0):f!==void 0?t.addEventListener(n,o,{passive:f}):t.addEventListener(n,o,!1)}function Jo(t,n,o,c,f){var y=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var w=c.stateNode.containerInfo;if(w===f||w.nodeType===8&&w.parentNode===f)break;if(_===4)for(_=c.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===f||R.nodeType===8&&R.parentNode===f))return;_=_.return}for(;w!==null;){if(_=Qa(w),_===null)return;if(R=_.tag,R===5||R===6||R===26||R===27){c=y=_;continue e}w=w.parentNode}}c=c.return}Ol(function(){var D=y,q=gs(o),V=[];e:{var L=au.get(t);if(L!==void 0){var B=li,le=t;switch(t){case"keypress":if(si(o)===0)break e;case"keydown":case"keyup":B=ff;break;case"focusin":le="focus",B=Es;break;case"focusout":le="blur",B=Es;break;case"beforeblur":case"afterblur":B=Es;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=mf;break;case Jl:case Wl:case eu:B=af;break;case tu:B=yf;break;case"scroll":case"scrollend":B=Xd;break;case"wheel":B=vf;break;case"copy":case"cut":case"paste":B=rf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Ml;break;case"toggle":case"beforetoggle":B=Af}var fe=(n&4)!==0,je=!fe&&(t==="scroll"||t==="scrollend"),I=fe?L!==null?L+"Capture":null:L;fe=[];for(var x=D,M;x!==null;){var H=x;if(M=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||M===null||I===null||(H=ir(x,I),H!=null&&fe.push(qr(x,H,M))),je)break;x=x.return}0<fe.length&&(L=new B(L,le,null,o,q),V.push({event:L,listeners:fe}))}}if((n&7)===0){e:{if(L=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",L&&o!==ms&&(le=o.relatedTarget||o.fromElement)&&(Qa(le)||le[_n]))break e;if((B||L)&&(L=q.window===q?q:(L=q.ownerDocument)?L.defaultView||L.parentWindow:window,B?(le=o.relatedTarget||o.toElement,B=D,le=le?Qa(le):null,le!==null&&(je=F(le),fe=le.tag,le!==je||fe!==5&&fe!==27&&fe!==6)&&(le=null)):(B=null,le=D),B!==le)){if(fe=Nl,H="onMouseLeave",I="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(fe=Ml,H="onPointerLeave",I="onPointerEnter",x="pointer"),je=B==null?L:rr(B),M=le==null?L:rr(le),L=new fe(H,x+"leave",B,o,q),L.target=je,L.relatedTarget=M,H=null,Qa(q)===D&&(fe=new fe(I,x+"enter",le,o,q),fe.target=M,fe.relatedTarget=je,H=fe),je=H,B&&le)t:{for(fe=B,I=le,x=0,M=fe;M;M=Xn(M))x++;for(M=0,H=I;H;H=Xn(H))M++;for(;0<x-M;)fe=Xn(fe),x--;for(;0<M-x;)I=Xn(I),M--;for(;x--;){if(fe===I||I!==null&&fe===I.alternate)break t;fe=Xn(fe),I=Xn(I)}fe=null}else fe=null;B!==null&&pd(V,L,B,fe,!1),le!==null&&je!==null&&pd(V,je,le,fe,!0)}}e:{if(L=D?rr(D):window,B=L.nodeName&&L.nodeName.toLowerCase(),B==="select"||B==="input"&&L.type==="file")var ie=ql;else if(Zl(L))if(zl)ie=Nf;else{ie=xf;var ge=Of}else B=L.nodeName,!B||B.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?D&&ps(D.elementType)&&(ie=ql):ie=Df;if(ie&&(ie=ie(t,D))){Bl(V,ie,o,q);break e}ge&&ge(t,L,D),t==="focusout"&&D&&L.type==="number"&&D.memoizedProps.value!=null&&hs(L,"number",L.value)}switch(ge=D?rr(D):window,t){case"focusin":(Zl(ge)||ge.contentEditable==="true")&&(xn=ge,Os=D,hr=null);break;case"focusout":hr=Os=xn=null;break;case"mousedown":xs=!0;break;case"contextmenu":case"mouseup":case"dragend":xs=!1,Yl(V,o,q);break;case"selectionchange":if(kf)break;case"keydown":case"keyup":Yl(V,o,q)}var ce;if(Ss)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else On?jl(t,o)&&(de="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(de="onCompositionStart");de&&(kl&&o.locale!=="ko"&&(On||de!=="onCompositionStart"?de==="onCompositionEnd"&&On&&(ce=xl()):(wa=q,vs="value"in wa?wa.value:wa.textContent,On=!0)),ge=Vi(D,de),0<ge.length&&(de=new Il(de,t,null,o,q),V.push({event:de,listeners:ge}),ce?de.data=ce:(ce=Ul(o),ce!==null&&(de.data=ce)))),(ce=wf?Sf(t,o):Tf(t,o))&&(de=Vi(D,"onBeforeInput"),0<de.length&&(ge=new Il("onBeforeInput","beforeinput",null,o,q),V.push({event:ge,listeners:de}),ge.data=ce)),gh(V,t,D,o,q)}fd(V,n)})}function qr(t,n,o){return{instance:t,listener:n,currentTarget:o}}function Vi(t,n){for(var o=n+"Capture",c=[];t!==null;){var f=t,y=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||y===null||(f=ir(t,o),f!=null&&c.unshift(qr(t,f,y)),f=ir(t,n),f!=null&&c.push(qr(t,f,y))),t=t.return}return c}function Xn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function pd(t,n,o,c,f){for(var y=n._reactName,_=[];o!==null&&o!==c;){var w=o,R=w.alternate,D=w.stateNode;if(w=w.tag,R!==null&&R===c)break;w!==5&&w!==26&&w!==27||D===null||(R=D,f?(D=ir(o,y),D!=null&&_.unshift(qr(o,D,R))):f||(D=ir(o,y),D!=null&&_.push(qr(o,D,R)))),o=o.return}_.length!==0&&t.push({event:n,listeners:_})}var _h=/\r\n?/g,Ah=/\u0000|\uFFFD/g;function md(t){return(typeof t=="string"?t:""+t).replace(_h,`
`).replace(Ah,"")}function gd(t,n){return n=md(n),md(t)===n}function Gi(){}function Se(t,n,o,c,f,y){switch(o){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Tn(t,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Tn(t,""+c);break;case"className":ti(t,"class",c);break;case"tabIndex":ti(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(t,o,c);break;case"style":Rl(t,c,y);break;case"data":if(n!=="object"){ti(t,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=ri(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(n!=="input"&&Se(t,n,"name",f.name,f,null),Se(t,n,"formEncType",f.formEncType,f,null),Se(t,n,"formMethod",f.formMethod,f,null),Se(t,n,"formTarget",f.formTarget,f,null)):(Se(t,n,"encType",f.encType,f,null),Se(t,n,"method",f.method,f,null),Se(t,n,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=ri(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Gi);break;case"onScroll":c!=null&&ve("scroll",t);break;case"onScrollEnd":c!=null&&ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=ri(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":ve("beforetoggle",t),ve("toggle",t),ei(t,"popover",c);break;case"xlinkActuate":ra(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ra(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ra(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ra(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ra(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ra(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ra(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ra(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ra(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ei(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Qd.get(o)||o,ei(t,o,c))}}function Wo(t,n,o,c,f,y){switch(o){case"style":Rl(t,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=o}}break;case"children":typeof c=="string"?Tn(t,c):(typeof c=="number"||typeof c=="bigint")&&Tn(t,""+c);break;case"onScroll":c!=null&&ve("scroll",t);break;case"onScrollEnd":c!=null&&ve("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),n=o.slice(2,f?o.length-7:void 0),y=t[dt]||null,y=y!=null?y[o]:null,typeof y=="function"&&t.removeEventListener(n,y,f),typeof c=="function")){typeof y!="function"&&y!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(n,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):ei(t,o,c)}}}function et(t,n,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ve("error",t),ve("load",t);var c=!1,f=!1,y;for(y in o)if(o.hasOwnProperty(y)){var _=o[y];if(_!=null)switch(y){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Se(t,n,y,_,o,null)}}f&&Se(t,n,"srcSet",o.srcSet,o,null),c&&Se(t,n,"src",o.src,o,null);return;case"input":ve("invalid",t);var w=y=_=f=null,R=null,D=null;for(c in o)if(o.hasOwnProperty(c)){var q=o[c];if(q!=null)switch(c){case"name":f=q;break;case"type":_=q;break;case"checked":R=q;break;case"defaultChecked":D=q;break;case"value":y=q;break;case"defaultValue":w=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:Se(t,n,c,q,o,null)}}El(t,y,w,R,D,_,f,!1),ai(t);return;case"select":ve("invalid",t),c=_=y=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":y=w;break;case"defaultValue":_=w;break;case"multiple":c=w;default:Se(t,n,f,w,o,null)}n=y,o=_,t.multiple=!!c,n!=null?Sn(t,!!c,n,!1):o!=null&&Sn(t,!!c,o,!0);return;case"textarea":ve("invalid",t),y=f=c=null;for(_ in o)if(o.hasOwnProperty(_)&&(w=o[_],w!=null))switch(_){case"value":c=w;break;case"defaultValue":f=w;break;case"children":y=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:Se(t,n,_,w,o,null)}Sl(t,c,f,y),ai(t);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(c=o[R],c!=null))switch(R){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Se(t,n,R,c,o,null)}return;case"dialog":ve("cancel",t),ve("close",t);break;case"iframe":case"object":ve("load",t);break;case"video":case"audio":for(c=0;c<Br.length;c++)ve(Br[c],t);break;case"image":ve("error",t),ve("load",t);break;case"details":ve("toggle",t);break;case"embed":case"source":case"link":ve("error",t),ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Se(t,n,D,c,o,null)}return;default:if(ps(n)){for(q in o)o.hasOwnProperty(q)&&(c=o[q],c!==void 0&&Wo(t,n,q,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&Se(t,n,w,c,o,null))}function Eh(t,n,o,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,y=null,_=null,w=null,R=null,D=null,q=null;for(B in o){var V=o[B];if(o.hasOwnProperty(B)&&V!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":R=V;default:c.hasOwnProperty(B)||Se(t,n,B,null,c,V)}}for(var L in c){var B=c[L];if(V=o[L],c.hasOwnProperty(L)&&(B!=null||V!=null))switch(L){case"type":y=B;break;case"name":f=B;break;case"checked":D=B;break;case"defaultChecked":q=B;break;case"value":_=B;break;case"defaultValue":w=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,n));break;default:B!==V&&Se(t,n,L,B,c,V)}}fs(t,_,w,R,D,q,y,f);return;case"select":B=_=w=L=null;for(y in o)if(R=o[y],o.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":B=R;default:c.hasOwnProperty(y)||Se(t,n,y,null,c,R)}for(f in c)if(y=c[f],R=o[f],c.hasOwnProperty(f)&&(y!=null||R!=null))switch(f){case"value":L=y;break;case"defaultValue":w=y;break;case"multiple":_=y;default:y!==R&&Se(t,n,f,y,c,R)}n=w,o=_,c=B,L!=null?Sn(t,!!o,L,!1):!!c!=!!o&&(n!=null?Sn(t,!!o,n,!0):Sn(t,!!o,o?[]:"",!1));return;case"textarea":B=L=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Se(t,n,w,null,c,f)}for(_ in c)if(f=c[_],y=o[_],c.hasOwnProperty(_)&&(f!=null||y!=null))switch(_){case"value":L=f;break;case"defaultValue":B=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==y&&Se(t,n,_,f,c,y)}wl(t,L,B);return;case"option":for(var le in o)if(L=o[le],o.hasOwnProperty(le)&&L!=null&&!c.hasOwnProperty(le))switch(le){case"selected":t.selected=!1;break;default:Se(t,n,le,null,c,L)}for(R in c)if(L=c[R],B=o[R],c.hasOwnProperty(R)&&L!==B&&(L!=null||B!=null))switch(R){case"selected":t.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Se(t,n,R,L,c,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in o)L=o[fe],o.hasOwnProperty(fe)&&L!=null&&!c.hasOwnProperty(fe)&&Se(t,n,fe,null,c,L);for(D in c)if(L=c[D],B=o[D],c.hasOwnProperty(D)&&L!==B&&(L!=null||B!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,n));break;default:Se(t,n,D,L,c,B)}return;default:if(ps(n)){for(var je in o)L=o[je],o.hasOwnProperty(je)&&L!==void 0&&!c.hasOwnProperty(je)&&Wo(t,n,je,void 0,c,L);for(q in c)L=c[q],B=o[q],!c.hasOwnProperty(q)||L===B||L===void 0&&B===void 0||Wo(t,n,q,L,c,B);return}}for(var I in o)L=o[I],o.hasOwnProperty(I)&&L!=null&&!c.hasOwnProperty(I)&&Se(t,n,I,null,c,L);for(V in c)L=c[V],B=o[V],!c.hasOwnProperty(V)||L===B||L==null&&B==null||Se(t,n,V,L,c,B)}var el=null,tl=null;function Ki(t){return t.nodeType===9?t:t.ownerDocument}function yd(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bd(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function al(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var nl=null;function wh(){var t=window.event;return t&&t.type==="popstate"?t===nl?!1:(nl=t,!0):(nl=null,!1)}var vd=typeof setTimeout=="function"?setTimeout:void 0,Sh=typeof clearTimeout=="function"?clearTimeout:void 0,_d=typeof Promise=="function"?Promise:void 0,Th=typeof queueMicrotask=="function"?queueMicrotask:typeof _d<"u"?function(t){return _d.resolve(null).then(t).catch(Rh)}:vd;function Rh(t){setTimeout(function(){throw t})}function rl(t,n){var o=n,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(c===0){t.removeChild(f),Qr(n);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=f}while(o);Qr(n)}function il(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var o=n;switch(n=n.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":il(o),ds(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function Ch(t,n,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[nr])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==f.rel||t.getAttribute("href")!==(f.href==null?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var y=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=Ft(t.nextSibling),t===null)break}return null}function Oh(t,n,o){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=Ft(t.nextSibling),t===null))return null;return t}function Ft(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}function Ad(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}function Ed(t,n,o){switch(n=Ki(o),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}var Ut=new Map,wd=new Set;function Qi(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var va=J.d;J.d={f:xh,r:Dh,D:Nh,C:Ih,L:Mh,m:kh,X:Ph,S:Lh,M:jh};function xh(){var t=va.f(),n=qi();return t||n}function Dh(t){var n=An(t);n!==null&&n.tag===5&&n.type==="form"?Yu(n):va.r(t)}var Jn=typeof document>"u"?null:document;function Sd(t,n,o){var c=Jn;if(c&&typeof n=="string"&&n){var f=Ot(n);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),wd.has(f)||(wd.add(f),t={rel:t,crossOrigin:o,href:n},c.querySelector(f)===null&&(n=c.createElement("link"),et(n,"link",t),Ke(n),c.head.appendChild(n)))}}function Nh(t){va.D(t),Sd("dns-prefetch",t,null)}function Ih(t,n){va.C(t,n),Sd("preconnect",t,n)}function Mh(t,n,o){va.L(t,n,o);var c=Jn;if(c&&t&&n){var f='link[rel="preload"][as="'+Ot(n)+'"]';n==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ot(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ot(o.imageSizes)+'"]')):f+='[href="'+Ot(t)+'"]';var y=f;switch(n){case"style":y=Wn(t);break;case"script":y=er(t)}Ut.has(y)||(t=ue({rel:"preload",href:n==="image"&&o&&o.imageSrcSet?void 0:t,as:n},o),Ut.set(y,t),c.querySelector(f)!==null||n==="style"&&c.querySelector(zr(y))||n==="script"&&c.querySelector(Hr(y))||(n=c.createElement("link"),et(n,"link",t),Ke(n),c.head.appendChild(n)))}}function kh(t,n){va.m(t,n);var o=Jn;if(o&&t){var c=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Ot(c)+'"][href="'+Ot(t)+'"]',y=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=er(t)}if(!Ut.has(y)&&(t=ue({rel:"modulepreload",href:t},n),Ut.set(y,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Hr(y)))return}c=o.createElement("link"),et(c,"link",t),Ke(c),o.head.appendChild(c)}}}function Lh(t,n,o){va.S(t,n,o);var c=Jn;if(c&&t){var f=En(c).hoistableStyles,y=Wn(t);n=n||"default";var _=f.get(y);if(!_){var w={loading:0,preload:null};if(_=c.querySelector(zr(y)))w.loading=5;else{t=ue({rel:"stylesheet",href:t,"data-precedence":n},o),(o=Ut.get(y))&&sl(t,o);var R=_=c.createElement("link");Ke(R),et(R,"link",t),R._p=new Promise(function(D,q){R.onload=D,R.onerror=q}),R.addEventListener("load",function(){w.loading|=1}),R.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Yi(_,n,c)}_={type:"stylesheet",instance:_,count:1,state:w},f.set(y,_)}}}function Ph(t,n){va.X(t,n);var o=Jn;if(o&&t){var c=En(o).hoistableScripts,f=er(t),y=c.get(f);y||(y=o.querySelector(Hr(f)),y||(t=ue({src:t,async:!0},n),(n=Ut.get(f))&&ol(t,n),y=o.createElement("script"),Ke(y),et(y,"link",t),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(f,y))}}function jh(t,n){va.M(t,n);var o=Jn;if(o&&t){var c=En(o).hoistableScripts,f=er(t),y=c.get(f);y||(y=o.querySelector(Hr(f)),y||(t=ue({src:t,async:!0,type:"module"},n),(n=Ut.get(f))&&ol(t,n),y=o.createElement("script"),Ke(y),et(y,"link",t),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(f,y))}}function Td(t,n,o,c){var f=(f=Zt.current)?Qi(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(n=Wn(o.href),o=En(f).hoistableStyles,c=o.get(n),c||(c={type:"style",instance:null,count:0,state:null},o.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=Wn(o.href);var y=En(f).hoistableStyles,_=y.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,_),(y=f.querySelector(zr(t)))&&!y._p&&(_.instance=y,_.state.loading=5),Ut.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ut.set(t,o),y||Uh(f,t,o,_.state))),n&&c===null)throw Error(r(528,""));return _}if(n&&c!==null)throw Error(r(529,""));return null;case"script":return n=o.async,o=o.src,typeof o=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=er(o),o=En(f).hoistableScripts,c=o.get(n),c||(c={type:"script",instance:null,count:0,state:null},o.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Wn(t){return'href="'+Ot(t)+'"'}function zr(t){return'link[rel="stylesheet"]['+t+"]"}function Rd(t){return ue({},t,{"data-precedence":t.precedence,precedence:null})}function Uh(t,n,o,c){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=t.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),et(n,"link",o),Ke(n),t.head.appendChild(n))}function er(t){return'[src="'+Ot(t)+'"]'}function Hr(t){return"script[async]"+t}function Cd(t,n,o){if(n.count++,n.instance===null)switch(n.type){case"style":var c=t.querySelector('style[data-href~="'+Ot(o.href)+'"]');if(c)return n.instance=c,Ke(c),c;var f=ue({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),Ke(c),et(c,"style",f),Yi(c,o.precedence,t),n.instance=c;case"stylesheet":f=Wn(o.href);var y=t.querySelector(zr(f));if(y)return n.state.loading|=4,n.instance=y,Ke(y),y;c=Rd(o),(f=Ut.get(f))&&sl(c,f),y=(t.ownerDocument||t).createElement("link"),Ke(y);var _=y;return _._p=new Promise(function(w,R){_.onload=w,_.onerror=R}),et(y,"link",c),n.state.loading|=4,Yi(y,o.precedence,t),n.instance=y;case"script":return y=er(o.src),(f=t.querySelector(Hr(y)))?(n.instance=f,Ke(f),f):(c=o,(f=Ut.get(y))&&(c=ue({},o),ol(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),Ke(f),et(f,"link",c),t.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Yi(c,o.precedence,t));return n.instance}function Yi(t,n,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,y=f,_=0;_<c.length;_++){var w=c[_];if(w.dataset.precedence===n)y=w;else if(y!==f)break}y?y.parentNode.insertBefore(t,y.nextSibling):(n=o.nodeType===9?o.head:o,n.insertBefore(t,n.firstChild))}function sl(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function ol(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Xi=null;function Od(t,n,o){if(Xi===null){var c=new Map,f=Xi=new Map;f.set(o,c)}else f=Xi,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var y=o[f];if(!(y[nr]||y[qe]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(n)||"";_=t+_;var w=c.get(_);w?w.push(y):c.set(_,[y])}}return c}function xd(t,n,o){t=t.ownerDocument||t,t.head.insertBefore(o,n==="title"?t.querySelector("head > title"):null)}function Zh(t,n,o){if(o===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Dd(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var $r=null;function Bh(){}function qh(t,n,o){if($r===null)throw Error(r(475));var c=$r;if(n.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var f=Wn(o.href),y=t.querySelector(zr(f));if(y){t=y._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(c.count++,c=Ji.bind(c),t.then(c,c)),n.state.loading|=4,n.instance=y,Ke(y);return}y=t.ownerDocument||t,o=Rd(o),(f=Ut.get(f))&&sl(o,f),y=y.createElement("link"),Ke(y);var _=y;_._p=new Promise(function(w,R){_.onload=w,_.onerror=R}),et(y,"link",o),n.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(c.count++,n=Ji.bind(c),t.addEventListener("load",n),t.addEventListener("error",n))}}function zh(){if($r===null)throw Error(r(475));var t=$r;return t.stylesheets&&t.count===0&&ll(t,t.stylesheets),0<t.count?function(n){var o=setTimeout(function(){if(t.stylesheets&&ll(t,t.stylesheets),t.unsuspend){var c=t.unsuspend;t.unsuspend=null,c()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(o)}}:null}function Ji(){if(this.count--,this.count===0){if(this.stylesheets)ll(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wi=null;function ll(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wi=new Map,n.forEach(Hh,t),Wi=null,Ji.call(t))}function Hh(t,n){if(!(n.state.loading&4)){var o=Wi.get(t);if(o)var c=o.get(null);else{o=new Map,Wi.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<f.length;y++){var _=f[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),c=_)}c&&o.set(null,c)}f=n.instance,_=f.getAttribute("data-precedence"),y=o.get(_)||c,y===c&&o.set(null,f),o.set(_,f),this.count++,c=Ji.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),y?y.parentNode.insertBefore(f,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),n.state.loading|=4}}var Fr={$$typeof:E,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function $h(t,n,o,c,f,y,_,w){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.hiddenUpdates=Gt(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Nd(t,n,o,c,f,y,_,w,R,D,q,V){return t=new $h(t,n,o,_,w,R,D,V),n=1,y===!0&&(n|=24),y=Pt(3,null,null,n),t.current=y,y.stateNode=t,n=Zs(),n.refCount++,t.pooledCache=n,n.refCount++,y.memoizedState={element:c,isDehydrated:o,cache:n},_o(y),t}function Id(t){return t?(t=In,t):In}function Md(t,n,o,c,f,y){f=Id(f),c.context===null?c.context=f:c.pendingContext=f,c=Na(n),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=Ia(t,c,n),o!==null&&(ot(o,t,n),Or(o,t,n))}function kd(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function ul(t,n){kd(t,n),(t=t.alternate)&&kd(t,n)}function Ld(t){if(t.tag===13){var n=Sa(t,67108864);n!==null&&ot(n,t,67108864),ul(t,67108864)}}var es=!0;function Fh(t,n,o,c){var f=ne.T;ne.T=null;var y=J.p;try{J.p=2,cl(t,n,o,c)}finally{J.p=y,ne.T=f}}function Vh(t,n,o,c){var f=ne.T;ne.T=null;var y=J.p;try{J.p=8,cl(t,n,o,c)}finally{J.p=y,ne.T=f}}function cl(t,n,o,c){if(es){var f=dl(c);if(f===null)Jo(t,n,c,ts,o),jd(t,c);else if(Kh(f,t,n,o,c))c.stopPropagation();else if(jd(t,c),n&4&&-1<Gh.indexOf(t)){for(;f!==null;){var y=An(f);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=Ze(y.pendingLanes);if(_!==0){var w=y;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var R=1<<31-it(_);w.entanglements[1]|=R,_&=~R}ea(y),(ke&6)===0&&(Ui=gt()+500,Zr(0))}}break;case 13:w=Sa(y,2),w!==null&&ot(w,y,2),qi(),ul(y,2)}if(y=dl(c),y===null&&Jo(t,n,c,ts,o),y===f)break;f=y}f!==null&&c.stopPropagation()}else Jo(t,n,c,null,o)}}function dl(t){return t=gs(t),fl(t)}var ts=null;function fl(t){if(ts=null,t=Qa(t),t!==null){var n=F(t);if(n===null)t=null;else{var o=n.tag;if(o===13){if(t=Y(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return ts=t,null}function Pd(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(os()){case Xr:return 2;case aa:return 8;case Bt:case Ga:return 32;case tr:return 268435456;default:return 32}default:return 32}}var hl=!1,Za=null,Ba=null,qa=null,Vr=new Map,Gr=new Map,za=[],Gh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jd(t,n){switch(t){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Vr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(n.pointerId)}}function Kr(t,n,o,c,f,y){return t===null||t.nativeEvent!==y?(t={blockedOn:n,domEventName:o,eventSystemFlags:c,nativeEvent:y,targetContainers:[f]},n!==null&&(n=An(n),n!==null&&Ld(n)),t):(t.eventSystemFlags|=c,n=t.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),t)}function Kh(t,n,o,c,f){switch(n){case"focusin":return Za=Kr(Za,t,n,o,c,f),!0;case"dragenter":return Ba=Kr(Ba,t,n,o,c,f),!0;case"mouseover":return qa=Kr(qa,t,n,o,c,f),!0;case"pointerover":var y=f.pointerId;return Vr.set(y,Kr(Vr.get(y)||null,t,n,o,c,f)),!0;case"gotpointercapture":return y=f.pointerId,Gr.set(y,Kr(Gr.get(y)||null,t,n,o,c,f)),!0}return!1}function Ud(t){var n=Qa(t.target);if(n!==null){var o=F(n);if(o!==null){if(n=o.tag,n===13){if(n=Y(o),n!==null){t.blockedOn=n,Qt(t.priority,function(){if(o.tag===13){var c=wt(),f=Sa(o,c);f!==null&&ot(f,o,c),ul(o,c)}});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function as(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=dl(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);ms=c,o.target.dispatchEvent(c),ms=null}else return n=An(o),n!==null&&Ld(n),t.blockedOn=o,!1;n.shift()}return!0}function Zd(t,n,o){as(t)&&o.delete(n)}function Qh(){hl=!1,Za!==null&&as(Za)&&(Za=null),Ba!==null&&as(Ba)&&(Ba=null),qa!==null&&as(qa)&&(qa=null),Vr.forEach(Zd),Gr.forEach(Zd)}function ns(t,n){t.blockedOn===n&&(t.blockedOn=null,hl||(hl=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Qh)))}var rs=null;function Bd(t){rs!==t&&(rs=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){rs===t&&(rs=null);for(var n=0;n<t.length;n+=3){var o=t[n],c=t[n+1],f=t[n+2];if(typeof c!="function"){if(fl(c||o)===null)continue;break}var y=An(o);y!==null&&(t.splice(n,3),n-=3,to(y,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Qr(t){function n(R){return ns(R,t)}Za!==null&&ns(Za,t),Ba!==null&&ns(Ba,t),qa!==null&&ns(qa,t),Vr.forEach(n),Gr.forEach(n);for(var o=0;o<za.length;o++){var c=za[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<za.length&&(o=za[0],o.blockedOn===null);)Ud(o),o.blockedOn===null&&za.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],y=o[c+1],_=f[dt]||null;if(typeof y=="function")_||Bd(o);else if(_){var w=null;if(y&&y.hasAttribute("formAction")){if(f=y,_=y[dt]||null)w=_.formAction;else if(fl(f)!==null)continue}else w=_.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),Bd(o)}}}function pl(t){this._internalRoot=t}is.prototype.render=pl.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var o=n.current,c=wt();Md(o,c,t,n,null,null)},is.prototype.unmount=pl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;t.tag===0&&Qn(),Md(t.current,2,null,t,null,null),qi(),n[_n]=null}};function is(t){this._internalRoot=t}is.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ea();t={blockedOn:null,target:t,priority:n};for(var o=0;o<za.length&&n!==0&&n<za[o].priority;o++);za.splice(o,0,t),o===0&&Ud(t)}};var qd=e.version;if(qd!=="19.0.0")throw Error(r(527,qd,"19.0.0"));J.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=U(n),t=t!==null?G(t):null,t=t===null?null:t.stateNode,t};var Yh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,findFiberByHostInstance:Qa,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ss=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ss.isDisabled&&ss.supportsFiber)try{Ka=ss.inject(Yh),rt=ss}catch{}}return reactDomClient_production.createRoot=function(t,n){if(!l(t))throw Error(r(299));var o=!1,c="",f=rc,y=ic,_=sc,w=null;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(w=n.unstable_transitionCallbacks)),n=Nd(t,1,!1,null,null,o,c,f,y,_,w,null),t[_n]=n.current,Xo(t.nodeType===8?t.parentNode:t),new pl(n)},reactDomClient_production.hydrateRoot=function(t,n,o){if(!l(t))throw Error(r(299));var c=!1,f="",y=rc,_=ic,w=sc,R=null,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks),o.formState!==void 0&&(D=o.formState)),n=Nd(t,1,!0,n,o??null,c,f,y,_,w,R,D),n.context=Id(null),o=n.current,c=wt(),f=Na(c),f.callback=null,Ia(o,f,c),n.current.lanes=c,Ie(n,c),ea(n),t[_n]=n.current,Xo(t),new is(n)},reactDomClient_production.version="19.0.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client$1.exports;hasRequiredClient=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),client$1.exports=requireReactDomClient_production(),client$1.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var reactDomExports=requireReactDom();const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(s){const e=Object.prototype.toString.call(s);return e==="[object Window]"||e==="[object global]"}function isNode$2(s){return"nodeType"in s}function getWindow(s){var e,a;return s?isWindow(s)?s:isNode$2(s)&&(e=(a=s.ownerDocument)==null?void 0:a.defaultView)!=null?e:window:window}function isDocument(s){const{Document:e}=getWindow(s);return s instanceof e}function isHTMLElement(s){return isWindow(s)?!1:s instanceof getWindow(s).HTMLElement}function isSVGElement(s){return s instanceof getWindow(s).SVGElement}function getOwnerDocument(s){return s?isWindow(s)?s.document:isNode$2(s)?isDocument(s)?s:isHTMLElement(s)||isSVGElement(s)?s.ownerDocument:document:document:document}const useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(s){const e=reactExports.useRef(s);return useIsomorphicLayoutEffect(()=>{e.current=s}),reactExports.useCallback(function(){for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e.current==null?void 0:e.current(...r)},[])}function useInterval(){const s=reactExports.useRef(null),e=reactExports.useCallback((r,l)=>{s.current=setInterval(r,l)},[]),a=reactExports.useCallback(()=>{s.current!==null&&(clearInterval(s.current),s.current=null)},[]);return[e,a]}function useLatestValue(s,e){e===void 0&&(e=[s]);const a=reactExports.useRef(s);return useIsomorphicLayoutEffect(()=>{a.current!==s&&(a.current=s)},e),a}function useLazyMemo(s,e){const a=reactExports.useRef();return reactExports.useMemo(()=>{const r=s(a.current);return a.current=r,r},[...e])}function useNodeRef(s){const e=useEvent(s),a=reactExports.useRef(null),r=reactExports.useCallback(l=>{l!==a.current&&(e==null||e(l,a.current)),a.current=l},[]);return[a,r]}function usePrevious(s){const e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=s},[s]),e.current}let ids={};function useUniqueId(s,e){return reactExports.useMemo(()=>{if(e)return e;const a=ids[s]==null?0:ids[s]+1;return ids[s]=a,s+"-"+a},[s,e])}function createAdjustmentFn(s){return function(e){for(var a=arguments.length,r=new Array(a>1?a-1:0),l=1;l<a;l++)r[l-1]=arguments[l];return r.reduce((u,d)=>{const h=Object.entries(d);for(const[p,m]of h){const b=u[p];b!=null&&(u[p]=b+s*m)}return u},{...e})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(s){return"clientX"in s&&"clientY"in s}function isKeyboardEvent(s){if(!s)return!1;const{KeyboardEvent:e}=getWindow(s.target);return e&&s instanceof e}function isTouchEvent(s){if(!s)return!1;const{TouchEvent:e}=getWindow(s.target);return e&&s instanceof e}function getEventCoordinates(s){if(isTouchEvent(s)){if(s.touches&&s.touches.length){const{clientX:e,clientY:a}=s.touches[0];return{x:e,y:a}}else if(s.changedTouches&&s.changedTouches.length){const{clientX:e,clientY:a}=s.changedTouches[0];return{x:e,y:a}}}return hasViewportRelativeCoordinates(s)?{x:s.clientX,y:s.clientY}:null}const SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(s){return s.matches(SELECTOR)?s:s.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(s){let{id:e,value:a}=s;return React.createElement("div",{id:e,style:hiddenStyles},a)}function LiveRegion(s){let{id:e,announcement:a,ariaLiveType:r="assertive"}=s;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React.createElement("div",{id:e,style:l,role:"status","aria-live":r,"aria-atomic":!0},a)}function useAnnouncement(){const[s,e]=reactExports.useState("");return{announce:reactExports.useCallback(r=>{r!=null&&e(r)},[]),announcement:s}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(s){const e=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(s)},[s,e])}function useDndMonitorProvider(){const[s]=reactExports.useState(()=>new Set),e=reactExports.useCallback(r=>(s.add(r),()=>s.delete(r)),[s]);return[reactExports.useCallback(r=>{let{type:l,event:u}=r;s.forEach(d=>{var h;return(h=d[l])==null?void 0:h.call(d,u)})},[s]),e]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(s){let{active:e}=s;return"Picked up draggable item "+e.id+"."},onDragOver(s){let{active:e,over:a}=s;return a?"Draggable item "+e.id+" was moved over droppable area "+a.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(s){let{active:e,over:a}=s;return a?"Draggable item "+e.id+" was dropped over droppable area "+a.id:"Draggable item "+e.id+" was dropped."},onDragCancel(s){let{active:e}=s;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Accessibility(s){let{announcements:e=defaultAnnouncements,container:a,hiddenTextDescribedById:r,screenReaderInstructions:l=defaultScreenReaderInstructions}=s;const{announce:u,announcement:d}=useAnnouncement(),h=useUniqueId("DndLiveRegion"),[p,m]=reactExports.useState(!1);if(reactExports.useEffect(()=>{m(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(v){let{active:A}=v;u(e.onDragStart({active:A}))},onDragMove(v){let{active:A,over:E}=v;e.onDragMove&&u(e.onDragMove({active:A,over:E}))},onDragOver(v){let{active:A,over:E}=v;u(e.onDragOver({active:A,over:E}))},onDragEnd(v){let{active:A,over:E}=v;u(e.onDragEnd({active:A,over:E}))},onDragCancel(v){let{active:A,over:E}=v;u(e.onDragCancel({active:A,over:E}))}}),[u,e])),!p)return null;const b=React.createElement(React.Fragment,null,React.createElement(HiddenText,{id:r,value:l.draggable}),React.createElement(LiveRegion,{id:h,announcement:d}));return a?reactDomExports.createPortal(b,a):b}var Action;(function(s){s.DragStart="dragStart",s.DragMove="dragMove",s.DragEnd="dragEnd",s.DragCancel="dragCancel",s.DragOver="dragOver",s.RegisterDroppable="registerDroppable",s.SetDroppableDisabled="setDroppableDisabled",s.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop(){}const defaultCoordinates=Object.freeze({x:0,y:0});function sortCollisionsDesc(s,e){let{data:{value:a}}=s,{data:{value:r}}=e;return r-a}function getFirstCollision(s,e){if(!s||s.length===0)return null;const[a]=s;return a[e]}function getIntersectionRatio(s,e){const a=Math.max(e.top,s.top),r=Math.max(e.left,s.left),l=Math.min(e.left+e.width,s.left+s.width),u=Math.min(e.top+e.height,s.top+s.height),d=l-r,h=u-a;if(r<l&&a<u){const p=e.width*e.height,m=s.width*s.height,b=d*h,v=b/(p+m-b);return Number(v.toFixed(4))}return 0}const rectIntersection=s=>{let{collisionRect:e,droppableRects:a,droppableContainers:r}=s;const l=[];for(const u of r){const{id:d}=u,h=a.get(d);if(h){const p=getIntersectionRatio(h,e);p>0&&l.push({id:d,data:{droppableContainer:u,value:p}})}}return l.sort(sortCollisionsDesc)};function adjustScale(s,e,a){return{...s,scaleX:e&&a?e.width/a.width:1,scaleY:e&&a?e.height/a.height:1}}function getRectDelta(s,e){return s&&e?{x:s.left-e.left,y:s.top-e.top}:defaultCoordinates}function createRectAdjustmentFn(s){return function(a){for(var r=arguments.length,l=new Array(r>1?r-1:0),u=1;u<r;u++)l[u-1]=arguments[u];return l.reduce((d,h)=>({...d,top:d.top+s*h.y,bottom:d.bottom+s*h.y,left:d.left+s*h.x,right:d.right+s*h.x}),{...a})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(s){if(s.startsWith("matrix3d(")){const e=s.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(s.startsWith("matrix(")){const e=s.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function inverseTransform(s,e,a){const r=parseTransform(e);if(!r)return s;const{scaleX:l,scaleY:u,x:d,y:h}=r,p=s.left-d-(1-l)*parseFloat(a),m=s.top-h-(1-u)*parseFloat(a.slice(a.indexOf(" ")+1)),b=l?s.width/l:s.width,v=u?s.height/u:s.height;return{width:b,height:v,top:m,right:p+b,bottom:m+v,left:p}}const defaultOptions$2={ignoreTransform:!1};function getClientRect(s,e){e===void 0&&(e=defaultOptions$2);let a=s.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:b}=getWindow(s).getComputedStyle(s);m&&(a=inverseTransform(a,m,b))}const{top:r,left:l,width:u,height:d,bottom:h,right:p}=a;return{top:r,left:l,width:u,height:d,bottom:h,right:p}}function getTransformAgnosticClientRect(s){return getClientRect(s,{ignoreTransform:!0})}function getWindowClientRect(s){const e=s.innerWidth,a=s.innerHeight;return{top:0,left:0,right:e,bottom:a,width:e,height:a}}function isFixed(s,e){return e===void 0&&(e=getWindow(s).getComputedStyle(s)),e.position==="fixed"}function isScrollable(s,e){e===void 0&&(e=getWindow(s).getComputedStyle(s));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const u=e[l];return typeof u=="string"?a.test(u):!1})}function getScrollableAncestors(s,e){const a=[];function r(l){if(e!=null&&a.length>=e||!l)return a;if(isDocument(l)&&l.scrollingElement!=null&&!a.includes(l.scrollingElement))return a.push(l.scrollingElement),a;if(!isHTMLElement(l)||isSVGElement(l)||a.includes(l))return a;const u=getWindow(s).getComputedStyle(l);return l!==s&&isScrollable(l,u)&&a.push(l),isFixed(l,u)?a:r(l.parentNode)}return s?r(s):a}function getFirstScrollableAncestor(s){const[e]=getScrollableAncestors(s,1);return e??null}function getScrollableElement(s){return!canUseDOM||!s?null:isWindow(s)?s:isNode$2(s)?isDocument(s)||s===getOwnerDocument(s).scrollingElement?window:isHTMLElement(s)?s:null:null}function getScrollXCoordinate(s){return isWindow(s)?s.scrollX:s.scrollLeft}function getScrollYCoordinate(s){return isWindow(s)?s.scrollY:s.scrollTop}function getScrollCoordinates(s){return{x:getScrollXCoordinate(s),y:getScrollYCoordinate(s)}}var Direction;(function(s){s[s.Forward=1]="Forward",s[s.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(s){return!canUseDOM||!s?!1:s===document.scrollingElement}function getScrollPosition(s){const e={x:0,y:0},a=isDocumentScrollingElement(s)?{height:window.innerHeight,width:window.innerWidth}:{height:s.clientHeight,width:s.clientWidth},r={x:s.scrollWidth-a.width,y:s.scrollHeight-a.height},l=s.scrollTop<=e.y,u=s.scrollLeft<=e.x,d=s.scrollTop>=r.y,h=s.scrollLeft>=r.x;return{isTop:l,isLeft:u,isBottom:d,isRight:h,maxScroll:r,minScroll:e}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(s,e,a,r,l){let{top:u,left:d,right:h,bottom:p}=a;r===void 0&&(r=10),l===void 0&&(l=defaultThreshold);const{isTop:m,isBottom:b,isLeft:v,isRight:A}=getScrollPosition(s),E={x:0,y:0},S={x:0,y:0},T={height:e.height*l.y,width:e.width*l.x};return!m&&u<=e.top+T.height?(E.y=Direction.Backward,S.y=r*Math.abs((e.top+T.height-u)/T.height)):!b&&p>=e.bottom-T.height&&(E.y=Direction.Forward,S.y=r*Math.abs((e.bottom-T.height-p)/T.height)),!A&&h>=e.right-T.width?(E.x=Direction.Forward,S.x=r*Math.abs((e.right-T.width-h)/T.width)):!v&&d<=e.left+T.width&&(E.x=Direction.Backward,S.x=r*Math.abs((e.left+T.width-d)/T.width)),{direction:E,speed:S}}function getScrollElementRect(s){if(s===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:e,left:a,right:r,bottom:l}=s.getBoundingClientRect();return{top:e,left:a,right:r,bottom:l,width:s.clientWidth,height:s.clientHeight}}function getScrollOffsets(s){return s.reduce((e,a)=>add(e,getScrollCoordinates(a)),defaultCoordinates)}function getScrollXOffset(s){return s.reduce((e,a)=>e+getScrollXCoordinate(a),0)}function getScrollYOffset(s){return s.reduce((e,a)=>e+getScrollYCoordinate(a),0)}function scrollIntoViewIfNeeded(s,e){if(e===void 0&&(e=getClientRect),!s)return;const{top:a,left:r,bottom:l,right:u}=e(s);getFirstScrollableAncestor(s)&&(l<=0||u<=0||a>=window.innerHeight||r>=window.innerWidth)&&s.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(e,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=getScrollableAncestors(a),l=getScrollOffsets(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,d,h]of properties)for(const p of d)Object.defineProperty(this,p,{get:()=>{const m=h(r),b=l[u]-m;return this.rect[p]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...a)})},this.target=e}add(e,a,r){var l;(l=this.target)==null||l.addEventListener(e,a,r),this.listeners.push([e,a,r])}}function getEventListenerTarget(s){const{EventTarget:e}=getWindow(s);return s instanceof e?s:getOwnerDocument(s)}function hasExceededDistance(s,e){const a=Math.abs(s.x),r=Math.abs(s.y);return typeof e=="number"?Math.sqrt(a**2+r**2)>e:"x"in e&&"y"in e?a>e.x&&r>e.y:"x"in e?a>e.x:"y"in e?r>e.y:!1}var EventName;(function(s){s.Click="click",s.DragStart="dragstart",s.Keydown="keydown",s.ContextMenu="contextmenu",s.Resize="resize",s.SelectionChange="selectionchange",s.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(s){s.preventDefault()}function stopPropagation(s){s.stopPropagation()}var KeyboardCode;(function(s){s.Space="Space",s.Down="ArrowDown",s.Right="ArrowRight",s.Left="ArrowLeft",s.Up="ArrowUp",s.Esc="Escape",s.Enter="Enter",s.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(s,e)=>{let{currentCoordinates:a}=e;switch(s.code){case KeyboardCode.Right:return{...a,x:a.x+25};case KeyboardCode.Left:return{...a,x:a.x-25};case KeyboardCode.Down:return{...a,y:a.y+25};case KeyboardCode.Up:return{...a,y:a.y-25}}};class KeyboardSensor{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:a}}=e;this.props=e,this.listeners=new Listeners(getOwnerDocument(a)),this.windowListeners=new Listeners(getWindow(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:a}=this.props,r=e.node.current;r&&scrollIntoViewIfNeeded(r),a(defaultCoordinates)}handleKeyDown(e){if(isKeyboardEvent(e)){const{active:a,context:r,options:l}=this.props,{keyboardCodes:u=defaultKeyboardCodes,coordinateGetter:d=defaultKeyboardCoordinateGetter,scrollBehavior:h="smooth"}=l,{code:p}=e;if(u.end.includes(p)){this.handleEnd(e);return}if(u.cancel.includes(p)){this.handleCancel(e);return}const{collisionRect:m}=r.current,b=m?{x:m.left,y:m.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=b);const v=d(e,{active:a,context:r.current,currentCoordinates:b});if(v){const A=subtract(v,b),E={x:0,y:0},{scrollableAncestors:S}=r.current;for(const T of S){const O=e.code,{isTop:N,isRight:P,isLeft:k,isBottom:ae,maxScroll:Z,minScroll:X}=getScrollPosition(T),te=getScrollElementRect(T),Q={x:Math.min(O===KeyboardCode.Right?te.right-te.width/2:te.right,Math.max(O===KeyboardCode.Right?te.left:te.left+te.width/2,v.x)),y:Math.min(O===KeyboardCode.Down?te.bottom-te.height/2:te.bottom,Math.max(O===KeyboardCode.Down?te.top:te.top+te.height/2,v.y))},ne=O===KeyboardCode.Right&&!P||O===KeyboardCode.Left&&!k,ue=O===KeyboardCode.Down&&!ae||O===KeyboardCode.Up&&!N;if(ne&&Q.x!==v.x){const me=T.scrollLeft+A.x,Oe=O===KeyboardCode.Right&&me<=Z.x||O===KeyboardCode.Left&&me>=X.x;if(Oe&&!A.y){T.scrollTo({left:me,behavior:h});return}Oe?E.x=T.scrollLeft-me:E.x=O===KeyboardCode.Right?T.scrollLeft-Z.x:T.scrollLeft-X.x,E.x&&T.scrollBy({left:-E.x,behavior:h});break}else if(ue&&Q.y!==v.y){const me=T.scrollTop+A.y,Oe=O===KeyboardCode.Down&&me<=Z.y||O===KeyboardCode.Up&&me>=X.y;if(Oe&&!A.x){T.scrollTo({top:me,behavior:h});return}Oe?E.y=T.scrollTop-me:E.y=O===KeyboardCode.Down?T.scrollTop-Z.y:T.scrollTop-X.y,E.y&&T.scrollBy({top:-E.y,behavior:h});break}}this.handleMove(e,add(subtract(v,this.referenceCoordinates),E))}}}handleMove(e,a){const{onMove:r}=this.props;e.preventDefault(),r(a)}handleEnd(e){const{onEnd:a}=this.props;e.preventDefault(),this.detach(),a()}handleCancel(e){const{onCancel:a}=this.props;e.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(s,e,a)=>{let{keyboardCodes:r=defaultKeyboardCodes,onActivation:l}=e,{active:u}=a;const{code:d}=s.nativeEvent;if(r.start.includes(d)){const h=u.activatorNode.current;return h&&s.target!==h?!1:(s.preventDefault(),l==null||l({event:s.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(s){return!!(s&&"distance"in s)}function isDelayConstraint(s){return!!(s&&"delay"in s)}class AbstractPointerSensor{constructor(e,a,r){var l;r===void 0&&(r=getEventListenerTarget(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=a;const{event:u}=e,{target:d}=u;this.props=e,this.events=a,this.document=getOwnerDocument(d),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(r),this.windowListeners=new Listeners(getWindow(d)),this.initialCoordinates=(l=getEventCoordinates(u))!=null?l:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:a,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),a){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(isDistanceConstraint(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,a){const{active:r,onPending:l}=this.props;l(r,e,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:e}=this,{onStart:a}=this.props;e&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),a(e))}handleMove(e){var a;const{activated:r,initialCoordinates:l,props:u}=this,{onMove:d,options:{activationConstraint:h}}=u;if(!l)return;const p=(a=getEventCoordinates(e))!=null?a:defaultCoordinates,m=subtract(l,p);if(!r&&h){if(isDistanceConstraint(h)){if(h.tolerance!=null&&hasExceededDistance(m,h.tolerance))return this.handleCancel();if(hasExceededDistance(m,h.distance))return this.handleStart()}if(isDelayConstraint(h)&&hasExceededDistance(m,h.tolerance))return this.handleCancel();this.handlePending(h,m);return}e.cancelable&&e.preventDefault(),d(p)}handleEnd(){const{onAbort:e,onEnd:a}=this.props;this.detach(),this.activated||e(this.props.active),a()}handleCancel(){const{onAbort:e,onCancel:a}=this.props;this.detach(),this.activated||e(this.props.active),a()}handleKeydown(e){e.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(e){const{event:a}=e,r=getOwnerDocument(a.target);super(e,events,r)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(s,e)=>{let{nativeEvent:a}=s,{onActivation:r}=e;return!a.isPrimary||a.button!==0?!1:(r==null||r({event:a}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(s){s[s.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(e){super(e,events$1,getOwnerDocument(e.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(s,e)=>{let{nativeEvent:a}=s,{onActivation:r}=e;return a.button===MouseButton.RightClick?!1:(r==null||r({event:a}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(e){super(e,events$2)}static setup(){return window.addEventListener(events$2.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,e)};function e(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(s,e)=>{let{nativeEvent:a}=s,{onActivation:r}=e;const{touches:l}=a;return l.length>1?!1:(r==null||r({event:a}),!0)}}];var AutoScrollActivator;(function(s){s[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(s){s[s.TreeOrder=0]="TreeOrder",s[s.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(s){let{acceleration:e,activator:a=AutoScrollActivator.Pointer,canScroll:r,draggingRect:l,enabled:u,interval:d=5,order:h=TraversalOrder.TreeOrder,pointerCoordinates:p,scrollableAncestors:m,scrollableAncestorRects:b,delta:v,threshold:A}=s;const E=useScrollIntent({delta:v,disabled:!u}),[S,T]=useInterval(),O=reactExports.useRef({x:0,y:0}),N=reactExports.useRef({x:0,y:0}),P=reactExports.useMemo(()=>{switch(a){case AutoScrollActivator.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case AutoScrollActivator.DraggableRect:return l}},[a,l,p]),k=reactExports.useRef(null),ae=reactExports.useCallback(()=>{const X=k.current;if(!X)return;const te=O.current.x*N.current.x,Q=O.current.y*N.current.y;X.scrollBy(te,Q)},[]),Z=reactExports.useMemo(()=>h===TraversalOrder.TreeOrder?[...m].reverse():m,[h,m]);reactExports.useEffect(()=>{if(!u||!m.length||!P){T();return}for(const X of Z){if((r==null?void 0:r(X))===!1)continue;const te=m.indexOf(X),Q=b[te];if(!Q)continue;const{direction:ne,speed:ue}=getScrollDirectionAndSpeed(X,Q,P,e,A);for(const me of["x","y"])E[me][ne[me]]||(ue[me]=0,ne[me]=0);if(ue.x>0||ue.y>0){T(),k.current=X,S(ae,d),O.current=ue,N.current=ne;return}}O.current={x:0,y:0},N.current={x:0,y:0},T()},[e,ae,r,T,u,d,JSON.stringify(P),JSON.stringify(E),S,m,Z,b,JSON.stringify(A)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(s){let{delta:e,disabled:a}=s;const r=usePrevious(e);return useLazyMemo(l=>{if(a||!r||!l)return defaultScrollIntent;const u={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Direction.Backward]:l.x[Direction.Backward]||u.x===-1,[Direction.Forward]:l.x[Direction.Forward]||u.x===1},y:{[Direction.Backward]:l.y[Direction.Backward]||u.y===-1,[Direction.Forward]:l.y[Direction.Forward]||u.y===1}}},[a,e,r])}function useCachedNode(s,e){const a=e!=null?s.get(e):void 0,r=a?a.node.current:null;return useLazyMemo(l=>{var u;return e==null?null:(u=r??l)!=null?u:null},[r,e])}function useCombineActivators(s,e){return reactExports.useMemo(()=>s.reduce((a,r)=>{const{sensor:l}=r,u=l.activators.map(d=>({eventName:d.eventName,handler:e(d.handler,r)}));return[...a,...u]},[]),[s,e])}var MeasuringStrategy;(function(s){s[s.Always=0]="Always",s[s.BeforeDragging=1]="BeforeDragging",s[s.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(s){s.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(s,e){let{dragging:a,dependencies:r,config:l}=e;const[u,d]=reactExports.useState(null),{frequency:h,measure:p,strategy:m}=l,b=reactExports.useRef(s),v=O(),A=useLatestValue(v),E=reactExports.useCallback(function(N){N===void 0&&(N=[]),!A.current&&d(P=>P===null?N:P.concat(N.filter(k=>!P.includes(k))))},[A]),S=reactExports.useRef(null),T=useLazyMemo(N=>{if(v&&!a)return defaultValue;if(!N||N===defaultValue||b.current!==s||u!=null){const P=new Map;for(let k of s){if(!k)continue;if(u&&u.length>0&&!u.includes(k.id)&&k.rect.current){P.set(k.id,k.rect.current);continue}const ae=k.node.current,Z=ae?new Rect(p(ae),ae):null;k.rect.current=Z,Z&&P.set(k.id,Z)}return P}return N},[s,u,a,v,p]);return reactExports.useEffect(()=>{b.current=s},[s]),reactExports.useEffect(()=>{v||E()},[a,v]),reactExports.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),reactExports.useEffect(()=>{v||typeof h!="number"||S.current!==null||(S.current=setTimeout(()=>{E(),S.current=null},h))},[h,v,E,...r]),{droppableRects:T,measureDroppableContainers:E,measuringScheduled:u!=null};function O(){switch(m){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return a;default:return!a}}}function useInitialValue(s,e){return useLazyMemo(a=>s?a||(typeof e=="function"?e(s):s):null,[e,s])}function useInitialRect(s,e){return useInitialValue(s,e)}function useMutationObserver(s){let{callback:e,disabled:a}=s;const r=useEvent(e),l=reactExports.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(r)},[r,a]);return reactExports.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function useResizeObserver(s){let{callback:e,disabled:a}=s;const r=useEvent(e),l=reactExports.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(r)},[a]);return reactExports.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function defaultMeasure(s){return new Rect(getClientRect(s),s)}function useRect(s,e,a){e===void 0&&(e=defaultMeasure);const[r,l]=reactExports.useState(null);function u(){l(p=>{if(!s)return null;if(s.isConnected===!1){var m;return(m=p??a)!=null?m:null}const b=e(s);return JSON.stringify(p)===JSON.stringify(b)?p:b})}const d=useMutationObserver({callback(p){if(s)for(const m of p){const{type:b,target:v}=m;if(b==="childList"&&v instanceof HTMLElement&&v.contains(s)){u();break}}}}),h=useResizeObserver({callback:u});return useIsomorphicLayoutEffect(()=>{u(),s?(h==null||h.observe(s),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(h==null||h.disconnect(),d==null||d.disconnect())},[s]),r}function useRectDelta(s){const e=useInitialValue(s);return getRectDelta(s,e)}const defaultValue$1=[];function useScrollableAncestors(s){const e=reactExports.useRef(s),a=useLazyMemo(r=>s?r&&r!==defaultValue$1&&s&&e.current&&s.parentNode===e.current.parentNode?r:getScrollableAncestors(s):defaultValue$1,[s]);return reactExports.useEffect(()=>{e.current=s},[s]),a}function useScrollOffsets(s){const[e,a]=reactExports.useState(null),r=reactExports.useRef(s),l=reactExports.useCallback(u=>{const d=getScrollableElement(u.target);d&&a(h=>h?(h.set(d,getScrollCoordinates(d)),new Map(h)):null)},[]);return reactExports.useEffect(()=>{const u=r.current;if(s!==u){d(u);const h=s.map(p=>{const m=getScrollableElement(p);return m?(m.addEventListener("scroll",l,{passive:!0}),[m,getScrollCoordinates(m)]):null}).filter(p=>p!=null);a(h.length?new Map(h):null),r.current=s}return()=>{d(s),d(u)};function d(h){h.forEach(p=>{const m=getScrollableElement(p);m==null||m.removeEventListener("scroll",l)})}},[l,s]),reactExports.useMemo(()=>s.length?e?Array.from(e.values()).reduce((u,d)=>add(u,d),defaultCoordinates):getScrollOffsets(s):defaultCoordinates,[s,e])}function useScrollOffsetsDelta(s,e){e===void 0&&(e=[]);const a=reactExports.useRef(null);return reactExports.useEffect(()=>{a.current=null},e),reactExports.useEffect(()=>{const r=s!==defaultCoordinates;r&&!a.current&&(a.current=s),!r&&a.current&&(a.current=null)},[s]),a.current?subtract(s,a.current):defaultCoordinates}function useSensorSetup(s){reactExports.useEffect(()=>{if(!canUseDOM)return;const e=s.map(a=>{let{sensor:r}=a;return r.setup==null?void 0:r.setup()});return()=>{for(const a of e)a==null||a()}},s.map(e=>{let{sensor:a}=e;return a}))}function useSyntheticListeners(s,e){return reactExports.useMemo(()=>s.reduce((a,r)=>{let{eventName:l,handler:u}=r;return a[l]=d=>{u(d,e)},a},{}),[s,e])}function useWindowRect(s){return reactExports.useMemo(()=>s?getWindowClientRect(s):null,[s])}const defaultValue$2=[];function useRects(s,e){e===void 0&&(e=getClientRect);const[a]=s,r=useWindowRect(a?getWindow(a):null),[l,u]=reactExports.useState(defaultValue$2);function d(){u(()=>s.length?s.map(p=>isDocumentScrollingElement(p)?r:new Rect(e(p),p)):defaultValue$2)}const h=useResizeObserver({callback:d});return useIsomorphicLayoutEffect(()=>{h==null||h.disconnect(),d(),s.forEach(p=>h==null?void 0:h.observe(p))},[s]),l}function getMeasurableNode(s){if(!s)return null;if(s.children.length>1)return s;const e=s.children[0];return isHTMLElement(e)?e:s}function useDragOverlayMeasuring(s){let{measure:e}=s;const[a,r]=reactExports.useState(null),l=reactExports.useCallback(m=>{for(const{target:b}of m)if(isHTMLElement(b)){r(v=>{const A=e(b);return v?{...v,width:A.width,height:A.height}:A});break}},[e]),u=useResizeObserver({callback:l}),d=reactExports.useCallback(m=>{const b=getMeasurableNode(m);u==null||u.disconnect(),b&&(u==null||u.observe(b)),r(b?e(b):null)},[e,u]),[h,p]=useNodeRef(d);return reactExports.useMemo(()=>({nodeRef:h,rect:a,setRef:p}),[a,h,p])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(e){var a;return e!=null&&(a=super.get(e))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:a}=e;return!a})}getNodeFor(e){var a,r;return(a=(r=this.get(e))==null?void 0:r.node.current)!=null?a:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop,draggableNodes:new Map,over:null,measureDroppableContainers:noop},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(s,e){switch(e.type){case Action.DragStart:return{...s,draggable:{...s.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Action.DragMove:return s.draggable.active==null?s:{...s,draggable:{...s.draggable,translate:{x:e.coordinates.x-s.draggable.initialCoordinates.x,y:e.coordinates.y-s.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...s,draggable:{...s.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:a}=e,{id:r}=a,l=new DroppableContainersMap(s.droppable.containers);return l.set(r,a),{...s,droppable:{...s.droppable,containers:l}}}case Action.SetDroppableDisabled:{const{id:a,key:r,disabled:l}=e,u=s.droppable.containers.get(a);if(!u||r!==u.key)return s;const d=new DroppableContainersMap(s.droppable.containers);return d.set(a,{...u,disabled:l}),{...s,droppable:{...s.droppable,containers:d}}}case Action.UnregisterDroppable:{const{id:a,key:r}=e,l=s.droppable.containers.get(a);if(!l||r!==l.key)return s;const u=new DroppableContainersMap(s.droppable.containers);return u.delete(a),{...s,droppable:{...s.droppable,containers:u}}}default:return s}}function RestoreFocus(s){let{disabled:e}=s;const{active:a,activatorEvent:r,draggableNodes:l}=reactExports.useContext(InternalContext),u=usePrevious(r),d=usePrevious(a==null?void 0:a.id);return reactExports.useEffect(()=>{if(!e&&!r&&u&&d!=null){if(!isKeyboardEvent(u)||document.activeElement===u.target)return;const h=l.get(d);if(!h)return;const{activatorNode:p,node:m}=h;if(!p.current&&!m.current)return;requestAnimationFrame(()=>{for(const b of[p.current,m.current]){if(!b)continue;const v=findFirstFocusableNode(b);if(v){v.focus();break}}})}},[r,e,l,d,u]),null}function applyModifiers(s,e){let{transform:a,...r}=e;return s!=null&&s.length?s.reduce((l,u)=>u({transform:l,...r}),a):a}function useMeasuringConfiguration(s){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...s==null?void 0:s.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...s==null?void 0:s.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...s==null?void 0:s.dragOverlay}}),[s==null?void 0:s.draggable,s==null?void 0:s.droppable,s==null?void 0:s.dragOverlay])}function useLayoutShiftScrollCompensation(s){let{activeNode:e,measure:a,initialRect:r,config:l=!0}=s;const u=reactExports.useRef(!1),{x:d,y:h}=typeof l=="boolean"?{x:l,y:l}:l;useIsomorphicLayoutEffect(()=>{if(!d&&!h||!e){u.current=!1;return}if(u.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const b=a(m),v=getRectDelta(b,r);if(d||(v.x=0),h||(v.y=0),u.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const A=getFirstScrollableAncestor(m);A&&A.scrollBy({top:v.y,left:v.x})}},[e,d,h,r,a])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(s){s[s.Uninitialized=0]="Uninitialized",s[s.Initializing=1]="Initializing",s[s.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function(e){var a,r,l,u;let{id:d,accessibility:h,autoScroll:p=!0,children:m,sensors:b=defaultSensors,collisionDetection:v=rectIntersection,measuring:A,modifiers:E,...S}=e;const T=reactExports.useReducer(reducer,void 0,getInitialState),[O,N]=T,[P,k]=useDndMonitorProvider(),[ae,Z]=reactExports.useState(Status.Uninitialized),X=ae===Status.Initialized,{draggable:{active:te,nodes:Q,translate:ne},droppable:{containers:ue}}=O,me=te!=null?Q.get(te):null,Oe=reactExports.useRef({initial:null,translated:null}),Te=reactExports.useMemo(()=>{var Ue;return te!=null?{id:te,data:(Ue=me==null?void 0:me.data)!=null?Ue:defaultData,rect:Oe}:null},[te,me]),ee=reactExports.useRef(null),[K,j]=reactExports.useState(null),[$,F]=reactExports.useState(null),Y=useLatestValue(S,Object.values(S)),C=useUniqueId("DndDescribedBy",d),U=reactExports.useMemo(()=>ue.getEnabled(),[ue]),G=useMeasuringConfiguration(A),{droppableRects:W,measureDroppableContainers:J,measuringScheduled:se}=useDroppableMeasuring(U,{dragging:X,dependencies:[ne.x,ne.y],config:G.droppable}),oe=useCachedNode(Q,te),Ne=reactExports.useMemo(()=>$?getEventCoordinates($):null,[$]),be=vn(),Re=useInitialRect(oe,G.draggable.measure);useLayoutShiftScrollCompensation({activeNode:te!=null?Q.get(te):null,config:be.layoutShiftCompensation,initialRect:Re,measure:G.draggable.measure});const he=useRect(oe,G.draggable.measure,Re),tt=useRect(oe?oe.parentElement:null),pt=reactExports.useRef({activatorEvent:null,active:null,activeNode:oe,collisionRect:null,collisions:null,droppableRects:W,draggableNodes:Q,draggingNode:null,draggingNodeRect:null,droppableContainers:ue,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Zt=ue.getNodeFor((a=pt.current.over)==null?void 0:a.id),St=useDragOverlayMeasuring({measure:G.dragOverlay.measure}),ta=(r=St.nodeRef.current)!=null?r:oe,mt=X?(l=St.rect)!=null?l:he:null,yn=!!(St.nodeRef.current&&St.rect),Fa=useRectDelta(yn?null:he),Va=useWindowRect(ta?getWindow(ta):null),Tt=useScrollableAncestors(X?Zt??oe:null),_a=useRects(Tt),bn=applyModifiers(E,{transform:{x:ne.x-Fa.x,y:ne.y-Fa.y,scaleX:1,scaleY:1},activatorEvent:$,active:Te,activeNodeRect:he,containerNodeRect:tt,draggingNodeRect:mt,over:pt.current.over,overlayNodeRect:St.rect,scrollableAncestors:Tt,scrollableAncestorRects:_a,windowRect:Va}),Yr=Ne?add(Ne,ne):null,gt=useScrollOffsets(Tt),os=useScrollOffsetsDelta(gt),Xr=useScrollOffsetsDelta(gt,[he]),aa=add(bn,os),Bt=mt?getAdjustedRect(mt,bn):null,Ga=Te&&Bt?v({active:Te,collisionRect:Bt,droppableRects:W,droppableContainers:U,pointerCoordinates:Yr}):null,tr=getFirstCollision(Ga,"id"),[Vt,Jr]=reactExports.useState(null),Ka=yn?bn:add(bn,Xr),rt=adjustScale(Ka,(u=Vt==null?void 0:Vt.rect)!=null?u:null,he),ar=reactExports.useRef(null),qt=reactExports.useCallback((Ue,Ze)=>{let{sensor:Ge,options:lt}=Ze;if(ee.current==null)return;const ut=Q.get(ee.current);if(!ut)return;const at=Ue.nativeEvent,yt=new Ge({active:ee.current,activeNode:ut,event:at,options:lt,context:pt,onAbort(Ie){if(!Q.get(Ie))return;const{onDragAbort:bt}=Y.current,Rt={id:Ie};bt==null||bt(Rt),P({type:"onDragAbort",event:Rt})},onPending(Ie,Kt,bt,Rt){if(!Q.get(Ie))return;const{onDragPending:Ea}=Y.current,Qt={id:Ie,constraint:Kt,initialCoordinates:bt,offset:Rt};Ea==null||Ea(Qt),P({type:"onDragPending",event:Qt})},onStart(Ie){const Kt=ee.current;if(Kt==null)return;const bt=Q.get(Kt);if(!bt)return;const{onDragStart:Rt}=Y.current,Aa={activatorEvent:at,active:{id:Kt,data:bt.data,rect:Oe}};reactDomExports.unstable_batchedUpdates(()=>{Rt==null||Rt(Aa),Z(Status.Initializing),N({type:Action.DragStart,initialCoordinates:Ie,active:Kt}),P({type:"onDragStart",event:Aa}),j(ar.current),F(at)})},onMove(Ie){N({type:Action.DragMove,coordinates:Ie})},onEnd:Gt(Action.DragEnd),onCancel:Gt(Action.DragCancel)});ar.current=yt;function Gt(Ie){return async function(){const{active:bt,collisions:Rt,over:Aa,scrollAdjustedTranslate:Ea}=pt.current;let Qt=null;if(bt&&Ea){const{cancelDrop:ct}=Y.current;Qt={activatorEvent:at,active:bt,collisions:Rt,delta:Ea,over:Aa},Ie===Action.DragEnd&&typeof ct=="function"&&await Promise.resolve(ct(Qt))&&(Ie=Action.DragCancel)}ee.current=null,reactDomExports.unstable_batchedUpdates(()=>{N({type:Ie}),Z(Status.Uninitialized),Jr(null),j(null),F(null),ar.current=null;const ct=Ie===Action.DragEnd?"onDragEnd":"onDragCancel";if(Qt){const qe=Y.current[ct];qe==null||qe(Qt),P({type:ct,event:Qt})}})}}},[Q]),it=reactExports.useCallback((Ue,Ze)=>(Ge,lt)=>{const ut=Ge.nativeEvent,at=Q.get(lt);if(ee.current!==null||!at||ut.dndKit||ut.defaultPrevented)return;const yt={active:at};Ue(Ge,Ze.options,yt)===!0&&(ut.dndKit={capturedBy:Ze.sensor},ee.current=lt,qt(Ge,Ze))},[Q,qt]),Wr=useCombineActivators(b,it);useSensorSetup(b),useIsomorphicLayoutEffect(()=>{he&&ae===Status.Initializing&&Z(Status.Initialized)},[he,ae]),reactExports.useEffect(()=>{const{onDragMove:Ue}=Y.current,{active:Ze,activatorEvent:Ge,collisions:lt,over:ut}=pt.current;if(!Ze||!Ge)return;const at={active:Ze,activatorEvent:Ge,collisions:lt,delta:{x:aa.x,y:aa.y},over:ut};reactDomExports.unstable_batchedUpdates(()=>{Ue==null||Ue(at),P({type:"onDragMove",event:at})})},[aa.x,aa.y]),reactExports.useEffect(()=>{const{active:Ue,activatorEvent:Ze,collisions:Ge,droppableContainers:lt,scrollAdjustedTranslate:ut}=pt.current;if(!Ue||ee.current==null||!Ze||!ut)return;const{onDragOver:at}=Y.current,yt=lt.get(tr),Gt=yt&&yt.rect.current?{id:yt.id,rect:yt.rect.current,data:yt.data,disabled:yt.disabled}:null,Ie={active:Ue,activatorEvent:Ze,collisions:Ge,delta:{x:ut.x,y:ut.y},over:Gt};reactDomExports.unstable_batchedUpdates(()=>{Jr(Gt),at==null||at(Ie),P({type:"onDragOver",event:Ie})})},[tr]),useIsomorphicLayoutEffect(()=>{pt.current={activatorEvent:$,active:Te,activeNode:oe,collisionRect:Bt,collisions:Ga,droppableRects:W,draggableNodes:Q,draggingNode:ta,draggingNodeRect:mt,droppableContainers:ue,over:Vt,scrollableAncestors:Tt,scrollAdjustedTranslate:aa},Oe.current={initial:mt,translated:Bt}},[Te,oe,Ga,Bt,Q,ta,mt,W,ue,Vt,Tt,aa]),useAutoScroller({...be,delta:ne,draggingRect:Bt,pointerCoordinates:Yr,scrollableAncestors:Tt,scrollableAncestorRects:_a});const ls=reactExports.useMemo(()=>({active:Te,activeNode:oe,activeNodeRect:he,activatorEvent:$,collisions:Ga,containerNodeRect:tt,dragOverlay:St,draggableNodes:Q,droppableContainers:ue,droppableRects:W,over:Vt,measureDroppableContainers:J,scrollableAncestors:Tt,scrollableAncestorRects:_a,measuringConfiguration:G,measuringScheduled:se,windowRect:Va}),[Te,oe,he,$,Ga,tt,St,Q,ue,W,Vt,J,Tt,_a,G,se,Va]),us=reactExports.useMemo(()=>({activatorEvent:$,activators:Wr,active:Te,activeNodeRect:he,ariaDescribedById:{draggable:C},dispatch:N,draggableNodes:Q,over:Vt,measureDroppableContainers:J}),[$,Wr,Te,he,N,C,Q,Vt,J]);return React.createElement(DndMonitorContext.Provider,{value:k},React.createElement(InternalContext.Provider,{value:us},React.createElement(PublicContext.Provider,{value:ls},React.createElement(ActiveDraggableContext.Provider,{value:rt},m)),React.createElement(RestoreFocus,{disabled:(h==null?void 0:h.restoreFocus)===!1})),React.createElement(Accessibility,{...h,hiddenTextDescribedById:C}));function vn(){const Ue=(K==null?void 0:K.autoScrollEnabled)===!1,Ze=typeof p=="object"?p.enabled===!1:p===!1,Ge=X&&!Ue&&!Ze;return typeof p=="object"?{...p,enabled:Ge}:{enabled:Ge}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX="Draggable";function useDraggable(s){let{id:e,data:a,disabled:r=!1,attributes:l}=s;const u=useUniqueId(ID_PREFIX),{activators:d,activatorEvent:h,active:p,activeNodeRect:m,ariaDescribedById:b,draggableNodes:v,over:A}=reactExports.useContext(InternalContext),{role:E=defaultRole,roleDescription:S="draggable",tabIndex:T=0}=l??{},O=(p==null?void 0:p.id)===e,N=reactExports.useContext(O?ActiveDraggableContext:NullContext),[P,k]=useNodeRef(),[ae,Z]=useNodeRef(),X=useSyntheticListeners(d,e),te=useLatestValue(a);useIsomorphicLayoutEffect(()=>(v.set(e,{id:e,key:u,node:P,activatorNode:ae,data:te}),()=>{const ne=v.get(e);ne&&ne.key===u&&v.delete(e)}),[v,e]);const Q=reactExports.useMemo(()=>({role:E,tabIndex:T,"aria-disabled":r,"aria-pressed":O&&E===defaultRole?!0:void 0,"aria-roledescription":S,"aria-describedby":b.draggable}),[r,E,T,O,S,b.draggable]);return{active:p,activatorEvent:h,activeNodeRect:m,attributes:Q,isDragging:O,listeners:r?void 0:X,node:P,over:A,setNodeRef:k,setActivatorNodeRef:Z,transform:N}}function useWindowManager(s){const[e,a]=reactExports.useState(5),[r,l]=reactExports.useState(s),[u,d]=reactExports.useState({music:{x:100,y:100,zIndex:1,isOpen:!1},settings:{x:120,y:120,zIndex:2,isOpen:!1},equalizer:{x:140,y:140,zIndex:3,isOpen:!1},assistant:{x:160,y:160,zIndex:4,isOpen:!1},cmd:{x:160,y:160,zIndex:5,isOpen:!1},bgedit:{x:160,y:160,zIndex:6,isOpen:!1},calculator:{x:160,y:160,zIndex:6,isOpen:!1},notepad:{x:160,y:160,zIndex:6,isOpen:!1}}),h=A=>{d(E=>({...E,[A]:{...E[A],isOpen:!0,zIndex:e}})),a(E=>E+1)},p=A=>{d(E=>({...E,[A]:{...E[A],isOpen:!1}}))};return{windowStates:u,repoUrl:r,handleRepoChange:A=>{l(A),p("settings"),alert("You have set the url to "+A)},handleDragEnd:A=>{const{delta:E,active:S}=A,T=S.id;d(O=>{const N=O[T];return{...O,[T]:{...N,x:N.x+E.x,y:N.y+E.y}}})},bringToFront:A=>{d(E=>({...E,[A]:{...E[A],zIndex:e}})),a(E=>E+1)},openWindow:h,closeWindow:p}}const startbtnimg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASQAAABzCAMAAAAG248lAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHOUExURf///wAAAN/f34CAgMDAwLe3t42NjVhYWCkpKRQUFAICAg0NDRoaGkFBQXBwcKCgoLy8vP8AAAD/AIaGhigoKEdHR7+/v76+vn19fRAQECoqKq2trVlZWZ2dnbm5uXZ2dnNzc7Kysj4+PmxsbLW1tVdXVwQEBAgICJqamn9/fxcXF2ZmZqurqycnJ2hoaAcHB46Ojh4eHjIyMmdnZwsLC1RUVIWFhYyMjKenpz09PSAgIK+vry8vL729vUJCQpeXl7S0tJ+fn29vb6amphISEmFhYYKCggMDA5OTk1xcXDU1NWpqant7e0REREtLS6ysrHJycqioqKOjo0hISE5OThsbG6qqqra2ti0tLbOzs3l5eRYWFkVFRbi4uJiYmExMTFNTU4iIiJWVlQUFBQwMDKGhoZmZmSIiImRkZA4ODi4uLouLi1JSUrGxsX5+fhwcHKmpqZSUlFFRUXV1dbq6upKSkjQ0NIGBgV9fXx0dHSQkJAAA////ADk5OWlpaaSkpIqKihEREZaWlm5ubk9PTwoKCpCQkHh4eEZGRjw8PDg4ODExMQEBAUBAQImJiV1dXVBQUJGRkQ8PD3x8fK6urm1tbRMTE0pKSiMjI01NTca/zt4AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAecSURBVHhe7Zr9XxRFGMCbXBCO07si7iTxDD3BEHw5fOtQETXwBQHFNDPKDIoS0YQMLF/K1DJ7f/9vm3n22ZnZ3dn1wc7P3cp8f+DzzDPD8Nkvu7Mzs/OCJRYmwNgSgZVEwEoiYCUR0CS9aAmzQmAlxWMlEbCSCFhJBIySHIsPK4mAlUTASiJgJRGwkghYSQSsJAJWEgEriYCVRMBKImAlEXg2kqDDAFiVRKwkAlYSASuJgJVEoJKSoBsC2Dw5WEkErCQCVhKBGpFUV7+yoTElKpvSq1ZnspiuEciSoA3GYaBW8ZIAY87LAow98BcF2eZXMOmRasnksLIWqL6k/JpWTPl4NYP1Qda2rcOoghTWv4aRiapLat+AiSCpjXlsolPc1NG5GeOKkX+9i23B2ES1JXX3YNnAptDQVNi6jbFKS8pt38H/WA1LKpawaKTXPzDl1+wU2QpLyrgDYoUlBaIA4AfABAckAZjgQAe5XVgyk9oNrVzye9JutqKS9r7hdlrDkjZ3YimCch80A2TbSkqq24ed1q6k/QewwGlt6z/IU3UDbfrL7pBo5rJcJR0+ggXW0VuAHgWFNzHJaShicvlKGsSYpQahPyTXi2nGho5iLhmSFNA6EjTEwQQHDXEwwRE9HcOYHVf3kaBdzcBPYGr5SmrBmB2DjhXDmGfspJwFLHtJI9CxQg1W++owFSspNzp8Mt0Eta3pVWOn4hZ+p8d5R41n+mE+nyRJb52FniXn3sYK1nNelJuxpKOuqvAOzqAkret9z6/3d7jxbBvGbMeKCxhpqP+JTlUljWDM2LsT0HUUsZLWiVVFkPR7WCtQkrLvY8i52IWBxv+UBNeNcRjoAYB2GPswSBrDmJPeY1rOesRJ+sB7DP10aC9MKamo3ptsaHcyJF36EAuC1l5teh0gRlL/JJaDTPa7DThSUr0mtGcqGZKKDVhAGts+Mu9JRkvSZgtBDuyHFhxPUvljDATH1iZDkvaql5Snp8IPXrSkLVgy8MkUtOB4knSGjiZFUvFTLPnoOHA5cENFSuqTg/bO3m4ut25gpgMTjMlRySSpfOWZSgpEAPSwJKCDyBHFsMltnCfNYo5dvYYZ5zM57kxjxihpBmoqPE8CF6YIgB6WBHTAl2/wicREcJPbJGm/t/fbqUbp3HXMsRbM+CTtnCs685/fSNVDTTIkOYPq8Qgy45s8Ge+kfN/AFwsti00jcpDWls0bvKQmybvjRt3ZZkIkOZmbmAnT041tBOS129EhbCgHGCUptQdTSFIkOdlh4zclQVmONEuQJBsaJAW2G57d2g29+IAeFF8KMOZ8JcDYAzsDwl8nPW6pi6JJyp2alsoNksYw45EgSZy+24tY4Udd1ZMlZe+MlfQRLixpm76iEyRLEqfu7vjXWKnYIdcqsZJyoyvGQ9OesKSutZjxSJwkQd/w8cCcYBZrYiTl+8UWUZiwJHfjRSORkjjZb1p0T/I9HiWpcC9q3A9LkhmPCkuC68Y4DPQAQDsAExyQBGCCg79opP1bbMRJe89bhKQp026SS1iSNO6RYEn695L73hkSs6TInRJOWJKcg3vUvqSD3ZdnV7Ystu4753aiUTiOzdRHJaOka1cx6dF1sf6B17DkzdgTLEnucqg9DcUJrGOsGTMmSb6zBJ0bHt4RuweyYXjtljxJav9jGHvRUJVxkvY2Yo6x7+S2QU1ICkQA9ABggoMJDhriYILjOOvuYxhaLHDknRT7uMlNu9Ss2lmRfp8HSefl+a3gslMfk+SzaJIkP7d8r+3SPVeSnBkM9S0zRG0zyfmfQdL8I0z5LnEac8+HJLmnwdgP7dChh/Ziv+49R/LpVJLUJbr7jID6NECQNCFP2tWqJPVM8TnjdjWoZOfUMvXxXUw6akvaG8q1O0kt8bTPj4R5UlyVgixJgQ58QA9AoKgIS3IGH2NBkF59Z56/1Nv7fae41JiuJKmTXeFPwEV51UuUZHh5SKoqKfsjFiLRhvQrZcyxyZ/y2UzbRp7TPkmVd8872cyubVgUyOEsRpIaF3+eyI3OjahDYxpVlRSeMAc5oxZb6tlyEReszZMMNHq7vzGStC/tgtBeClBdSbFLL05J/8fKI18uj8TDGXt6V26xxUjSXh4C0+S/6pKc+jhL/ndevT6C4YhjuhWvbsRAbmvGSFIPMaDNwTTIkqANxmGgdkngLzqnoz+W/OI/j1O4hXkX98kI34o93fIImDcYx0gKPm/yzalTdUlO4R6c8w9x89fgN1z/bXPkMCQv/YZlZFNBjV6TA9AkVpJ+YoljWEbWgiSu6ffQ3dQxvjmoiPOHd3xf0IQbTUX5xZZzAz77HsIS2+V2EifJyW7VPx78iVkftSCJM/9goXTBXXf8tfj3w8NRJ7rOLvwjLqm1YUE7pNM+VxJTq86G24FThUQmhkvivGXn4r/NxhlArUiqbZ5CUiAyAbUBsMoDs4nASiJgJRGwkghYSQTIkhTQ2gTWP5ElNa4FrCQCVhIBK4mAlUTgKSQtP6wkAlYSASuJgJVEwEoiYCURsJIIWEkErCQCVhIBK4lAUBKULQasJAJWEgEriYCVRMCVBD8tsVhJBKwkAlYSASvpiTD2H3G1RveWuZGKAAAAAElFTkSuQmCC",startmenuimg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAACWBAMAAAAvaLvFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURQAAgICAgMDAwP///wAA/82czywAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFmSURBVGje7ZddcsIwDITd4gNUhQOAeoEWcwCY6v5naryV/5PhgTc5+2Q7/mBmZ6UobteuXa+L6JMXnWekDuFfei1todmoEK7MuvohYv4KgehD+S0jTVJvRCF85y3sW1DdvjPXT6ekmms7tfV0p6aiXMxMarHabp/Xl2GK6JjfOwAOsfeeROouPA2F4MSZhEXucQvnoGs+m4gaJfIg2rbPOoVrXOkcz+4zUiVCjZ7M8zYpdBvmS4zQUdsLvm6ATkV5EZ3nlxVO0IA1TOk13WfLIIVr3RyynMFIbFBz/XvZKgWNU5nIb84RHL6pueYpdQnnKVFaZKfWYV+hBiktmVJfSXWPQVO+NX9jkyrCoIoeo7MsxljfTrC+R61RBUdwkjRM+LlL7sJZVimnsSrZKkD3oK9Km9TqUdwWqkbtUiUp3Y3BOV/5apVqF42lo1crObRG+aGW1u1rQ2eVcr2jG7661a8AQ5Rzfxe/BDyHDpFeAAAAAElFTkSuQmCC",Taskbar=({icons:s,taskbarItems:e=[]})=>{const[a,r]=reactExports.useState(!1),l=()=>{r(u=>!u)};return React.createElement("div",{className:"TaskbarContainer"},a&&React.createElement("div",{className:"StartMenu"},React.createElement(StartMenu,{icons:s})),React.createElement("div",{className:"Taskbar"},React.createElement(StartButton,{onClick:l}),e.map(({id:u,appTitle:d,icon:h,onClick:p})=>React.createElement(TaskbarItem,{key:u,appTitle:d,icon:h,onClick:p})),React.createElement(TaskbarClock,null)))},TaskbarItem=({appTitle:s,icon:e,onClick:a})=>React.createElement("div",{className:"TaskbarItem",onClick:a},React.createElement("div",null,React.createElement("img",{src:e,alt:`${s} icon`})),React.createElement("div",null,s)),StartButton=({onClick:s})=>React.createElement("div",{className:"StartButton",onClick:s},React.createElement("img",{className:"TaskbarImg",src:startbtnimg,alt:"Start Button"})),TaskbarClock=()=>{const[s,e]=reactExports.useState(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}));return reactExports.useEffect(()=>{const a=setInterval(()=>{const r=new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date);e(r)},6e4);return e(new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date)),()=>clearInterval(a)},[]),React.createElement("div",{className:"TaskbarClock"},React.createElement("p",null,s))},StartMenu=({icons:s})=>React.createElement("div",{className:"StartMenu"},React.createElement("div",{className:"leftBar"},React.createElement("img",{className:"TaskbarImg",src:startmenuimg,alt:"Start Menu Icon"})),React.createElement("div",{className:"StartMenuContent"},s.map(({id:e,name:a,icon:r,onClick:l})=>React.createElement(StartMenuItem,{key:e,menuItemName:a,StartMenuIcon:r,onClick:l})))),StartMenuItem=({menuItemName:s,StartMenuIcon:e,onClick:a})=>React.createElement("div",{className:"StartMenuItem",onClick:a},React.createElement("img",{className:"StartMenuIcon",src:e,alt:s}),React.createElement("p",null,s)),Desktop=({icons:s,bgColor:e})=>React.createElement("div",{className:"Desktop",style:{backgroundColor:e}},React.createElement("div",{className:"iconBox"},s.map(({id:a,icon:r,name:l,onClick:u})=>React.createElement(DesktopIcon,{key:a,icon:r,iconName:l,onClick:u})))),DesktopIcon=({icon:s,iconName:e,onClick:a})=>React.createElement("div",{className:"DesktopIcon",onClick:a},React.createElement("div",{className:"item"},React.createElement("img",{src:s,alt:e}),React.createElement("div",{className:"iconName"},React.createElement("p",null,e)))),minimizeicon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURf///wAAAN/f34CAgMDAwJsNYssAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABDSURBVEjH7cq5DQAgDANAngm8AhugrMD+M1FTQNIRS776SkgFSGIbDrPJFNeToqKiouKviJNimnjFFLu5WCKC8kdgAxXv7NbkSsdOAAAAAElFTkSuQmCC",maximizeicon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURf///wAAAN/f34CAgMDAwJsNYssAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABMSURBVEjHYyAKMAoKDhGFTEoEgLGx4VBS6OLiKIgVuIDAqMIBVuiCDhxHFY4qHFU4qnAoKhw+RTM+MJQUMhsTBENFoSCRYPArFBQEAP2asDHDoFEZAAAAAElFTkSuQmCC",closeicon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABGBAMAAACpsA4YAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAVUExURf///wAAAN/f34CAgMDAwL+/vwEBAXn373wAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABmSURBVEjHYyAKMAoKDhGFTEoEgLGx4VBS6IIXDEWFgiCAkEZwh6JCFxdHkJwIKmvIKoT5FQxC4GJDViGah4e2wuETM8Moz4D9ivB/Ipw7FBXiBKMKB0ghszFBMFQUChIJBr9CQUEAjhbMKR8UtOYAAAAASUVORK5CYII=",Menu98=({id:s,title:e,width:a,height:r,children:l,onClose:u,position:d,zIndex:h,onFocus:p})=>{const{attributes:m,listeners:b,setNodeRef:v,transform:A}=useDraggable({id:s}),E=d.x+((A==null?void 0:A.x)??0),S=d.y+((A==null?void 0:A.y)??0),T=Math.min(Math.max(E,0),window.innerWidth-a),O=Math.min(Math.max(S,0),window.innerHeight-r),N={width:a,height:r,zIndex:h,transform:`translate3d(${T}px, ${O}px, 0)`};return React.createElement("div",{ref:v,className:"Menu98",style:N,onMouseDown:p},React.createElement("div",{className:"titlebar",...b,...m},React.createElement("p",null,e),React.createElement("div",{className:"buttonContainer"},React.createElement("button",{className:"button",style:{backgroundImage:`url(${minimizeicon})`},onClick:()=>console.log("Minimize clicked"),onPointerDown:P=>P.stopPropagation()}),React.createElement("button",{className:"button",style:{backgroundImage:`url(${maximizeicon})`},onClick:()=>console.log("Maximize clicked"),onPointerDown:P=>P.stopPropagation()}),React.createElement("button",{className:"button",style:{backgroundImage:`url(${closeicon})`},onClick:()=>{console.log("Close clicked"),u()},onPointerDown:P=>P.stopPropagation()}))),React.createElement(Body$1,null,l))},Body$1=({children:s})=>React.createElement("div",{className:"Body"},s),musicObject={githubRepo:"",artistName:"",songName:"",albumCover:"",printTest:()=>{console.log("well")}},SongInfo=({songName:s,songArtist:e,albumCover:a})=>React.createElement("div",{className:"song-info"},React.createElement("div",{className:"album-info"},React.createElement("img",{src:a,alt:"Album cover",className:"album-cover"}),React.createElement("div",{className:"song-details"},React.createElement("h2",{className:"song-name"},s),React.createElement("h3",{className:"song-artist"},e)))),playButton="/assets/playbutton-CnN6bRpu.png",pauseButton="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAAAAAKVnuc8AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOwwAADsMBx2+oZAAABdBJREFUeF7t0TGKQwEMxND8+186jcodAllQXOjVZlzo9eSUghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMQU5piDHFOSYghxTkGMKckxBjinIMb8K8voHJj7j/itM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCEriADE7qCDEzoCjIwoSvIwISuIAMTuoIMTOgKMjChK8jAhK4gAxO6ggxM6AoyMKEryMCE7meP87eCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTmmIMcU5JiCHFOQYwpyTEGOKcgxBTnled689/8oyFpbvgAAAABJRU5ErkJggg==",forwardButton="/assets/forwardbutton-CgiMt0Yj.png",rewindButton="/assets/rewindbutton-DPVTxBor.png",ControlButtons=({isPlaying:s,togglePlayPause:e,playNextSong:a,playPreviousSong:r})=>{const l={backgroundImage:`url(${pauseButton})`},u={backgroundImage:`url(${playButton})`},d={backgroundImage:`url(${forwardButton})`},h={backgroundImage:`url(${rewindButton})`};return React.createElement("div",{className:"buttonContainer"},React.createElement("div",{className:"Button",style:h,onClick:r}),React.createElement("div",{className:"Button",onClick:e,style:s?l:u}),React.createElement("div",{className:"Button",style:d,onClick:a}))},formatTime=s=>{const e=Math.floor(s/60),a=Math.floor(s%60);return`${String(e).padStart(2,"0")}:${String(a).padStart(2,"0")}`},Slider=({sliderValue:s,currentTime:e,handleSliderChange:a})=>React.createElement("div",{className:"audioSlider"},React.createElement("p",null,formatTime(e)),React.createElement("input",{type:"range",min:"0",max:"100",value:s,className:"slider",onChange:r=>a(r.target.value)})),defaultcover="/assets/defaultalbumcover-C1o72Qwd.png",MusicPlayer=({repoUrl:s})=>{const[e,a]=reactExports.useState(0),[r,l]=reactExports.useState(0);musicObject.songName="Fuck with Dre Day",musicObject.artistName="Dr Dre",musicObject.albumCover=defaultcover;const u=p=>{a(p)},d=()=>{console.log(musicObject)},h=()=>{};return React.createElement("div",{className:"MusicPlayer"},React.createElement(SongInfo,{songName:musicObject.songName,songArtist:musicObject.artistName,albumCover:musicObject.albumCover}),React.createElement(ControlButtons,{playNextSong:d,playPreviousSong:h}),React.createElement(Slider,{sliderValue:e,currentTime:r,handleSliderChange:u}))},Settings=({onSubmitRepo:s})=>{const[e,a]=reactExports.useState(""),r=l=>{l.preventDefault(),e&&s(e)};return React.createElement("div",{className:"Settings"},React.createElement("form",{onSubmit:r},React.createElement("input",{type:"text",placeholder:"Enter GitHub Repo URL",value:e,onChange:l=>a(l.target.value),className:"settings-input"}),React.createElement("button",{type:"submit",className:"settings-button"},"Submit")))};function parsePartialJson(s){if(typeof s>"u")return null;try{return JSON.parse(s)}catch{}let e="";const a=[];let r=!1,l=!1;for(let u of s){if(r)u==='"'&&!l?r=!1:u===`
`&&!l?u="\\n":u==="\\"?l=!l:l=!1;else if(u==='"')r=!0,l=!1;else if(u==="{")a.push("}");else if(u==="[")a.push("]");else if(u==="}"||u==="]")if(a&&a[a.length-1]===u)a.pop();else return null;e+=u}r&&(e+='"');for(let u=a.length-1;u>=0;u-=1)e+=a[u];try{return JSON.parse(e)}catch{return null}}var decamelize,hasRequiredDecamelize;function requireDecamelize(){return hasRequiredDecamelize||(hasRequiredDecamelize=1,decamelize=function(s,e){if(typeof s!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,s.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),decamelize}var decamelizeExports=requireDecamelize();const snakeCase=getDefaultExportFromCjs(decamelizeExports);var camelcase={exports:{}},hasRequiredCamelcase;function requireCamelcase(){if(hasRequiredCamelcase)return camelcase.exports;hasRequiredCamelcase=1;const s=/[\p{Lu}]/u,e=/[\p{Ll}]/u,a=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,l=/[_.\- ]+/,u=new RegExp("^"+l.source),d=new RegExp(l.source+r.source,"gu"),h=new RegExp("\\d+"+r.source,"gu"),p=(A,E,S)=>{let T=!1,O=!1,N=!1;for(let P=0;P<A.length;P++){const k=A[P];T&&s.test(k)?(A=A.slice(0,P)+"-"+A.slice(P),T=!1,N=O,O=!0,P++):O&&N&&e.test(k)?(A=A.slice(0,P-1)+"-"+A.slice(P-1),N=O,O=!1,T=!0):(T=E(k)===k&&S(k)!==k,N=O,O=S(k)===k&&E(k)!==k)}return A},m=(A,E)=>(a.lastIndex=0,A.replace(a,S=>E(S))),b=(A,E)=>(d.lastIndex=0,h.lastIndex=0,A.replace(d,(S,T)=>E(T)).replace(h,S=>E(S))),v=(A,E)=>{if(!(typeof A=="string"||Array.isArray(A)))throw new TypeError("Expected the input to be `string | string[]`");if(E={pascalCase:!1,preserveConsecutiveUppercase:!1,...E},Array.isArray(A)?A=A.map(N=>N.trim()).filter(N=>N.length).join("-"):A=A.trim(),A.length===0)return"";const S=E.locale===!1?N=>N.toLowerCase():N=>N.toLocaleLowerCase(E.locale),T=E.locale===!1?N=>N.toUpperCase():N=>N.toLocaleUpperCase(E.locale);return A.length===1?E.pascalCase?T(A):S(A):(A!==S(A)&&(A=p(A,S,T)),A=A.replace(u,""),E.preserveConsecutiveUppercase?A=m(A,S):A=S(A),E.pascalCase&&(A=T(A.charAt(0))+A.slice(1)),b(A,T))};return camelcase.exports=v,camelcase.exports.default=v,camelcase.exports}requireCamelcase();function keyToJson(s,e){return(e==null?void 0:e[s])||snakeCase(s)}function mapKeys(s,e,a){const r={};for(const l in s)Object.hasOwn(s,l)&&(r[e(l,a)]=s[l]);return r}function shallowCopy(s){return Array.isArray(s)?[...s]:{...s}}function replaceSecrets(s,e){const a=shallowCopy(s);for(const[r,l]of Object.entries(e)){const[u,...d]=r.split(".").reverse();let h=a;for(const p of d.reverse()){if(h[p]===void 0)break;h[p]=shallowCopy(h[p]),h=h[p]}h[u]!==void 0&&(h[u]={lc:1,type:"secret",id:[l]})}return a}function get_lc_unique_name(s){const e=Object.getPrototypeOf(s);return typeof s.lc_name=="function"&&(typeof e.lc_name!="function"||s.lc_name()!==e.lc_name())?s.lc_name():s.name}class Serializable{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...a){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var l;return(l=this.lc_serializable_keys)==null?void 0:l.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Serializable||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},a={},r=Object.keys(this.lc_kwargs).reduce((l,u)=>(l[u]=u in this?this[u]:this.lc_kwargs[u],l),{});for(let l=Object.getPrototypeOf(this);l;l=Object.getPrototypeOf(l))Object.assign(e,Reflect.get(l,"lc_aliases",this)),Object.assign(a,Reflect.get(l,"lc_secrets",this)),Object.assign(r,Reflect.get(l,"lc_attributes",this));return Object.keys(a).forEach(l=>{let u=this,d=r;const[h,...p]=l.split(".").reverse();for(const m of p.reverse()){if(!(m in u)||u[m]===void 0)return;(!(m in d)||d[m]===void 0)&&(typeof u[m]=="object"&&u[m]!=null?d[m]={}:Array.isArray(u[m])&&(d[m]=[])),u=u[m],d=d[m]}h in u&&u[h]!==void 0&&(d[h]=d[h]||u[h])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:mapKeys(Object.keys(a).length?replaceSecrets(r,a):r,keyToJson,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function mergeContent(s,e){return typeof s=="string"?s===""?e:typeof e=="string"?s+e:[{type:"text",text:s},...e]:Array.isArray(e)?_mergeLists(s,e)??[...s,...e]:e===""?s:[...s,{type:"text",text:e}]}function stringifyWithDepthLimit(s,e){function a(r,l){if(typeof r!="object"||r===null||r===void 0)return r;if(l>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(d=>a(d,l+1));const u={};for(const d of Object.keys(r))u[d]=a(r[d],l+1);return u}return JSON.stringify(a(s,0),null,2)}class BaseMessage extends Serializable{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}getType(){return this._getType()}constructor(e,a){typeof e=="string"&&(e={content:e,additional_kwargs:a,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const a=stringifyWithDepthLimit(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${a}`}}function _mergeDicts(s,e){const a={...s};for(const[r,l]of Object.entries(e))if(a[r]==null)a[r]=l;else{if(l==null)continue;if(typeof a[r]!=typeof l||Array.isArray(a[r])!==Array.isArray(l))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof a[r]=="string"){if(r==="type")continue;a[r]+=l}else if(typeof a[r]=="object"&&!Array.isArray(a[r]))a[r]=_mergeDicts(a[r],l);else if(Array.isArray(a[r]))a[r]=_mergeLists(a[r],l);else{if(a[r]===l)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return a}function _mergeLists(s,e){if(!(s===void 0&&e===void 0)){if(s===void 0||e===void 0)return s||e;{const a=[...s];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const l=a.findIndex(u=>u.index===r.index);l!==-1?a[l]=_mergeDicts(a[l],r):a.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;a.push(r)}return a}}}class BaseMessageChunk extends BaseMessage{}function _isMessageFieldWithRole(s){return typeof s.role=="string"}function isBaseMessage(s){return typeof(s==null?void 0:s._getType)=="function"}class ToolMessage extends BaseMessage{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,a,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:a}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function defaultToolCallParser(s){const e=[],a=[];for(const r of s)if(r.function){const l=r.function.name;try{const u=JSON.parse(r.function.arguments),d={name:l||"",args:u||{},id:r.id};e.push(d)}catch{a.push({name:l,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,a]}class AIMessage extends BaseMessage{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,a){var l;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:a??{}};else{r=e;const u=(l=r.additional_kwargs)==null?void 0:l.tool_calls,d=r.tool_calls;u!=null&&u.length>0&&(d===void 0||d.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(u!=null&&d===void 0){const[h,p]=defaultToolCallParser(u);r.tool_calls=h??[],r.invalid_tool_calls=p??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}class AIMessageChunk extends BaseMessageChunk{constructor(e){let a;if(typeof e=="string")a={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)a={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],l=[];for(const u of e.tool_call_chunks){let d={};try{if(d=parsePartialJson(u.args||"{}"),d===null||typeof d!="object"||Array.isArray(d))throw new Error("Malformed tool call chunk args.");r.push({name:u.name??"",args:d,id:u.id,type:"tool_call"})}catch{l.push({name:u.name,args:u.args,id:u.id,error:"Malformed args.",type:"invalid_tool_call"})}}a={...e,tool_calls:r,invalid_tool_calls:l,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(a),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=a.tool_call_chunks??this.tool_call_chunks,this.tool_calls=a.tool_calls??this.tool_calls,this.invalid_tool_calls=a.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=a.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,l,u,d,h,p,m,b,v,A,E,S,T,O,N,P,k,ae,Z,X,te,Q,ne,ue,me,Oe,Te,ee,K,j,$,F,Y,C,U,G,W,J,se,oe;const a={content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Ne=_mergeLists(this.tool_call_chunks,e.tool_call_chunks);Ne!==void 0&&Ne.length>0&&(a.tool_call_chunks=Ne)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Ne={...(((l=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:l.audio)!==void 0||((d=(u=e.usage_metadata)==null?void 0:u.input_token_details)==null?void 0:d.audio)!==void 0)&&{audio:(((p=(h=this.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:p.audio)??0)+(((b=(m=e.usage_metadata)==null?void 0:m.input_token_details)==null?void 0:b.audio)??0)},...(((A=(v=this.usage_metadata)==null?void 0:v.input_token_details)==null?void 0:A.cache_read)!==void 0||((S=(E=e.usage_metadata)==null?void 0:E.input_token_details)==null?void 0:S.cache_read)!==void 0)&&{cache_read:(((O=(T=this.usage_metadata)==null?void 0:T.input_token_details)==null?void 0:O.cache_read)??0)+(((P=(N=e.usage_metadata)==null?void 0:N.input_token_details)==null?void 0:P.cache_read)??0)},...(((ae=(k=this.usage_metadata)==null?void 0:k.input_token_details)==null?void 0:ae.cache_creation)!==void 0||((X=(Z=e.usage_metadata)==null?void 0:Z.input_token_details)==null?void 0:X.cache_creation)!==void 0)&&{cache_creation:(((Q=(te=this.usage_metadata)==null?void 0:te.input_token_details)==null?void 0:Q.cache_creation)??0)+(((ue=(ne=e.usage_metadata)==null?void 0:ne.input_token_details)==null?void 0:ue.cache_creation)??0)}},be={...(((Oe=(me=this.usage_metadata)==null?void 0:me.output_token_details)==null?void 0:Oe.audio)!==void 0||((ee=(Te=e.usage_metadata)==null?void 0:Te.output_token_details)==null?void 0:ee.audio)!==void 0)&&{audio:(((j=(K=this.usage_metadata)==null?void 0:K.output_token_details)==null?void 0:j.audio)??0)+(((F=($=e.usage_metadata)==null?void 0:$.output_token_details)==null?void 0:F.audio)??0)},...(((C=(Y=this.usage_metadata)==null?void 0:Y.output_token_details)==null?void 0:C.reasoning)!==void 0||((G=(U=e.usage_metadata)==null?void 0:U.output_token_details)==null?void 0:G.reasoning)!==void 0)&&{reasoning:(((J=(W=this.usage_metadata)==null?void 0:W.output_token_details)==null?void 0:J.reasoning)??0)+(((oe=(se=e.usage_metadata)==null?void 0:se.output_token_details)==null?void 0:oe.reasoning)??0)}},Re=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},he=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},tt={input_tokens:Re.input_tokens+he.input_tokens,output_tokens:Re.output_tokens+he.output_tokens,total_tokens:Re.total_tokens+he.total_tokens,...Object.keys(Ne).length>0&&{input_token_details:Ne},...Object.keys(be).length>0&&{output_token_details:be}};a.usage_metadata=tt}return new AIMessageChunk(a)}}class HumanMessage extends BaseMessage{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class SystemMessage extends BaseMessage{static lc_name(){return"SystemMessage"}_getType(){return"system"}}function addLangChainErrorFields(s,e){return s.lc_error_code=e,s.message=`${s.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,s}function _isToolCall(s){return!!(s&&typeof s=="object"&&"type"in s&&s.type==="tool_call")}class ToolInputParsingException extends Error{constructor(e,a){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=a}}function _coerceToolCall(s){return _isToolCall(s)?s:typeof s.id=="string"&&s.type==="function"&&typeof s.function=="object"&&s.function!==null&&"arguments"in s.function&&typeof s.function.arguments=="string"&&"name"in s.function&&typeof s.function.name=="string"?{id:s.id,args:JSON.parse(s.function.arguments),name:s.function.name,type:"tool_call"}:s}function isSerializedConstructor(s){return typeof s=="object"&&s!=null&&s.lc===1&&Array.isArray(s.id)&&s.kwargs!=null&&typeof s.kwargs=="object"}function _constructMessageFromParams(s){let e,a;if(isSerializedConstructor(s)){const r=s.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",a=s.kwargs}else{const{type:r,...l}=s;e=r,a=l}if(e==="human"||e==="user")return new HumanMessage(a);if(e==="ai"||e==="assistant"){const{tool_calls:r,...l}=a;if(!Array.isArray(r))return new AIMessage(a);const u=r.map(_coerceToolCall);return new AIMessage({...l,tool_calls:u})}else{if(e==="system")return new SystemMessage(a);if(e==="developer")return new SystemMessage({...a,additional_kwargs:{...a.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in a)return new ToolMessage({...a,content:a.content,tool_call_id:a.tool_call_id,name:a.name});throw addLangChainErrorFields(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(s,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function coerceMessageLikeToMessage(s){if(typeof s=="string")return new HumanMessage(s);if(isBaseMessage(s))return s;if(Array.isArray(s)){const[e,a]=s;return _constructMessageFromParams({type:e,content:a})}else if(_isMessageFieldWithRole(s)){const{role:e,...a}=s;return _constructMessageFromParams({...a,type:e})}else return _constructMessageFromParams(s)}function getBufferString(s,e="Human",a="AI"){const r=[];for(const l of s){let u;if(l._getType()==="human")u=e;else if(l._getType()==="ai")u=a;else if(l._getType()==="system")u="System";else if(l._getType()==="function")u="Function";else if(l._getType()==="tool")u="Tool";else if(l._getType()==="generic")u=l.role;else throw new Error(`Got unsupported message type: ${l._getType()}`);const d=l.name?`${l.name}, `:"",h=typeof l.content=="string"?l.content:JSON.stringify(l.content,null,2);r.push(`${u}: ${d}${h}`)}return r.join(`
`)}var util;(function(s){s.assertEqual=l=>l;function e(l){}s.assertIs=e;function a(l){throw new Error}s.assertNever=a,s.arrayToEnum=l=>{const u={};for(const d of l)u[d]=d;return u},s.getValidEnumValues=l=>{const u=s.objectKeys(l).filter(h=>typeof l[l[h]]!="number"),d={};for(const h of u)d[h]=l[h];return s.objectValues(d)},s.objectValues=l=>s.objectKeys(l).map(function(u){return l[u]}),s.objectKeys=typeof Object.keys=="function"?l=>Object.keys(l):l=>{const u=[];for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&u.push(d);return u},s.find=(l,u)=>{for(const d of l)if(u(d))return d},s.isInteger=typeof Number.isInteger=="function"?l=>Number.isInteger(l):l=>typeof l=="number"&&isFinite(l)&&Math.floor(l)===l;function r(l,u=" | "){return l.map(d=>typeof d=="string"?`'${d}'`:d).join(u)}s.joinValues=r,s.jsonStringifyReplacer=(l,u)=>typeof u=="bigint"?u.toString():u})(util||(util={}));var objectUtil;(function(s){s.mergeShapes=(e,a)=>({...e,...a})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=s=>{switch(typeof s){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(s)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(s)?ZodParsedType.array:s===null?ZodParsedType.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&s instanceof Map?ZodParsedType.map:typeof Set<"u"&&s instanceof Set?ZodParsedType.set:typeof Date<"u"&&s instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}format(e){const a=e||function(u){return u.message},r={_errors:[]},l=u=>{for(const d of u.issues)if(d.code==="invalid_union")d.unionErrors.map(l);else if(d.code==="invalid_return_type")l(d.returnTypeError);else if(d.code==="invalid_arguments")l(d.argumentsError);else if(d.path.length===0)r._errors.push(a(d));else{let h=r,p=0;for(;p<d.path.length;){const m=d.path[p];p===d.path.length-1?(h[m]=h[m]||{_errors:[]},h[m]._errors.push(a(d))):h[m]=h[m]||{_errors:[]},h=h[m],p++}}};return l(this),r}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){const a={},r=[];for(const l of this.issues)l.path.length>0?(a[l.path[0]]=a[l.path[0]]||[],a[l.path[0]].push(e(l))):r.push(e(l));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}ZodError.create=s=>new ZodError(s);const errorMap=(s,e)=>{let a;switch(s.code){case ZodIssueCode.invalid_type:s.received===ZodParsedType.undefined?a="Required":a=`Expected ${s.expected}, received ${s.received}`;break;case ZodIssueCode.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(s.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:a=`Unrecognized key(s) in object: ${util.joinValues(s.keys,", ")}`;break;case ZodIssueCode.invalid_union:a="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${util.joinValues(s.options)}`;break;case ZodIssueCode.invalid_enum_value:a=`Invalid enum value. Expected ${util.joinValues(s.options)}, received '${s.received}'`;break;case ZodIssueCode.invalid_arguments:a="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:a="Invalid function return type";break;case ZodIssueCode.invalid_date:a="Invalid date";break;case ZodIssueCode.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(a=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?a=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?a=`Invalid input: must end with "${s.validation.endsWith}"`:util.assertNever(s.validation):s.validation!=="regex"?a=`Invalid ${s.validation}`:a="Invalid";break;case ZodIssueCode.too_small:s.type==="array"?a=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?a=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?a=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?a=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:a="Invalid input";break;case ZodIssueCode.too_big:s.type==="array"?a=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?a=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?a=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?a=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?a=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:a="Invalid input";break;case ZodIssueCode.custom:a="Invalid input";break;case ZodIssueCode.invalid_intersection_types:a="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:a=`Number must be a multiple of ${s.multipleOf}`;break;case ZodIssueCode.not_finite:a="Number must be finite";break;default:a=e.defaultError,util.assertNever(s)}return{message:a}};let overrideErrorMap=errorMap;function setErrorMap(s){overrideErrorMap=s}function getErrorMap(){return overrideErrorMap}const makeIssue=s=>{const{data:e,path:a,errorMaps:r,issueData:l}=s,u=[...a,...l.path||[]],d={...l,path:u};if(l.message!==void 0)return{...l,path:u,message:l.message};let h="";const p=r.filter(m=>!!m).slice().reverse();for(const m of p)h=m(d,{data:e,defaultError:h}).message;return{...l,path:u,message:h}},EMPTY_PATH=[];function addIssueToContext(s,e){const a=getErrorMap(),r=makeIssue({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,a,a===errorMap?void 0:errorMap].filter(l=>!!l)});s.common.issues.push(r)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){const r=[];for(const l of a){if(l.status==="aborted")return INVALID;l.status==="dirty"&&e.dirty(),r.push(l.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,a){const r=[];for(const l of a){const u=await l.key,d=await l.value;r.push({key:u,value:d})}return ParseStatus.mergeObjectSync(e,r)}static mergeObjectSync(e,a){const r={};for(const l of a){const{key:u,value:d}=l;if(u.status==="aborted"||d.status==="aborted")return INVALID;u.status==="dirty"&&e.dirty(),d.status==="dirty"&&e.dirty(),u.value!=="__proto__"&&(typeof d.value<"u"||l.alwaysSet)&&(r[u.value]=d.value)}return{status:e.value,value:r}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=s=>({status:"dirty",value:s}),OK=s=>({status:"valid",value:s}),isAborted=s=>s.status==="aborted",isDirty=s=>s.status==="dirty",isValid=s=>s.status==="valid",isAsync=s=>typeof Promise<"u"&&s instanceof Promise;function __classPrivateFieldGet(s,e,a,r){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(s)}function __classPrivateFieldSet(s,e,a,r,l){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,a),a}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,a,r,l){this._cachedPath=[],this.parent=e,this.data=a,this._path=r,this._key=l}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(s,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new ZodError(s.common.issues);return this._error=a,this._error}}};function processCreateParams(s){if(!s)return{};const{errorMap:e,invalid_type_error:a,required_error:r,description:l}=s;if(e&&(a||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:l}:{errorMap:(d,h)=>{var p,m;const{message:b}=s;return d.code==="invalid_enum_value"?{message:b??h.defaultError}:typeof h.data>"u"?{message:(p=b??r)!==null&&p!==void 0?p:h.defaultError}:d.code!=="invalid_type"?{message:h.defaultError}:{message:(m=b??a)!==null&&m!==void 0?m:h.defaultError}},description:l}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const a=this._parse(e);if(isAsync(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){const a=this._parse(e);return Promise.resolve(a)}parse(e,a){const r=this.safeParse(e,a);if(r.success)return r.data;throw r.error}safeParse(e,a){var r;const l={common:{issues:[],async:(r=a==null?void 0:a.async)!==null&&r!==void 0?r:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},u=this._parseSync({data:e,path:l.path,parent:l});return handleResult(l,u)}"~validate"(e){var a,r;const l={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const u=this._parseSync({data:e,path:[],parent:l});return isValid(u)?{value:u.value}:{issues:l.common.issues}}catch(u){!((r=(a=u==null?void 0:u.message)===null||a===void 0?void 0:a.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),l.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:l}).then(u=>isValid(u)?{value:u.value}:{issues:l.common.issues})}async parseAsync(e,a){const r=await this.safeParseAsync(e,a);if(r.success)return r.data;throw r.error}async safeParseAsync(e,a){const r={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},l=this._parse({data:e,path:r.path,parent:r}),u=await(isAsync(l)?l:Promise.resolve(l));return handleResult(r,u)}refine(e,a){const r=l=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(l):a;return this._refinement((l,u)=>{const d=e(l),h=()=>u.addIssue({code:ZodIssueCode.custom,...r(l)});return typeof Promise<"u"&&d instanceof Promise?d.then(p=>p?!0:(h(),!1)):d?!0:(h(),!1)})}refinement(e,a){return this._refinement((r,l)=>e(r)?!0:(l.addIssue(typeof a=="function"?a(r,l):a),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const a=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:a,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const a=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:a,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const a=this.constructor;return new a({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex$1;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function timeRegex(s){return new RegExp(`^${timeRegexSource(s)}$`)}function datetimeRegex(s){let e=`${dateRegexSource}T${timeRegexSource(s)}`;const a=[];return a.push(s.local?"Z?":"Z"),s.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(s,e){return!!((e==="v4"||!e)&&ipv4Regex.test(s)||(e==="v6"||!e)&&ipv6Regex.test(s))}function isValidJWT(s,e){if(!jwtRegex.test(s))return!1;try{const[a]=s.split("."),r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),l=JSON.parse(atob(r));return!(typeof l!="object"||l===null||!l.typ||!l.alg||e&&l.alg!==e)}catch{return!1}}function isValidCidr(s,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(s)||(e==="v6"||!e)&&ipv6CidrRegex.test(s))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const u=this._getOrReturnCtx(e);return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:u.parsedType}),INVALID}const r=new ParseStatus;let l;for(const u of this._def.checks)if(u.kind==="min")e.data.length<u.value&&(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),r.dirty());else if(u.kind==="max")e.data.length>u.value&&(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),r.dirty());else if(u.kind==="length"){const d=e.data.length>u.value,h=e.data.length<u.value;(d||h)&&(l=this._getOrReturnCtx(e,l),d?addIssueToContext(l,{code:ZodIssueCode.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):h&&addIssueToContext(l,{code:ZodIssueCode.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),r.dirty())}else if(u.kind==="email")emailRegex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"email",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty());else if(u.kind==="emoji")emojiRegex$1||(emojiRegex$1=new RegExp(_emojiRegex,"u")),emojiRegex$1.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"emoji",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty());else if(u.kind==="uuid")uuidRegex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"uuid",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty());else if(u.kind==="nanoid")nanoidRegex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty());else if(u.kind==="cuid")cuidRegex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"cuid",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty());else if(u.kind==="cuid2")cuid2Regex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty());else if(u.kind==="ulid")ulidRegex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"ulid",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty());else if(u.kind==="url")try{new URL(e.data)}catch{l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"url",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"regex",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty())):u.kind==="trim"?e.data=e.data.trim():u.kind==="includes"?e.data.includes(u.value,u.position)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),r.dirty()):u.kind==="toLowerCase"?e.data=e.data.toLowerCase():u.kind==="toUpperCase"?e.data=e.data.toUpperCase():u.kind==="startsWith"?e.data.startsWith(u.value)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.invalid_string,validation:{startsWith:u.value},message:u.message}),r.dirty()):u.kind==="endsWith"?e.data.endsWith(u.value)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.invalid_string,validation:{endsWith:u.value},message:u.message}),r.dirty()):u.kind==="datetime"?datetimeRegex(u).test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.invalid_string,validation:"datetime",message:u.message}),r.dirty()):u.kind==="date"?dateRegex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.invalid_string,validation:"date",message:u.message}),r.dirty()):u.kind==="time"?timeRegex(u).test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.invalid_string,validation:"time",message:u.message}),r.dirty()):u.kind==="duration"?durationRegex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"duration",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty()):u.kind==="ip"?isValidIP(e.data,u.version)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"ip",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty()):u.kind==="jwt"?isValidJWT(e.data,u.alg)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"jwt",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty()):u.kind==="cidr"?isValidCidr(e.data,u.version)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"cidr",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty()):u.kind==="base64"?base64Regex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"base64",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty()):u.kind==="base64url"?base64urlRegex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"base64url",code:ZodIssueCode.invalid_string,message:u.message}),r.dirty()):util.assertNever(u);return{status:r.value,value:e.data}}_regex(e,a,r){return this.refinement(l=>e.test(l),{validation:a,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(r)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){var a,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...errorUtil.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...errorUtil.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...errorUtil.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(a)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}}ZodString.create=s=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(s)})};function floatSafeRemainder(s,e){const a=(s.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,l=a>r?a:r,u=parseInt(s.toFixed(l).replace(".","")),d=parseInt(e.toFixed(l).replace(".",""));return u%d/Math.pow(10,l)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const u=this._getOrReturnCtx(e);return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:u.parsedType}),INVALID}let r;const l=new ParseStatus;for(const u of this._def.checks)u.kind==="int"?util.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:u.message}),l.dirty()):u.kind==="min"?(u.inclusive?e.data<u.value:e.data<=u.value)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),l.dirty()):u.kind==="max"?(u.inclusive?e.data>u.value:e.data>=u.value)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),l.dirty()):u.kind==="multipleOf"?floatSafeRemainder(e.data,u.value)!==0&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.not_multiple_of,multipleOf:u.value,message:u.message}),l.dirty()):u.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.not_finite,message:u.message}),l.dirty()):util.assertNever(u);return{status:l.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,errorUtil.toString(a))}gt(e,a){return this.setLimit("min",e,!1,errorUtil.toString(a))}lte(e,a){return this.setLimit("max",e,!0,errorUtil.toString(a))}lt(e,a){return this.setLimit("max",e,!1,errorUtil.toString(a))}setLimit(e,a,r,l){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:r,message:errorUtil.toString(l)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,a=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(a===null||r.value>a)&&(a=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(a)&&Number.isFinite(e)}}ZodNumber.create=s=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...processCreateParams(s)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let r;const l=new ParseStatus;for(const u of this._def.checks)u.kind==="min"?(u.inclusive?e.data<u.value:e.data<=u.value)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),l.dirty()):u.kind==="max"?(u.inclusive?e.data>u.value:e.data>=u.value)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),l.dirty()):u.kind==="multipleOf"?e.data%u.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.not_multiple_of,multipleOf:u.value,message:u.message}),l.dirty()):util.assertNever(u);return{status:l.value,value:e.data}}_getInvalidInput(e){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:a.parsedType}),INVALID}gte(e,a){return this.setLimit("min",e,!0,errorUtil.toString(a))}gt(e,a){return this.setLimit("min",e,!1,errorUtil.toString(a))}lte(e,a){return this.setLimit("max",e,!0,errorUtil.toString(a))}lt(e,a){return this.setLimit("max",e,!1,errorUtil.toString(a))}setLimit(e,a,r,l){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:r,message:errorUtil.toString(l)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(a)})}get minValue(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}}ZodBigInt.create=s=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(s)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:r.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=s=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...processCreateParams(s)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const u=this._getOrReturnCtx(e);return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:u.parsedType}),INVALID}if(isNaN(e.data.getTime())){const u=this._getOrReturnCtx(e);return addIssueToContext(u,{code:ZodIssueCode.invalid_date}),INVALID}const r=new ParseStatus;let l;for(const u of this._def.checks)u.kind==="min"?e.data.getTime()<u.value&&(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),r.dirty()):u.kind==="max"?e.data.getTime()>u.value&&(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:ZodIssueCode.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),r.dirty()):util.assertNever(u);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(a)})}get minDate(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}}ZodDate.create=s=>new ZodDate({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(s)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:r.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=s=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(s)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:r.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=s=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(s)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:r.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=s=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(s)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=s=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(s)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=s=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(s)});class ZodNever extends ZodType{_parse(e){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:a.parsedType}),INVALID}}ZodNever.create=s=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(s)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:r.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=s=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(s)});class ZodArray extends ZodType{_parse(e){const{ctx:a,status:r}=this._processInputParams(e),l=this._def;if(a.parsedType!==ZodParsedType.array)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:a.parsedType}),INVALID;if(l.exactLength!==null){const d=a.data.length>l.exactLength.value,h=a.data.length<l.exactLength.value;(d||h)&&(addIssueToContext(a,{code:d?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:h?l.exactLength.value:void 0,maximum:d?l.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:l.exactLength.message}),r.dirty())}if(l.minLength!==null&&a.data.length<l.minLength.value&&(addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:l.minLength.value,type:"array",inclusive:!0,exact:!1,message:l.minLength.message}),r.dirty()),l.maxLength!==null&&a.data.length>l.maxLength.value&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:l.maxLength.value,type:"array",inclusive:!0,exact:!1,message:l.maxLength.message}),r.dirty()),a.common.async)return Promise.all([...a.data].map((d,h)=>l.type._parseAsync(new ParseInputLazyPath(a,d,a.path,h)))).then(d=>ParseStatus.mergeArray(r,d));const u=[...a.data].map((d,h)=>l.type._parseSync(new ParseInputLazyPath(a,d,a.path,h)));return ParseStatus.mergeArray(r,u)}get element(){return this._def.type}min(e,a){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(a)}})}max(e,a){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(a)}})}length(e,a){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(a)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(s,e)=>new ZodArray({type:s,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(s){if(s instanceof ZodObject){const e={};for(const a in s.shape){const r=s.shape[a];e[a]=ZodOptional.create(deepPartialify(r))}return new ZodObject({...s._def,shape:()=>e})}else return s instanceof ZodArray?new ZodArray({...s._def,type:deepPartialify(s.element)}):s instanceof ZodOptional?ZodOptional.create(deepPartialify(s.unwrap())):s instanceof ZodNullable?ZodNullable.create(deepPartialify(s.unwrap())):s instanceof ZodTuple?ZodTuple.create(s.items.map(e=>deepPartialify(e))):s}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),a=util.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const m=this._getOrReturnCtx(e);return addIssueToContext(m,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:m.parsedType}),INVALID}const{status:r,ctx:l}=this._processInputParams(e),{shape:u,keys:d}=this._getCached(),h=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const m in l.data)d.includes(m)||h.push(m);const p=[];for(const m of d){const b=u[m],v=l.data[m];p.push({key:{status:"valid",value:m},value:b._parse(new ParseInputLazyPath(l,v,l.path,m)),alwaysSet:m in l.data})}if(this._def.catchall instanceof ZodNever){const m=this._def.unknownKeys;if(m==="passthrough")for(const b of h)p.push({key:{status:"valid",value:b},value:{status:"valid",value:l.data[b]}});else if(m==="strict")h.length>0&&(addIssueToContext(l,{code:ZodIssueCode.unrecognized_keys,keys:h}),r.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const b of h){const v=l.data[b];p.push({key:{status:"valid",value:b},value:m._parse(new ParseInputLazyPath(l,v,l.path,b)),alwaysSet:b in l.data})}}return l.common.async?Promise.resolve().then(async()=>{const m=[];for(const b of p){const v=await b.key,A=await b.value;m.push({key:v,value:A,alwaysSet:b.alwaysSet})}return m}).then(m=>ParseStatus.mergeObjectSync(r,m)):ParseStatus.mergeObjectSync(r,p)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,r)=>{var l,u,d,h;const p=(d=(u=(l=this._def).errorMap)===null||u===void 0?void 0:u.call(l,a,r).message)!==null&&d!==void 0?d:r.defaultError;return a.code==="unrecognized_keys"?{message:(h=errorUtil.errToObj(e).message)!==null&&h!==void 0?h:p}:{message:p}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const a={};return util.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(a[r]=this.shape[r])}),new ZodObject({...this._def,shape:()=>a})}omit(e){const a={};return util.objectKeys(this.shape).forEach(r=>{e[r]||(a[r]=this.shape[r])}),new ZodObject({...this._def,shape:()=>a})}deepPartial(){return deepPartialify(this)}partial(e){const a={};return util.objectKeys(this.shape).forEach(r=>{const l=this.shape[r];e&&!e[r]?a[r]=l:a[r]=l.optional()}),new ZodObject({...this._def,shape:()=>a})}required(e){const a={};return util.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])a[r]=this.shape[r];else{let u=this.shape[r];for(;u instanceof ZodOptional;)u=u._def.innerType;a[r]=u}}),new ZodObject({...this._def,shape:()=>a})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(s,e)=>new ZodObject({shape:()=>s,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(s,e)=>new ZodObject({shape:()=>s,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(s,e)=>new ZodObject({shape:s,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e),r=this._def.options;function l(u){for(const h of u)if(h.result.status==="valid")return h.result;for(const h of u)if(h.result.status==="dirty")return a.common.issues.push(...h.ctx.common.issues),h.result;const d=u.map(h=>new ZodError(h.ctx.common.issues));return addIssueToContext(a,{code:ZodIssueCode.invalid_union,unionErrors:d}),INVALID}if(a.common.async)return Promise.all(r.map(async u=>{const d={...a,common:{...a.common,issues:[]},parent:null};return{result:await u._parseAsync({data:a.data,path:a.path,parent:d}),ctx:d}})).then(l);{let u;const d=[];for(const p of r){const m={...a,common:{...a.common,issues:[]},parent:null},b=p._parseSync({data:a.data,path:a.path,parent:m});if(b.status==="valid")return b;b.status==="dirty"&&!u&&(u={result:b,ctx:m}),m.common.issues.length&&d.push(m.common.issues)}if(u)return a.common.issues.push(...u.ctx.common.issues),u.result;const h=d.map(p=>new ZodError(p));return addIssueToContext(a,{code:ZodIssueCode.invalid_union,unionErrors:h}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(s,e)=>new ZodUnion({options:s,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=s=>s instanceof ZodLazy?getDiscriminator(s.schema):s instanceof ZodEffects?getDiscriminator(s.innerType()):s instanceof ZodLiteral?[s.value]:s instanceof ZodEnum?s.options:s instanceof ZodNativeEnum?util.objectValues(s.enum):s instanceof ZodDefault?getDiscriminator(s._def.innerType):s instanceof ZodUndefined?[void 0]:s instanceof ZodNull?[null]:s instanceof ZodOptional?[void 0,...getDiscriminator(s.unwrap())]:s instanceof ZodNullable?[null,...getDiscriminator(s.unwrap())]:s instanceof ZodBranded||s instanceof ZodReadonly?getDiscriminator(s.unwrap()):s instanceof ZodCatch?getDiscriminator(s._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.object)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:a.parsedType}),INVALID;const r=this.discriminator,l=a.data[r],u=this.optionsMap.get(l);return u?a.common.async?u._parseAsync({data:a.data,path:a.path,parent:a}):u._parseSync({data:a.data,path:a.path,parent:a}):(addIssueToContext(a,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,r){const l=new Map;for(const u of a){const d=getDiscriminator(u.shape[e]);if(!d.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const h of d){if(l.has(h))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(h)}`);l.set(h,u)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:l,...processCreateParams(r)})}}function mergeValues(s,e){const a=getParsedType(s),r=getParsedType(e);if(s===e)return{valid:!0,data:s};if(a===ZodParsedType.object&&r===ZodParsedType.object){const l=util.objectKeys(e),u=util.objectKeys(s).filter(h=>l.indexOf(h)!==-1),d={...s,...e};for(const h of u){const p=mergeValues(s[h],e[h]);if(!p.valid)return{valid:!1};d[h]=p.data}return{valid:!0,data:d}}else if(a===ZodParsedType.array&&r===ZodParsedType.array){if(s.length!==e.length)return{valid:!1};const l=[];for(let u=0;u<s.length;u++){const d=s[u],h=e[u],p=mergeValues(d,h);if(!p.valid)return{valid:!1};l.push(p.data)}return{valid:!0,data:l}}else return a===ZodParsedType.date&&r===ZodParsedType.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:a,ctx:r}=this._processInputParams(e),l=(u,d)=>{if(isAborted(u)||isAborted(d))return INVALID;const h=mergeValues(u.value,d.value);return h.valid?((isDirty(u)||isDirty(d))&&a.dirty(),{status:a.value,value:h.data}):(addIssueToContext(r,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([u,d])=>l(u,d)):l(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ZodIntersection.create=(s,e,a)=>new ZodIntersection({left:s,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(a)});class ZodTuple extends ZodType{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.array)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:r.parsedType}),INVALID;if(r.data.length<this._def.items.length)return addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&r.data.length>this._def.items.length&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const u=[...r.data].map((d,h)=>{const p=this._def.items[h]||this._def.rest;return p?p._parse(new ParseInputLazyPath(r,d,r.path,h)):null}).filter(d=>!!d);return r.common.async?Promise.all(u).then(d=>ParseStatus.mergeArray(a,d)):ParseStatus.mergeArray(a,u)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:s,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.object)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:r.parsedType}),INVALID;const l=[],u=this._def.keyType,d=this._def.valueType;for(const h in r.data)l.push({key:u._parse(new ParseInputLazyPath(r,h,r.path,h)),value:d._parse(new ParseInputLazyPath(r,r.data[h],r.path,h)),alwaysSet:h in r.data});return r.common.async?ParseStatus.mergeObjectAsync(a,l):ParseStatus.mergeObjectSync(a,l)}get element(){return this._def.valueType}static create(e,a,r){return a instanceof ZodType?new ZodRecord({keyType:e,valueType:a,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(r)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(a)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.map)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:r.parsedType}),INVALID;const l=this._def.keyType,u=this._def.valueType,d=[...r.data.entries()].map(([h,p],m)=>({key:l._parse(new ParseInputLazyPath(r,h,r.path,[m,"key"])),value:u._parse(new ParseInputLazyPath(r,p,r.path,[m,"value"]))}));if(r.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const p of d){const m=await p.key,b=await p.value;if(m.status==="aborted"||b.status==="aborted")return INVALID;(m.status==="dirty"||b.status==="dirty")&&a.dirty(),h.set(m.value,b.value)}return{status:a.value,value:h}})}else{const h=new Map;for(const p of d){const m=p.key,b=p.value;if(m.status==="aborted"||b.status==="aborted")return INVALID;(m.status==="dirty"||b.status==="dirty")&&a.dirty(),h.set(m.value,b.value)}return{status:a.value,value:h}}}}ZodMap.create=(s,e,a)=>new ZodMap({valueType:e,keyType:s,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(a)});class ZodSet extends ZodType{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.set)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:r.parsedType}),INVALID;const l=this._def;l.minSize!==null&&r.data.size<l.minSize.value&&(addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:l.minSize.value,type:"set",inclusive:!0,exact:!1,message:l.minSize.message}),a.dirty()),l.maxSize!==null&&r.data.size>l.maxSize.value&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:l.maxSize.value,type:"set",inclusive:!0,exact:!1,message:l.maxSize.message}),a.dirty());const u=this._def.valueType;function d(p){const m=new Set;for(const b of p){if(b.status==="aborted")return INVALID;b.status==="dirty"&&a.dirty(),m.add(b.value)}return{status:a.value,value:m}}const h=[...r.data.values()].map((p,m)=>u._parse(new ParseInputLazyPath(r,p,r.path,m)));return r.common.async?Promise.all(h).then(p=>d(p)):d(h)}min(e,a){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(a)}})}max(e,a){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}}ZodSet.create=(s,e)=>new ZodSet({valueType:s,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.function)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:a.parsedType}),INVALID;function r(h,p){return makeIssue({data:h,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,getErrorMap(),errorMap].filter(m=>!!m),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:p}})}function l(h,p){return makeIssue({data:h,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,getErrorMap(),errorMap].filter(m=>!!m),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:p}})}const u={errorMap:a.common.contextualErrorMap},d=a.data;if(this._def.returns instanceof ZodPromise){const h=this;return OK(async function(...p){const m=new ZodError([]),b=await h._def.args.parseAsync(p,u).catch(E=>{throw m.addIssue(r(p,E)),m}),v=await Reflect.apply(d,this,b);return await h._def.returns._def.type.parseAsync(v,u).catch(E=>{throw m.addIssue(l(v,E)),m})})}else{const h=this;return OK(function(...p){const m=h._def.args.safeParse(p,u);if(!m.success)throw new ZodError([r(p,m.error)]);const b=Reflect.apply(d,this,m.data),v=h._def.returns.safeParse(b,u);if(!v.success)throw new ZodError([l(b,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,r){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:a||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(r)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}ZodLazy.create=(s,e)=>new ZodLazy({getter:s,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(s,e)=>new ZodLiteral({value:s,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(s,e){return new ZodEnum({values:s,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const a=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(a,{expected:util.joinValues(r),received:a.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(e.data)){const a=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_enum_value,options:r}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const a of this._def.values)e[a]=a;return e}get Values(){const e={};for(const a of this._def.values)e[a]=a;return e}get Enum(){const e={};for(const a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return ZodEnum.create(e,{...this._def,...a})}exclude(e,a=this._def){return ZodEnum.create(this.options.filter(r=>!e.includes(r)),{...this._def,...a})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const a=util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ZodParsedType.string&&r.parsedType!==ZodParsedType.number){const l=util.objectValues(a);return addIssueToContext(r,{expected:util.joinValues(l),received:r.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(e.data)){const l=util.objectValues(a);return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_enum_value,options:l}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(s,e)=>new ZodNativeEnum({values:s,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.promise&&a.common.async===!1)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:a.parsedType}),INVALID;const r=a.parsedType===ZodParsedType.promise?a.data:Promise.resolve(a.data);return OK(r.then(l=>this._def.type.parseAsync(l,{path:a.path,errorMap:a.common.contextualErrorMap})))}}ZodPromise.create=(s,e)=>new ZodPromise({type:s,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:a,ctx:r}=this._processInputParams(e),l=this._def.effect||null,u={addIssue:d=>{addIssueToContext(r,d),d.fatal?a.abort():a.dirty()},get path(){return r.path}};if(u.addIssue=u.addIssue.bind(u),l.type==="preprocess"){const d=l.transform(r.data,u);if(r.common.async)return Promise.resolve(d).then(async h=>{if(a.value==="aborted")return INVALID;const p=await this._def.schema._parseAsync({data:h,path:r.path,parent:r});return p.status==="aborted"?INVALID:p.status==="dirty"||a.value==="dirty"?DIRTY(p.value):p});{if(a.value==="aborted")return INVALID;const h=this._def.schema._parseSync({data:d,path:r.path,parent:r});return h.status==="aborted"?INVALID:h.status==="dirty"||a.value==="dirty"?DIRTY(h.value):h}}if(l.type==="refinement"){const d=h=>{const p=l.refinement(h,u);if(r.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(r.common.async===!1){const h=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return h.status==="aborted"?INVALID:(h.status==="dirty"&&a.dirty(),d(h.value),{status:a.value,value:h.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(h=>h.status==="aborted"?INVALID:(h.status==="dirty"&&a.dirty(),d(h.value).then(()=>({status:a.value,value:h.value}))))}if(l.type==="transform")if(r.common.async===!1){const d=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!isValid(d))return d;const h=l.transform(d.value,u);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:h}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(d=>isValid(d)?Promise.resolve(l.transform(d.value,u)).then(h=>({status:a.value,value:h})):d);util.assertNever(l)}}ZodEffects.create=(s,e,a)=>new ZodEffects({schema:s,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(a)});ZodEffects.createWithPreprocess=(s,e,a)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:s},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(a)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(s,e)=>new ZodOptional({innerType:s,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(s,e)=>new ZodNullable({innerType:s,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e);let r=a.data;return a.parsedType===ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}ZodDefault.create=(s,e)=>new ZodDefault({innerType:s,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e),r={...a,common:{...a.common,issues:[]}},l=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return isAsync(l)?l.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(s,e)=>new ZodCatch({innerType:s,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:r.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=s=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(s)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e),r=a.data;return this._def.type._parse({data:r,path:a.path,parent:a})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const u=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?INVALID:u.status==="dirty"?(a.dirty(),DIRTY(u.value)):this._def.out._parseAsync({data:u.value,path:r.path,parent:r})})();{const l=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?INVALID:l.status==="dirty"?(a.dirty(),{status:"dirty",value:l.value}):this._def.out._parseSync({data:l.value,path:r.path,parent:r})}}static create(e,a){return new ZodPipeline({in:e,out:a,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const a=this._def.innerType._parse(e),r=l=>(isValid(l)&&(l.value=Object.freeze(l.value)),l);return isAsync(a)?a.then(l=>r(l)):r(a)}unwrap(){return this._def.innerType}}ZodReadonly.create=(s,e)=>new ZodReadonly({innerType:s,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});function cleanParams(s,e){const a=typeof s=="function"?s(e):typeof s=="string"?{message:s}:s;return typeof a=="string"?{message:a}:a}function custom(s,e={},a){return s?ZodAny.create().superRefine((r,l)=>{var u,d;const h=s(r);if(h instanceof Promise)return h.then(p=>{var m,b;if(!p){const v=cleanParams(e,r),A=(b=(m=v.fatal)!==null&&m!==void 0?m:a)!==null&&b!==void 0?b:!0;l.addIssue({code:"custom",...v,fatal:A})}});if(!h){const p=cleanParams(e,r),m=(d=(u=p.fatal)!==null&&u!==void 0?u:a)!==null&&d!==void 0?d:!0;l.addIssue({code:"custom",...p,fatal:m})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(s,e={message:`Input not instance of ${s.name}`})=>custom(a=>a instanceof s,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:s=>ZodString.create({...s,coerce:!0}),number:s=>ZodNumber.create({...s,coerce:!0}),boolean:s=>ZodBoolean.create({...s,coerce:!0}),bigint:s=>ZodBigInt.create({...s,coerce:!0}),date:s=>ZodDate.create({...s,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),pRetry$1={exports:{}},retry$1={},retry_operation,hasRequiredRetry_operation;function requireRetry_operation(){if(hasRequiredRetry_operation)return retry_operation;hasRequiredRetry_operation=1;function s(e,a){typeof a=="boolean"&&(a={forever:a}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=a||{},this._maxRetryTime=a&&a.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return retry_operation=s,s.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},s.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},s.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var a=new Date().getTime();if(e&&a-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var l=this;return this._timer=setTimeout(function(){l._attempts++,l._operationTimeoutCb&&(l._timeout=setTimeout(function(){l._operationTimeoutCb(l._attempts)},l._operationTimeout),l._options.unref&&l._timeout.unref()),l._fn(l._attempts)},r),this._options.unref&&this._timer.unref(),!0},s.prototype.attempt=function(e,a){this._fn=e,a&&(a.timeout&&(this._operationTimeout=a.timeout),a.cb&&(this._operationTimeoutCb=a.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},s.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},s.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},s.prototype.start=s.prototype.try,s.prototype.errors=function(){return this._errors},s.prototype.attempts=function(){return this._attempts},s.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},a=null,r=0,l=0;l<this._errors.length;l++){var u=this._errors[l],d=u.message,h=(e[d]||0)+1;e[d]=h,h>=r&&(a=u,r=h)}return a},retry_operation}var hasRequiredRetry$1;function requireRetry$1(){return hasRequiredRetry$1||(hasRequiredRetry$1=1,function(s){var e=requireRetry_operation();s.operation=function(a){var r=s.timeouts(a);return new e(r,{forever:a&&(a.forever||a.retries===1/0),unref:a&&a.unref,maxRetryTime:a&&a.maxRetryTime})},s.timeouts=function(a){if(a instanceof Array)return[].concat(a);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var l in a)r[l]=a[l];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var u=[],d=0;d<r.retries;d++)u.push(this.createTimeout(d,r));return a&&a.forever&&!u.length&&u.push(this.createTimeout(d,r)),u.sort(function(h,p){return h-p}),u},s.createTimeout=function(a,r){var l=r.randomize?Math.random()+1:1,u=Math.round(l*Math.max(r.minTimeout,1)*Math.pow(r.factor,a));return u=Math.min(u,r.maxTimeout),u},s.wrap=function(a,r,l){if(r instanceof Array&&(l=r,r=null),!l){l=[];for(var u in a)typeof a[u]=="function"&&l.push(u)}for(var d=0;d<l.length;d++){var h=l[d],p=a[h];a[h]=(function(b){var v=s.operation(r),A=Array.prototype.slice.call(arguments,1),E=A.pop();A.push(function(S){v.retry(S)||(S&&(arguments[0]=v.mainError()),E.apply(this,arguments))}),v.attempt(function(){b.apply(a,A)})}).bind(a,p),a[h].options=r}}}(retry$1)),retry$1}var retry,hasRequiredRetry;function requireRetry(){return hasRequiredRetry||(hasRequiredRetry=1,retry=requireRetry$1()),retry}var hasRequiredPRetry;function requirePRetry(){if(hasRequiredPRetry)return pRetry$1.exports;hasRequiredPRetry=1;const s=requireRetry(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class a extends Error{constructor(h){super(),h instanceof Error?(this.originalError=h,{message:h}=h):(this.originalError=new Error(h),this.originalError.stack=this.stack),this.name="AbortError",this.message=h}}const r=(d,h,p)=>{const m=p.retries-(h-1);return d.attemptNumber=h,d.retriesLeft=m,d},l=d=>e.includes(d),u=(d,h)=>new Promise((p,m)=>{h={onFailedAttempt:()=>{},retries:10,...h};const b=s.operation(h);b.attempt(async v=>{try{p(await d(v))}catch(A){if(!(A instanceof Error)){m(new TypeError(`Non-error was thrown: "${A}". You should only throw errors.`));return}if(A instanceof a)b.stop(),m(A.originalError);else if(A instanceof TypeError&&!l(A.message))b.stop(),m(A);else{r(A,v,h);try{await h.onFailedAttempt(A)}catch(E){m(E);return}b.retry(A)||m(b.mainError())}}})});return pRetry$1.exports=u,pRetry$1.exports.default=u,pRetry$1.exports.AbortError=a,pRetry$1.exports}var pRetryExports=requirePRetry();const pRetry=getDefaultExportFromCjs(pRetryExports),REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function validate$1(s){return typeof s=="string"&&REGEX.test(s)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(s,e=0){return(byteToHex[s[e+0]]+byteToHex[s[e+1]]+byteToHex[s[e+2]]+byteToHex[s[e+3]]+"-"+byteToHex[s[e+4]]+byteToHex[s[e+5]]+"-"+byteToHex[s[e+6]]+byteToHex[s[e+7]]+"-"+byteToHex[s[e+8]]+byteToHex[s[e+9]]+"-"+byteToHex[s[e+10]]+byteToHex[s[e+11]]+byteToHex[s[e+12]]+byteToHex[s[e+13]]+byteToHex[s[e+14]]+byteToHex[s[e+15]]).toLowerCase()}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const native={randomUUID};function v4(s,e,a){if(native.randomUUID&&!s)return native.randomUUID();s=s||{};var r=s.random||(s.rng||rng)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,unsafeStringify(r)}var dist={},eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(s){var e=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function l(p,m,b){this.fn=p,this.context=m,this.once=b||!1}function u(p,m,b,v,A){if(typeof b!="function")throw new TypeError("The listener must be a function");var E=new l(b,v||p,A),S=a?a+m:m;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],E]:p._events[S].push(E):(p._events[S]=E,p._eventsCount++),p}function d(p,m){--p._eventsCount===0?p._events=new r:delete p._events[m]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],b,v;if(this._eventsCount===0)return m;for(v in b=this._events)e.call(b,v)&&m.push(a?v.slice(1):v);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(b)):m},h.prototype.listeners=function(m){var b=a?a+m:m,v=this._events[b];if(!v)return[];if(v.fn)return[v.fn];for(var A=0,E=v.length,S=new Array(E);A<E;A++)S[A]=v[A].fn;return S},h.prototype.listenerCount=function(m){var b=a?a+m:m,v=this._events[b];return v?v.fn?1:v.length:0},h.prototype.emit=function(m,b,v,A,E,S){var T=a?a+m:m;if(!this._events[T])return!1;var O=this._events[T],N=arguments.length,P,k;if(O.fn){switch(O.once&&this.removeListener(m,O.fn,void 0,!0),N){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,b),!0;case 3:return O.fn.call(O.context,b,v),!0;case 4:return O.fn.call(O.context,b,v,A),!0;case 5:return O.fn.call(O.context,b,v,A,E),!0;case 6:return O.fn.call(O.context,b,v,A,E,S),!0}for(k=1,P=new Array(N-1);k<N;k++)P[k-1]=arguments[k];O.fn.apply(O.context,P)}else{var ae=O.length,Z;for(k=0;k<ae;k++)switch(O[k].once&&this.removeListener(m,O[k].fn,void 0,!0),N){case 1:O[k].fn.call(O[k].context);break;case 2:O[k].fn.call(O[k].context,b);break;case 3:O[k].fn.call(O[k].context,b,v);break;case 4:O[k].fn.call(O[k].context,b,v,A);break;default:if(!P)for(Z=1,P=new Array(N-1);Z<N;Z++)P[Z-1]=arguments[Z];O[k].fn.apply(O[k].context,P)}}return!0},h.prototype.on=function(m,b,v){return u(this,m,b,v,!1)},h.prototype.once=function(m,b,v){return u(this,m,b,v,!0)},h.prototype.removeListener=function(m,b,v,A){var E=a?a+m:m;if(!this._events[E])return this;if(!b)return d(this,E),this;var S=this._events[E];if(S.fn)S.fn===b&&(!A||S.once)&&(!v||S.context===v)&&d(this,E);else{for(var T=0,O=[],N=S.length;T<N;T++)(S[T].fn!==b||A&&!S[T].once||v&&S[T].context!==v)&&O.push(S[T]);O.length?this._events[E]=O.length===1?O[0]:O:d(this,E)}return this},h.prototype.removeAllListeners=function(m){var b;return m?(b=a?a+m:m,this._events[b]&&d(this,b)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=a,h.EventEmitter=h,s.exports=h}(eventemitter3)),eventemitter3.exports}var pTimeout={exports:{}},pFinally,hasRequiredPFinally;function requirePFinally(){return hasRequiredPFinally||(hasRequiredPFinally=1,pFinally=(s,e)=>(e=e||(()=>{}),s.then(a=>new Promise(r=>{r(e())}).then(()=>a),a=>new Promise(r=>{r(e())}).then(()=>{throw a})))),pFinally}var hasRequiredPTimeout;function requirePTimeout(){if(hasRequiredPTimeout)return pTimeout.exports;hasRequiredPTimeout=1;const s=requirePFinally();class e extends Error{constructor(l){super(l),this.name="TimeoutError"}}const a=(r,l,u)=>new Promise((d,h)=>{if(typeof l!="number"||l<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(l===1/0){d(r);return}const p=setTimeout(()=>{if(typeof u=="function"){try{d(u())}catch(v){h(v)}return}const m=typeof u=="string"?u:`Promise timed out after ${l} milliseconds`,b=u instanceof Error?u:new e(m);typeof r.cancel=="function"&&r.cancel(),h(b)},l);s(r.then(d,h),()=>{clearTimeout(p)})});return pTimeout.exports=a,pTimeout.exports.default=a,pTimeout.exports.TimeoutError=e,pTimeout.exports}var priorityQueue={},lowerBound={},hasRequiredLowerBound;function requireLowerBound(){if(hasRequiredLowerBound)return lowerBound;hasRequiredLowerBound=1,Object.defineProperty(lowerBound,"__esModule",{value:!0});function s(e,a,r){let l=0,u=e.length;for(;u>0;){const d=u/2|0;let h=l+d;r(e[h],a)<=0?(l=++h,u-=d+1):u=d}return l}return lowerBound.default=s,lowerBound}var hasRequiredPriorityQueue;function requirePriorityQueue(){if(hasRequiredPriorityQueue)return priorityQueue;hasRequiredPriorityQueue=1,Object.defineProperty(priorityQueue,"__esModule",{value:!0});const s=requireLowerBound();class e{constructor(){this._queue=[]}enqueue(r,l){l=Object.assign({priority:0},l);const u={priority:l.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=l.priority){this._queue.push(u);return}const d=s.default(this._queue,u,(h,p)=>p.priority-h.priority);this._queue.splice(d,0,u)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(l=>l.priority===r.priority).map(l=>l.run)}get size(){return this._queue.length}}return priorityQueue.default=e,priorityQueue}var hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0});const s=requireEventemitter3(),e=requirePTimeout(),a=requirePriorityQueue(),r=()=>{},l=new e.TimeoutError;class u extends s{constructor(h){var p,m,b,v;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,h=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:a.default},h),!(typeof h.intervalCap=="number"&&h.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(m=(p=h.intervalCap)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:""}\` (${typeof h.intervalCap})`);if(h.interval===void 0||!(Number.isFinite(h.interval)&&h.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(v=(b=h.interval)===null||b===void 0?void 0:b.toString())!==null&&v!==void 0?v:""}\` (${typeof h.interval})`);this._carryoverConcurrencyCount=h.carryoverConcurrencyCount,this._isIntervalIgnored=h.intervalCap===1/0||h.interval===0,this._intervalCap=h.intervalCap,this._interval=h.interval,this._queue=new h.queueClass,this._queueClass=h.queueClass,this.concurrency=h.concurrency,this._timeout=h.timeout,this._throwOnTimeout=h.throwOnTimeout===!0,this._isPaused=h.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const h=Date.now();if(this._intervalId===void 0){const p=this._intervalEnd-h;if(p<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},p)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const h=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const p=this._queue.dequeue();return p?(this.emit("active"),p(),h&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(h){if(!(typeof h=="number"&&h>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${h}\` (${typeof h})`);this._concurrency=h,this._processQueue()}async add(h,p={}){return new Promise((m,b)=>{const v=async()=>{this._pendingCount++,this._intervalCount++;try{const A=this._timeout===void 0&&p.timeout===void 0?h():e.default(Promise.resolve(h()),p.timeout===void 0?this._timeout:p.timeout,()=>{(p.throwOnTimeout===void 0?this._throwOnTimeout:p.throwOnTimeout)&&b(l)});m(await A)}catch(A){b(A)}this._next()};this._queue.enqueue(v,p),this._tryToStartAnother(),this.emit("add")})}async addAll(h,p){return Promise.all(h.map(async m=>this.add(m,p)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(h=>{const p=this._resolveEmpty;this._resolveEmpty=()=>{p(),h()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(h=>{const p=this._resolveIdle;this._resolveIdle=()=>{p(),h()}})}get size(){return this._queue.size}sizeBy(h){return this._queue.filter(h).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(h){this._timeout=h}}return dist.default=u,dist}var distExports=requireDist();const PQueueMod=getDefaultExportFromCjs(distExports),DEFAULT_FETCH_IMPLEMENTATION=(...s)=>fetch(...s),LANGSMITH_FETCH_IMPLEMENTATION_KEY=Symbol.for("ls:fetch_implementation"),_getFetchImplementation=()=>globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY]??DEFAULT_FETCH_IMPLEMENTATION,STATUS_NO_RETRY$1=[400,401,403,404,405,406,407,408],STATUS_IGNORE=[409];let AsyncCaller$1=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in PQueueMod?this.queue=new PQueueMod.default({concurrency:this.maxConcurrency}):this.queue=new PQueueMod({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...a){const r=this.onFailedResponseHook;return this.queue.add(()=>pRetry(()=>e(...a).catch(l=>{throw l instanceof Error?l:new Error(l)}),{async onFailedAttempt(l){if(l.message.startsWith("Cancel")||l.message.startsWith("TimeoutError")||l.message.startsWith("AbortError")||(l==null?void 0:l.code)==="ECONNABORTED")throw l;const u=l==null?void 0:l.response,d=u==null?void 0:u.status;if(d){if(STATUS_NO_RETRY$1.includes(+d))throw l;if(STATUS_IGNORE.includes(+d))return;r&&await r(u)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,a,...r){return e.signal?Promise.race([this.call(a,...r),new Promise((l,u)=>{var d;(d=e.signal)==null||d.addEventListener("abort",()=>{u(new Error("AbortError"))})})]):this.call(a,...r)}fetch(...e){return this.call(()=>_getFetchImplementation()(...e).then(a=>a.ok?a:Promise.reject(a)))}};function isLangChainMessage(s){return typeof(s==null?void 0:s._getType)=="function"}function convertLangChainMessageToExample(s){const e={type:s._getType(),data:{content:s.content}};return s!=null&&s.additional_kwargs&&Object.keys(s.additional_kwargs).length>0&&(e.data.additional_kwargs={...s.additional_kwargs}),e}function assertUuid(s,e){if(!validate$1(s)){const a=e!==void 0?`Invalid UUID for ${e}: ${s}`:`Invalid UUID: ${s}`;throw new Error(a)}return s}const warnedMessages={};function warnOnce(s){warnedMessages[s]||(console.warn(s),warnedMessages[s]=!0)}var re={exports:{}},constants,hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;const s="2.0.0",e=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,l=e-6;return constants={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:l,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:s,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants}var debug_1,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;var s={};return debug_1=typeof process=="object"&&s&&s.NODE_DEBUG&&/\bsemver\b/i.test(s.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{},debug_1}var hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,function(s,e){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:l}=requireConstants(),u=requireDebug();e=s.exports={};const d=e.re=[],h=e.safeRe=[],p=e.src=[],m=e.safeSrc=[],b=e.t={};let v=0;const A="[a-zA-Z0-9-]",E=[["\\s",1],["\\d",l],[A,r]],S=O=>{for(const[N,P]of E)O=O.split(`${N}*`).join(`${N}{0,${P}}`).split(`${N}+`).join(`${N}{1,${P}}`);return O},T=(O,N,P)=>{const k=S(N),ae=v++;u(O,ae,N),b[O]=ae,p[ae]=N,m[ae]=k,d[ae]=new RegExp(N,P?"g":void 0),h[ae]=new RegExp(k,P?"g":void 0)};T("NUMERICIDENTIFIER","0|[1-9]\\d*"),T("NUMERICIDENTIFIERLOOSE","\\d+"),T("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${A}*`),T("MAINVERSION",`(${p[b.NUMERICIDENTIFIER]})\\.(${p[b.NUMERICIDENTIFIER]})\\.(${p[b.NUMERICIDENTIFIER]})`),T("MAINVERSIONLOOSE",`(${p[b.NUMERICIDENTIFIERLOOSE]})\\.(${p[b.NUMERICIDENTIFIERLOOSE]})\\.(${p[b.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASEIDENTIFIER",`(?:${p[b.NUMERICIDENTIFIER]}|${p[b.NONNUMERICIDENTIFIER]})`),T("PRERELEASEIDENTIFIERLOOSE",`(?:${p[b.NUMERICIDENTIFIERLOOSE]}|${p[b.NONNUMERICIDENTIFIER]})`),T("PRERELEASE",`(?:-(${p[b.PRERELEASEIDENTIFIER]}(?:\\.${p[b.PRERELEASEIDENTIFIER]})*))`),T("PRERELEASELOOSE",`(?:-?(${p[b.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[b.PRERELEASEIDENTIFIERLOOSE]})*))`),T("BUILDIDENTIFIER",`${A}+`),T("BUILD",`(?:\\+(${p[b.BUILDIDENTIFIER]}(?:\\.${p[b.BUILDIDENTIFIER]})*))`),T("FULLPLAIN",`v?${p[b.MAINVERSION]}${p[b.PRERELEASE]}?${p[b.BUILD]}?`),T("FULL",`^${p[b.FULLPLAIN]}$`),T("LOOSEPLAIN",`[v=\\s]*${p[b.MAINVERSIONLOOSE]}${p[b.PRERELEASELOOSE]}?${p[b.BUILD]}?`),T("LOOSE",`^${p[b.LOOSEPLAIN]}$`),T("GTLT","((?:<|>)?=?)"),T("XRANGEIDENTIFIERLOOSE",`${p[b.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),T("XRANGEIDENTIFIER",`${p[b.NUMERICIDENTIFIER]}|x|X|\\*`),T("XRANGEPLAIN",`[v=\\s]*(${p[b.XRANGEIDENTIFIER]})(?:\\.(${p[b.XRANGEIDENTIFIER]})(?:\\.(${p[b.XRANGEIDENTIFIER]})(?:${p[b.PRERELEASE]})?${p[b.BUILD]}?)?)?`),T("XRANGEPLAINLOOSE",`[v=\\s]*(${p[b.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[b.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[b.XRANGEIDENTIFIERLOOSE]})(?:${p[b.PRERELEASELOOSE]})?${p[b.BUILD]}?)?)?`),T("XRANGE",`^${p[b.GTLT]}\\s*${p[b.XRANGEPLAIN]}$`),T("XRANGELOOSE",`^${p[b.GTLT]}\\s*${p[b.XRANGEPLAINLOOSE]}$`),T("COERCEPLAIN",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?`),T("COERCE",`${p[b.COERCEPLAIN]}(?:$|[^\\d])`),T("COERCEFULL",p[b.COERCEPLAIN]+`(?:${p[b.PRERELEASE]})?(?:${p[b.BUILD]})?(?:$|[^\\d])`),T("COERCERTL",p[b.COERCE],!0),T("COERCERTLFULL",p[b.COERCEFULL],!0),T("LONETILDE","(?:~>?)"),T("TILDETRIM",`(\\s*)${p[b.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",T("TILDE",`^${p[b.LONETILDE]}${p[b.XRANGEPLAIN]}$`),T("TILDELOOSE",`^${p[b.LONETILDE]}${p[b.XRANGEPLAINLOOSE]}$`),T("LONECARET","(?:\\^)"),T("CARETTRIM",`(\\s*)${p[b.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",T("CARET",`^${p[b.LONECARET]}${p[b.XRANGEPLAIN]}$`),T("CARETLOOSE",`^${p[b.LONECARET]}${p[b.XRANGEPLAINLOOSE]}$`),T("COMPARATORLOOSE",`^${p[b.GTLT]}\\s*(${p[b.LOOSEPLAIN]})$|^$`),T("COMPARATOR",`^${p[b.GTLT]}\\s*(${p[b.FULLPLAIN]})$|^$`),T("COMPARATORTRIM",`(\\s*)${p[b.GTLT]}\\s*(${p[b.LOOSEPLAIN]}|${p[b.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",T("HYPHENRANGE",`^\\s*(${p[b.XRANGEPLAIN]})\\s+-\\s+(${p[b.XRANGEPLAIN]})\\s*$`),T("HYPHENRANGELOOSE",`^\\s*(${p[b.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[b.XRANGEPLAINLOOSE]})\\s*$`),T("STAR","(<|>)?=?\\s*\\*"),T("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),T("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(re,re.exports)),re.exports}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const s=Object.freeze({loose:!0}),e=Object.freeze({});return parseOptions_1=r=>r?typeof r!="object"?s:r:e,parseOptions_1}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const s=/^[0-9]+$/,e=(r,l)=>{const u=s.test(r),d=s.test(l);return u&&d&&(r=+r,l=+l),r===l?0:u&&!d?-1:d&&!u?1:r<l?-1:1};return identifiers={compareIdentifiers:e,rcompareIdentifiers:(r,l)=>e(l,r)},identifiers}var semver$1,hasRequiredSemver$1;function requireSemver$1(){if(hasRequiredSemver$1)return semver$1;hasRequiredSemver$1=1;const s=requireDebug(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:a}=requireConstants(),{safeRe:r,safeSrc:l,t:u}=requireRe(),d=requireParseOptions(),{compareIdentifiers:h}=requireIdentifiers();class p{constructor(b,v){if(v=d(v),b instanceof p){if(b.loose===!!v.loose&&b.includePrerelease===!!v.includePrerelease)return b;b=b.version}else if(typeof b!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof b}".`);if(b.length>e)throw new TypeError(`version is longer than ${e} characters`);s("SemVer",b,v),this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease;const A=b.trim().match(v.loose?r[u.LOOSE]:r[u.FULL]);if(!A)throw new TypeError(`Invalid Version: ${b}`);if(this.raw=b,this.major=+A[1],this.minor=+A[2],this.patch=+A[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");A[4]?this.prerelease=A[4].split(".").map(E=>{if(/^[0-9]+$/.test(E)){const S=+E;if(S>=0&&S<a)return S}return E}):this.prerelease=[],this.build=A[5]?A[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(b){if(s("SemVer.compare",this.version,this.options,b),!(b instanceof p)){if(typeof b=="string"&&b===this.version)return 0;b=new p(b,this.options)}return b.version===this.version?0:this.compareMain(b)||this.comparePre(b)}compareMain(b){return b instanceof p||(b=new p(b,this.options)),h(this.major,b.major)||h(this.minor,b.minor)||h(this.patch,b.patch)}comparePre(b){if(b instanceof p||(b=new p(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;let v=0;do{const A=this.prerelease[v],E=b.prerelease[v];if(s("prerelease compare",v,A,E),A===void 0&&E===void 0)return 0;if(E===void 0)return 1;if(A===void 0)return-1;if(A===E)continue;return h(A,E)}while(++v)}compareBuild(b){b instanceof p||(b=new p(b,this.options));let v=0;do{const A=this.build[v],E=b.build[v];if(s("build compare",v,A,E),A===void 0&&E===void 0)return 0;if(E===void 0)return 1;if(A===void 0)return-1;if(A===E)continue;return h(A,E)}while(++v)}inc(b,v,A){if(b.startsWith("pre")){if(!v&&A===!1)throw new Error("invalid increment argument: identifier is empty");if(v){const E=new RegExp(`^${this.options.loose?l[u.PRERELEASELOOSE]:l[u.PRERELEASE]}$`),S=`-${v}`.match(E);if(!S||S[1]!==v)throw new Error(`invalid identifier: ${v}`)}}switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v,A);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v,A);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v,A),this.inc("pre",v,A);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",v,A),this.inc("pre",v,A);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const E=Number(A)?1:0;if(this.prerelease.length===0)this.prerelease=[E];else{let S=this.prerelease.length;for(;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);if(S===-1){if(v===this.prerelease.join(".")&&A===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(E)}}if(v){let S=[v,E];A===!1&&(S=[v]),h(this.prerelease[0],v)===0?isNaN(this.prerelease[1])&&(this.prerelease=S):this.prerelease=S}break}default:throw new Error(`invalid increment argument: ${b}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$1=p,semver$1}var parse_1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse_1;hasRequiredParse=1;const s=requireSemver$1();return parse_1=(a,r,l=!1)=>{if(a instanceof s)return a;try{return new s(a,r)}catch(u){if(!l)return null;throw u}},parse_1}var valid_1,hasRequiredValid$1;function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const s=requireParse();return valid_1=(a,r)=>{const l=s(a,r);return l?l.version:null},valid_1}var clean_1,hasRequiredClean;function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const s=requireParse();return clean_1=(a,r)=>{const l=s(a.trim().replace(/^[=v]+/,""),r);return l?l.version:null},clean_1}var inc_1,hasRequiredInc;function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const s=requireSemver$1();return inc_1=(a,r,l,u,d)=>{typeof l=="string"&&(d=u,u=l,l=void 0);try{return new s(a instanceof s?a.version:a,l).inc(r,u,d).version}catch{return null}},inc_1}var diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const s=requireParse();return diff_1=(a,r)=>{const l=s(a,null,!0),u=s(r,null,!0),d=l.compare(u);if(d===0)return null;const h=d>0,p=h?l:u,m=h?u:l,b=!!p.prerelease.length;if(!!m.prerelease.length&&!b){if(!m.patch&&!m.minor)return"major";if(m.compareMain(p)===0)return m.minor&&!m.patch?"minor":"patch"}const A=b?"pre":"";return l.major!==u.major?A+"major":l.minor!==u.minor?A+"minor":l.patch!==u.patch?A+"patch":"prerelease"},diff_1}var major_1,hasRequiredMajor;function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const s=requireSemver$1();return major_1=(a,r)=>new s(a,r).major,major_1}var minor_1,hasRequiredMinor;function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const s=requireSemver$1();return minor_1=(a,r)=>new s(a,r).minor,minor_1}var patch_1,hasRequiredPatch;function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const s=requireSemver$1();return patch_1=(a,r)=>new s(a,r).patch,patch_1}var prerelease_1,hasRequiredPrerelease;function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const s=requireParse();return prerelease_1=(a,r)=>{const l=s(a,r);return l&&l.prerelease.length?l.prerelease:null},prerelease_1}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const s=requireSemver$1();return compare_1=(a,r,l)=>new s(a,l).compare(new s(r,l)),compare_1}var rcompare_1,hasRequiredRcompare;function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const s=requireCompare();return rcompare_1=(a,r,l)=>s(r,a,l),rcompare_1}var compareLoose_1,hasRequiredCompareLoose;function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const s=requireCompare();return compareLoose_1=(a,r)=>s(a,r,!0),compareLoose_1}var compareBuild_1,hasRequiredCompareBuild;function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const s=requireSemver$1();return compareBuild_1=(a,r,l)=>{const u=new s(a,l),d=new s(r,l);return u.compare(d)||u.compareBuild(d)},compareBuild_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const s=requireCompareBuild();return sort_1=(a,r)=>a.sort((l,u)=>s(l,u,r)),sort_1}var rsort_1,hasRequiredRsort;function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const s=requireCompareBuild();return rsort_1=(a,r)=>a.sort((l,u)=>s(u,l,r)),rsort_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const s=requireCompare();return gt_1=(a,r,l)=>s(a,r,l)>0,gt_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const s=requireCompare();return lt_1=(a,r,l)=>s(a,r,l)<0,lt_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const s=requireCompare();return eq_1=(a,r,l)=>s(a,r,l)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const s=requireCompare();return neq_1=(a,r,l)=>s(a,r,l)!==0,neq_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const s=requireCompare();return gte_1=(a,r,l)=>s(a,r,l)>=0,gte_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const s=requireCompare();return lte_1=(a,r,l)=>s(a,r,l)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const s=requireEq(),e=requireNeq(),a=requireGt(),r=requireGte(),l=requireLt(),u=requireLte();return cmp_1=(h,p,m,b)=>{switch(p){case"===":return typeof h=="object"&&(h=h.version),typeof m=="object"&&(m=m.version),h===m;case"!==":return typeof h=="object"&&(h=h.version),typeof m=="object"&&(m=m.version),h!==m;case"":case"=":case"==":return s(h,m,b);case"!=":return e(h,m,b);case">":return a(h,m,b);case">=":return r(h,m,b);case"<":return l(h,m,b);case"<=":return u(h,m,b);default:throw new TypeError(`Invalid operator: ${p}`)}},cmp_1}var coerce_1,hasRequiredCoerce;function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const s=requireSemver$1(),e=requireParse(),{safeRe:a,t:r}=requireRe();return coerce_1=(u,d)=>{if(u instanceof s)return u;if(typeof u=="number"&&(u=String(u)),typeof u!="string")return null;d=d||{};let h=null;if(!d.rtl)h=u.match(d.includePrerelease?a[r.COERCEFULL]:a[r.COERCE]);else{const E=d.includePrerelease?a[r.COERCERTLFULL]:a[r.COERCERTL];let S;for(;(S=E.exec(u))&&(!h||h.index+h[0].length!==u.length);)(!h||S.index+S[0].length!==h.index+h[0].length)&&(h=S),E.lastIndex=S.index+S[1].length+S[2].length;E.lastIndex=-1}if(h===null)return null;const p=h[2],m=h[3]||"0",b=h[4]||"0",v=d.includePrerelease&&h[5]?`-${h[5]}`:"",A=d.includePrerelease&&h[6]?`+${h[6]}`:"";return e(`${p}.${m}.${b}${v}${A}`,d)},coerce_1}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class s{constructor(){this.max=1e3,this.map=new Map}get(a){const r=this.map.get(a);if(r!==void 0)return this.map.delete(a),this.map.set(a,r),r}delete(a){return this.map.delete(a)}set(a,r){if(!this.delete(a)&&r!==void 0){if(this.map.size>=this.max){const u=this.map.keys().next().value;this.delete(u)}this.map.set(a,r)}return this}}return lrucache=s,lrucache}var range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const s=/\s+/g;class e{constructor(K,j){if(j=l(j),K instanceof e)return K.loose===!!j.loose&&K.includePrerelease===!!j.includePrerelease?K:new e(K.raw,j);if(K instanceof u)return this.raw=K.value,this.set=[[K]],this.formatted=void 0,this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=K.trim().replace(s," "),this.set=this.raw.split("||").map($=>this.parseRange($.trim())).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(F=>!T(F[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&O(F[0])){this.set=[F];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let K=0;K<this.set.length;K++){K>0&&(this.formatted+="||");const j=this.set[K];for(let $=0;$<j.length;$++)$>0&&(this.formatted+=" "),this.formatted+=j[$].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(K){const $=((this.options.includePrerelease&&E)|(this.options.loose&&S))+":"+K,F=r.get($);if(F)return F;const Y=this.options.loose,C=Y?p[m.HYPHENRANGELOOSE]:p[m.HYPHENRANGE];K=K.replace(C,Oe(this.options.includePrerelease)),d("hyphen replace",K),K=K.replace(p[m.COMPARATORTRIM],b),d("comparator trim",K),K=K.replace(p[m.TILDETRIM],v),d("tilde trim",K),K=K.replace(p[m.CARETTRIM],A),d("caret trim",K);let U=K.split(" ").map(se=>P(se,this.options)).join(" ").split(/\s+/).map(se=>me(se,this.options));Y&&(U=U.filter(se=>(d("loose invalid filter",se,this.options),!!se.match(p[m.COMPARATORLOOSE])))),d("range list",U);const G=new Map,W=U.map(se=>new u(se,this.options));for(const se of W){if(T(se))return[se];G.set(se.value,se)}G.size>1&&G.has("")&&G.delete("");const J=[...G.values()];return r.set($,J),J}intersects(K,j){if(!(K instanceof e))throw new TypeError("a Range is required");return this.set.some($=>N($,j)&&K.set.some(F=>N(F,j)&&$.every(Y=>F.every(C=>Y.intersects(C,j)))))}test(K){if(!K)return!1;if(typeof K=="string")try{K=new h(K,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if(Te(this.set[j],K,this.options))return!0;return!1}}range=e;const a=requireLrucache(),r=new a,l=requireParseOptions(),u=requireComparator(),d=requireDebug(),h=requireSemver$1(),{safeRe:p,t:m,comparatorTrimReplace:b,tildeTrimReplace:v,caretTrimReplace:A}=requireRe(),{FLAG_INCLUDE_PRERELEASE:E,FLAG_LOOSE:S}=requireConstants(),T=ee=>ee.value==="<0.0.0-0",O=ee=>ee.value==="",N=(ee,K)=>{let j=!0;const $=ee.slice();let F=$.pop();for(;j&&$.length;)j=$.every(Y=>F.intersects(Y,K)),F=$.pop();return j},P=(ee,K)=>(d("comp",ee,K),ee=X(ee,K),d("caret",ee),ee=ae(ee,K),d("tildes",ee),ee=Q(ee,K),d("xrange",ee),ee=ue(ee,K),d("stars",ee),ee),k=ee=>!ee||ee.toLowerCase()==="x"||ee==="*",ae=(ee,K)=>ee.trim().split(/\s+/).map(j=>Z(j,K)).join(" "),Z=(ee,K)=>{const j=K.loose?p[m.TILDELOOSE]:p[m.TILDE];return ee.replace(j,($,F,Y,C,U)=>{d("tilde",ee,$,F,Y,C,U);let G;return k(F)?G="":k(Y)?G=`>=${F}.0.0 <${+F+1}.0.0-0`:k(C)?G=`>=${F}.${Y}.0 <${F}.${+Y+1}.0-0`:U?(d("replaceTilde pr",U),G=`>=${F}.${Y}.${C}-${U} <${F}.${+Y+1}.0-0`):G=`>=${F}.${Y}.${C} <${F}.${+Y+1}.0-0`,d("tilde return",G),G})},X=(ee,K)=>ee.trim().split(/\s+/).map(j=>te(j,K)).join(" "),te=(ee,K)=>{d("caret",ee,K);const j=K.loose?p[m.CARETLOOSE]:p[m.CARET],$=K.includePrerelease?"-0":"";return ee.replace(j,(F,Y,C,U,G)=>{d("caret",ee,F,Y,C,U,G);let W;return k(Y)?W="":k(C)?W=`>=${Y}.0.0${$} <${+Y+1}.0.0-0`:k(U)?Y==="0"?W=`>=${Y}.${C}.0${$} <${Y}.${+C+1}.0-0`:W=`>=${Y}.${C}.0${$} <${+Y+1}.0.0-0`:G?(d("replaceCaret pr",G),Y==="0"?C==="0"?W=`>=${Y}.${C}.${U}-${G} <${Y}.${C}.${+U+1}-0`:W=`>=${Y}.${C}.${U}-${G} <${Y}.${+C+1}.0-0`:W=`>=${Y}.${C}.${U}-${G} <${+Y+1}.0.0-0`):(d("no pr"),Y==="0"?C==="0"?W=`>=${Y}.${C}.${U}${$} <${Y}.${C}.${+U+1}-0`:W=`>=${Y}.${C}.${U}${$} <${Y}.${+C+1}.0-0`:W=`>=${Y}.${C}.${U} <${+Y+1}.0.0-0`),d("caret return",W),W})},Q=(ee,K)=>(d("replaceXRanges",ee,K),ee.split(/\s+/).map(j=>ne(j,K)).join(" ")),ne=(ee,K)=>{ee=ee.trim();const j=K.loose?p[m.XRANGELOOSE]:p[m.XRANGE];return ee.replace(j,($,F,Y,C,U,G)=>{d("xRange",ee,$,F,Y,C,U,G);const W=k(Y),J=W||k(C),se=J||k(U),oe=se;return F==="="&&oe&&(F=""),G=K.includePrerelease?"-0":"",W?F===">"||F==="<"?$="<0.0.0-0":$="*":F&&oe?(J&&(C=0),U=0,F===">"?(F=">=",J?(Y=+Y+1,C=0,U=0):(C=+C+1,U=0)):F==="<="&&(F="<",J?Y=+Y+1:C=+C+1),F==="<"&&(G="-0"),$=`${F+Y}.${C}.${U}${G}`):J?$=`>=${Y}.0.0${G} <${+Y+1}.0.0-0`:se&&($=`>=${Y}.${C}.0${G} <${Y}.${+C+1}.0-0`),d("xRange return",$),$})},ue=(ee,K)=>(d("replaceStars",ee,K),ee.trim().replace(p[m.STAR],"")),me=(ee,K)=>(d("replaceGTE0",ee,K),ee.trim().replace(p[K.includePrerelease?m.GTE0PRE:m.GTE0],"")),Oe=ee=>(K,j,$,F,Y,C,U,G,W,J,se,oe)=>(k($)?j="":k(F)?j=`>=${$}.0.0${ee?"-0":""}`:k(Y)?j=`>=${$}.${F}.0${ee?"-0":""}`:C?j=`>=${j}`:j=`>=${j}${ee?"-0":""}`,k(W)?G="":k(J)?G=`<${+W+1}.0.0-0`:k(se)?G=`<${W}.${+J+1}.0-0`:oe?G=`<=${W}.${J}.${se}-${oe}`:ee?G=`<${W}.${J}.${+se+1}-0`:G=`<=${G}`,`${j} ${G}`.trim()),Te=(ee,K,j)=>{for(let $=0;$<ee.length;$++)if(!ee[$].test(K))return!1;if(K.prerelease.length&&!j.includePrerelease){for(let $=0;$<ee.length;$++)if(d(ee[$].semver),ee[$].semver!==u.ANY&&ee[$].semver.prerelease.length>0){const F=ee[$].semver;if(F.major===K.major&&F.minor===K.minor&&F.patch===K.patch)return!0}return!1}return!0};return range}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const s=Symbol("SemVer ANY");class e{static get ANY(){return s}constructor(b,v){if(v=a(v),b instanceof e){if(b.loose===!!v.loose)return b;b=b.value}b=b.trim().split(/\s+/).join(" "),d("comparator",b,v),this.options=v,this.loose=!!v.loose,this.parse(b),this.semver===s?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}parse(b){const v=this.options.loose?r[l.COMPARATORLOOSE]:r[l.COMPARATOR],A=b.match(v);if(!A)throw new TypeError(`Invalid comparator: ${b}`);this.operator=A[1]!==void 0?A[1]:"",this.operator==="="&&(this.operator=""),A[2]?this.semver=new h(A[2],this.options.loose):this.semver=s}toString(){return this.value}test(b){if(d("Comparator.test",b,this.options.loose),this.semver===s||b===s)return!0;if(typeof b=="string")try{b=new h(b,this.options)}catch{return!1}return u(b,this.operator,this.semver,this.options)}intersects(b,v){if(!(b instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new p(b.value,v).test(this.value):b.operator===""?b.value===""?!0:new p(this.value,v).test(b.semver):(v=a(v),v.includePrerelease&&(this.value==="<0.0.0-0"||b.value==="<0.0.0-0")||!v.includePrerelease&&(this.value.startsWith("<0.0.0")||b.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&b.operator.startsWith(">")||this.operator.startsWith("<")&&b.operator.startsWith("<")||this.semver.version===b.semver.version&&this.operator.includes("=")&&b.operator.includes("=")||u(this.semver,"<",b.semver,v)&&this.operator.startsWith(">")&&b.operator.startsWith("<")||u(this.semver,">",b.semver,v)&&this.operator.startsWith("<")&&b.operator.startsWith(">")))}}comparator=e;const a=requireParseOptions(),{safeRe:r,t:l}=requireRe(),u=requireCmp(),d=requireDebug(),h=requireSemver$1(),p=requireRange();return comparator}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const s=requireRange();return satisfies_1=(a,r,l)=>{try{r=new s(r,l)}catch{return!1}return r.test(a)},satisfies_1}var toComparators_1,hasRequiredToComparators;function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const s=requireRange();return toComparators_1=(a,r)=>new s(a,r).set.map(l=>l.map(u=>u.value).join(" ").trim().split(" ")),toComparators_1}var maxSatisfying_1,hasRequiredMaxSatisfying;function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const s=requireSemver$1(),e=requireRange();return maxSatisfying_1=(r,l,u)=>{let d=null,h=null,p=null;try{p=new e(l,u)}catch{return null}return r.forEach(m=>{p.test(m)&&(!d||h.compare(m)===-1)&&(d=m,h=new s(d,u))}),d},maxSatisfying_1}var minSatisfying_1,hasRequiredMinSatisfying;function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const s=requireSemver$1(),e=requireRange();return minSatisfying_1=(r,l,u)=>{let d=null,h=null,p=null;try{p=new e(l,u)}catch{return null}return r.forEach(m=>{p.test(m)&&(!d||h.compare(m)===1)&&(d=m,h=new s(d,u))}),d},minSatisfying_1}var minVersion_1,hasRequiredMinVersion;function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const s=requireSemver$1(),e=requireRange(),a=requireGt();return minVersion_1=(l,u)=>{l=new e(l,u);let d=new s("0.0.0");if(l.test(d)||(d=new s("0.0.0-0"),l.test(d)))return d;d=null;for(let h=0;h<l.set.length;++h){const p=l.set[h];let m=null;p.forEach(b=>{const v=new s(b.semver.version);switch(b.operator){case">":v.prerelease.length===0?v.patch++:v.prerelease.push(0),v.raw=v.format();case"":case">=":(!m||a(v,m))&&(m=v);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${b.operator}`)}}),m&&(!d||a(d,m))&&(d=m)}return d&&l.test(d)?d:null},minVersion_1}var valid,hasRequiredValid;function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const s=requireRange();return valid=(a,r)=>{try{return new s(a,r).range||"*"}catch{return null}},valid}var outside_1,hasRequiredOutside;function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const s=requireSemver$1(),e=requireComparator(),{ANY:a}=e,r=requireRange(),l=requireSatisfies(),u=requireGt(),d=requireLt(),h=requireLte(),p=requireGte();return outside_1=(b,v,A,E)=>{b=new s(b,E),v=new r(v,E);let S,T,O,N,P;switch(A){case">":S=u,T=h,O=d,N=">",P=">=";break;case"<":S=d,T=p,O=u,N="<",P="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(l(b,v,E))return!1;for(let k=0;k<v.set.length;++k){const ae=v.set[k];let Z=null,X=null;if(ae.forEach(te=>{te.semver===a&&(te=new e(">=0.0.0")),Z=Z||te,X=X||te,S(te.semver,Z.semver,E)?Z=te:O(te.semver,X.semver,E)&&(X=te)}),Z.operator===N||Z.operator===P||(!X.operator||X.operator===N)&&T(b,X.semver))return!1;if(X.operator===P&&O(b,X.semver))return!1}return!0},outside_1}var gtr_1,hasRequiredGtr;function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const s=requireOutside();return gtr_1=(a,r,l)=>s(a,r,">",l),gtr_1}var ltr_1,hasRequiredLtr;function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const s=requireOutside();return ltr_1=(a,r,l)=>s(a,r,"<",l),ltr_1}var intersects_1,hasRequiredIntersects;function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const s=requireRange();return intersects_1=(a,r,l)=>(a=new s(a,l),r=new s(r,l),a.intersects(r,l)),intersects_1}var simplify,hasRequiredSimplify;function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const s=requireSatisfies(),e=requireCompare();return simplify=(a,r,l)=>{const u=[];let d=null,h=null;const p=a.sort((A,E)=>e(A,E,l));for(const A of p)s(A,r,l)?(h=A,d||(d=A)):(h&&u.push([d,h]),h=null,d=null);d&&u.push([d,null]);const m=[];for(const[A,E]of u)A===E?m.push(A):!E&&A===p[0]?m.push("*"):E?A===p[0]?m.push(`<=${E}`):m.push(`${A} - ${E}`):m.push(`>=${A}`);const b=m.join(" || "),v=typeof r.raw=="string"?r.raw:String(r);return b.length<v.length?b:r},simplify}var subset_1,hasRequiredSubset;function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const s=requireRange(),e=requireComparator(),{ANY:a}=e,r=requireSatisfies(),l=requireCompare(),u=(v,A,E={})=>{if(v===A)return!0;v=new s(v,E),A=new s(A,E);let S=!1;e:for(const T of v.set){for(const O of A.set){const N=p(T,O,E);if(S=S||N!==null,N)continue e}if(S)return!1}return!0},d=[new e(">=0.0.0-0")],h=[new e(">=0.0.0")],p=(v,A,E)=>{if(v===A)return!0;if(v.length===1&&v[0].semver===a){if(A.length===1&&A[0].semver===a)return!0;E.includePrerelease?v=d:v=h}if(A.length===1&&A[0].semver===a){if(E.includePrerelease)return!0;A=h}const S=new Set;let T,O;for(const Q of v)Q.operator===">"||Q.operator===">="?T=m(T,Q,E):Q.operator==="<"||Q.operator==="<="?O=b(O,Q,E):S.add(Q.semver);if(S.size>1)return null;let N;if(T&&O){if(N=l(T.semver,O.semver,E),N>0)return null;if(N===0&&(T.operator!==">="||O.operator!=="<="))return null}for(const Q of S){if(T&&!r(Q,String(T),E)||O&&!r(Q,String(O),E))return null;for(const ne of A)if(!r(Q,String(ne),E))return!1;return!0}let P,k,ae,Z,X=O&&!E.includePrerelease&&O.semver.prerelease.length?O.semver:!1,te=T&&!E.includePrerelease&&T.semver.prerelease.length?T.semver:!1;X&&X.prerelease.length===1&&O.operator==="<"&&X.prerelease[0]===0&&(X=!1);for(const Q of A){if(Z=Z||Q.operator===">"||Q.operator===">=",ae=ae||Q.operator==="<"||Q.operator==="<=",T){if(te&&Q.semver.prerelease&&Q.semver.prerelease.length&&Q.semver.major===te.major&&Q.semver.minor===te.minor&&Q.semver.patch===te.patch&&(te=!1),Q.operator===">"||Q.operator===">="){if(P=m(T,Q,E),P===Q&&P!==T)return!1}else if(T.operator===">="&&!r(T.semver,String(Q),E))return!1}if(O){if(X&&Q.semver.prerelease&&Q.semver.prerelease.length&&Q.semver.major===X.major&&Q.semver.minor===X.minor&&Q.semver.patch===X.patch&&(X=!1),Q.operator==="<"||Q.operator==="<="){if(k=b(O,Q,E),k===Q&&k!==O)return!1}else if(O.operator==="<="&&!r(O.semver,String(Q),E))return!1}if(!Q.operator&&(O||T)&&N!==0)return!1}return!(T&&ae&&!O&&N!==0||O&&Z&&!T&&N!==0||te||X)},m=(v,A,E)=>{if(!v)return A;const S=l(v.semver,A.semver,E);return S>0?v:S<0||A.operator===">"&&v.operator===">="?A:v},b=(v,A,E)=>{if(!v)return A;const S=l(v.semver,A.semver,E);return S<0?v:S>0||A.operator==="<"&&v.operator==="<="?A:v};return subset_1=u,subset_1}var semver,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const s=requireRe(),e=requireConstants(),a=requireSemver$1(),r=requireIdentifiers(),l=requireParse(),u=requireValid$1(),d=requireClean(),h=requireInc(),p=requireDiff(),m=requireMajor(),b=requireMinor(),v=requirePatch(),A=requirePrerelease(),E=requireCompare(),S=requireRcompare(),T=requireCompareLoose(),O=requireCompareBuild(),N=requireSort(),P=requireRsort(),k=requireGt(),ae=requireLt(),Z=requireEq(),X=requireNeq(),te=requireGte(),Q=requireLte(),ne=requireCmp(),ue=requireCoerce(),me=requireComparator(),Oe=requireRange(),Te=requireSatisfies(),ee=requireToComparators(),K=requireMaxSatisfying(),j=requireMinSatisfying(),$=requireMinVersion(),F=requireValid(),Y=requireOutside(),C=requireGtr(),U=requireLtr(),G=requireIntersects(),W=requireSimplify(),J=requireSubset();return semver={parse:l,valid:u,clean:d,inc:h,diff:p,major:m,minor:b,patch:v,prerelease:A,compare:E,rcompare:S,compareLoose:T,compareBuild:O,sort:N,rsort:P,gt:k,lt:ae,eq:Z,neq:X,gte:te,lte:Q,cmp:ne,coerce:ue,Comparator:me,Range:Oe,satisfies:Te,toComparators:ee,maxSatisfying:K,minSatisfying:j,minVersion:$,validRange:F,outside:Y,gtr:C,ltr:U,intersects:G,simplifyRange:W,subset:J,SemVer:a,re:s.re,src:s.src,tokens:s.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},semver}requireSemver();function parsePromptIdentifier(s){if(!s||s.split("/").length>2||s.startsWith("/")||s.endsWith("/")||s.split(":").length>2)throw new Error(`Invalid identifier format: ${s}`);const[e,a]=s.split(":"),r=a||"latest";if(e.includes("/")){const[l,u]=e.split("/",2);if(!l||!u)throw new Error(`Invalid identifier format: ${s}`);return[l,u,r]}else{if(!e)throw new Error(`Invalid identifier format: ${s}`);return["-",e,r]}}class LangSmithConflictError extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function raiseForStatus(s,e,a){let r;if(s.ok){a&&(r=await s.text());return}r=await s.text();const l=`Failed to ${e}. Received status [${s.status}]: ${s.statusText}. Server response: ${r}`;throw s.status===409?new LangSmithConflictError(l):new Error(l)}var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE={result:"[Circular]"},arr=[],replacerStack=[];const encoder=new TextEncoder;function defaultOptions$1(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function encodeString(s){return encoder.encode(s)}function serialize(s,e,a,r){var l;try{const u=JSON.stringify(s,e,a);return encodeString(u)}catch(u){if(!((l=u.message)!=null&&l.includes("Converting circular structure to JSON")))return console.warn("[WARNING]: LangSmith received unserializable value."),encodeString("[Unserializable]");console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof r>"u"&&(r=defaultOptions$1()),decirc(s,"",0,[],void 0,0,r);let d;try{replacerStack.length===0?d=JSON.stringify(s,e,a):d=JSON.stringify(s,replaceGetterValues(e),a)}catch{return encodeString("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){const h=arr.pop();h.length===4?Object.defineProperty(h[0],h[1],h[3]):h[0][h[1]]=h[2]}}return encodeString(d)}}function setReplace(s,e,a,r){var l=Object.getOwnPropertyDescriptor(r,a);l.get!==void 0?l.configurable?(Object.defineProperty(r,a,{value:s}),arr.push([r,a,e,l])):replacerStack.push([e,a,s]):(r[a]=s,arr.push([r,a,e]))}function decirc(s,e,a,r,l,u,d){u+=1;var h;if(typeof s=="object"&&s!==null){for(h=0;h<r.length;h++)if(r[h]===s){setReplace(CIRCULAR_REPLACE_NODE,s,e,l);return}if(typeof d.depthLimit<"u"&&u>d.depthLimit){setReplace(LIMIT_REPLACE_NODE,s,e,l);return}if(typeof d.edgesLimit<"u"&&a+1>d.edgesLimit){setReplace(LIMIT_REPLACE_NODE,s,e,l);return}if(r.push(s),Array.isArray(s))for(h=0;h<s.length;h++)decirc(s[h],h,h,r,s,u,d);else{var p=Object.keys(s);for(h=0;h<p.length;h++){var m=p[h];decirc(s[m],m,h,r,s,u,d)}}r.pop()}}function replaceGetterValues(s){return s=typeof s<"u"?s:function(e,a){return a},function(e,a){if(replacerStack.length>0)for(var r=0;r<replacerStack.length;r++){var l=replacerStack[r];if(l[1]===e&&l[0]===a){a=l[2],replacerStack.splice(r,1);break}}return s.call(this,e,a)}}function mergeRuntimeEnvIntoRunCreate(s){const e=getRuntimeEnvironment$1(),a=getLangChainEnvVarsMetadata(),r=s.extra??{},l=r.metadata;return s.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...a,...a.revision_id||s.revision_id?{revision_id:s.revision_id??a.revision_id}:{},...l}},s}const getTracingSamplingRate=()=>{const s=getLangSmithEnvironmentVariable("TRACING_SAMPLING_RATE");if(s===void 0)return;const e=parseFloat(s);if(e<0||e>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},isLocalhost=s=>{const a=s.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return a==="localhost"||a==="127.0.0.1"||a==="::1"};async function toArray(s){const e=[];for await(const a of s)e.push(a);return e}function trimQuotes(s){if(s!==void 0)return s.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const handle429=async s=>{if((s==null?void 0:s.status)===429){const e=parseInt(s.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(a=>setTimeout(a,e)),!0}return!1};class AutoBatchQueue{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let a;const r=new Promise(u=>{a=u}),l=serialize(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:a,itemPromise:r,size:l}),this.sizeBytes+=l,r}pop(e){var l;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const a=[];let r=0;for(;r+(((l=this.peek())==null?void 0:l.size)??0)<e&&this.items.length>0;){const u=this.items.shift();u&&(a.push(u),r+=u.size,this.sizeBytes-=u.size)}if(a.length===0&&this.items.length>0){const u=this.items.shift();a.push(u),r+=u.size,this.sizeBytes-=u.size}return[a.map(u=>({action:u.action,item:u.payload})),()=>a.forEach(u=>u.itemPromiseResolve())]}}const DEFAULT_BATCH_SIZE_LIMIT_BYTES=20971520,SERVER_INFO_REQUEST_TIMEOUT=2500;class Client{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new AutoBatchQueue}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable$1("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1});const a=Client.getDefaultClientConfig();if(this.tracingSampleRate=getTracingSamplingRate(),this.apiUrl=trimQuotes(e.apiUrl??a.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=trimQuotes(e.apiKey??a.apiKey),this.webUrl=trimQuotes(e.webUrl??a.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new AsyncCaller$1(e.callerOptions??{}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.batchIngestCaller=new AsyncCaller$1({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:handle429}),this.hideInputs=e.hideInputs??e.anonymizer??a.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??a.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=getLangSmithEnvironmentVariable("API_KEY"),a=getLangSmithEnvironmentVariable("ENDPOINT")??"https://api.smith.langchain.com",r=getLangSmithEnvironmentVariable("HIDE_INPUTS")==="true",l=getLangSmithEnvironmentVariable("HIDE_OUTPUTS")==="true";return{apiUrl:a,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:l}}getHostUrl(){return this.webUrl?this.webUrl:isLocalhost(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${__version__}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const a={...e};return a.inputs!==void 0&&(a.inputs=this.processInputs(a.inputs)),a.outputs!==void 0&&(a.outputs=this.processOutputs(a.outputs)),a}async _getResponse(e,a){const r=(a==null?void 0:a.toString())??"",l=`${this.apiUrl}${e}?${r}`,u=await this.caller.call(_getFetchImplementation(),l,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(u,`Failed to fetch ${e}`),u}async _get(e,a){return(await this._getResponse(e,a)).json()}async*_getPaginated(e,a=new URLSearchParams,r){let l=Number(a.get("offset"))||0;const u=Number(a.get("limit"))||100;for(;;){a.set("offset",String(l)),a.set("limit",String(u));const d=`${this.apiUrl}${e}?${a}`,h=await this.caller.call(_getFetchImplementation(),d,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(h,`Failed to fetch ${e}`);const p=r?r(await h.json()):await h.json();if(p.length===0||(yield p,p.length<u))break;l+=p.length}}async*_getCursorPaginatedList(e,a=null,r="POST",l="runs"){const u=a?{...a}:{};for(;;){const h=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(u)})).json();if(!h||!h[l])break;yield h[l];const p=h.cursors;if(!p||!p.next)break;u.cursor=p.next}}_filterForSampling(e,a=!1){if(this.tracingSampleRate===void 0)return e;if(a){const r=[];for(const l of e)this.filteredPostUuids.has(l.id)?this.filteredPostUuids.delete(l.id):r.push(l);return r}else{const r=[];for(const l of e)l.id!==l.trace_id&&!this.filteredPostUuids.has(l.trace_id)||Math.random()<this.tracingSampleRate?r.push(l):this.filteredPostUuids.add(l.id);return r}}async _getBatchSizeLimitBytes(){var a;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((a=e.batch_ingest_config)==null?void 0:a.size_limit_bytes)??DEFAULT_BATCH_SIZE_LIMIT_BYTES}async _getMultiPartSupport(){var a;return((a=(await this._ensureServerInfo()).instance_flags)==null?void 0:a.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const a=[];for(;this.autoBatchQueue.items.length>0;){const[r,l]=this.autoBatchQueue.pop(e);if(!r.length){l();break}const u=this._processBatch(r,l).catch(console.error);a.push(u)}return Promise.all(a)}async _processBatch(e,a){var r;if(!e.length){a();return}try{const l={runCreates:e.filter(d=>d.action==="create").map(d=>d.item),runUpdates:e.filter(d=>d.action==="update").map(d=>d.item)},u=await this._ensureServerInfo();(r=u==null?void 0:u.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(l):await this.batchIngestRuns(l)}finally{a()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=mergeRuntimeEnvIntoRunCreate(e.item));const a=this.autoBatchQueue.push(e);if(this.manualFlushMode)return a;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),a}async _getServerInfo(){const e=await _getFetchImplementation()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(SERVER_INFO_REQUEST_TIMEOUT),...this.fetchOptions});return await raiseForStatus(e,"get server info"),e.json()}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch{console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to batch operations and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const a={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const l=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&l.trace_id!==void 0&&l.dotted_order!==void 0){this.processRunOperation({action:"create",item:l}).catch(console.error);return}const u=mergeRuntimeEnvIntoRunCreate(l),d=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs`,{method:"POST",headers:a,body:serialize(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(d,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:a}){if(e===void 0&&a===void 0)return;let r=(e==null?void 0:e.map(h=>this.prepareRunCreateOrUpdateInputs(h)))??[],l=(a==null?void 0:a.map(h=>this.prepareRunCreateOrUpdateInputs(h)))??[];if(r.length>0&&l.length>0){const h=r.reduce((m,b)=>(b.id&&(m[b.id]=b),m),{}),p=[];for(const m of l)m.id!==void 0&&h[m.id]?h[m.id]={...h[m.id],...m}:p.push(m);r=Object.values(h),l=p}const u={post:this._filterForSampling(r),patch:this._filterForSampling(l,!0)};if(!u.post.length&&!u.patch.length)return;const d={post:[],patch:[]};for(const h of["post","patch"]){const p=h,m=u[p].reverse();let b=m.pop();for(;b!==void 0;)d[p].push(b),b=m.pop()}(d.post.length>0||d.patch.length>0)&&await this._postBatchIngestRuns(serialize(d))}async _postBatchIngestRuns(e){const a={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(_getFetchImplementation(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:a,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:a}){if(e===void 0&&a===void 0)return;const r={};let l=[];for(const b of e??[]){const v=this.prepareRunCreateOrUpdateInputs(b);v.id!==void 0&&v.attachments!==void 0&&(r[v.id]=v.attachments),delete v.attachments,l.push(v)}let u=[];for(const b of a??[])u.push(this.prepareRunCreateOrUpdateInputs(b));if(l.find(b=>b.trace_id===void 0||b.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(u.find(b=>b.trace_id===void 0||b.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(l.length>0&&u.length>0){const b=l.reduce((A,E)=>(E.id&&(A[E.id]=E),A),{}),v=[];for(const A of u)A.id!==void 0&&b[A.id]?b[A.id]={...b[A.id],...A}:v.push(A);l=Object.values(b),u=v}if(l.length===0&&u.length===0)return;const p=[],m=[];for(const[b,v]of[["post",l],["patch",u]])for(const A of v){const{inputs:E,outputs:S,events:T,attachments:O,...N}=A,P={inputs:E,outputs:S,events:T},k=serialize(N);m.push({name:`${b}.${N.id}`,payload:new Blob([k],{type:`application/json; length=${k.length}`})});for(const[ae,Z]of Object.entries(P)){if(Z===void 0)continue;const X=serialize(Z);m.push({name:`${b}.${N.id}.${ae}`,payload:new Blob([X],{type:`application/json; length=${X.length}`})})}if(N.id!==void 0){const ae=r[N.id];if(ae){delete r[N.id];for(const[Z,X]of Object.entries(ae)){let te,Q;if(Array.isArray(X)?[te,Q]=X:(te=X.mimeType,Q=X.data),Z.includes(".")){console.warn(`Skipping attachment '${Z}' for run ${N.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}m.push({name:`attachment.${N.id}.${Z}`,payload:new Blob([Q],{type:`${te}; length=${Q.byteLength}`})})}}}p.push(`trace=${N.trace_id},id=${N.id}`)}await this._sendMultipartRequest(m,p.join("; "))}async _sendMultipartRequest(e,a){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),l=[];for(const p of e)l.push(new Blob([`--${r}\r
`])),l.push(new Blob([`Content-Disposition: form-data; name="${p.name}"\r
`,`Content-Type: ${p.payload.type}\r
\r
`])),l.push(p.payload),l.push(new Blob([`\r
`]));l.push(new Blob([`--${r}--\r
`]));const d=await new Blob(l).arrayBuffer(),h=await this.batchIngestCaller.call(_getFetchImplementation(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:d,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(h,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${a}`)}}async updateRun(e,a){assertUuid(e),a.inputs&&(a.inputs=this.processInputs(a.inputs)),a.outputs&&(a.outputs=this.processOutputs(a.outputs));const r={...a,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(a.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const l={...this.headers,"Content-Type":"application/json"},u=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:l,body:serialize(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(u,"update run",!0)}async readRun(e,{loadChildRuns:a}={loadChildRuns:!1}){assertUuid(e);let r=await this._get(`/runs/${e}`);return a&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:a,projectOpts:r}){if(a!==void 0){let l;a.session_id?l=a.session_id:r!=null&&r.projectName?l=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?l=r==null?void 0:r.projectId:l=(await this.readProject({projectName:getLangSmithEnvironmentVariable("PROJECT")||"default"})).id;const u=await this._getTenantId();return`${this.getHostUrl()}/o/${u}/projects/p/${l}/r/${a.id}?poll=true`}else if(e!==void 0){const l=await this.readRun(e);if(!l.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${l.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const a=await toArray(this.listRuns({id:e.child_run_ids})),r={},l={};a.sort((u,d)=>((u==null?void 0:u.dotted_order)??"").localeCompare((d==null?void 0:d.dotted_order)??""));for(const u of a){if(u.parent_run_id===null||u.parent_run_id===void 0)throw new Error(`Child run ${u.id} has no parent`);u.parent_run_id in r||(r[u.parent_run_id]=[]),r[u.parent_run_id].push(u),l[u.id]=u}e.child_runs=r[e.id]||[];for(const u in r)u!==e.id&&(l[u].child_runs=r[u]);return e}async*listRuns(e){const{projectId:a,projectName:r,parentRunId:l,traceId:u,referenceExampleId:d,startTime:h,executionOrder:p,isRoot:m,runType:b,error:v,id:A,query:E,filter:S,traceFilter:T,treeFilter:O,limit:N,select:P}=e;let k=[];if(a&&(k=Array.isArray(a)?a:[a]),r){const te=Array.isArray(r)?r:[r],Q=await Promise.all(te.map(ne=>this.readProject({projectName:ne}).then(ue=>ue.id)));k.push(...Q)}const ae=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],Z={session:k.length?k:null,run_type:b,reference_example:d,query:E,filter:S,trace_filter:T,tree_filter:O,execution_order:p,parent_run:l,start_time:h?h.toISOString():null,error:v,id:A,limit:N,trace:u,select:P||ae,is_root:m};let X=0;for await(const te of this._getCursorPaginatedList("/runs/query",Z))if(N){if(X>=N)break;if(te.length+X>N){yield*te.slice(0,N-X);break}X+=te.length,yield*te}else yield*te}async getRunStats({id:e,trace:a,parentRun:r,runType:l,projectNames:u,projectIds:d,referenceExampleIds:h,startTime:p,endTime:m,error:b,query:v,filter:A,traceFilter:E,treeFilter:S,isRoot:T,dataSourceType:O}){let N=d||[];u&&(N=[...d||[],...await Promise.all(u.map(X=>this.readProject({projectName:X}).then(te=>te.id)))]);const k=Object.fromEntries(Object.entries({id:e,trace:a,parent_run:r,run_type:l,session:N,reference_example:h,start_time:p,end_time:m,error:b,query:v,filter:A,trace_filter:E,tree_filter:S,is_root:T,data_source_type:O}).filter(([X,te])=>te!==void 0));return await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(k),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:a}={}){const r={run_id:e,share_token:a||v4()};assertUuid(e);const u=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(u===null||!("share_token"in u))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${u.share_token}/r`}async unshareRun(e){assertUuid(e);const a=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"unshare run",!0)}async readRunSharedLink(e){assertUuid(e);const r=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:a}={}){const r=new URLSearchParams({share_token:e});if(a!==void 0)for(const d of a)r.append("id",d);return assertUuid(e),await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,a){if(!e&&!a)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:a})).id),assertUuid(e);const l=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return l.url=`${this.getHostUrl()}/public/${l.share_token}/d`,l}async shareDataset(e,a){if(!e&&!a)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:a})).id);const r={dataset_id:e};assertUuid(e);const u=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return u.url=`${this.getHostUrl()}/public/${u.share_token}/d`,u}async unshareDataset(e){assertUuid(e);const a=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"unshare dataset",!0)}async readSharedDataset(e){return assertUuid(e),await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,a){const r={};a!=null&&a.exampleIds&&(r.id=a.exampleIds);const l=new URLSearchParams;Object.entries(r).forEach(([h,p])=>{Array.isArray(p)?p.forEach(m=>l.append(h,m)):l.append(h,p)});const u=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/public/${e}/examples?${l.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),d=await u.json();if(!u.ok)throw"detail"in d?new Error(`Failed to list shared examples.
Status: ${u.status}
Message: ${d.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${u.status} ${u.statusText}`);return d.map(h=>({...h,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:a=null,metadata:r=null,upsert:l=!1,projectExtra:u=null,referenceDatasetId:d=null}){const h=l?"?upsert=true":"",p=`${this.apiUrl}/sessions${h}`,m=u||{};r&&(m.metadata=r);const b={name:e,extra:m,description:a};d!==null&&(b.reference_dataset_id=d);const v=await this.caller.call(_getFetchImplementation(),p,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(v,"create project"),await v.json()}async updateProject(e,{name:a=null,description:r=null,metadata:l=null,projectExtra:u=null,endTime:d=null}){const h=`${this.apiUrl}/sessions/${e}`;let p=u;l&&(p={...p||{},metadata:l});const m={name:a,extra:p,description:r,end_time:d?new Date(d).toISOString():null},b=await this.caller.call(_getFetchImplementation(),h,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(b,"update project"),await b.json()}async hasProject({projectId:e,projectName:a}){let r="/sessions";const l=new URLSearchParams;if(e!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)assertUuid(e),r+=`/${e}`;else if(a!==void 0)l.append("name",a);else throw new Error("Must provide projectName or projectId");const u=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}${r}?${l}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const d=await u.json();return u.ok?Array.isArray(d)?d.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:a,includeStats:r}){let l="/sessions";const u=new URLSearchParams;if(e!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)assertUuid(e),l+=`/${e}`;else if(a!==void 0)u.append("name",a);else throw new Error("Must provide projectName or projectId");r!==void 0&&u.append("include_stats",r.toString());const d=await this._get(l,u);let h;if(Array.isArray(d)){if(d.length===0)throw new Error(`Project[id=${e}, name=${a}] not found`);h=d[0]}else h=d;return h}async getProjectUrl({projectId:e,projectName:a}){if(e===void 0&&a===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:a}),l=await this._getTenantId();return`${this.getHostUrl()}/o/${l}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:a}){if(e===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:a}),l=await this._getTenantId();return`${this.getHostUrl()}/o/${l}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const a of this._getPaginated("/sessions",e))return this._tenantId=a[0].tenant_id,a[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:a,nameContains:r,referenceDatasetId:l,referenceDatasetName:u,referenceFree:d,metadata:h}={}){const p=new URLSearchParams;if(e!==void 0)for(const m of e)p.append("id",m);if(a!==void 0&&p.append("name",a),r!==void 0&&p.append("name_contains",r),l!==void 0)p.append("reference_dataset",l);else if(u!==void 0){const m=await this.readDataset({datasetName:u});p.append("reference_dataset",m.id)}d!==void 0&&p.append("reference_free",d.toString()),h!==void 0&&p.append("metadata",JSON.stringify(h));for await(const m of this._getPaginated("/sessions",p))yield*m}async deleteProject({projectId:e,projectName:a}){let r;if(e===void 0&&a===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:a})).id:r=e,assertUuid(r);const l=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(l,`delete session ${r} (${a})`,!0)}async uploadCsv({csvFile:e,fileName:a,inputKeys:r,outputKeys:l,description:u,dataType:d,name:h}){const p=`${this.apiUrl}/datasets/upload`,m=new FormData;m.append("file",e,a),r.forEach(A=>{m.append("input_keys",A)}),l.forEach(A=>{m.append("output_keys",A)}),u&&m.append("description",u),d&&m.append("data_type",d),h&&m.append("name",h);const b=await this.caller.call(_getFetchImplementation(),p,{method:"POST",headers:this.headers,body:m,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(b,"upload CSV"),await b.json()}async createDataset(e,{description:a,dataType:r,inputsSchema:l,outputsSchema:u,metadata:d}={}){const h={name:e,description:a,extra:d?{metadata:d}:void 0};r&&(h.data_type=r),l&&(h.inputs_schema_definition=l),u&&(h.outputs_schema_definition=u);const p=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(p,"create dataset"),await p.json()}async readDataset({datasetId:e,datasetName:a}){let r="/datasets";const l=new URLSearchParams({limit:"1"});if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)assertUuid(e),r+=`/${e}`;else if(a!==void 0)l.append("name",a);else throw new Error("Must provide datasetName or datasetId");const u=await this._get(r,l);let d;if(Array.isArray(u)){if(u.length===0)throw new Error(`Dataset[id=${e}, name=${a}] not found`);d=u[0]}else d=u;return d}async hasDataset({datasetId:e,datasetName:a}){try{return await this.readDataset({datasetId:e,datasetName:a}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:a,fromVersion:r,toVersion:l}){let u=e;if(u===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(u!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");u===void 0&&(u=(await this.readDataset({datasetName:a})).id);const d=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof l=="string"?l:l.toISOString()});return await this._get(`/datasets/${u}/versions/diff`,d)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:a}){const r="/datasets";if(e===void 0)if(a!==void 0)e=(await this.readDataset({datasetName:a})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(h=>JSON.parse(h))}async*listDatasets({limit:e=100,offset:a=0,datasetIds:r,datasetName:l,datasetNameContains:u,metadata:d}={}){const h="/datasets",p=new URLSearchParams({limit:e.toString(),offset:a.toString()});if(r!==void 0)for(const m of r)p.append("id",m);l!==void 0&&p.append("name",l),u!==void 0&&p.append("name_contains",u),d!==void 0&&p.append("metadata",JSON.stringify(d));for await(const m of this._getPaginated(h,p))yield*m}async updateDataset(e){const{datasetId:a,datasetName:r,...l}=e;if(!a&&!r)throw new Error("Must provide either datasetName or datasetId");const u=a??(await this.readDataset({datasetName:r})).id;assertUuid(u);const d=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${u}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(d,"update dataset"),await d.json()}async updateDatasetTag(e){const{datasetId:a,datasetName:r,asOf:l,tag:u}=e;if(!a&&!r)throw new Error("Must provide either datasetName or datasetId");const d=a??(await this.readDataset({datasetName:r})).id;assertUuid(d);const h=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${d}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof l=="string"?l:l.toISOString(),tag:u}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(h,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:a}){let r="/datasets",l=e;if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(a!==void 0&&(l=(await this.readDataset({datasetName:a})).id),l!==void 0)assertUuid(l),r+=`/${l}`;else throw new Error("Must provide datasetName or datasetId");const u=await this.caller.call(_getFetchImplementation(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(u,`delete ${r}`),await u.json()}async indexDataset({datasetId:e,datasetName:a,tag:r}){let l=e;if(!l&&!a)throw new Error("Must provide either datasetName or datasetId");if(l&&a)throw new Error("Must provide either datasetName or datasetId, not both");l||(l=(await this.readDataset({datasetName:a})).id),assertUuid(l);const u={tag:r},d=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${l}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(d,"index dataset"),await d.json()}async similarExamples(e,a,r,{filter:l}={}){const u={limit:r,inputs:e};l!==void 0&&(u.filter=l),assertUuid(a);const d=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${a}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(d,"fetch similar examples"),(await d.json()).examples}async createExample(e,a,{datasetId:r,datasetName:l,createdAt:u,exampleId:d,metadata:h,split:p,sourceRunId:m}){let b=r;if(b===void 0&&l===void 0)throw new Error("Must provide either datasetName or datasetId");if(b!==void 0&&l!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");b===void 0&&(b=(await this.readDataset({datasetName:l})).id);const v=u||new Date,A={dataset_id:b,inputs:e,outputs:a,created_at:v==null?void 0:v.toISOString(),id:d,metadata:h,split:p,source_run_id:m},E=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(A),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(E,"create example"),await E.json()}async createExamples(e){const{inputs:a,outputs:r,metadata:l,sourceRunIds:u,exampleIds:d,datasetId:h,datasetName:p}=e;let m=h;if(m===void 0&&p===void 0)throw new Error("Must provide either datasetName or datasetId");if(m!==void 0&&p!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");m===void 0&&(m=(await this.readDataset({datasetName:p})).id);const b=a.map((E,S)=>({dataset_id:m,inputs:E,outputs:r?r[S]:void 0,metadata:l?l[S]:void 0,split:e.splits?e.splits[S]:void 0,id:d?d[S]:void 0,source_run_id:u?u[S]:void 0})),v=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(v,"create examples"),await v.json()}async createLLMExample(e,a,r){return this.createExample({input:e},{output:a},r)}async createChatExample(e,a,r){const l=e.map(d=>isLangChainMessage(d)?convertLangChainMessageToExample(d):d),u=isLangChainMessage(a)?convertLangChainMessageToExample(a):a;return this.createExample({input:l},{output:u},r)}async readExample(e){assertUuid(e);const a=`/examples/${e}`,r=await this._get(a),{attachment_urls:l,...u}=r,d=u;return l&&(d.attachments=Object.entries(l).reduce((h,[p,m])=>(h[p.slice(11)]={presigned_url:m.presigned_url,mime_type:m.mime_type},h),{})),d}async*listExamples({datasetId:e,datasetName:a,exampleIds:r,asOf:l,splits:u,inlineS3Urls:d,metadata:h,limit:p,offset:m,filter:b,includeAttachments:v}={}){let A;if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)A=e;else if(a!==void 0)A=(await this.readDataset({datasetName:a})).id;else throw new Error("Must provide a datasetName or datasetId");const E=new URLSearchParams({dataset:A}),S=l?typeof l=="string"?l:l==null?void 0:l.toISOString():void 0;S&&E.append("as_of",S);const T=d??!0;if(E.append("inline_s3_urls",T.toString()),r!==void 0)for(const N of r)E.append("id",N);if(u!==void 0)for(const N of u)E.append("splits",N);if(h!==void 0){const N=JSON.stringify(h);E.append("metadata",N)}p!==void 0&&E.append("limit",p.toString()),m!==void 0&&E.append("offset",m.toString()),b!==void 0&&E.append("filter",b),v===!0&&["attachment_urls","outputs","metadata"].forEach(N=>E.append("select",N));let O=0;for await(const N of this._getPaginated("/examples",E)){for(const P of N){const{attachment_urls:k,...ae}=P,Z=ae;k&&(Z.attachments=Object.entries(k).reduce((X,[te,Q])=>(X[te.slice(11)]={presigned_url:Q.presigned_url,mime_type:Q.mime_type||void 0},X),{})),yield Z,O++}if(p!==void 0&&O>=p)break}}async deleteExample(e){assertUuid(e);const a=`/examples/${e}`,r=await this.caller.call(_getFetchImplementation(),this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,`delete ${a}`),await r.json()}async updateExample(e,a){assertUuid(e);const r=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(r,"update example"),await r.json()}async updateExamples(e){const a=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(a,"update examples"),await a.json()}async readDatasetVersion({datasetId:e,datasetName:a,asOf:r,tag:l}){let u;if(e?u=e:u=(await this.readDataset({datasetName:a})).id,assertUuid(u),r&&l||!r&&!l)throw new Error("Exactly one of asOf and tag must be specified.");const d=new URLSearchParams;r!==void 0&&d.append("as_of",typeof r=="string"?r:r.toISOString()),l!==void 0&&d.append("tag",l);const h=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${u}/version?${d.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(h,"read dataset version"),await h.json()}async listDatasetSplits({datasetId:e,datasetName:a,asOf:r}){let l;if(e===void 0&&a===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?l=(await this.readDataset({datasetName:a})).id:l=e,assertUuid(l);const u=new URLSearchParams,d=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return d&&u.append("as_of",d),await this._get(`/datasets/${l}/splits`,u)}async updateDatasetSplits({datasetId:e,datasetName:a,splitName:r,exampleIds:l,remove:u=!1}){let d;if(e===void 0&&a===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?d=(await this.readDataset({datasetName:a})).id:d=e,assertUuid(d);const h={split_name:r,examples:l.map(m=>(assertUuid(m),m)),remove:u},p=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${d}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(p,"update dataset splits",!0)}async evaluateRun(e,a,{sourceInfo:r,loadChildRuns:l,referenceExample:u}={loadChildRuns:!1}){warnOnce("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let d;if(typeof e=="string")d=await this.readRun(e,{loadChildRuns:l});else if(typeof e=="object"&&"id"in e)d=e;else throw new Error(`Invalid run type: ${typeof e}`);d.reference_example_id!==null&&d.reference_example_id!==void 0&&(u=await this.readExample(d.reference_example_id));const h=await a.evaluateRun(d,u),[p,m]=await this._logEvaluationFeedback(h,d,r);return m[0]}async createFeedback(e,a,{score:r,value:l,correction:u,comment:d,sourceInfo:h,feedbackSourceType:p="api",sourceRunId:m,feedbackId:b,feedbackConfig:v,projectId:A,comparativeExperimentId:E}){var P;if(!e&&!A)throw new Error("One of runId or projectId must be provided");if(e&&A)throw new Error("Only one of runId or projectId can be provided");const S={type:p??"api",metadata:h??{}};m!==void 0&&(S==null?void 0:S.metadata)!==void 0&&!S.metadata.__run&&(S.metadata.__run={run_id:m}),(S==null?void 0:S.metadata)!==void 0&&((P=S.metadata.__run)==null?void 0:P.run_id)!==void 0&&assertUuid(S.metadata.__run.run_id);const T={id:b??v4(),run_id:e,key:a,score:r,value:l,correction:u,comment:d,feedback_source:S,comparative_experiment_id:E,feedbackConfig:v,session_id:A},O=`${this.apiUrl}/feedback`,N=await this.caller.call(_getFetchImplementation(),O,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(T),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(N,"create feedback",!0),T}async updateFeedback(e,{score:a,value:r,correction:l,comment:u}){const d={};a!=null&&(d.score=a),r!=null&&(d.value=r),l!=null&&(d.correction=l),u!=null&&(d.comment=u),assertUuid(e);const h=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(h,"update feedback",!0)}async readFeedback(e){assertUuid(e);const a=`/feedback/${e}`;return await this._get(a)}async deleteFeedback(e){assertUuid(e);const a=`/feedback/${e}`,r=await this.caller.call(_getFetchImplementation(),this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,`delete ${a}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:a,feedbackSourceTypes:r}={}){const l=new URLSearchParams;if(e&&l.append("run",e.join(",")),a)for(const u of a)l.append("key",u);if(r)for(const u of r)l.append("source",u);for await(const u of this._getPaginated("/feedback",l))yield*u}async createPresignedFeedbackToken(e,a,{expiration:r,feedbackConfig:l}={}){const u={run_id:e,feedback_key:a,feedback_config:l};return r?typeof r=="string"?u.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(u.expires_in=r):u.expires_in={hours:3},await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:a,referenceDatasetId:r,createdAt:l,description:u,metadata:d,id:h}){var b;if(a.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:a[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const p={id:h,name:e,experiment_ids:a,reference_dataset_id:r,description:u,created_at:(b=l??new Date)==null?void 0:b.toISOString(),extra:{}};return d&&(p.extra.metadata=d),await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){assertUuid(e);const a=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",a))yield*r}_selectEvalResults(e){let a;return"results"in e?a=e.results:Array.isArray(e)?a=e:a=[e],a}async _logEvaluationFeedback(e,a,r){const l=this._selectEvalResults(e),u=[];for(const d of l){let h=r||{};d.evaluatorInfo&&(h={...d.evaluatorInfo,...h});let p=null;d.targetRunId?p=d.targetRunId:a&&(p=a.id),u.push(await this.createFeedback(p,d.key,{score:d.score,value:d.value,comment:d.comment,correction:d.correction,sourceInfo:h,sourceRunId:d.sourceRunId,feedbackConfig:d.feedbackConfig,feedbackSourceType:"model"}))}return[l,u]}async logEvaluationFeedback(e,a,r){const[l]=await this._logEvaluationFeedback(e,a,r);return l}async*listAnnotationQueues(e={}){const{queueIds:a,name:r,nameContains:l,limit:u}=e,d=new URLSearchParams;a&&a.forEach((p,m)=>{assertUuid(p,`queueIds[${m}]`),d.append("ids",p)}),r&&d.append("name",r),l&&d.append("name_contains",l),d.append("limit",(u!==void 0?Math.min(u,100):100).toString());let h=0;for await(const p of this._getPaginated("/annotation-queues",d))if(yield*p,h++,u!==void 0&&h>=u)break}async createAnnotationQueue(e){const{name:a,description:r,queueId:l}=e,u={name:a,description:r,id:l||v4()},d=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(u).filter(([p,m])=>m!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(d,"create annotation queue"),await d.json()}async readAnnotationQueue(e){const a=await this.listAnnotationQueues({queueIds:[e]}).next();if(a.done)throw new Error(`Annotation queue with ID ${e} not found`);return a.value}async updateAnnotationQueue(e,a){const{name:r,description:l}=a,u=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:l}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(u,"update annotation queue")}async deleteAnnotationQueue(e){const a=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"delete annotation queue")}async addRunsToAnnotationQueue(e,a){const r=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a.map((l,u)=>assertUuid(l,`runIds[${u}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,a){const r=`/annotation-queues/${assertUuid(e,"queueId")}/run`,l=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}${r}/${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(l,"get run from annotation queue"),await l.json()}async deleteRunFromAnnotationQueue(e,a){const r=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/runs/${assertUuid(a,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const a=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(a,"get size from annotation queue"),await a.json()}async _currentTenantIsOwner(e){const a=await this._getSettings();return e=="-"||a.tenant_handle===e}async _ownerConflictError(e,a){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${a}`)}async _getLatestCommitHash(e){const a=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await a.json();if(!a.ok){const l=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),u=new Error(`Error ${a.status}: ${a.statusText}
${l}`);throw u.statusCode=a.status,u}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,a){const[r,l,u]=parsePromptIdentifier(e),d=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/likes/${r}/${l}`,{method:"POST",body:JSON.stringify({like:a}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(d,`${a?"like":"unlike"} prompt`),await d.json()}async _getPromptUrl(e){const[a,r,l]=parsePromptIdentifier(e);if(await this._currentTenantIsOwner(a)){const u=await this._getSettings();return l!=="latest"?`${this.getHostUrl()}/prompts/${r}/${l.substring(0,8)}?organizationId=${u.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${u.id}`}else return l!=="latest"?`${this.getHostUrl()}/hub/${a}/${r}/${l.substring(0,8)}`:`${this.getHostUrl()}/hub/${a}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const a of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*a}async*listPrompts(e){const a=new URLSearchParams;a.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),a.append("sort_direction","desc"),a.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&a.append("is_public",e.isPublic.toString()),e!=null&&e.query&&a.append("query",e.query);for await(const r of this._getPaginated("/repos",a,l=>l.repos))yield*r}async getPrompt(e){const[a,r,l]=parsePromptIdentifier(e),u=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/repos/${a}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(u.status===404)return null;await raiseForStatus(u,"get prompt");const d=await u.json();return d.repo?d.repo:null}async createPrompt(e,a){const r=await this._getSettings();if(a!=null&&a.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[l,u,d]=parsePromptIdentifier(e);if(!await this._currentTenantIsOwner(l))throw await this._ownerConflictError("create a prompt",l);const h={repo_handle:u,...(a==null?void 0:a.description)&&{description:a.description},...(a==null?void 0:a.readme)&&{readme:a.readme},...(a==null?void 0:a.tags)&&{tags:a.tags},is_public:!!(a!=null&&a.isPublic)},p=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(p,"create prompt");const{repo:m}=await p.json();return m}async createCommit(e,a,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[l,u,d]=parsePromptIdentifier(e),h=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${l}/${u}`):r==null?void 0:r.parentCommitHash,p={manifest:JSON.parse(JSON.stringify(a)),parent_commit:h},m=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/commits/${l}/${u}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(m,"create commit");const b=await m.json();return this._getPromptUrl(`${l}/${u}${b.commit_hash?`:${b.commit_hash}`:""}`)}async updateExamplesMultipart(e,a=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const r=new FormData;for(const d of a){const h=d.id,p={...d.metadata&&{metadata:d.metadata},...d.split&&{split:d.split}},m=serialize(p),b=new Blob([m],{type:"application/json"});if(r.append(h,b),d.inputs){const v=serialize(d.inputs),A=new Blob([v],{type:"application/json"});r.append(`${h}.inputs`,A)}if(d.outputs){const v=serialize(d.outputs),A=new Blob([v],{type:"application/json"});r.append(`${h}.outputs`,A)}if(d.attachments)for(const[v,A]of Object.entries(d.attachments)){let E,S;Array.isArray(A)?[E,S]=A:(E=A.mimeType,S=A.data);const T=new Blob([S],{type:`${E}; length=${S.byteLength}`});r.append(`${h}.attachment.${v}`,T)}if(d.attachments_operations){const v=serialize(d.attachments_operations),A=new Blob([v],{type:"application/json"});r.append(`${h}.attachments_operations`,A)}}return await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(e,a=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const r=new FormData;for(const d of a){const h=(d.id??v4()).toString(),p={created_at:d.created_at,...d.metadata&&{metadata:d.metadata},...d.split&&{split:d.split}},m=serialize(p),b=new Blob([m],{type:"application/json"});r.append(h,b);const v=serialize(d.inputs),A=new Blob([v],{type:"application/json"});if(r.append(`${h}.inputs`,A),d.outputs){const E=serialize(d.outputs),S=new Blob([E],{type:"application/json"});r.append(`${h}.outputs`,S)}if(d.attachments)for(const[E,S]of Object.entries(d.attachments)){let T,O;Array.isArray(S)?[T,O]=S:(T=S.mimeType,O=S.data);const N=new Blob([O],{type:`${T}; length=${O.byteLength}`});r.append(`${h}.attachment.${E}`,N)}}return await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r})).json()}async updatePrompt(e,a){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,l]=parsePromptIdentifier(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const u={};if((a==null?void 0:a.description)!==void 0&&(u.description=a.description),(a==null?void 0:a.readme)!==void 0&&(u.readme=a.readme),(a==null?void 0:a.tags)!==void 0&&(u.tags=a.tags),(a==null?void 0:a.isPublic)!==void 0&&(u.is_public=a.isPublic),(a==null?void 0:a.isArchived)!==void 0&&(u.is_archived=a.isArchived),Object.keys(u).length===0)throw new Error("No valid update options provided");const d=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/repos/${r}/${l}`,{method:"PATCH",body:JSON.stringify(u),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(d,"update prompt"),d.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[a,r,l]=parsePromptIdentifier(e);if(!await this._currentTenantIsOwner(a))throw await this._ownerConflictError("delete a prompt",a);return await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/repos/${a}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,a){const[r,l,u]=parsePromptIdentifier(e),d=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/commits/${r}/${l}/${u}${a!=null&&a.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(d,"pull prompt commit");const h=await d.json();return{owner:r,repo:l,commit_hash:h.commit_hash,manifest:h.manifest,examples:h.examples}}async _pullPrompt(e,a){const r=await this.pullPromptCommit(e,{includeModel:a==null?void 0:a.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,a){return await this.promptExists(e)?a&&Object.keys(a).some(l=>l!=="object")&&await this.updatePrompt(e,{description:a==null?void 0:a.description,readme:a==null?void 0:a.readme,tags:a==null?void 0:a.tags,isPublic:a==null?void 0:a.isPublic}):await this.createPrompt(e,{description:a==null?void 0:a.description,readme:a==null?void 0:a.readme,tags:a==null?void 0:a.tags,isPublic:a==null?void 0:a.isPublic}),a!=null&&a.object?await this.createCommit(e,a==null?void 0:a.object,{parentCommitHash:a==null?void 0:a.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,a={}){const{sourceApiUrl:r=this.apiUrl,datasetName:l}=a,[u,d]=this.parseTokenOrUrl(e,r),h=new Client({apiUrl:u,apiKey:"placeholder"}),p=await h.readSharedDataset(d),m=l||p.name;try{if(await this.hasDataset({datasetId:m})){console.log(`Dataset ${m} already exists in your tenant. Skipping.`);return}}catch{}const b=await h.listSharedExamples(d),v=await this.createDataset(m,{description:p.description,dataType:p.data_type||"kv",inputsSchema:p.inputs_schema_definition??void 0,outputsSchema:p.outputs_schema_definition??void 0});try{await this.createExamples({inputs:b.map(A=>A.inputs),outputs:b.flatMap(A=>A.outputs?[A.outputs]:[]),datasetId:v.id})}catch(A){throw console.error(`An error occurred while creating dataset ${m}. You should delete it manually.`),A}}parseTokenOrUrl(e,a,r=2,l="dataset"){try{return assertUuid(e),[a,e]}catch{}try{const d=new URL(e).pathname.split("/").filter(h=>h!=="");if(d.length>=r){const h=d[d.length-r];return[a,h]}else throw new Error(`Invalid public ${l} URL: ${e}`)}catch{throw new Error(`Invalid public ${l} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}const __version__="0.3.11";var define_process_env_default$1={};let globalEnv;const isBrowser$1=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker$1=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom$1=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno$1=()=>typeof Deno<"u",isNode$1=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno$1(),getEnv$1=()=>globalEnv||(isBrowser$1()?globalEnv="browser":isNode$1()?globalEnv="node":isWebWorker$1()?globalEnv="webworker":isJsDom$1()?globalEnv="jsdom":isDeno$1()?globalEnv="deno":globalEnv="other",globalEnv);let runtimeEnvironment$1;function getRuntimeEnvironment$1(){if(runtimeEnvironment$1===void 0){const s=getEnv$1(),e=getShas();runtimeEnvironment$1={library:"langsmith",runtime:s,sdk:"langsmith-js",sdk_version:__version__,...e}}return runtimeEnvironment$1}function getLangChainEnvVarsMetadata(){const s=getEnvironmentVariables()||{},e={},a=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,l]of Object.entries(s))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof l=="string"&&!a.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=l:e[r]=l);return e}function getEnvironmentVariables(){try{return typeof process<"u"&&define_process_env_default$1?Object.entries(define_process_env_default$1).reduce((s,[e,a])=>(s[e]=String(a),s),{}):void 0}catch{return}}function getEnvironmentVariable$1(s){try{return typeof process<"u"?define_process_env_default$1==null?void 0:define_process_env_default$1[s]:void 0}catch{return}}function getLangSmithEnvironmentVariable(s){return getEnvironmentVariable$1(`LANGSMITH_${s}`)||getEnvironmentVariable$1(`LANGCHAIN_${s}`)}let cachedCommitSHAs;function getShas(){if(cachedCommitSHAs!==void 0)return cachedCommitSHAs;const s=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const a of s){const r=getEnvironmentVariable$1(a);r!==void 0&&(e[a]=r)}return cachedCommitSHAs=e,e}const isTracingEnabled$1=s=>!!["TRACING_V2","TRACING"].find(a=>getLangSmithEnvironmentVariable(a)==="true"),_LC_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables");function stripNonAlphanumeric$1(s){return s.replace(/[-:.]/g,"")}function convertToDottedOrderFormat$1(s,e,a=1){const r=a.toFixed(0).slice(0,3).padStart(3,"0");return stripNonAlphanumeric$1(`${new Date(s).toISOString().slice(0,-1)}${r}Z`)+e}class Baggage{constructor(e,a){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=a}static fromHeader(e){const a=e.split(",");let r={},l=[];for(const u of a){const[d,h]=u.split("="),p=decodeURIComponent(h);d==="langsmith-metadata"?r=JSON.parse(p):d==="langsmith-tags"&&(l=p.split(","))}return new Baggage(r,l)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class RunTree{constructor(e){var h;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),isRunTree(e)){Object.assign(this,{...e});return}const a=RunTree.getDefaultConfig(),{metadata:r,...l}=e,u=l.client??RunTree.getSharedClient(),d={...r,...(h=l==null?void 0:l.extra)==null?void 0:h.metadata};if(l.extra={...l.extra,metadata:d},Object.assign(this,{...a,...l,client:u}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const p=convertToDottedOrderFormat$1(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+p:this.dotted_order=p}}static getDefaultConfig(){return{id:v4(),run_type:"chain",project_name:getLangSmithEnvironmentVariable("PROJECT")??getEnvironmentVariable$1("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:getEnvironmentVariable$1("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:getEnvironmentVariable$1("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return RunTree.sharedClient||(RunTree.sharedClient=new Client),RunTree.sharedClient}createChild(e){var p,m,b,v,A,E;const a=this.child_execution_order+1,r=new RunTree({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:a,child_execution_order:a});_LC_CONTEXT_VARIABLES_KEY in this&&(r[_LC_CONTEXT_VARIABLES_KEY]=this[_LC_CONTEXT_VARIABLES_KEY]);const l=Symbol.for("lc:child_config"),u=((p=e.extra)==null?void 0:p[l])??this.extra[l];if(isRunnableConfigLike(u)){const S={...u},T=isCallbackManagerLike(S.callbacks)?(b=(m=S.callbacks).copy)==null?void 0:b.call(m):void 0;T&&(Object.assign(T,{_parentRunId:r.id}),(E=(A=(v=T.handlers)==null?void 0:v.find(isLangChainTracerLike))==null?void 0:A.updateFromRunTree)==null||E.call(A,r),S.callbacks=T),r.extra[l]=S}const d=new Set;let h=this;for(;h!=null&&!d.has(h.id);)d.add(h.id),h.child_execution_order=Math.max(h.child_execution_order,a),h=h.parent_run;return this.child_runs.push(r),r}async end(e,a,r=Date.now(),l){this.outputs=this.outputs??e,this.error=this.error??a,this.end_time=this.end_time??r,l&&Object.keys(l).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...l}}:{metadata:l})}_convertToCreate(e,a,r=!0){var p;const l=e.extra??{};if(l.runtime||(l.runtime={}),a)for(const[m,b]of Object.entries(a))l.runtime[m]||(l.runtime[m]=b);let u,d;return r?(d=(p=e.parent_run)==null?void 0:p.id,u=[]):(u=e.child_runs.map(m=>this._convertToCreate(m,a,r)),d=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:l,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:u,parent_run_id:d,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const a=getRuntimeEnvironment$1(),r=await this._convertToCreate(this,a,!0);if(await this.client.createRun(r),!e){warnOnce("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const l of this.child_runs)await l.postRun(!1)}}catch(a){console.error(`Error in postRun for run ${this.id}:`,a)}}async patchRun(){var e;try{const a={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments};await this.client.updateRun(this.id,a)}catch(a){console.error(`Error in patchRun for run ${this.id}`,a)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,a){var m,b,v,A;const r=e==null?void 0:e.callbacks;let l,u,d,h=isTracingEnabled$1();if(r){const E=((m=r==null?void 0:r.getParentRunId)==null?void 0:m.call(r))??"",S=(b=r==null?void 0:r.handlers)==null?void 0:b.find(T=>(T==null?void 0:T.name)=="langchain_tracer");l=(v=S==null?void 0:S.getRun)==null?void 0:v.call(S,E),u=S==null?void 0:S.projectName,d=S==null?void 0:S.client,h=h||!!S}return l?new RunTree({name:l.name,id:l.id,trace_id:l.trace_id,dotted_order:l.dotted_order,client:d,tracingEnabled:h,project_name:u,tags:[...new Set(((l==null?void 0:l.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(A=l==null?void 0:l.extra)==null?void 0:A.metadata,...e==null?void 0:e.metadata}}}).createChild(a):new RunTree({...a,client:d,tracingEnabled:h,project_name:u})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,a){var m;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,l=r["langsmith-trace"];if(!l||typeof l!="string")return;const u=l.trim(),d=u.split(".").map(b=>{const[v,A]=b.split("Z");return{strTime:v,time:Date.parse(v+"Z"),uuid:A}}),h=d[0].uuid,p={...a,name:(a==null?void 0:a.name)??"parent",run_type:(a==null?void 0:a.run_type)??"chain",start_time:(a==null?void 0:a.start_time)??Date.now(),id:(m=d.at(-1))==null?void 0:m.uuid,trace_id:h,dotted_order:u};if(r.baggage&&typeof r.baggage=="string"){const b=Baggage.fromHeader(r.baggage);p.metadata=b.metadata,p.tags=b.tags}return new RunTree(p)}toHeaders(e){var r;const a={"langsmith-trace":this.dotted_order,baggage:new Baggage((r=this.extra)==null?void 0:r.metadata,this.tags).toHeader()};if(e)for(const[l,u]of Object.entries(a))e.set(l,u);return a}}Object.defineProperty(RunTree,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function isRunTree(s){return s!==void 0&&typeof s.createChild=="function"&&typeof s.postRun=="function"}function isLangChainTracerLike(s){return typeof s=="object"&&s!=null&&typeof s.name=="string"&&s.name==="langchain_tracer"}function containsLangChainTracerLike(s){return Array.isArray(s)&&s.some(e=>isLangChainTracerLike(e))}function isCallbackManagerLike(s){return typeof s=="object"&&s!=null&&Array.isArray(s.handlers)}function isRunnableConfigLike(s){var e;return s!==void 0&&typeof s.callbacks=="object"&&(containsLangChainTracerLike((e=s.callbacks)==null?void 0:e.handlers)||containsLangChainTracerLike(s.callbacks))}let MockAsyncLocalStorage$1=class{getStore(){}run(e,a){return a()}};const TRACING_ALS_KEY$1=Symbol.for("ls:tracing_async_local_storage"),mockAsyncLocalStorage$1=new MockAsyncLocalStorage$1;let AsyncLocalStorageProvider$1=class{getInstance(){return globalThis[TRACING_ALS_KEY$1]??mockAsyncLocalStorage$1}initializeGlobalInstance(e){globalThis[TRACING_ALS_KEY$1]===void 0&&(globalThis[TRACING_ALS_KEY$1]=e)}};const AsyncLocalStorageProviderSingleton$1=new AsyncLocalStorageProvider$1,getCurrentRunTree=()=>{const s=AsyncLocalStorageProviderSingleton$1.getInstance().getStore();if(!isRunTree(s))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join(`
`));return s};function isTraceableFunction(s){return typeof s=="function"&&"langsmith:traceable"in s}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const _hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(s,e){return _hasOwnProperty.call(s,e)}function _objectKeys(s){if(Array.isArray(s)){const a=new Array(s.length);for(let r=0;r<a.length;r++)a[r]=""+r;return a}if(Object.keys)return Object.keys(s);let e=[];for(let a in s)hasOwnProperty(s,a)&&e.push(a);return e}function _deepClone(s){switch(typeof s){case"object":return JSON.parse(JSON.stringify(s));case"undefined":return null;default:return s}}function isInteger(s){let e=0;const a=s.length;let r;for(;e<a;){if(r=s.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function unescapePathComponent(s){return s.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(s){if(s===void 0)return!0;if(s){if(Array.isArray(s)){for(let a=0,r=s.length;a<r;a++)if(hasUndefined(s[a]))return!0}else if(typeof s=="object"){const a=_objectKeys(s),r=a.length;for(var e=0;e<r;e++)if(hasUndefined(s[a[e]]))return!0}}return!1}function patchErrorMessageFormatter(s,e){const a=[s];for(const r in e){const l=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof l<"u"&&a.push(`${r}: ${l}`)}return a.join(`
`)}class PatchError extends Error{constructor(e,a,r,l,u){super(patchErrorMessageFormatter(e,{name:a,index:r,operation:l,tree:u})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.setPrototypeOf(this,new.target.prototype),this.message=patchErrorMessageFormatter(e,{name:a,index:r,operation:l,tree:u})}}const JsonPatchError=PatchError,objOps={add:function(s,e,a){return s[e]=this.value,{newDocument:a}},remove:function(s,e,a){var r=s[e];return delete s[e],{newDocument:a,removed:r}},replace:function(s,e,a){var r=s[e];return s[e]=this.value,{newDocument:a,removed:r}},move:function(s,e,a){let r=getValueByPointer(a,this.path);r&&(r=_deepClone(r));const l=applyOperation(a,{op:"remove",path:this.from}).removed;return applyOperation(a,{op:"add",path:this.path,value:l}),{newDocument:a,removed:r}},copy:function(s,e,a){const r=getValueByPointer(a,this.from);return applyOperation(a,{op:"add",path:this.path,value:_deepClone(r)}),{newDocument:a}},test:function(s,e,a){return{newDocument:a,test:_areEquals(s[e],this.value)}},_get:function(s,e,a){return this.value=s[e],{newDocument:a}}};var arrOps={add:function(s,e,a){return isInteger(e)?s.splice(e,0,this.value):s[e]=this.value,{newDocument:a,index:e}},remove:function(s,e,a){var r=s.splice(e,1);return{newDocument:a,removed:r[0]}},replace:function(s,e,a){var r=s[e];return s[e]=this.value,{newDocument:a,removed:r}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(s,e){if(e=="")return s;var a={op:"_get",path:e};return applyOperation(s,a),a.value}function applyOperation(s,e,a=!1,r=!0,l=!0,u=0){if(a&&(typeof a=="function"?a(e,0,s,e.path):validator(e,0)),e.path===""){let d={newDocument:s};if(e.op==="add")return d.newDocument=e.value,d;if(e.op==="replace")return d.newDocument=e.value,d.removed=s,d;if(e.op==="move"||e.op==="copy")return d.newDocument=getValueByPointer(s,e.from),e.op==="move"&&(d.removed=s),d;if(e.op==="test"){if(d.test=_areEquals(s,e.value),d.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",u,e,s);return d.newDocument=s,d}else{if(e.op==="remove")return d.removed=s,d.newDocument=null,d;if(e.op==="_get")return e.value=s,d;if(a)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",u,e,s);return d}}else{r||(s=_deepClone(s));const h=(e.path||"").split("/");let p=s,m=1,b=h.length,v,A,E;for(typeof a=="function"?E=a:E=validator;;){if(A=h[m],A&&A.indexOf("~")!=-1&&(A=unescapePathComponent(A)),l&&(A=="__proto__"||A=="prototype"&&m>0&&h[m-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(a&&v===void 0&&(p[A]===void 0?v=h.slice(0,m).join("/"):m==b-1&&(v=e.path),v!==void 0&&E(e,0,s,v)),m++,Array.isArray(p)){if(A==="-")A=p.length;else{if(a&&!isInteger(A))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",u,e,s);isInteger(A)&&(A=~~A)}if(m>=b){if(a&&e.op==="add"&&A>p.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",u,e,s);const S=arrOps[e.op].call(e,p,A,s);if(S.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",u,e,s);return S}}else if(m>=b){const S=objOps[e.op].call(e,p,A,s);if(S.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",u,e,s);return S}if(p=p[A],a&&m<b&&(!p||typeof p!="object"))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",u,e,s)}}}function applyPatch(s,e,a,r=!0,l=!0){if(a&&!Array.isArray(e))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(s=_deepClone(s));const u=new Array(e.length);for(let d=0,h=e.length;d<h;d++)u[d]=applyOperation(s,e[d],a,!0,l,d),s=u[d].newDocument;return u.newDocument=s,u}function validator(s,e,a,r){if(typeof s!="object"||s===null||Array.isArray(s))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,s,a);if(objOps[s.op]){if(typeof s.path!="string")throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,s,a);if(s.path.indexOf("/")!==0&&s.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,s,a);if((s.op==="move"||s.op==="copy")&&typeof s.from!="string")throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,s,a);if((s.op==="add"||s.op==="replace"||s.op==="test")&&s.value===void 0)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,s,a);if((s.op==="add"||s.op==="replace"||s.op==="test")&&hasUndefined(s.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,s,a);if(a){if(s.op=="add"){var l=s.path.split("/").length,u=r.split("/").length;if(l!==u+1&&l!==u)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,s,a)}else if(s.op==="replace"||s.op==="remove"||s.op==="_get"){if(s.path!==r)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,s,a)}else if(s.op==="move"||s.op==="copy"){var d={op:"_get",path:s.from,value:void 0},h=validate([d],a);if(h&&h.name==="OPERATION_PATH_UNRESOLVABLE")throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,s,a)}}}else throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,s,a)}function validate(s,e,a){try{if(!Array.isArray(s))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)applyPatch(_deepClone(e),_deepClone(s),a||!0);else{a=a||validator;for(var r=0;r<s.length;r++)a(s[r],r,e,void 0)}}catch(l){if(l instanceof JsonPatchError)return l;throw l}}function _areEquals(s,e){if(s===e)return!0;if(s&&e&&typeof s=="object"&&typeof e=="object"){var a=Array.isArray(s),r=Array.isArray(e),l,u,d;if(a&&r){if(u=s.length,u!=e.length)return!1;for(l=u;l--!==0;)if(!_areEquals(s[l],e[l]))return!1;return!0}if(a!=r)return!1;var h=Object.keys(s);if(u=h.length,u!==Object.keys(e).length)return!1;for(l=u;l--!==0;)if(!e.hasOwnProperty(h[l]))return!1;for(l=u;l--!==0;)if(d=h[l],!_areEquals(s[d],e[d]))return!1;return!0}return s!==s&&e!==e}var define_process_env_default={};const isBrowser=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno=()=>typeof Deno<"u",isNode=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno(),getEnv=()=>{let s;return isBrowser()?s="browser":isNode()?s="node":isWebWorker()?s="webworker":isJsDom()?s="jsdom":isDeno()?s="deno":s="other",s};let runtimeEnvironment;async function getRuntimeEnvironment(){return runtimeEnvironment===void 0&&(runtimeEnvironment={library:"langchain-js",runtime:getEnv()}),runtimeEnvironment}function getEnvironmentVariable(s){try{return typeof process<"u"?define_process_env_default==null?void 0:define_process_env_default[s]:isDeno()?Deno==null?void 0:Deno.env.get(s):void 0}catch{return}}class BaseCallbackHandlerMethodsClass{}function callbackHandlerPrefersStreaming(s){return"lc_prefer_streaming"in s&&s.lc_prefer_streaming}class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class a extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,e)}}return new a}}const isBaseCallbackHandler=s=>{const e=s;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function _coerceToDict$1(s,e){return s&&!Array.isArray(s)&&typeof s=="object"?s:{[e]:s}}function stripNonAlphanumeric(s){return s.replace(/[-:.]/g,"")}function convertToDottedOrderFormat(s,e,a){const r=a.toFixed(0).slice(0,3).padStart(3,"0");return stripNonAlphanumeric(`${new Date(s).toISOString().slice(0,-1)}${r}Z`)+e}function isBaseTracer(s){return typeof s._addRunToRunMap=="function"}class BaseTracer extends BaseCallbackHandler{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,a){e.child_runs.push(a)}_addRunToRunMap(e){const a=convertToDottedOrderFormat(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const l=this.runMap.get(r.parent_run_id);l&&(this._addChildRun(l,r),l.child_execution_order=Math.max(l.child_execution_order,r.child_execution_order),r.trace_id=l.trace_id,l.dotted_order!==void 0&&(r.dotted_order=[l.dotted_order,a].join(".")))}else r.trace_id=r.id,r.dotted_order=a;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const a=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);a?a.child_execution_order=Math.max(a.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const a=e!==void 0&&this.runMap.get(e);return a?a.child_execution_order+1:1}_createRunForLLMStart(e,a,r,l,u,d,h,p){const m=this._getExecutionOrder(l),b=Date.now(),v=h?{...u,metadata:h}:u,A={id:r,name:p??e.id[e.id.length-1],parent_run_id:l,start_time:b,serialized:e,events:[{name:"start",time:new Date(b).toISOString()}],inputs:{prompts:a},execution_order:m,child_runs:[],child_execution_order:m,run_type:"llm",extra:v??{},tags:d||[]};return this._addRunToRunMap(A)}async handleLLMStart(e,a,r,l,u,d,h,p){var b,v;const m=this.runMap.get(r)??this._createRunForLLMStart(e,a,r,l,u,d,h,p);return await((b=this.onRunCreate)==null?void 0:b.call(this,m)),await((v=this.onLLMStart)==null?void 0:v.call(this,m)),m}_createRunForChatModelStart(e,a,r,l,u,d,h,p){const m=this._getExecutionOrder(l),b=Date.now(),v=h?{...u,metadata:h}:u,A={id:r,name:p??e.id[e.id.length-1],parent_run_id:l,start_time:b,serialized:e,events:[{name:"start",time:new Date(b).toISOString()}],inputs:{messages:a},execution_order:m,child_runs:[],child_execution_order:m,run_type:"llm",extra:v??{},tags:d||[]};return this._addRunToRunMap(A)}async handleChatModelStart(e,a,r,l,u,d,h,p){var b,v;const m=this.runMap.get(r)??this._createRunForChatModelStart(e,a,r,l,u,d,h,p);return await((b=this.onRunCreate)==null?void 0:b.call(this,m)),await((v=this.onLLMStart)==null?void 0:v.call(this,m)),m}async handleLLMEnd(e,a,r,l,u){var h;const d=this.runMap.get(a);if(!d||(d==null?void 0:d.run_type)!=="llm")throw new Error("No LLM run to end.");return d.end_time=Date.now(),d.outputs=e,d.events.push({name:"end",time:new Date(d.end_time).toISOString()}),d.extra={...d.extra,...u},await((h=this.onLLMEnd)==null?void 0:h.call(this,d)),await this._endTrace(d),d}async handleLLMError(e,a,r,l,u){var h;const d=this.runMap.get(a);if(!d||(d==null?void 0:d.run_type)!=="llm")throw new Error("No LLM run to end.");return d.end_time=Date.now(),d.error=this.stringifyError(e),d.events.push({name:"error",time:new Date(d.end_time).toISOString()}),d.extra={...d.extra,...u},await((h=this.onLLMError)==null?void 0:h.call(this,d)),await this._endTrace(d),d}_createRunForChainStart(e,a,r,l,u,d,h,p){const m=this._getExecutionOrder(l),b=Date.now(),v={id:r,name:p??e.id[e.id.length-1],parent_run_id:l,start_time:b,serialized:e,events:[{name:"start",time:new Date(b).toISOString()}],inputs:a,execution_order:m,child_execution_order:m,run_type:h??"chain",child_runs:[],extra:d?{metadata:d}:{},tags:u||[]};return this._addRunToRunMap(v)}async handleChainStart(e,a,r,l,u,d,h,p){var b,v;const m=this.runMap.get(r)??this._createRunForChainStart(e,a,r,l,u,d,h,p);return await((b=this.onRunCreate)==null?void 0:b.call(this,m)),await((v=this.onChainStart)==null?void 0:v.call(this,m)),m}async handleChainEnd(e,a,r,l,u){var h;const d=this.runMap.get(a);if(!d)throw new Error("No chain run to end.");return d.end_time=Date.now(),d.outputs=_coerceToDict$1(e,"output"),d.events.push({name:"end",time:new Date(d.end_time).toISOString()}),(u==null?void 0:u.inputs)!==void 0&&(d.inputs=_coerceToDict$1(u.inputs,"input")),await((h=this.onChainEnd)==null?void 0:h.call(this,d)),await this._endTrace(d),d}async handleChainError(e,a,r,l,u){var h;const d=this.runMap.get(a);if(!d)throw new Error("No chain run to end.");return d.end_time=Date.now(),d.error=this.stringifyError(e),d.events.push({name:"error",time:new Date(d.end_time).toISOString()}),(u==null?void 0:u.inputs)!==void 0&&(d.inputs=_coerceToDict$1(u.inputs,"input")),await((h=this.onChainError)==null?void 0:h.call(this,d)),await this._endTrace(d),d}_createRunForToolStart(e,a,r,l,u,d,h){const p=this._getExecutionOrder(l),m=Date.now(),b={id:r,name:h??e.id[e.id.length-1],parent_run_id:l,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{input:a},execution_order:p,child_execution_order:p,run_type:"tool",child_runs:[],extra:d?{metadata:d}:{},tags:u||[]};return this._addRunToRunMap(b)}async handleToolStart(e,a,r,l,u,d,h){var m,b;const p=this.runMap.get(r)??this._createRunForToolStart(e,a,r,l,u,d,h);return await((m=this.onRunCreate)==null?void 0:m.call(this,p)),await((b=this.onToolStart)==null?void 0:b.call(this,p)),p}async handleToolEnd(e,a){var l;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((l=this.onToolEnd)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleToolError(e,a){var l;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((l=this.onToolError)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,a){var u;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const l=r;l.actions=l.actions||[],l.actions.push(e),l.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((u=this.onAgentAction)==null?void 0:u.call(this,r))}async handleAgentEnd(e,a){var l;const r=this.runMap.get(a);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((l=this.onAgentEnd)==null?void 0:l.call(this,r)))}_createRunForRetrieverStart(e,a,r,l,u,d,h){const p=this._getExecutionOrder(l),m=Date.now(),b={id:r,name:h??e.id[e.id.length-1],parent_run_id:l,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{query:a},execution_order:p,child_execution_order:p,run_type:"retriever",child_runs:[],extra:d?{metadata:d}:{},tags:u||[]};return this._addRunToRunMap(b)}async handleRetrieverStart(e,a,r,l,u,d,h){var m,b;const p=this.runMap.get(r)??this._createRunForRetrieverStart(e,a,r,l,u,d,h);return await((m=this.onRunCreate)==null?void 0:m.call(this,p)),await((b=this.onRetrieverStart)==null?void 0:b.call(this,p)),p}async handleRetrieverEnd(e,a){var l;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((l=this.onRetrieverEnd)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,a){var l;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((l=this.onRetrieverError)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleText(e,a){var l;const r=this.runMap.get(a);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((l=this.onText)==null?void 0:l.call(this,r)))}async handleLLMNewToken(e,a,r,l,u,d){var p;const h=this.runMap.get(r);if(!h||(h==null?void 0:h.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return h.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:a,chunk:d==null?void 0:d.chunk}}),await((p=this.onLLMNewToken)==null?void 0:p.call(this,h,e,{chunk:d==null?void 0:d.chunk})),h}}var ansiStyles={exports:{}};ansiStyles.exports;var hasRequiredAnsiStyles;function requireAnsiStyles(){return hasRequiredAnsiStyles||(hasRequiredAnsiStyles=1,function(s){const a=(u=0)=>d=>`\x1B[${38+u};5;${d}m`,r=(u=0)=>(d,h,p)=>`\x1B[${38+u};2;${d};${h};${p}m`;function l(){const u=new Map,d={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};d.color.gray=d.color.blackBright,d.bgColor.bgGray=d.bgColor.bgBlackBright,d.color.grey=d.color.blackBright,d.bgColor.bgGrey=d.bgColor.bgBlackBright;for(const[h,p]of Object.entries(d)){for(const[m,b]of Object.entries(p))d[m]={open:`\x1B[${b[0]}m`,close:`\x1B[${b[1]}m`},p[m]=d[m],u.set(b[0],b[1]);Object.defineProperty(d,h,{value:p,enumerable:!1})}return Object.defineProperty(d,"codes",{value:u,enumerable:!1}),d.color.close="\x1B[39m",d.bgColor.close="\x1B[49m",d.color.ansi256=a(),d.color.ansi16m=r(),d.bgColor.ansi256=a(10),d.bgColor.ansi16m=r(10),Object.defineProperties(d,{rgbToAnsi256:{value:(h,p,m)=>h===p&&p===m?h<8?16:h>248?231:Math.round((h-8)/247*24)+232:16+36*Math.round(h/255*5)+6*Math.round(p/255*5)+Math.round(m/255*5),enumerable:!1},hexToRgb:{value:h=>{const p=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(h.toString(16));if(!p)return[0,0,0];let{colorString:m}=p.groups;m.length===3&&(m=m.split("").map(v=>v+v).join(""));const b=Number.parseInt(m,16);return[b>>16&255,b>>8&255,b&255]},enumerable:!1},hexToAnsi256:{value:h=>d.rgbToAnsi256(...d.hexToRgb(h)),enumerable:!1}}),d}Object.defineProperty(s,"exports",{enumerable:!0,get:l})}(ansiStyles)),ansiStyles.exports}var ansiStylesExports=requireAnsiStyles();const styles=getDefaultExportFromCjs(ansiStylesExports);function wrap(s,e){return`${s.open}${e}${s.close}`}function tryJsonStringify(s,e){try{return JSON.stringify(s,null,2)}catch{return e}}function formatKVMapItem(s){return typeof s=="string"?s.trim():s==null?s:tryJsonStringify(s,s.toString())}function elapsed(s){if(!s.end_time)return"";const e=s.end_time-s.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color}=styles;class ConsoleCallbackHandler extends BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const a=[];let r=e;for(;r.parent_run_id;){const l=this.runMap.get(r.parent_run_id);if(l)a.push(l),r=l;else break}return a}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((l,u,d)=>{const h=`${l.execution_order}:${l.run_type}:${l.name}`;return u===d.length-1?wrap(styles.bold,h):h}).join(" > ");return wrap(color.grey,r)}onChainStart(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[chain/start]")} [${a}] Entering Chain run with input: ${tryJsonStringify(e.inputs,"[inputs]")}`)}onChainEnd(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[chain/end]")} [${a}] [${elapsed(e)}] Exiting Chain run with output: ${tryJsonStringify(e.outputs,"[outputs]")}`)}onChainError(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[chain/error]")} [${a}] [${elapsed(e)}] Chain run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onLLMStart(e){const a=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(l=>l.trim())}:e.inputs;console.log(`${wrap(color.green,"[llm/start]")} [${a}] Entering LLM run with input: ${tryJsonStringify(r,"[inputs]")}`)}onLLMEnd(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[llm/end]")} [${a}] [${elapsed(e)}] Exiting LLM run with output: ${tryJsonStringify(e.outputs,"[response]")}`)}onLLMError(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[llm/error]")} [${a}] [${elapsed(e)}] LLM run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onToolStart(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[tool/start]")} [${a}] Entering Tool run with input: "${formatKVMapItem(e.inputs.input)}"`)}onToolEnd(e){var r;const a=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[tool/end]")} [${a}] [${elapsed(e)}] Exiting Tool run with output: "${formatKVMapItem((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[tool/error]")} [${a}] [${elapsed(e)}] Tool run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onRetrieverStart(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[retriever/start]")} [${a}] Entering Retriever run with input: ${tryJsonStringify(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[retriever/end]")} [${a}] [${elapsed(e)}] Exiting Retriever run with output: ${tryJsonStringify(e.outputs,"[outputs]")}`)}onRetrieverError(e){const a=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[retriever/error]")} [${a}] [${elapsed(e)}] Retriever run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onAgentAction(e){const a=e,r=this.getBreadcrumbs(e);console.log(`${wrap(color.blue,"[agent/action]")} [${r}] Agent selected action: ${tryJsonStringify(a.actions[a.actions.length-1],"[action]")}`)}}let client;const getDefaultLangChainClientSingleton=()=>{if(client===void 0){const s=getEnvironmentVariable("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};client=new Client(s)}return client};class LangChainTracer extends BaseTracer{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:a,projectName:r,client:l}=e;this.projectName=r??getEnvironmentVariable("LANGCHAIN_PROJECT")??getEnvironmentVariable("LANGCHAIN_SESSION"),this.exampleId=a,this.client=l??getDefaultLangChainClientSingleton();const u=LangChainTracer.getTraceableRunTree();u&&this.updateFromRunTree(u)}async _convertToCreate(e,a=void 0){return{...e,extra:{...e.extra,runtime:await getRuntimeEnvironment()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:a}}async persistRun(e){}async onRunCreate(e){const a=await this._convertToCreate(e,this.exampleId);await this.client.createRun(a)}async onRunUpdate(e){const a={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra};await this.client.updateRun(e.id,a)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let a=e;const r=new Set;for(;a.parent_run&&!(r.has(a.id)||(r.add(a.id),!a.parent_run));)a=a.parent_run;r.clear();const l=[a];for(;l.length>0;){const u=l.shift();!u||r.has(u.id)||(r.add(u.id),this.runMap.set(u.id,u),u.child_runs&&l.push(...u.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const a={},r=[];for(const[l,u]of this.runMap){const d=new RunTree({...u,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});a[l]=d,r.push([l,u.dotted_order])}r.sort((l,u)=>!l[1]||!u[1]?0:l[1].localeCompare(u[1]));for(const[l]of r){const u=this.runMap.get(l),d=a[l];if(!(!u||!d)&&u.parent_run_id){const h=a[u.parent_run_id];h&&(h.child_runs.push(d),d.parent_run=h)}}return a[e]}static getTraceableRunTree(){try{return getCurrentRunTree()}catch{return}}}const TRACING_ALS_KEY=Symbol.for("ls:tracing_async_local_storage"),_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables"),setGlobalAsyncLocalStorageInstance=s=>{globalThis[TRACING_ALS_KEY]=s},getGlobalAsyncLocalStorageInstance=()=>globalThis[TRACING_ALS_KEY];let queue;function createQueue(){const s="default"in PQueueMod?PQueueMod.default:PQueueMod;return new s({autoStart:!0,concurrency:1})}function getQueue(){return typeof queue>"u"&&(queue=createQueue()),queue}async function consumeCallback(s,e){if(e===!0){const a=getGlobalAsyncLocalStorageInstance();a!==void 0?await a.run(void 0,async()=>s()):await s()}else queue=getQueue(),queue.add(async()=>{const a=getGlobalAsyncLocalStorageInstance();a!==void 0?await a.run(void 0,async()=>s()):await s()})}const isTracingEnabled=s=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(a=>getEnvironmentVariable(a)==="true");function getContextVariable(s){var r;const e=getGlobalAsyncLocalStorageInstance();if(e===void 0)return;const a=e.getStore();return(r=a==null?void 0:a[_CONTEXT_VARIABLES_KEY])==null?void 0:r[s]}const LC_CONFIGURE_HOOKS_KEY=Symbol("lc:configure_hooks"),_getConfigureHooks=()=>getContextVariable(LC_CONFIGURE_HOOKS_KEY)||[];class BaseCallbackManager{setHandler(e){return this.setHandlers([e])}}class BaseRunManager{constructor(e,a,r,l,u,d,h,p){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:p})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(a=>consumeCallback(async()=>{var r;try{await((r=a.handleText)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleText: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleCustomEvent(e,a,r,l,u){await Promise.all(this.handlers.map(d=>consumeCallback(async()=>{var h;try{await((h=d.handleCustomEvent)==null?void 0:h.call(d,e,a,this.runId,this.tags,this.metadata))}catch(p){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleCustomEvent: ${p}`),d.raiseError)throw p}},d.awaitHandlers)))}}class CallbackManagerForRetrieverRun extends BaseRunManager{getChild(e){const a=new CallbackManager(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),e&&a.addTags([e],!1),a}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(a=>consumeCallback(async()=>{var r;if(!a.ignoreRetriever)try{await((r=a.handleRetrieverEnd)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleRetriever`),a.raiseError)throw l}},a.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(a=>consumeCallback(async()=>{var r;if(!a.ignoreRetriever)try{await((r=a.handleRetrieverError)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleRetrieverError: ${l}`),a.raiseError)throw e}},a.awaitHandlers)))}}class CallbackManagerForLLMRun extends BaseRunManager{async handleLLMNewToken(e,a,r,l,u,d){await Promise.all(this.handlers.map(h=>consumeCallback(async()=>{var p;if(!h.ignoreLLM)try{await((p=h.handleLLMNewToken)==null?void 0:p.call(h,e,a??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,d))}catch(m){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMNewToken: ${m}`),h.raiseError)throw m}},h.awaitHandlers)))}async handleLLMError(e,a,r,l,u){await Promise.all(this.handlers.map(d=>consumeCallback(async()=>{var h;if(!d.ignoreLLM)try{await((h=d.handleLLMError)==null?void 0:h.call(d,e,this.runId,this._parentRunId,this.tags,u))}catch(p){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMError: ${p}`),d.raiseError)throw p}},d.awaitHandlers)))}async handleLLMEnd(e,a,r,l,u){await Promise.all(this.handlers.map(d=>consumeCallback(async()=>{var h;if(!d.ignoreLLM)try{await((h=d.handleLLMEnd)==null?void 0:h.call(d,e,this.runId,this._parentRunId,this.tags,u))}catch(p){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMEnd: ${p}`),d.raiseError)throw p}},d.awaitHandlers)))}}class CallbackManagerForChainRun extends BaseRunManager{getChild(e){const a=new CallbackManager(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),e&&a.addTags([e],!1),a}async handleChainError(e,a,r,l,u){await Promise.all(this.handlers.map(d=>consumeCallback(async()=>{var h;if(!d.ignoreChain)try{await((h=d.handleChainError)==null?void 0:h.call(d,e,this.runId,this._parentRunId,this.tags,u))}catch(p){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleChainError: ${p}`),d.raiseError)throw p}},d.awaitHandlers)))}async handleChainEnd(e,a,r,l,u){await Promise.all(this.handlers.map(d=>consumeCallback(async()=>{var h;if(!d.ignoreChain)try{await((h=d.handleChainEnd)==null?void 0:h.call(d,e,this.runId,this._parentRunId,this.tags,u))}catch(p){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleChainEnd: ${p}`),d.raiseError)throw p}},d.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(a=>consumeCallback(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleAgentAction)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleAgentAction: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(a=>consumeCallback(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleAgentEnd)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleAgentEnd: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}}class CallbackManagerForToolRun extends BaseRunManager{getChild(e){const a=new CallbackManager(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),e&&a.addTags([e],!1),a}async handleToolError(e){await Promise.all(this.handlers.map(a=>consumeCallback(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleToolError)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleToolError: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(a=>consumeCallback(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleToolEnd)==null?void 0:r.call(a,e,this.runId,this._parentRunId,this.tags))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleToolEnd: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}}class CallbackManager extends BaseCallbackManager{constructor(e,a){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(a==null?void 0:a.handlers)??this.handlers,this.inheritableHandlers=(a==null?void 0:a.inheritableHandlers)??this.inheritableHandlers,this.tags=(a==null?void 0:a.tags)??this.tags,this.inheritableTags=(a==null?void 0:a.inheritableTags)??this.inheritableTags,this.metadata=(a==null?void 0:a.metadata)??this.metadata,this.inheritableMetadata=(a==null?void 0:a.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,a,r=void 0,l=void 0,u=void 0,d=void 0,h=void 0,p=void 0){return Promise.all(a.map(async(m,b)=>{const v=b===0&&r?r:v4();return await Promise.all(this.handlers.map(A=>{if(!A.ignoreLLM)return isBaseTracer(A)&&A._createRunForLLMStart(e,[m],v,this._parentRunId,u,this.tags,this.metadata,p),consumeCallback(async()=>{var E;try{await((E=A.handleLLMStart)==null?void 0:E.call(A,e,[m],v,this._parentRunId,u,this.tags,this.metadata,p))}catch(S){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleLLMStart: ${S}`),A.raiseError)throw S}},A.awaitHandlers)})),new CallbackManagerForLLMRun(v,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,a,r=void 0,l=void 0,u=void 0,d=void 0,h=void 0,p=void 0){return Promise.all(a.map(async(m,b)=>{const v=b===0&&r?r:v4();return await Promise.all(this.handlers.map(A=>{if(!A.ignoreLLM)return isBaseTracer(A)&&A._createRunForChatModelStart(e,[m],v,this._parentRunId,u,this.tags,this.metadata,p),consumeCallback(async()=>{var E,S;try{if(A.handleChatModelStart)await((E=A.handleChatModelStart)==null?void 0:E.call(A,e,[m],v,this._parentRunId,u,this.tags,this.metadata,p));else if(A.handleLLMStart){const T=getBufferString(m);await((S=A.handleLLMStart)==null?void 0:S.call(A,e,[T],v,this._parentRunId,u,this.tags,this.metadata,p))}}catch(T){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleLLMStart: ${T}`),A.raiseError)throw T}},A.awaitHandlers)})),new CallbackManagerForLLMRun(v,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,a,r=v4(),l=void 0,u=void 0,d=void 0,h=void 0){return await Promise.all(this.handlers.map(p=>{if(!p.ignoreChain)return isBaseTracer(p)&&p._createRunForChainStart(e,a,r,this._parentRunId,this.tags,this.metadata,l,h),consumeCallback(async()=>{var m;try{await((m=p.handleChainStart)==null?void 0:m.call(p,e,a,r,this._parentRunId,this.tags,this.metadata,l,h))}catch(b){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleChainStart: ${b}`),p.raiseError)throw b}},p.awaitHandlers)})),new CallbackManagerForChainRun(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,a,r=v4(),l=void 0,u=void 0,d=void 0,h=void 0){return await Promise.all(this.handlers.map(p=>{if(!p.ignoreAgent)return isBaseTracer(p)&&p._createRunForToolStart(e,a,r,this._parentRunId,this.tags,this.metadata,h),consumeCallback(async()=>{var m;try{await((m=p.handleToolStart)==null?void 0:m.call(p,e,a,r,this._parentRunId,this.tags,this.metadata,h))}catch(b){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleToolStart: ${b}`),p.raiseError)throw b}},p.awaitHandlers)})),new CallbackManagerForToolRun(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,a,r=v4(),l=void 0,u=void 0,d=void 0,h=void 0){return await Promise.all(this.handlers.map(p=>{if(!p.ignoreRetriever)return isBaseTracer(p)&&p._createRunForRetrieverStart(e,a,r,this._parentRunId,this.tags,this.metadata,h),consumeCallback(async()=>{var m;try{await((m=p.handleRetrieverStart)==null?void 0:m.call(p,e,a,r,this._parentRunId,this.tags,this.metadata,h))}catch(b){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleRetrieverStart: ${b}`),p.raiseError)throw b}},p.awaitHandlers)})),new CallbackManagerForRetrieverRun(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,a,r,l,u){await Promise.all(this.handlers.map(d=>consumeCallback(async()=>{var h;if(!d.ignoreCustomEvent)try{await((h=d.handleCustomEvent)==null?void 0:h.call(d,e,a,r,this.tags,this.metadata))}catch(p){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleCustomEvent: ${p}`),d.raiseError)throw p}},d.awaitHandlers)))}addHandler(e,a=!0){this.handlers.push(e),a&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(a=>a!==e),this.inheritableHandlers=this.inheritableHandlers.filter(a=>a!==e)}setHandlers(e,a=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,a)}addTags(e,a=!0){this.removeTags(e),this.tags.push(...e),a&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(a=>!e.includes(a)),this.inheritableTags=this.inheritableTags.filter(a=>!e.includes(a))}addMetadata(e,a=!0){this.metadata={...this.metadata,...e},a&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const a of Object.keys(e))delete this.metadata[a],delete this.inheritableMetadata[a]}copy(e=[],a=!0){const r=new CallbackManager(this._parentRunId);for(const l of this.handlers){const u=this.inheritableHandlers.includes(l);r.addHandler(l,u)}for(const l of this.tags){const u=this.inheritableTags.includes(l);r.addTags([l],u)}for(const l of Object.keys(this.metadata)){const u=Object.keys(this.inheritableMetadata).includes(l);r.addMetadata({[l]:this.metadata[l]},u)}for(const l of e)r.handlers.filter(u=>u.name==="console_callback_handler").some(u=>u.name===l.name)||r.addHandler(l,a);return r}static fromHandlers(e){class a extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new a),r}static configure(e,a,r,l,u,d,h){return this._configureSync(e,a,r,l,u,d,h)}static _configureSync(e,a,r,l,u,d,h){var A,E;let p;(e||a)&&(Array.isArray(e)||!e?(p=new CallbackManager,p.setHandlers((e==null?void 0:e.map(ensureHandler))??[],!0)):p=e,p=p.copy(Array.isArray(a)?a.map(ensureHandler):a==null?void 0:a.handlers,!1));const m=getEnvironmentVariable("LANGCHAIN_VERBOSE")==="true"||(h==null?void 0:h.verbose),b=((A=LangChainTracer.getTraceableRunTree())==null?void 0:A.tracingEnabled)||isTracingEnabled(),v=b||(getEnvironmentVariable("LANGCHAIN_TRACING")??!1);if(m||v){if(p||(p=new CallbackManager),m&&!p.handlers.some(S=>S.name===ConsoleCallbackHandler.prototype.name)){const S=new ConsoleCallbackHandler;p.addHandler(S,!0)}if(v&&!p.handlers.some(S=>S.name==="langchain_tracer")&&b){const S=new LangChainTracer;p.addHandler(S,!0),p._parentRunId=((E=LangChainTracer.getTraceableRunTree())==null?void 0:E.id)??p._parentRunId}}for(const{contextVar:S,inheritable:T=!0,handlerClass:O,envVar:N}of _getConfigureHooks()){const P=N&&getEnvironmentVariable(N)==="true"&&O;let k;const ae=S!==void 0?getContextVariable(S):void 0;ae&&isBaseCallbackHandler(ae)?k=ae:P&&(k=new O({})),k!==void 0&&(p||(p=new CallbackManager),p.handlers.some(Z=>Z.name===k.name)||p.addHandler(k,T))}return(r||l)&&p&&(p.addTags(r??[]),p.addTags(l??[],!1)),(u||d)&&p&&(p.addMetadata(u??{}),p.addMetadata(d??{},!1)),p}}function ensureHandler(s){return"name"in s?s:BaseCallbackHandler.fromMethods(s)}class MockAsyncLocalStorage{getStore(){}run(e,a){return a()}enterWith(e){}}const mockAsyncLocalStorage=new MockAsyncLocalStorage,LC_CHILD_KEY=Symbol.for("lc:child_config");class AsyncLocalStorageProvider{getInstance(){return getGlobalAsyncLocalStorageInstance()??mockAsyncLocalStorage}getRunnableConfig(){var a,r;return(r=(a=this.getInstance().getStore())==null?void 0:a.extra)==null?void 0:r[LC_CHILD_KEY]}runWithConfig(e,a,r){var b;const l=CallbackManager._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),u=this.getInstance(),d=u.getStore(),h=l==null?void 0:l.getParentRunId(),p=(b=l==null?void 0:l.handlers)==null?void 0:b.find(v=>(v==null?void 0:v.name)==="langchain_tracer");let m;return p&&h?m=p.convertToRunTree(h):r||(m=new RunTree({name:"<runnable_lambda>",tracingEnabled:!1})),m&&(m.extra={...m.extra,[LC_CHILD_KEY]:e}),d!==void 0&&d[_CONTEXT_VARIABLES_KEY]!==void 0&&(m[_CONTEXT_VARIABLES_KEY]=d[_CONTEXT_VARIABLES_KEY]),u.run(m,a)}initializeGlobalInstance(e){getGlobalAsyncLocalStorageInstance()===void 0&&setGlobalAsyncLocalStorageInstance(e)}}const AsyncLocalStorageProviderSingleton=new AsyncLocalStorageProvider,DEFAULT_RECURSION_LIMIT=25;async function getCallbackManagerForConfig(s){return CallbackManager._configureSync(s==null?void 0:s.callbacks,void 0,s==null?void 0:s.tags,void 0,s==null?void 0:s.metadata)}function mergeConfigs(...s){const e={};for(const a of s.filter(r=>!!r))for(const r of Object.keys(a))if(r==="metadata")e[r]={...e[r],...a[r]};else if(r==="tags"){const l=e[r]??[];e[r]=[...new Set(l.concat(a[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...a[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=a.timeout:a.timeout!==void 0&&(e.timeout=Math.min(e.timeout,a.timeout));else if(r==="signal")e.signal===void 0?e.signal=a.signal:a.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,a.signal]):e.signal=a.signal);else if(r==="callbacks"){const l=e.callbacks,u=a.callbacks;if(Array.isArray(u))if(!l)e.callbacks=u;else if(Array.isArray(l))e.callbacks=l.concat(u);else{const d=l.copy();for(const h of u)d.addHandler(ensureHandler(h),!0);e.callbacks=d}else if(u)if(!l)e.callbacks=u;else if(Array.isArray(l)){const d=u.copy();for(const h of l)d.addHandler(ensureHandler(h),!0);e.callbacks=d}else e.callbacks=new CallbackManager(u._parentRunId,{handlers:l.handlers.concat(u.handlers),inheritableHandlers:l.inheritableHandlers.concat(u.inheritableHandlers),tags:Array.from(new Set(l.tags.concat(u.tags))),inheritableTags:Array.from(new Set(l.inheritableTags.concat(u.inheritableTags))),metadata:{...l.metadata,...u.metadata}})}else{const l=r;e[l]=a[l]??e[l]}return e}const PRIMITIVES=new Set(["string","number","boolean"]);function ensureConfig(s){var r;const e=AsyncLocalStorageProviderSingleton.getRunnableConfig();let a={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:l,runName:u,...d}=e;a=Object.entries(d).reduce((h,[p,m])=>(m!==void 0&&(h[p]=m),h),a)}if(s&&(a=Object.entries(s).reduce((l,[u,d])=>(d!==void 0&&(l[u]=d),l),a)),a!=null&&a.configurable)for(const l of Object.keys(a.configurable))PRIMITIVES.has(typeof a.configurable[l])&&!((r=a.metadata)!=null&&r[l])&&(a.metadata||(a.metadata={}),a.metadata[l]=a.configurable[l]);if(a.timeout!==void 0){if(a.timeout<=0)throw new Error("Timeout must be a positive number");const l=AbortSignal.timeout(a.timeout);a.signal!==void 0?"any"in AbortSignal&&(a.signal=AbortSignal.any([a.signal,l])):a.signal=l,delete a.timeout}return a}function patchConfig(s={},{callbacks:e,maxConcurrency:a,recursionLimit:r,runName:l,configurable:u,runId:d}={}){const h=ensureConfig(s);return e!==void 0&&(delete h.runName,h.callbacks=e),r!==void 0&&(h.recursionLimit=r),a!==void 0&&(h.maxConcurrency=a),l!==void 0&&(h.runName=l),u!==void 0&&(h.configurable={...h.configurable,...u}),d!==void 0&&delete h.runId,h}function pickRunnableConfigKeys(s){return s?{configurable:s.configurable,recursionLimit:s.recursionLimit,callbacks:s.callbacks,tags:s.tags,metadata:s.metadata,maxConcurrency:s.maxConcurrency,timeout:s.timeout,signal:s.signal}:void 0}async function raceWithSignal(s,e){if(e===void 0)return s;let a;return Promise.race([s.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,l)=>{a=()=>{l(new Error("Aborted"))},e.addEventListener("abort",a),e.aborted&&l(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",a))}class IterableReadableStream extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const a=this.reader.cancel();this.reader.releaseLock(),await a}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const a=e.getReader();return new IterableReadableStream({start(r){return l();function l(){return a.read().then(({done:u,value:d})=>{if(u){r.close();return}return r.enqueue(d),l()})}},cancel(){a.releaseLock()}})}static fromAsyncGenerator(e){return new IterableReadableStream({async pull(a){const{value:r,done:l}=await e.next();l&&a.close(),a.enqueue(r)},async cancel(a){await e.return(a)}})}}function atee(s,e=2){const a=Array.from({length:e},()=>[]);return a.map(async function*(l){for(;;)if(l.length===0){const u=await s.next();for(const d of a)d.push(u)}else{if(l[0].done)return;yield l.shift().value}})}function concat(s,e){if(Array.isArray(s)&&Array.isArray(e))return s.concat(e);if(typeof s=="string"&&typeof e=="string")return s+e;if(typeof s=="number"&&typeof e=="number")return s+e;if("concat"in s&&typeof s.concat=="function")return s.concat(e);if(typeof s=="object"&&typeof e=="object"){const a={...s};for(const[r,l]of Object.entries(e))r in a&&!Array.isArray(a[r])?a[r]=concat(a[r],l):a[r]=l;return a}else throw new Error(`Cannot concat ${typeof s} and ${typeof e}`)}class AsyncGeneratorWithSetup{constructor(e){var a;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((a=this.config)==null?void 0:a.signal),this.setup=new Promise((r,l)=>{AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,l):this.firstResult.then(u=>r(void 0),l)},!0)})}async next(...e){var a;return(a=this.signal)==null||a.throwIfAborted(),this.firstResultUsed?AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(this.config),this.signal?async()=>raceWithSignal(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function pipeGeneratorWithSetup(s,e,a,r,...l){const u=new AsyncGeneratorWithSetup({generator:e,startSetup:a,signal:r}),d=await u.setup;return{output:s(u,d,...l),setup:d}}class RunLogPatch{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const a=this.ops.concat(e.ops),r=applyPatch({},a);return new RunLog({ops:a,state:r[r.length-1].newDocument})}}class RunLog extends RunLogPatch{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const a=this.ops.concat(e.ops),r=applyPatch(this.state,e.ops);return new RunLog({ops:a,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const a=applyPatch({},e.ops);return new RunLog({ops:e.ops,state:a[a.length-1].newDocument})}}const isLogStreamHandler=s=>s.name==="log_stream_tracer";async function _getStandardizedInputs(s,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:a}=s;if(["retriever","llm","prompt"].includes(s.run_type))return a;if(!(Object.keys(a).length===1&&(a==null?void 0:a.input)===""))return a.input}async function _getStandardizedOutputs(s,e){const{outputs:a}=s;return e==="original"||["retriever","llm","prompt"].includes(s.run_type)?a:a!==void 0&&Object.keys(a).length===1&&(a==null?void 0:a.output)!==void 0?a.output:a}function isChatGenerationChunk(s){return s!==void 0&&s.message!==void 0}class LogStreamCallbackHandler extends BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const a=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||a.find(l=>{var u;return(u=this.includeTags)==null?void 0:u.includes(l)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&a.every(l=>{var u;return!((u=this.excludeTags)!=null&&u.includes(l))})),r}async*tapOutputIterable(e,a){for await(const r of a){if(e!==this.rootId){const l=this.keyMapByRunId[e];l&&await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${l}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var l;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new RunLogPatch({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const a=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=a===1?e.name:`${e.name}:${a}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await _getStandardizedInputs(e,this._schemaFormat)),await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const a=this.keyMapByRunId[e.id];if(a===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${a}/inputs`,value:await _getStandardizedInputs(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${a}/final_output`,value:await _getStandardizedOutputs(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${a}/end_time`,value:new Date(e.end_time).toISOString()});const l=new RunLogPatch({ops:r});await this.writer.write(l)}finally{if(e.id===this.rootId){const a=new RunLogPatch({ops:[{op:"replace",path:"/final_output",value:await _getStandardizedOutputs(e,this._schemaFormat)}]});await this.writer.write(a),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,a,r){const l=this.keyMapByRunId[e.id];if(l===void 0)return;const u=e.inputs.messages!==void 0;let d;u?isChatGenerationChunk(r==null?void 0:r.chunk)?d=r==null?void 0:r.chunk:d=new AIMessageChunk({id:`run-${e.id}`,content:a}):d=a;const h=new RunLogPatch({ops:[{op:"add",path:`/logs/${l}/streamed_output_str/-`,value:a},{op:"add",path:`/logs/${l}/streamed_output/-`,value:d}]});await this.writer.write(h)}}const RUN_KEY="__run";class GenerationChunk{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new GenerationChunk({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}function assignName({name:s,serialized:e}){return s!==void 0?s:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const isStreamEventsHandler=s=>s.name==="event_stream_tracer";class EventStreamCallbackHandler extends BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const a=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||a.find(l=>{var u;return(u=this.includeTags)==null?void 0:u.includes(l)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&a.every(l=>{var u;return!((u=this.excludeTags)!=null&&u.includes(l))})),r}async*tapOutputIterable(e,a){const r=await a.next();if(r.done)return;const l=this.runInfoMap.get(e);if(l===void 0){yield r.value;return}function u(h,p){return h==="llm"&&typeof p=="string"?new GenerationChunk({text:p}):p}let d=this.tappedPromises.get(e);if(d===void 0){let h;d=new Promise(p=>{h=p}),this.tappedPromises.set(e,d);try{const p={event:`on_${l.runType}_stream`,run_id:e,name:l.name,tags:l.tags,metadata:l.metadata,data:{}};await this.send({...p,data:{chunk:u(l.runType,r.value)}},l),yield r.value;for await(const m of a)l.runType!=="tool"&&l.runType!=="retriever"&&await this.send({...p,data:{chunk:u(l.runType,m)}},l),yield m}finally{h()}}else{yield r.value;for await(const h of a)yield h}}async send(e,a){this._includeRun(a)&&await this.writer.write(e)}async sendEndEvent(e,a){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,a)}):await this.send(e,a)}async onLLMStart(e){var d,h;const a=assignName(e),r=e.inputs.messages!==void 0?"chat_model":"llm",l={tags:e.tags??[],metadata:((d=e.extra)==null?void 0:d.metadata)??{},name:a,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,l);const u=`on_${r}_start`;await this.send({event:u,data:{input:e.inputs},name:a,tags:e.tags??[],run_id:e.id,metadata:((h=e.extra)==null?void 0:h.metadata)??{}},l)}async onLLMNewToken(e,a,r){const l=this.runInfoMap.get(e.id);let u,d;if(l===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(l.runType==="chat_model")d="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?u=new AIMessageChunk({content:a,id:`run-${e.id}`}):u=r.chunk.message;else if(l.runType==="llm")d="on_llm_stream",(r==null?void 0:r.chunk)===void 0?u=new GenerationChunk({text:a}):u=r.chunk;else throw new Error(`Unexpected run type ${l.runType}`);await this.send({event:d,data:{chunk:u},run_id:e.id,name:l.name,tags:l.tags,metadata:l.metadata},l)}}async onLLMEnd(e){var d,h,p;const a=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(a===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const l=(d=e.outputs)==null?void 0:d.generations;let u;if(a.runType==="chat_model"){for(const m of l??[]){if(u!==void 0)break;u=(h=m[0])==null?void 0:h.message}r="on_chat_model_end"}else if(a.runType==="llm")u={generations:l==null?void 0:l.map(m=>m.map(b=>({text:b.text,generationInfo:b.generationInfo}))),llmOutput:((p=e.outputs)==null?void 0:p.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${a.runType}`);await this.sendEndEvent({event:r,data:{output:u,input:a.inputs},run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async onChainStart(e){var d,h;const a=assignName(e),r=e.run_type??"chain",l={tags:e.tags??[],metadata:((d=e.extra)==null?void 0:d.metadata)??{},name:a,runType:e.run_type};let u={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(u={},l.inputs={}):e.inputs.input!==void 0?(u.input=e.inputs.input,l.inputs=e.inputs.input):(u.input=e.inputs,l.inputs=e.inputs),this.runInfoMap.set(e.id,l),await this.send({event:`on_${r}_start`,data:u,name:a,tags:e.tags??[],run_id:e.id,metadata:((h=e.extra)==null?void 0:h.metadata)??{}},l)}async onChainEnd(e){var h;const a=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),a===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,l=e.inputs??a.inputs??{},d={output:((h=e.outputs)==null?void 0:h.output)??e.outputs,input:l};l.input&&Object.keys(l).length===1&&(d.input=l.input,a.inputs=l.input),await this.sendEndEvent({event:r,data:d,run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata??{}},a)}async onToolStart(e){var l,u;const a=assignName(e),r={tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},name:a,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:a,run_id:e.id,tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{}},r)}async onToolEnd(e){var l;const a=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),a===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(a.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((l=e.outputs)==null?void 0:l.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:a.inputs},run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async onRetrieverStart(e){var u,d;const a=assignName(e),l={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:a,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,l),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:a,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},l)}async onRetrieverEnd(e){var r;const a=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),a===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:a.inputs},run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async handleCustomEvent(e,a,r){const l=this.runInfoMap.get(r);if(l===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:l.tags,metadata:l.metadata,data:a},l)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const STATUS_NO_RETRY=[400,401,402,403,404,405,406,407,409],defaultFailedAttemptHandler=s=>{var a,r;if(s.message.startsWith("Cancel")||s.message.startsWith("AbortError")||s.name==="AbortError"||(s==null?void 0:s.code)==="ECONNABORTED")throw s;const e=((a=s==null?void 0:s.response)==null?void 0:a.status)??(s==null?void 0:s.status);if(e&&STATUS_NO_RETRY.includes(+e))throw s;if(((r=s==null?void 0:s.error)==null?void 0:r.code)==="insufficient_quota"){const l=new Error(s==null?void 0:s.message);throw l.name="InsufficientQuotaError",l}};class AsyncCaller{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??defaultFailedAttemptHandler;const a="default"in PQueueMod?PQueueMod.default:PQueueMod;this.queue=new a({concurrency:this.maxConcurrency})}call(e,...a){return this.queue.add(()=>pRetry(()=>e(...a).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,a,...r){return e.signal?Promise.race([this.call(a,...r),new Promise((l,u)=>{var d;(d=e.signal)==null||d.addEventListener("abort",()=>{u(new Error("AbortError"))})})]):this.call(a,...r)}fetch(...e){return this.call(()=>fetch(...e).then(a=>a.ok?a:Promise.reject(a)))}}class RootListenersTracer extends BaseTracer{constructor({config:e,onStart:a,onEnd:r,onError:l}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=a,this.argOnEnd=r,this.argOnError=l}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function isRunnableInterface(s){return s?s.lc_runnable:!1}class _RootEventFilter{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,a){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const l=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(a)),this.includeTags!==void 0&&(r=r||l.some(u=>{var d;return(d=this.includeTags)==null?void 0:d.includes(u)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(a)),this.excludeTags!==void 0&&(r=r&&l.every(u=>{var d;return!((d=this.excludeTags)!=null&&d.includes(u))})),r}}const ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},getDefaultOptions=s=>({...defaultOptions,...s}),getRefs=s=>{const e=getDefaultOptions(s),a=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:a,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,l])=>[l._def,{def:l._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function addErrorMessage(s,e,a,r){r!=null&&r.errorMessages&&a&&(s.errorMessage={...s.errorMessage,[e]:a})}function setResponseValueAndErrors(s,e,a,r,l){s[e]=a,addErrorMessage(s,e,r,l)}function parseAnyDef(){return{}}function parseArrayDef(s,e){var r,l,u;const a={type:"array"};return(r=s.type)!=null&&r._def&&((u=(l=s.type)==null?void 0:l._def)==null?void 0:u.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(a.items=parseDef(s.type._def,{...e,currentPath:[...e.currentPath,"items"]})),s.minLength&&setResponseValueAndErrors(a,"minItems",s.minLength.value,s.minLength.message,e),s.maxLength&&setResponseValueAndErrors(a,"maxItems",s.maxLength.value,s.maxLength.message,e),s.exactLength&&(setResponseValueAndErrors(a,"minItems",s.exactLength.value,s.exactLength.message,e),setResponseValueAndErrors(a,"maxItems",s.exactLength.value,s.exactLength.message,e)),a}function parseBigintDef(s,e){const a={type:"integer",format:"int64"};if(!s.checks)return a;for(const r of s.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?setResponseValueAndErrors(a,"minimum",r.value,r.message,e):setResponseValueAndErrors(a,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(a.exclusiveMinimum=!0),setResponseValueAndErrors(a,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?setResponseValueAndErrors(a,"maximum",r.value,r.message,e):setResponseValueAndErrors(a,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(a.exclusiveMaximum=!0),setResponseValueAndErrors(a,"maximum",r.value,r.message,e));break;case"multipleOf":setResponseValueAndErrors(a,"multipleOf",r.value,r.message,e);break}return a}function parseBooleanDef(){return{type:"boolean"}}function parseBrandedDef(s,e){return parseDef(s.type._def,e)}const parseCatchDef=(s,e)=>parseDef(s.innerType._def,e);function parseDateDef(s,e,a){const r=a??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((l,u)=>parseDateDef(s,e,l))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(s,e)}}const integerDateParser=(s,e)=>{const a={type:"integer",format:"unix-time"};if(e.target==="openApi3")return a;for(const r of s.checks)switch(r.kind){case"min":setResponseValueAndErrors(a,"minimum",r.value,r.message,e);break;case"max":setResponseValueAndErrors(a,"maximum",r.value,r.message,e);break}return a};function parseDefaultDef(s,e){return{...parseDef(s.innerType._def,e),default:s.defaultValue()}}function parseEffectsDef(s,e){return e.effectStrategy==="input"?parseDef(s.schema._def,e):{}}function parseEnumDef(s){return{type:"string",enum:Array.from(s.values)}}const isJsonSchema7AllOfType=s=>"type"in s&&s.type==="string"?!1:"allOf"in s;function parseIntersectionDef(s,e){const a=[parseDef(s.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),parseDef(s.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(u=>!!u);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const l=[];return a.forEach(u=>{if(isJsonSchema7AllOfType(u))l.push(...u.allOf),u.unevaluatedProperties===void 0&&(r=void 0);else{let d=u;if("additionalProperties"in u&&u.additionalProperties===!1){const{additionalProperties:h,...p}=u;d=p}else r=void 0;l.push(d)}}),l.length?{allOf:l,...r}:void 0}function parseLiteralDef(s,e){const a=typeof s.value;return a!=="bigint"&&a!=="number"&&a!=="boolean"&&a!=="string"?{type:Array.isArray(s.value)?"array":"object"}:e.target==="openApi3"?{type:a==="bigint"?"integer":a,enum:[s.value]}:{type:a==="bigint"?"integer":a,const:s.value}}let emojiRegex;const zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(emojiRegex===void 0&&(emojiRegex=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function parseStringDef(s,e){const a={type:"string"};if(s.checks)for(const r of s.checks)switch(r.kind){case"min":setResponseValueAndErrors(a,"minLength",typeof a.minLength=="number"?Math.max(a.minLength,r.value):r.value,r.message,e);break;case"max":setResponseValueAndErrors(a,"maxLength",typeof a.maxLength=="number"?Math.min(a.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":addFormat(a,"email",r.message,e);break;case"format:idn-email":addFormat(a,"idn-email",r.message,e);break;case"pattern:zod":addPattern(a,zodPatterns.email,r.message,e);break}break;case"url":addFormat(a,"uri",r.message,e);break;case"uuid":addFormat(a,"uuid",r.message,e);break;case"regex":addPattern(a,r.regex,r.message,e);break;case"cuid":addPattern(a,zodPatterns.cuid,r.message,e);break;case"cuid2":addPattern(a,zodPatterns.cuid2,r.message,e);break;case"startsWith":addPattern(a,RegExp(`^${escapeLiteralCheckValue(r.value,e)}`),r.message,e);break;case"endsWith":addPattern(a,RegExp(`${escapeLiteralCheckValue(r.value,e)}$`),r.message,e);break;case"datetime":addFormat(a,"date-time",r.message,e);break;case"date":addFormat(a,"date",r.message,e);break;case"time":addFormat(a,"time",r.message,e);break;case"duration":addFormat(a,"duration",r.message,e);break;case"length":setResponseValueAndErrors(a,"minLength",typeof a.minLength=="number"?Math.max(a.minLength,r.value):r.value,r.message,e),setResponseValueAndErrors(a,"maxLength",typeof a.maxLength=="number"?Math.min(a.maxLength,r.value):r.value,r.message,e);break;case"includes":{addPattern(a,RegExp(escapeLiteralCheckValue(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&addFormat(a,"ipv4",r.message,e),r.version!=="v4"&&addFormat(a,"ipv6",r.message,e);break}case"base64url":addPattern(a,zodPatterns.base64url,r.message,e);break;case"jwt":addPattern(a,zodPatterns.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&addPattern(a,zodPatterns.ipv4Cidr,r.message,e),r.version!=="v4"&&addPattern(a,zodPatterns.ipv6Cidr,r.message,e);break}case"emoji":addPattern(a,zodPatterns.emoji(),r.message,e);break;case"ulid":{addPattern(a,zodPatterns.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{addFormat(a,"binary",r.message,e);break}case"contentEncoding:base64":{setResponseValueAndErrors(a,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{addPattern(a,zodPatterns.base64,r.message,e);break}}break}case"nanoid":addPattern(a,zodPatterns.nanoid,r.message,e)}return a}function escapeLiteralCheckValue(s,e){return e.patternStrategy==="escape"?escapeNonAlphaNumeric(s):s}const ALPHA_NUMERIC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function escapeNonAlphaNumeric(s){let e="";for(let a=0;a<s.length;a++)ALPHA_NUMERIC.has(s[a])||(e+="\\"),e+=s[a];return e}function addFormat(s,e,a,r){var l;s.format||(l=s.anyOf)!=null&&l.some(u=>u.format)?(s.anyOf||(s.anyOf=[]),s.format&&(s.anyOf.push({format:s.format,...s.errorMessage&&r.errorMessages&&{errorMessage:{format:s.errorMessage.format}}}),delete s.format,s.errorMessage&&(delete s.errorMessage.format,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.anyOf.push({format:e,...a&&r.errorMessages&&{errorMessage:{format:a}}})):setResponseValueAndErrors(s,"format",e,a,r)}function addPattern(s,e,a,r){var l;s.pattern||(l=s.allOf)!=null&&l.some(u=>u.pattern)?(s.allOf||(s.allOf=[]),s.pattern&&(s.allOf.push({pattern:s.pattern,...s.errorMessage&&r.errorMessages&&{errorMessage:{pattern:s.errorMessage.pattern}}}),delete s.pattern,s.errorMessage&&(delete s.errorMessage.pattern,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.allOf.push({pattern:stringifyRegExpWithFlags(e,r),...a&&r.errorMessages&&{errorMessage:{pattern:a}}})):setResponseValueAndErrors(s,"pattern",stringifyRegExpWithFlags(e,r),a,r)}function stringifyRegExpWithFlags(s,e){var p;if(!e.applyRegexFlags||!s.flags)return s.source;const a={i:s.flags.includes("i"),m:s.flags.includes("m"),s:s.flags.includes("s")},r=a.i?s.source.toLowerCase():s.source;let l="",u=!1,d=!1,h=!1;for(let m=0;m<r.length;m++){if(u){l+=r[m],u=!1;continue}if(a.i){if(d){if(r[m].match(/[a-z]/)){h?(l+=r[m],l+=`${r[m-2]}-${r[m]}`.toUpperCase(),h=!1):r[m+1]==="-"&&((p=r[m+2])!=null&&p.match(/[a-z]/))?(l+=r[m],h=!0):l+=`${r[m]}${r[m].toUpperCase()}`;continue}}else if(r[m].match(/[a-z]/)){l+=`[${r[m]}${r[m].toUpperCase()}]`;continue}}if(a.m){if(r[m]==="^"){l+=`(^|(?<=[\r
]))`;continue}else if(r[m]==="$"){l+=`($|(?=[\r
]))`;continue}}if(a.s&&r[m]==="."){l+=d?`${r[m]}\r
`:`[${r[m]}\r
]`;continue}l+=r[m],r[m]==="\\"?u=!0:d&&r[m]==="]"?d=!1:!d&&r[m]==="["&&(d=!0)}try{new RegExp(l)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),s.source}return l}function parseRecordDef(s,e){var r,l,u,d,h,p;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=s.keyType)==null?void 0:r._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:s.keyType._def.values,properties:s.keyType._def.values.reduce((m,b)=>({...m,[b]:parseDef(s.valueType._def,{...e,currentPath:[...e.currentPath,"properties",b]})??{}}),{}),additionalProperties:!1};const a={type:"object",additionalProperties:parseDef(s.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return a;if(((l=s.keyType)==null?void 0:l._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((u=s.keyType._def.checks)!=null&&u.length)){const{type:m,...b}=parseStringDef(s.keyType._def,e);return{...a,propertyNames:b}}else{if(((d=s.keyType)==null?void 0:d._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...a,propertyNames:{enum:s.keyType._def.values}};if(((h=s.keyType)==null?void 0:h._def.typeName)===ZodFirstPartyTypeKind.ZodBranded&&s.keyType._def.type._def.typeName===ZodFirstPartyTypeKind.ZodString&&((p=s.keyType._def.type._def.checks)!=null&&p.length)){const{type:m,...b}=parseBrandedDef(s.keyType._def,e);return{...a,propertyNames:b}}}return a}function parseMapDef(s,e){if(e.mapStrategy==="record")return parseRecordDef(s,e);const a=parseDef(s.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=parseDef(s.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[a,r],minItems:2,maxItems:2}}}function parseNativeEnumDef(s){const e=s.values,r=Object.keys(s.values).filter(u=>typeof e[e[u]]!="number").map(u=>e[u]),l=Array.from(new Set(r.map(u=>typeof u)));return{type:l.length===1?l[0]==="string"?"string":"number":["string","number"],enum:r}}function parseNeverDef(){return{not:{}}}function parseNullDef(s){return s.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef(s,e){if(e.target==="openApi3")return asAnyOf(s,e);const a=s.options instanceof Map?Array.from(s.options.values()):s.options;if(a.every(r=>r._def.typeName in primitiveMappings&&(!r._def.checks||!r._def.checks.length))){const r=a.reduce((l,u)=>{const d=primitiveMappings[u._def.typeName];return d&&!l.includes(d)?[...l,d]:l},[]);return{type:r.length>1?r:r[0]}}else if(a.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=a.reduce((l,u)=>{const d=typeof u._def.value;switch(d){case"string":case"number":case"boolean":return[...l,d];case"bigint":return[...l,"integer"];case"object":if(u._def.value===null)return[...l,"null"];case"symbol":case"undefined":case"function":default:return l}},[]);if(r.length===a.length){const l=r.filter((u,d,h)=>h.indexOf(u)===d);return{type:l.length>1?l:l[0],enum:a.reduce((u,d)=>u.includes(d._def.value)?u:[...u,d._def.value],[])}}}else if(a.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((r,l)=>[...r,...l._def.values.filter(u=>!r.includes(u))],[])};return asAnyOf(s,e)}const asAnyOf=(s,e)=>{const a=(s.options instanceof Map?Array.from(s.options.values()):s.options).map((r,l)=>parseDef(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${l}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return a.length?{anyOf:a}:void 0};function parseNullableDef(s,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(s.innerType._def.typeName)&&(!s.innerType._def.checks||!s.innerType._def.checks.length))return e.target==="openApi3"?{type:primitiveMappings[s.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings[s.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=parseDef(s.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const a=parseDef(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return a&&{anyOf:[a,{type:"null"}]}}function parseNumberDef(s,e){const a={type:"number"};if(!s.checks)return a;for(const r of s.checks)switch(r.kind){case"int":a.type="integer",addErrorMessage(a,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?setResponseValueAndErrors(a,"minimum",r.value,r.message,e):setResponseValueAndErrors(a,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(a.exclusiveMinimum=!0),setResponseValueAndErrors(a,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?setResponseValueAndErrors(a,"maximum",r.value,r.message,e):setResponseValueAndErrors(a,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(a.exclusiveMaximum=!0),setResponseValueAndErrors(a,"maximum",r.value,r.message,e));break;case"multipleOf":setResponseValueAndErrors(a,"multipleOf",r.value,r.message,e);break}return a}function decideAdditionalProperties(s,e){return e.removeAdditionalStrategy==="strict"?s.catchall._def.typeName==="ZodNever"?s.unknownKeys!=="strict":parseDef(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:s.catchall._def.typeName==="ZodNever"?s.unknownKeys==="passthrough":parseDef(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function parseObjectDef(s,e){const a=e.target==="openAi",r={type:"object",...Object.entries(s.shape()).reduce((l,[u,d])=>{if(d===void 0||d._def===void 0)return l;let h=d.isOptional();h&&a&&(d instanceof ZodOptional&&(d=d._def.innerType),d.isNullable()||(d=d.nullable()),h=!1);const p=parseDef(d._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});return p===void 0?l:{properties:{...l.properties,[u]:p},required:h?l.required:[...l.required,u]}},{properties:{},required:[]}),additionalProperties:decideAdditionalProperties(s,e)};return r.required.length||delete r.required,r}const parseOptionalDef=(s,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return parseDef(s.innerType._def,e);const a=parseDef(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return a?{anyOf:[{not:{}},a]}:{}},parsePipelineDef=(s,e)=>{if(e.pipeStrategy==="input")return parseDef(s.in._def,e);if(e.pipeStrategy==="output")return parseDef(s.out._def,e);const a=parseDef(s.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=parseDef(s.out._def,{...e,currentPath:[...e.currentPath,"allOf",a?"1":"0"]});return{allOf:[a,r].filter(l=>l!==void 0)}};function parsePromiseDef(s,e){return parseDef(s.type._def,e)}function parseSetDef(s,e){const r={type:"array",uniqueItems:!0,items:parseDef(s.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return s.minSize&&setResponseValueAndErrors(r,"minItems",s.minSize.value,s.minSize.message,e),s.maxSize&&setResponseValueAndErrors(r,"maxItems",s.maxSize.value,s.maxSize.message,e),r}function parseTupleDef(s,e){return s.rest?{type:"array",minItems:s.items.length,items:s.items.map((a,r)=>parseDef(a._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((a,r)=>r===void 0?a:[...a,r],[]),additionalItems:parseDef(s.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:s.items.length,maxItems:s.items.length,items:s.items.map((a,r)=>parseDef(a._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((a,r)=>r===void 0?a:[...a,r],[])}}function parseUndefinedDef(){return{not:{}}}function parseUnknownDef(){return{}}const parseReadonlyDef=(s,e)=>parseDef(s.innerType._def,e),selectParser=(s,e,a)=>{switch(e){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(s,a);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef(s,a);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(s,a);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef(s,a);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(s,a);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef(a);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef(s,a);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef(s,a);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef(s,a);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef(s,a);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(s,a);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef(s,a);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef(s);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef(s);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef(s,a);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef(s,a);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef(s,a);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef(s,a);case ZodFirstPartyTypeKind.ZodLazy:return()=>s.getter()._def;case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef(s,a);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef(s,a);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef(s,a);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(s,a);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef(s,a);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef(s,a);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef(s,a);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return;default:return(r=>{})()}};function parseDef(s,e,a=!1){var h;const r=e.seen.get(s);if(e.override){const p=(h=e.override)==null?void 0:h.call(e,s,e,r,a);if(p!==ignoreOverride)return p}if(r&&!a){const p=get$ref(r,e);if(p!==void 0)return p}const l={def:s,path:e.currentPath,jsonSchema:void 0};e.seen.set(s,l);const u=selectParser(s,s.typeName,e),d=typeof u=="function"?parseDef(u(),e):u;if(d&&addMeta(s,e,d),e.postProcess){const p=e.postProcess(d,s,e);return l.jsonSchema=d,p}return l.jsonSchema=d,d}const get$ref=(s,e)=>{switch(e.$refStrategy){case"root":return{$ref:s.path.join("/")};case"relative":return{$ref:getRelativePath(e.currentPath,s.path)};case"none":case"seen":return s.path.length<e.currentPath.length&&s.path.every((a,r)=>e.currentPath[r]===a)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},getRelativePath=(s,e)=>{let a=0;for(;a<s.length&&a<e.length&&s[a]===e[a];a++);return[(s.length-a).toString(),...e.slice(a)].join("/")},addMeta=(s,e,a)=>(s.description&&(a.description=s.description,e.markdownDescription&&(a.markdownDescription=s.description)),a),zodToJsonSchema=(s,e)=>{const a=getRefs(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((h,[p,m])=>({...h,[p]:parseDef(m._def,{...a,currentPath:[...a.basePath,a.definitionPath,p]},!0)??{}}),{}):void 0,l=e==null?void 0:e.name,u=parseDef(s._def,a,!1)??{},d=l===void 0?r?{...u,[a.definitionPath]:r}:u:{$ref:[...a.$refStrategy==="relative"?[]:a.basePath,a.definitionPath,l].join("/"),[a.definitionPath]:{...r,[l]:u}};return a.target==="jsonSchema7"?d.$schema="http://json-schema.org/draft-07/schema#":(a.target==="jsonSchema2019-09"||a.target==="openAi")&&(d.$schema="https://json-schema.org/draft/2019-09/schema#"),a.target==="openAi"&&("anyOf"in d||"oneOf"in d||"allOf"in d||"type"in d&&Array.isArray(d.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),d};function _escapeNodeLabel(s){return s.replace(/[^a-zA-Z-_0-9]/g,"_")}const MARKDOWN_SPECIAL_CHARS=["*","_","`"];function _generateMermaidGraphStyles(s){let e="";for(const[a,r]of Object.entries(s))e+=`	classDef ${a} ${r};
`;return e}function drawMermaid(s,e,a){const{firstNode:r,lastNode:l,nodeColors:u,withStyles:d=!0,curveStyle:h="linear",wrapLabelNWords:p=9}=a??{};let m=d?`%%{init: {'flowchart': {'curve': '${h}'}}}%%
graph TD;
`:`graph TD;
`;if(d){const E="default",S={[E]:"{0}({1})"};r!==void 0&&(S[r]="{0}([{1}]):::first"),l!==void 0&&(S[l]="{0}([{1}]):::last");for(const[T,O]of Object.entries(s)){const N=O.name.split(":").pop()??"";let k=MARKDOWN_SPECIAL_CHARS.some(Z=>N.startsWith(Z)&&N.endsWith(Z))?`<p>${N}</p>`:N;Object.keys(O.metadata??{}).length&&(k+=`<hr/><small><em>${Object.entries(O.metadata??{}).map(([Z,X])=>`${Z} = ${X}`).join(`
`)}</em></small>`);const ae=(S[T]??S[E]).replace("{0}",_escapeNodeLabel(T)).replace("{1}",k);m+=`	${ae}
`}}const b={};for(const E of e){const S=E.source.split(":"),T=E.target.split(":"),O=S.filter((N,P)=>N===T[P]).join(":");b[O]||(b[O]=[]),b[O].push(E)}const v=new Set;function A(E,S){const T=E.length===1&&E[0].source===E[0].target;if(S&&!T){const O=S.split(":").pop();if(v.has(O))throw new Error(`Found duplicate subgraph '${O}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);v.add(O),m+=`	subgraph ${O}
`}for(const O of E){const{source:N,target:P,data:k,conditional:ae}=O;let Z="";if(k!==void 0){let X=k;const te=X.split(" ");te.length>p&&(X=Array.from({length:Math.ceil(te.length/p)},(Q,ne)=>te.slice(ne*p,(ne+1)*p).join(" ")).join("&nbsp;<br>&nbsp;")),Z=ae?` -. &nbsp;${X}&nbsp; .-> `:` -- &nbsp;${X}&nbsp; --> `}else Z=ae?" -.-> ":" --> ";m+=`	${_escapeNodeLabel(N)}${Z}${_escapeNodeLabel(P)};
`}for(const O in b)O.startsWith(`${S}:`)&&O!==S&&A(b[O],O);S&&!T&&(m+=`	end
`)}A(b[""]??[],"");for(const E in b)!E.includes(":")&&E!==""&&A(b[E],E);return d&&(m+=_generateMermaidGraphStyles(u??{})),m}async function drawMermaidPng(s,e){let{backgroundColor:a="white"}=e??{};const r=btoa(s);a!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(a)||(a=`!${a}`));const l=`https://mermaid.ink/img/${r}?bgColor=${a}`,u=await fetch(l);if(!u.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${u.status}`,`Status text: ${u.statusText}`].join(`
`));return await u.blob()}function nodeDataStr(s,e){if(s!==void 0&&!validate$1(s))return s;if(isRunnableInterface(e))try{let a=e.getName();return a=a.startsWith("Runnable")?a.slice(8):a,a}catch{return e.getName()}else return e.name??"UnknownSchema"}function nodeDataJson(s){return isRunnableInterface(s.data)?{type:"runnable",data:{id:s.data.lc_id,name:s.data.getName()}}:{type:"schema",data:{...zodToJsonSchema(s.data.schema),title:s.data.name}}}class Graph{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((a,r)=>{e[a.id]=validate$1(a.id)?r:a.id}),{nodes:Object.values(this.nodes).map(a=>({id:e[a.id],...nodeDataJson(a)})),edges:this.edges.map(a=>{const r={source:e[a.source],target:e[a.target]};return typeof a.data<"u"&&(r.data=a.data),typeof a.conditional<"u"&&(r.conditional=a.conditional),r})}}addNode(e,a,r){if(a!==void 0&&this.nodes[a]!==void 0)throw new Error(`Node with id ${a} already exists`);const l=a??v4(),u={id:l,data:e,name:nodeDataStr(a,e),metadata:r};return this.nodes[l]=u,u}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(a=>a.source!==e.id&&a.target!==e.id)}addEdge(e,a,r,l){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[a.id]===void 0)throw new Error(`Target node ${a.id} not in graph`);const u={source:e.id,target:a.id,data:r,conditional:l};return this.edges.push(u),u}firstNode(){return _firstNode(this)}lastNode(){return _lastNode(this)}extend(e,a=""){let r=a;Object.values(e.nodes).map(m=>m.id).every(validate$1)&&(r="");const u=m=>r?`${r}:${m}`:m;Object.entries(e.nodes).forEach(([m,b])=>{this.nodes[u(m)]={...b,id:u(m)}});const d=e.edges.map(m=>({...m,source:u(m.source),target:u(m.target)}));this.edges=[...this.edges,...d];const h=e.firstNode(),p=e.lastNode();return[h?{id:u(h.id),data:h.data}:void 0,p?{id:u(p.id),data:p.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&_firstNode(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&_lastNode(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(l=>[l.id,l.name])),a=new Map;Object.values(e).forEach(l=>{a.set(l,(a.get(l)||0)+1)});const r=l=>{const u=e[l];return validate$1(l)&&a.get(u)===1?u:l};return new Graph({nodes:Object.fromEntries(Object.entries(this.nodes).map(([l,u])=>[r(l),{...u,id:r(l)}])),edges:this.edges.map(l=>({...l,source:r(l.source),target:r(l.target)}))})}drawMermaid(e){const{withStyles:a,curveStyle:r,nodeColors:l={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:u}=e??{},d=this.reid(),h=d.firstNode(),p=d.lastNode();return drawMermaid(d.nodes,d.edges,{firstNode:h==null?void 0:h.id,lastNode:p==null?void 0:p.id,withStyles:a,curveStyle:r,nodeColors:l,wrapLabelNWords:u})}async drawMermaidPng(e){const a=this.drawMermaid(e);return drawMermaidPng(a,{backgroundColor:e==null?void 0:e.backgroundColor})}}function _firstNode(s,e=[]){const a=new Set(s.edges.filter(l=>!e.includes(l.source)).map(l=>l.target)),r=[];for(const l of Object.values(s.nodes))!e.includes(l.id)&&!a.has(l.id)&&r.push(l);return r.length===1?r[0]:void 0}function _lastNode(s,e=[]){const a=new Set(s.edges.filter(l=>!e.includes(l.target)).map(l=>l.source)),r=[];for(const l of Object.values(s.nodes))!e.includes(l.id)&&!a.has(l.id)&&r.push(l);return r.length===1?r[0]:void 0}function convertToHttpEventStream(s){const e=new TextEncoder,a=new ReadableStream({async start(r){for await(const l of s)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(l)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return IterableReadableStream.fromReadableStream(a)}function isIterableIterator(s){return typeof s=="object"&&s!==null&&typeof s[Symbol.iterator]=="function"&&typeof s.next=="function"}const isIterator=s=>s!=null&&typeof s=="object"&&"next"in s&&typeof s.next=="function";function isAsyncIterable(s){return typeof s=="object"&&s!==null&&typeof s[Symbol.asyncIterator]=="function"}function*consumeIteratorInContext(s,e){for(;;){const{value:a,done:r}=AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(s),e.next.bind(e),!0);if(r)break;yield a}}async function*consumeAsyncIterableInContext(s,e){const a=e[Symbol.asyncIterator]();for(;;){const{value:r,done:l}=await AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(s),a.next.bind(e),!0);if(l)break;yield r}}function _coerceToDict(s,e){return s&&!Array.isArray(s)&&!(s instanceof Date)&&typeof s=="object"?s:{[e]:s}}class Runnable extends Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const a=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${a}${e}`:a}bind(e){return new RunnableBinding({bound:this,kwargs:e,config:{}})}map(){return new RunnableEach({bound:this})}withRetry(e){return new RunnableRetry({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new RunnableBinding({bound:this,config:e,kwargs:{}})}withFallbacks(e){const a=Array.isArray(e)?e:e.fallbacks;return new RunnableWithFallbacks({runnable:this,fallbacks:a})}_getOptionsList(e,a=0){if(Array.isArray(e)&&e.length!==a)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${a} inputs`);if(Array.isArray(e))return e.map(ensureConfig);if(a>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([l])=>l!=="runId"));return Array.from({length:a},(l,u)=>ensureConfig(u===0?e:r))}return Array.from({length:a},()=>ensureConfig(e))}async batch(e,a,r){var p;const l=this._getOptionsList(a??{},e.length),u=((p=l[0])==null?void 0:p.maxConcurrency)??(r==null?void 0:r.maxConcurrency),d=new AsyncCaller({maxConcurrency:u,onFailedAttempt:m=>{throw m}}),h=e.map((m,b)=>d.call(async()=>{try{return await this.invoke(m,l[b])}catch(v){if(r!=null&&r.returnExceptions)return v;throw v}}));return Promise.all(h)}async*_streamIterator(e,a){yield this.invoke(e,a)}async stream(e,a){const r=ensureConfig(a),l=new AsyncGeneratorWithSetup({generator:this._streamIterator(e,r),config:r});return await l.setup,IterableReadableStream.fromAsyncGenerator(l)}_separateRunnableConfigFromCallOptions(e){let a;e===void 0?a=ensureConfig(e):a=ensureConfig({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[a,r]}async _callWithConfig(e,a,r){const l=ensureConfig(r),u=await getCallbackManagerForConfig(l),d=await(u==null?void 0:u.handleChainStart(this.toJSON(),_coerceToDict(a,"input"),l.runId,l==null?void 0:l.runType,void 0,void 0,(l==null?void 0:l.runName)??this.getName()));delete l.runId;let h;try{const p=e.call(this,a,l,d);h=await raceWithSignal(p,r==null?void 0:r.signal)}catch(p){throw await(d==null?void 0:d.handleChainError(p)),p}return await(d==null?void 0:d.handleChainEnd(_coerceToDict(h,"output"))),h}async _batchWithConfig(e,a,r,l){var m;const u=this._getOptionsList(r??{},a.length),d=await Promise.all(u.map(getCallbackManagerForConfig)),h=await Promise.all(d.map(async(b,v)=>{const A=await(b==null?void 0:b.handleChainStart(this.toJSON(),_coerceToDict(a[v],"input"),u[v].runId,u[v].runType,void 0,void 0,u[v].runName??this.getName()));return delete u[v].runId,A}));let p;try{const b=e.call(this,a,u,h,l);p=await raceWithSignal(b,(m=u==null?void 0:u[0])==null?void 0:m.signal)}catch(b){throw await Promise.all(h.map(v=>v==null?void 0:v.handleChainError(b))),b}return await Promise.all(h.map(b=>b==null?void 0:b.handleChainEnd(_coerceToDict(p,"output")))),p}async*_transformStreamWithConfig(e,a,r){let l,u=!0,d,h=!0;const p=ensureConfig(r),m=await getCallbackManagerForConfig(p);async function*b(){for await(const A of e){if(u)if(l===void 0)l=A;else try{l=concat(l,A)}catch{l=void 0,u=!1}yield A}}let v;try{const A=await pipeGeneratorWithSetup(a.bind(this),b(),async()=>m==null?void 0:m.handleChainStart(this.toJSON(),{input:""},p.runId,p.runType,void 0,void 0,p.runName??this.getName()),r==null?void 0:r.signal,p);delete p.runId,v=A.setup;const E=v==null?void 0:v.handlers.find(isStreamEventsHandler);let S=A.output;E!==void 0&&v!==void 0&&(S=E.tapOutputIterable(v.runId,S));const T=v==null?void 0:v.handlers.find(isLogStreamHandler);T!==void 0&&v!==void 0&&(S=T.tapOutputIterable(v.runId,S));for await(const O of S)if(yield O,h)if(d===void 0)d=O;else try{d=concat(d,O)}catch{d=void 0,h=!1}}catch(A){throw await(v==null?void 0:v.handleChainError(A,void 0,void 0,void 0,{inputs:_coerceToDict(l,"input")})),A}await(v==null?void 0:v.handleChainEnd(d??{},void 0,void 0,void 0,{inputs:_coerceToDict(l,"input")}))}getGraph(e){const a=new Graph,r=a.addNode({name:`${this.getName()}Input`,schema:z.any()}),l=a.addNode(this),u=a.addNode({name:`${this.getName()}Output`,schema:z.any()});return a.addEdge(r,l),a.addEdge(l,u),a}pipe(e){return new RunnableSequence({first:this,last:_coerceToRunnable(e)})}pick(e){return this.pipe(new RunnablePick(e))}assign(e){return this.pipe(new RunnableAssign(new RunnableMap({steps:e})))}async*transform(e,a){let r;for await(const l of e)r===void 0?r=l:r=concat(r,l);yield*this._streamIterator(r,ensureConfig(a))}async*streamLog(e,a,r){const l=new LogStreamCallbackHandler({...r,autoClose:!1,_schemaFormat:"original"}),u=ensureConfig(a);yield*this._streamLog(e,l,u)}async*_streamLog(e,a,r){const{callbacks:l}=r;if(l===void 0)r.callbacks=[a];else if(Array.isArray(l))r.callbacks=l.concat([a]);else{const p=l.copy();p.addHandler(a,!0),r.callbacks=p}const u=this.stream(e,r);async function d(){try{const p=await u;for await(const m of p){const b=new RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:m}]});await a.writer.write(b)}}finally{await a.writer.close()}}const h=d();try{for await(const p of a)yield p}finally{await h}}streamEvents(e,a,r){let l;if(a.version==="v1")l=this._streamEventsV1(e,a,r);else if(a.version==="v2")l=this._streamEventsV2(e,a,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return a.encoding==="text/event-stream"?convertToHttpEventStream(l):IterableReadableStream.fromAsyncGenerator(l)}async*_streamEventsV2(e,a,r){var S;const l=new EventStreamCallbackHandler({...r,autoClose:!1}),u=ensureConfig(a),d=u.runId??v4();u.runId=d;const h=u.callbacks;if(h===void 0)u.callbacks=[l];else if(Array.isArray(h))u.callbacks=h.concat(l);else{const T=h.copy();T.addHandler(l,!0),u.callbacks=T}const p=new AbortController,m=this;async function b(){try{let T;a!=null&&a.signal?"any"in AbortSignal?T=AbortSignal.any([p.signal,a.signal]):(T=a.signal,a.signal.addEventListener("abort",()=>{p.abort()},{once:!0})):T=p.signal;const O=await m.stream(e,{...u,signal:T}),N=l.tapOutputIterable(d,O);for await(const P of N)if(p.signal.aborted)break}finally{await l.finish()}}const v=b();let A=!1,E;try{for await(const T of l){if(!A){T.data.input=e,A=!0,E=T.run_id,yield T;continue}T.run_id===E&&T.event.endsWith("_end")&&(S=T.data)!=null&&S.input&&delete T.data.input,yield T}}finally{p.abort(),await v}}async*_streamEventsV1(e,a,r){let l,u=!1;const d=ensureConfig(a),h=d.tags??[],p=d.metadata??{},m=d.runName??this.getName(),b=new LogStreamCallbackHandler({...r,autoClose:!1,_schemaFormat:"streaming_events"}),v=new _RootEventFilter({...r}),A=this._streamLog(e,b,d);for await(const S of A){if(l?l=l.concat(S):l=RunLog.fromRunLogPatch(S),l.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!u){u=!0;const P={...l.state},k={run_id:P.id,event:`on_${P.type}_start`,name:m,tags:h,metadata:p,data:{input:e}};v.includeEvent(k,P.type)&&(yield k)}const T=S.ops.filter(P=>P.path.startsWith("/logs/")).map(P=>P.path.split("/")[2]),O=[...new Set(T)];for(const P of O){let k,ae={};const Z=l.state.logs[P];if(Z.end_time===void 0?Z.streamed_output.length>0?k="stream":k="start":k="end",k==="start")Z.inputs!==void 0&&(ae.input=Z.inputs);else if(k==="end")Z.inputs!==void 0&&(ae.input=Z.inputs),ae.output=Z.final_output;else if(k==="stream"){const X=Z.streamed_output.length;if(X!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${X} instead. Encountered in: "${Z.name}"`);ae={chunk:Z.streamed_output[0]},Z.streamed_output=[]}yield{event:`on_${Z.type}_${k}`,name:Z.name,run_id:Z.id,tags:Z.tags,metadata:Z.metadata,data:ae}}const{state:N}=l;if(N.streamed_output.length>0){const P=N.streamed_output.length;if(P!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${P} instead. Encountered in: "${N.name}"`);const k={chunk:N.streamed_output[0]};N.streamed_output=[];const ae={event:`on_${N.type}_stream`,run_id:N.id,tags:h,metadata:p,name:m,data:k};v.includeEvent(ae,N.type)&&(yield ae)}}const E=l==null?void 0:l.state;if(E!==void 0){const S={event:`on_${E.type}_end`,name:m,run_id:E.id,tags:h,metadata:p,data:{output:E.final_output}};v.includeEvent(S,E.type)&&(yield S)}}static isRunnable(e){return isRunnableInterface(e)}withListeners({onStart:e,onEnd:a,onError:r}){return new RunnableBinding({bound:this,config:{},configFactories:[l=>({callbacks:[new RootListenersTracer({config:l,onStart:e,onEnd:a,onError:r})]})]})}asTool(e){return convertRunnableToTool(this,e)}}class RunnableBinding extends Runnable{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const a=mergeConfigs(this.config,...e);return mergeConfigs(a,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(a))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,a){return this.bound.invoke(e,await this._mergeConfig(ensureConfig(a),this.kwargs))}async batch(e,a,r){const l=Array.isArray(a)?await Promise.all(a.map(async u=>this._mergeConfig(ensureConfig(u),this.kwargs))):await this._mergeConfig(ensureConfig(a),this.kwargs);return this.bound.batch(e,l,r)}async*_streamIterator(e,a){yield*this.bound._streamIterator(e,await this._mergeConfig(ensureConfig(a),this.kwargs))}async stream(e,a){return this.bound.stream(e,await this._mergeConfig(ensureConfig(a),this.kwargs))}async*transform(e,a){yield*this.bound.transform(e,await this._mergeConfig(ensureConfig(a),this.kwargs))}streamEvents(e,a,r){const l=this,u=async function*(){yield*l.bound.streamEvents(e,{...await l._mergeConfig(ensureConfig(a),l.kwargs),version:a.version},r)};return IterableReadableStream.fromAsyncGenerator(u())}static isRunnableBinding(e){return e.bound&&Runnable.isRunnable(e.bound)}withListeners({onStart:e,onEnd:a,onError:r}){return new RunnableBinding({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[l=>({callbacks:[new RootListenersTracer({config:l,onStart:e,onEnd:a,onError:r})]})]})}}class RunnableEach extends Runnable{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new RunnableEach({bound:this.bound.bind(e)})}async invoke(e,a){return this._callWithConfig(this._invoke.bind(this),e,a)}async _invoke(e,a,r){return this.bound.batch(e,patchConfig(a,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:a,onError:r}){return new RunnableEach({bound:this.bound.withListeners({onStart:e,onEnd:a,onError:r})})}}class RunnableRetry extends RunnableBinding{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,a,r){const l=e>1?`retry:attempt:${e}`:void 0;return patchConfig(a,{callbacks:r==null?void 0:r.getChild(l)})}async _invoke(e,a,r){return pRetry(l=>super.invoke(e,this._patchConfigForRetry(l,a,r)),{onFailedAttempt:l=>this.onFailedAttempt(l,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,a){return this._callWithConfig(this._invoke.bind(this),e,a)}async _batch(e,a,r,l){const u={};try{await pRetry(async d=>{const h=e.map((A,E)=>E).filter(A=>u[A.toString()]===void 0||u[A.toString()]instanceof Error),p=h.map(A=>e[A]),m=h.map(A=>this._patchConfigForRetry(d,a==null?void 0:a[A],r==null?void 0:r[A])),b=await super.batch(p,m,{...l,returnExceptions:!0});let v;for(let A=0;A<b.length;A+=1){const E=b[A],S=h[A];E instanceof Error&&v===void 0&&(v=E,v.input=p[A]),u[S.toString()]=E}if(v)throw v;return b},{onFailedAttempt:d=>this.onFailedAttempt(d,d.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(d){if((l==null?void 0:l.returnExceptions)!==!0)throw d}return Object.keys(u).sort((d,h)=>parseInt(d,10)-parseInt(h,10)).map(d=>u[parseInt(d,10)])}async batch(e,a,r){return this._batchWithConfig(this._batch.bind(this),e,a,r)}}class RunnableSequence extends Runnable{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,a){var p;const r=ensureConfig(a),l=await getCallbackManagerForConfig(r),u=await(l==null?void 0:l.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let d=e,h;try{const m=[this.first,...this.middle];for(let b=0;b<m.length;b+=1){const A=m[b].invoke(d,patchConfig(r,{callbacks:u==null?void 0:u.getChild(this.omitSequenceTags?void 0:`seq:step:${b+1}`)}));d=await raceWithSignal(A,a==null?void 0:a.signal)}if((p=a==null?void 0:a.signal)!=null&&p.aborted)throw new Error("Aborted");h=await this.last.invoke(d,patchConfig(r,{callbacks:u==null?void 0:u.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(m){throw await(u==null?void 0:u.handleChainError(m)),m}return await(u==null?void 0:u.handleChainEnd(_coerceToDict(h,"output"))),h}async batch(e,a,r){var p;const l=this._getOptionsList(a??{},e.length),u=await Promise.all(l.map(getCallbackManagerForConfig)),d=await Promise.all(u.map(async(m,b)=>{const v=await(m==null?void 0:m.handleChainStart(this.toJSON(),_coerceToDict(e[b],"input"),l[b].runId,void 0,void 0,void 0,l[b].runName));return delete l[b].runId,v}));let h=e;try{for(let m=0;m<this.steps.length;m+=1){const v=this.steps[m].batch(h,d.map((A,E)=>{const S=A==null?void 0:A.getChild(this.omitSequenceTags?void 0:`seq:step:${m+1}`);return patchConfig(l[E],{callbacks:S})}),r);h=await raceWithSignal(v,(p=l[0])==null?void 0:p.signal)}}catch(m){throw await Promise.all(d.map(b=>b==null?void 0:b.handleChainError(m))),m}return await Promise.all(d.map(m=>m==null?void 0:m.handleChainEnd(_coerceToDict(h,"output")))),h}async*_streamIterator(e,a){var v;const r=await getCallbackManagerForConfig(a),{runId:l,...u}=a??{},d=await(r==null?void 0:r.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),l,void 0,void 0,void 0,u==null?void 0:u.runName)),h=[this.first,...this.middle,this.last];let p=!0,m;async function*b(){yield e}try{let A=h[0].transform(b(),patchConfig(u,{callbacks:d==null?void 0:d.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let E=1;E<h.length;E+=1)A=await h[E].transform(A,patchConfig(u,{callbacks:d==null?void 0:d.getChild(this.omitSequenceTags?void 0:`seq:step:${E+1}`)}));for await(const E of A)if((v=a==null?void 0:a.signal)==null||v.throwIfAborted(),yield E,p)if(m===void 0)m=E;else try{m=concat(m,E)}catch{m=void 0,p=!1}}catch(A){throw await(d==null?void 0:d.handleChainError(A)),A}await(d==null?void 0:d.handleChainEnd(_coerceToDict(m,"output")))}getGraph(e){const a=new Graph;let r=null;return this.steps.forEach((l,u)=>{const d=l.getGraph(e);u!==0&&d.trimFirstNode(),u!==this.steps.length-1&&d.trimLastNode(),a.extend(d);const h=d.firstNode();if(!h)throw new Error(`Runnable ${l} has no first node`);r&&a.addEdge(r,h),r=d.lastNode()}),a}pipe(e){return RunnableSequence.isRunnableSequence(e)?new RunnableSequence({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new RunnableSequence({first:this.first,middle:[...this.middle,this.last],last:_coerceToRunnable(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Runnable.isRunnable(e)}static from([e,...a],r){let l={};return typeof r=="string"?l.name=r:r!==void 0&&(l=r),new RunnableSequence({...l,first:_coerceToRunnable(e),middle:a.slice(0,-1).map(_coerceToRunnable),last:_coerceToRunnable(a[a.length-1])})}}class RunnableMap extends Runnable{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[a,r]of Object.entries(e.steps))this.steps[a]=_coerceToRunnable(r)}static from(e){return new RunnableMap({steps:e})}async invoke(e,a){const r=ensureConfig(a),l=await getCallbackManagerForConfig(r),u=await(l==null?void 0:l.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const d={};try{const h=Object.entries(this.steps).map(async([p,m])=>{d[p]=await m.invoke(e,patchConfig(r,{callbacks:u==null?void 0:u.getChild(`map:key:${p}`)}))});await raceWithSignal(Promise.all(h),a==null?void 0:a.signal)}catch(h){throw await(u==null?void 0:u.handleChainError(h)),h}return await(u==null?void 0:u.handleChainEnd(d)),d}async*_transform(e,a,r){const l={...this.steps},u=atee(e,Object.keys(l).length),d=new Map(Object.entries(l).map(([h,p],m)=>{const b=p.transform(u[m],patchConfig(r,{callbacks:a==null?void 0:a.getChild(`map:key:${h}`)}));return[h,b.next().then(v=>({key:h,gen:b,result:v}))]}));for(;d.size;){const h=Promise.race(d.values()),{key:p,result:m,gen:b}=await raceWithSignal(h,r==null?void 0:r.signal);d.delete(p),m.done||(yield{[p]:m.value},d.set(p,b.next().then(v=>({key:p,gen:b,result:v}))))}}transform(e,a){return this._transformStreamWithConfig(e,this._transform.bind(this),a)}async stream(e,a){async function*r(){yield e}const l=ensureConfig(a),u=new AsyncGeneratorWithSetup({generator:this.transform(r(),l),config:l});return await u.setup,IterableReadableStream.fromAsyncGenerator(u)}}class RunnableTraceable extends Runnable{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!isTraceableFunction(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,a){const[r]=this._getOptionsList(a??{},1),l=await getCallbackManagerForConfig(r),u=this.func(patchConfig(r,{callbacks:l}),e);return raceWithSignal(u,r==null?void 0:r.signal)}async*_streamIterator(e,a){var u,d;const[r]=this._getOptionsList(a??{},1),l=await this.invoke(e,a);if(isAsyncIterable(l)){for await(const h of l)(u=r==null?void 0:r.signal)==null||u.throwIfAborted(),yield h;return}if(isIterator(l)){for(;;){(d=r==null?void 0:r.signal)==null||d.throwIfAborted();const h=l.next();if(h.done)break;yield h.value}return}yield l}static from(e){return new RunnableTraceable({func:e})}}function assertNonTraceableFunction(s){if(isTraceableFunction(s))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class RunnableLambda extends Runnable{static lc_name(){return"RunnableLambda"}constructor(e){if(isTraceableFunction(e.func))return RunnableTraceable.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),assertNonTraceableFunction(e.func),this.func=e.func}static from(e){return new RunnableLambda({func:e})}async _invoke(e,a,r){return new Promise((l,u)=>{const d=patchConfig(a,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((a==null?void 0:a.recursionLimit)??DEFAULT_RECURSION_LIMIT)-1});AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(d),async()=>{var h,p;try{let m=await this.func(e,{...d});if(m&&Runnable.isRunnable(m)){if((a==null?void 0:a.recursionLimit)===0)throw new Error("Recursion limit reached.");m=await m.invoke(e,{...d,recursionLimit:(d.recursionLimit??DEFAULT_RECURSION_LIMIT)-1})}else if(isAsyncIterable(m)){let b;for await(const v of consumeAsyncIterableInContext(d,m))if((h=a==null?void 0:a.signal)==null||h.throwIfAborted(),b===void 0)b=v;else try{b=concat(b,v)}catch{b=v}m=b}else if(isIterableIterator(m)){let b;for(const v of consumeIteratorInContext(d,m))if((p=a==null?void 0:a.signal)==null||p.throwIfAborted(),b===void 0)b=v;else try{b=concat(b,v)}catch{b=v}m=b}l(m)}catch(m){u(m)}})})}async invoke(e,a){return this._callWithConfig(this._invoke.bind(this),e,a)}async*_transform(e,a,r){var h,p;let l;for await(const m of e)if(l===void 0)l=m;else try{l=concat(l,m)}catch{l=m}const u=patchConfig(r,{callbacks:a==null?void 0:a.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??DEFAULT_RECURSION_LIMIT)-1}),d=await new Promise((m,b)=>{AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(u),async()=>{try{const v=await this.func(l,{...u,config:u});m(v)}catch(v){b(v)}})});if(d&&Runnable.isRunnable(d)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const m=await d.stream(l,u);for await(const b of m)yield b}else if(isAsyncIterable(d))for await(const m of consumeAsyncIterableInContext(u,d))(h=r==null?void 0:r.signal)==null||h.throwIfAborted(),yield m;else if(isIterableIterator(d))for(const m of consumeIteratorInContext(u,d))(p=r==null?void 0:r.signal)==null||p.throwIfAborted(),yield m;else yield d}transform(e,a){return this._transformStreamWithConfig(e,this._transform.bind(this),a)}async stream(e,a){async function*r(){yield e}const l=ensureConfig(a),u=new AsyncGeneratorWithSetup({generator:this.transform(r(),l),config:l});return await u.setup,IterableReadableStream.fromAsyncGenerator(u)}}class RunnableWithFallbacks extends Runnable{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,a){const r=ensureConfig(a),l=await getCallbackManagerForConfig(r),{runId:u,...d}=r,h=await(l==null?void 0:l.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),u,void 0,void 0,void 0,d==null?void 0:d.runName)),p=patchConfig(d,{callbacks:h==null?void 0:h.getChild()});return await AsyncLocalStorageProviderSingleton.runWithConfig(p,async()=>{var v;let b;for(const A of this.runnables()){(v=r==null?void 0:r.signal)==null||v.throwIfAborted();try{const E=await A.invoke(e,p);return await(h==null?void 0:h.handleChainEnd(_coerceToDict(E,"output"))),E}catch(E){b===void 0&&(b=E)}}throw b===void 0?new Error("No error stored at end of fallback."):(await(h==null?void 0:h.handleChainError(b)),b)})}async*_streamIterator(e,a){var v;const r=ensureConfig(a),l=await getCallbackManagerForConfig(r),{runId:u,...d}=r,h=await(l==null?void 0:l.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),u,void 0,void 0,void 0,d==null?void 0:d.runName));let p,m;for(const A of this.runnables()){(v=r==null?void 0:r.signal)==null||v.throwIfAborted();const E=patchConfig(d,{callbacks:h==null?void 0:h.getChild()});try{const S=await A.stream(e,E);m=consumeAsyncIterableInContext(E,S);break}catch(S){p===void 0&&(p=S)}}if(m===void 0){const A=p??new Error("No error stored at end of fallback.");throw await(h==null?void 0:h.handleChainError(A)),A}let b;try{for await(const A of m){yield A;try{b=b===void 0?b:concat(b,A)}catch{b=void 0}}}catch(A){throw await(h==null?void 0:h.handleChainError(A)),A}await(h==null?void 0:h.handleChainEnd(_coerceToDict(b,"output")))}async batch(e,a,r){var p;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const l=this._getOptionsList(a??{},e.length),u=await Promise.all(l.map(m=>getCallbackManagerForConfig(m))),d=await Promise.all(u.map(async(m,b)=>{const v=await(m==null?void 0:m.handleChainStart(this.toJSON(),_coerceToDict(e[b],"input"),l[b].runId,void 0,void 0,void 0,l[b].runName));return delete l[b].runId,v}));let h;for(const m of this.runnables()){(p=l[0].signal)==null||p.throwIfAborted();try{const b=await m.batch(e,d.map((v,A)=>patchConfig(l[A],{callbacks:v==null?void 0:v.getChild()})),r);return await Promise.all(d.map((v,A)=>v==null?void 0:v.handleChainEnd(_coerceToDict(b[A],"output")))),b}catch(b){h===void 0&&(h=b)}}throw h?(await Promise.all(d.map(m=>m==null?void 0:m.handleChainError(h))),h):new Error("No error stored at end of fallbacks.")}}function _coerceToRunnable(s){if(typeof s=="function")return new RunnableLambda({func:s});if(Runnable.isRunnable(s))return s;if(!Array.isArray(s)&&typeof s=="object"){const e={};for(const[a,r]of Object.entries(s))e[a]=_coerceToRunnable(r);return new RunnableMap({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class RunnableAssign extends Runnable{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof RunnableMap&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,a){const r=await this.mapper.invoke(e,a);return{...e,...r}}async*_transform(e,a,r){const l=this.mapper.getStepsKeys(),[u,d]=atee(e),h=this.mapper.transform(d,patchConfig(r,{callbacks:a==null?void 0:a.getChild()})),p=h.next();for await(const m of u){if(typeof m!="object"||Array.isArray(m))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof m}`);const b=Object.fromEntries(Object.entries(m).filter(([v])=>!l.includes(v)));Object.keys(b).length>0&&(yield b)}yield(await p).value;for await(const m of h)yield m}transform(e,a){return this._transformStreamWithConfig(e,this._transform.bind(this),a)}async stream(e,a){async function*r(){yield e}const l=ensureConfig(a),u=new AsyncGeneratorWithSetup({generator:this.transform(r(),l),config:l});return await u.setup,IterableReadableStream.fromAsyncGenerator(u)}}class RunnablePick extends Runnable{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const a=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return a.length===0?void 0:Object.fromEntries(a)}}async invoke(e,a){return this._callWithConfig(this._pick.bind(this),e,a)}async*_transform(e){for await(const a of e){const r=await this._pick(a);r!==void 0&&(yield r)}}transform(e,a){return this._transformStreamWithConfig(e,this._transform.bind(this),a)}async stream(e,a){async function*r(){yield e}const l=ensureConfig(a),u=new AsyncGeneratorWithSetup({generator:this.transform(r(),l),config:l});return await u.setup,IterableReadableStream.fromAsyncGenerator(u)}}class RunnableToolLike extends RunnableBinding{constructor(e){const a=RunnableSequence.from([RunnableLambda.from(async r=>{let l;if(_isToolCall(r))try{l=await this.schema.parseAsync(r.args)}catch{throw new ToolInputParsingException("Received tool input did not match expected schema",JSON.stringify(r.args))}else l=r;return l}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:a,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function convertRunnableToTool(s,e){var l;const a=e.name??s.getName(),r=e.description??((l=e.schema)==null?void 0:l.description);return e.schema.constructor===z.ZodString?new RunnableToolLike({name:a,description:r,schema:z.object({input:z.string()}).transform(u=>u.input),bound:s}):new RunnableToolLike({name:a,description:r,schema:e.schema,bound:s})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var root=typeof window=="object"?window:{},HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],blocks=[];function Sha1(s){s?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(s){if(!this.finalized){var e=typeof s!="string";e&&s.constructor===root.ArrayBuffer&&(s=new Uint8Array(s));for(var a,r=0,l,u=s.length||0,d=this.blocks;r<u;){if(this.hashed&&(this.hashed=!1,d[0]=this.block,d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0),e)for(l=this.start;r<u&&l<64;++r)d[l>>2]|=s[r]<<SHIFT[l++&3];else for(l=this.start;r<u&&l<64;++r)a=s.charCodeAt(r),a<128?d[l>>2]|=a<<SHIFT[l++&3]:a<2048?(d[l>>2]|=(192|a>>6)<<SHIFT[l++&3],d[l>>2]|=(128|a&63)<<SHIFT[l++&3]):a<55296||a>=57344?(d[l>>2]|=(224|a>>12)<<SHIFT[l++&3],d[l>>2]|=(128|a>>6&63)<<SHIFT[l++&3],d[l>>2]|=(128|a&63)<<SHIFT[l++&3]):(a=65536+((a&1023)<<10|s.charCodeAt(++r)&1023),d[l>>2]|=(240|a>>18)<<SHIFT[l++&3],d[l>>2]|=(128|a>>12&63)<<SHIFT[l++&3],d[l>>2]|=(128|a>>6&63)<<SHIFT[l++&3],d[l>>2]|=(128|a&63)<<SHIFT[l++&3]);this.lastByteIndex=l,this.bytes+=l-this.start,l>=64?(this.block=d[16],this.start=l-64,this.hash(),this.hashed=!0):this.start=l}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,e=this.lastByteIndex;s[16]=this.block,s[e>>2]|=EXTRA[e&3],this.block=s[16],e>=56&&(this.hashed||this.hash(),s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),s[14]=this.hBytes<<3|this.bytes>>>29,s[15]=this.bytes<<3,this.hash()}};Sha1.prototype.hash=function(){var s=this.h0,e=this.h1,a=this.h2,r=this.h3,l=this.h4,u,d,h,p=this.blocks;for(d=16;d<80;++d)h=p[d-3]^p[d-8]^p[d-14]^p[d-16],p[d]=h<<1|h>>>31;for(d=0;d<20;d+=5)u=e&a|~e&r,h=s<<5|s>>>27,l=h+u+l+1518500249+p[d]<<0,e=e<<30|e>>>2,u=s&e|~s&a,h=l<<5|l>>>27,r=h+u+r+1518500249+p[d+1]<<0,s=s<<30|s>>>2,u=l&s|~l&e,h=r<<5|r>>>27,a=h+u+a+1518500249+p[d+2]<<0,l=l<<30|l>>>2,u=r&l|~r&s,h=a<<5|a>>>27,e=h+u+e+1518500249+p[d+3]<<0,r=r<<30|r>>>2,u=a&r|~a&l,h=e<<5|e>>>27,s=h+u+s+1518500249+p[d+4]<<0,a=a<<30|a>>>2;for(;d<40;d+=5)u=e^a^r,h=s<<5|s>>>27,l=h+u+l+1859775393+p[d]<<0,e=e<<30|e>>>2,u=s^e^a,h=l<<5|l>>>27,r=h+u+r+1859775393+p[d+1]<<0,s=s<<30|s>>>2,u=l^s^e,h=r<<5|r>>>27,a=h+u+a+1859775393+p[d+2]<<0,l=l<<30|l>>>2,u=r^l^s,h=a<<5|a>>>27,e=h+u+e+1859775393+p[d+3]<<0,r=r<<30|r>>>2,u=a^r^l,h=e<<5|e>>>27,s=h+u+s+1859775393+p[d+4]<<0,a=a<<30|a>>>2;for(;d<60;d+=5)u=e&a|e&r|a&r,h=s<<5|s>>>27,l=h+u+l-1894007588+p[d]<<0,e=e<<30|e>>>2,u=s&e|s&a|e&a,h=l<<5|l>>>27,r=h+u+r-1894007588+p[d+1]<<0,s=s<<30|s>>>2,u=l&s|l&e|s&e,h=r<<5|r>>>27,a=h+u+a-1894007588+p[d+2]<<0,l=l<<30|l>>>2,u=r&l|r&s|l&s,h=a<<5|a>>>27,e=h+u+e-1894007588+p[d+3]<<0,r=r<<30|r>>>2,u=a&r|a&l|r&l,h=e<<5|e>>>27,s=h+u+s-1894007588+p[d+4]<<0,a=a<<30|a>>>2;for(;d<80;d+=5)u=e^a^r,h=s<<5|s>>>27,l=h+u+l-899497514+p[d]<<0,e=e<<30|e>>>2,u=s^e^a,h=l<<5|l>>>27,r=h+u+r-899497514+p[d+1]<<0,s=s<<30|s>>>2,u=l^s^e,h=r<<5|r>>>27,a=h+u+a-899497514+p[d+2]<<0,l=l<<30|l>>>2,u=r^l^s,h=a<<5|a>>>27,e=h+u+e-899497514+p[d+3]<<0,r=r<<30|r>>>2,u=a^r^l,h=e<<5|e>>>27,s=h+u+s-899497514+p[d+4]<<0,a=a<<30|a>>>2;this.h0=this.h0+s<<0,this.h1=this.h1+e<<0,this.h2=this.h2+a<<0,this.h3=this.h3+r<<0,this.h4=this.h4+l<<0};Sha1.prototype.hex=function(){this.finalize();var s=this.h0,e=this.h1,a=this.h2,r=this.h3,l=this.h4;return HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[l>>28&15]+HEX_CHARS[l>>24&15]+HEX_CHARS[l>>20&15]+HEX_CHARS[l>>16&15]+HEX_CHARS[l>>12&15]+HEX_CHARS[l>>8&15]+HEX_CHARS[l>>4&15]+HEX_CHARS[l&15]};Sha1.prototype.toString=Sha1.prototype.hex;Sha1.prototype.digest=function(){this.finalize();var s=this.h0,e=this.h1,a=this.h2,r=this.h3,l=this.h4;return[s>>24&255,s>>16&255,s>>8&255,s&255,e>>24&255,e>>16&255,e>>8&255,e&255,a>>24&255,a>>16&255,a>>8&255,a&255,r>>24&255,r>>16&255,r>>8&255,r&255,l>>24&255,l>>16&255,l>>8&255,l&255]};Sha1.prototype.array=Sha1.prototype.digest;Sha1.prototype.arrayBuffer=function(){this.finalize();var s=new ArrayBuffer(20),e=new DataView(s);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),s};const insecureHash=s=>new Sha1(!0).update(s).hex(),getCacheKey=(...s)=>insecureHash(s.join("_"));class BaseCache{}const GLOBAL_MAP=new Map;class InMemoryCache extends BaseCache{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,a){return Promise.resolve(this.cache.get(getCacheKey(e,a))??null)}async update(e,a,r){this.cache.set(getCacheKey(e,a),r)}static global(){return new InMemoryCache(GLOBAL_MAP)}}class BasePromptValue extends Serializable{}class StringPromptValue extends BasePromptValue{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new HumanMessage(this.value)]}}class ChatPromptValue extends BasePromptValue{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return getBufferString(this.messages)}toChatMessages(){return this.messages}}var base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=h,base64Js.toByteArray=m,base64Js.fromByteArray=A;for(var s=[],e=[],a=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=r.length;l<u;++l)s[l]=r[l],e[r.charCodeAt(l)]=l;e[45]=62,e[95]=63;function d(E){var S=E.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=E.indexOf("=");T===-1&&(T=S);var O=T===S?0:4-T%4;return[T,O]}function h(E){var S=d(E),T=S[0],O=S[1];return(T+O)*3/4-O}function p(E,S,T){return(S+T)*3/4-T}function m(E){var S,T=d(E),O=T[0],N=T[1],P=new a(p(E,O,N)),k=0,ae=N>0?O-4:O,Z;for(Z=0;Z<ae;Z+=4)S=e[E.charCodeAt(Z)]<<18|e[E.charCodeAt(Z+1)]<<12|e[E.charCodeAt(Z+2)]<<6|e[E.charCodeAt(Z+3)],P[k++]=S>>16&255,P[k++]=S>>8&255,P[k++]=S&255;return N===2&&(S=e[E.charCodeAt(Z)]<<2|e[E.charCodeAt(Z+1)]>>4,P[k++]=S&255),N===1&&(S=e[E.charCodeAt(Z)]<<10|e[E.charCodeAt(Z+1)]<<4|e[E.charCodeAt(Z+2)]>>2,P[k++]=S>>8&255,P[k++]=S&255),P}function b(E){return s[E>>18&63]+s[E>>12&63]+s[E>>6&63]+s[E&63]}function v(E,S,T){for(var O,N=[],P=S;P<T;P+=3)O=(E[P]<<16&16711680)+(E[P+1]<<8&65280)+(E[P+2]&255),N.push(b(O));return N.join("")}function A(E){for(var S,T=E.length,O=T%3,N=[],P=16383,k=0,ae=T-O;k<ae;k+=P)N.push(v(E,k,k+P>ae?ae:k+P));return O===1?(S=E[T-1],N.push(s[S>>2]+s[S<<4&63]+"==")):O===2&&(S=(E[T-2]<<8)+E[T-1],N.push(s[S>>10]+s[S>>4&63]+s[S<<2&63]+"=")),N.join("")}return base64Js}var base64JsExports=requireBase64Js();const base64=getDefaultExportFromCjs(base64JsExports);var __defProp$2=Object.defineProperty,__defNormalProp$2=(s,e,a)=>e in s?__defProp$2(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,__publicField$2=(s,e,a)=>(__defNormalProp$2(s,e+"",a),a);function bytePairMerge(s,e){let a=Array.from({length:s.length},(r,l)=>({start:l,end:l+1}));for(;a.length>1;){let r=null;for(let l=0;l<a.length-1;l++){const u=s.slice(a[l].start,a[l+1].end),d=e.get(u.join(","));d!=null&&(r==null||d<r[0])&&(r=[d,l])}if(r!=null){const l=r[1];a[l]={start:a[l].start,end:a[l+1].end},a.splice(l+1,1)}else break}return a}function bytePairEncode(s,e){return s.length===1?[e.get(s.join(","))]:bytePairMerge(s,e).map(a=>e.get(s.slice(a.start,a.end).join(","))).filter(a=>a!=null)}function escapeRegex(s){return s.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var _Tiktoken=class{constructor(s,e){$a(this,"specialTokens");$a(this,"inverseSpecialTokens");$a(this,"patStr");$a(this,"textEncoder",new TextEncoder);$a(this,"textDecoder",new TextDecoder("utf-8"));$a(this,"rankMap",new Map);$a(this,"textMap",new Map);this.patStr=s.pat_str;const a=s.bpe_ranks.split(`
`).filter(Boolean).reduce((r,l)=>{const[u,d,...h]=l.split(" "),p=Number.parseInt(d,10);return h.forEach((m,b)=>r[m]=p+b),r},{});for(const[r,l]of Object.entries(a)){const u=base64.toByteArray(r);this.rankMap.set(u.join(","),l),this.textMap.set(l,u)}this.specialTokens={...s.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[l,u])=>(r[u]=this.textEncoder.encode(l),r),{})}encode(s,e=[],a="all"){const r=new RegExp(this.patStr,"ug"),l=_Tiktoken.specialTokenRegex(Object.keys(this.specialTokens)),u=[],d=new Set(e==="all"?Object.keys(this.specialTokens):e),h=new Set(a==="all"?Object.keys(this.specialTokens).filter(m=>!d.has(m)):a);if(h.size>0){const m=_Tiktoken.specialTokenRegex([...h]),b=s.match(m);if(b!=null)throw new Error(`The text contains a special token that is not allowed: ${b[0]}`)}let p=0;for(;;){let m=null,b=p;for(;l.lastIndex=b,m=l.exec(s),!(m==null||d.has(m[0]));)b=m.index+1;const v=(m==null?void 0:m.index)??s.length;for(const E of s.substring(p,v).matchAll(r)){const S=this.textEncoder.encode(E[0]),T=this.rankMap.get(S.join(","));if(T!=null){u.push(T);continue}u.push(...bytePairEncode(S,this.rankMap))}if(m==null)break;let A=this.specialTokens[m[0]];u.push(A),p=m.index+m[0].length}return u}decode(s){const e=[];let a=0;for(let u=0;u<s.length;++u){const d=s[u],h=this.textMap.get(d)??this.inverseSpecialTokens[d];h!=null&&(e.push(h),a+=h.length)}const r=new Uint8Array(a);let l=0;for(const u of e)r.set(u,l),l+=u.length;return this.textDecoder.decode(r)}},Tiktoken=_Tiktoken;__publicField$2(Tiktoken,"specialTokenRegex",s=>new RegExp(s.map(e=>escapeRegex(e)).join("|"),"g"));function getEncodingNameForModel(s){switch(s){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"o3-mini":case"o3-mini-2025-01-31":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw new Error("Unknown model")}}const cache={},caller=new AsyncCaller({});async function getEncoding(s){return s in cache||(cache[s]=caller.fetch(`https://tiktoken.pages.dev/js/${s}.json`).then(e=>e.json()).then(e=>new Tiktoken(e)).catch(e=>{throw delete cache[s],e})),await cache[s]}async function encodingForModel(s){return getEncoding(getEncodingNameForModel(s))}const getModelNameForTiktoken=s=>s.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":s.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":s.startsWith("gpt-4-32k")?"gpt-4-32k":s.startsWith("gpt-4-")?"gpt-4":s.startsWith("gpt-4o")?"gpt-4o":s,getVerbosity=()=>!1;class BaseLangChain extends Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??getVerbosity(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class BaseLanguageModel extends BaseLangChain{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:a,...r}){const{cache:l,...u}=r;super({callbacks:e??a,...u}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof l=="object"?this.cache=l:l?this.cache=InMemoryCache.global():this.cache=void 0,this.caller=new AsyncCaller(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let a=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await encodingForModel("modelName"in this?getModelNameForTiktoken(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{a=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return a}static _convertInputToPromptValue(e){return typeof e=="string"?new StringPromptValue(e):Array.isArray(e)?new ChatPromptValue(e.map(coerceMessageLikeToMessage)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...a}){const r={...this._identifyingParams(),...a,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>`${d}:${JSON.stringify(h)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}var g=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},support={searchParams:"URLSearchParams"in g,iterable:"Symbol"in g&&"iterator"in Symbol,blob:"FileReader"in g&&"Blob"in g&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in g,arrayBuffer:"ArrayBuffer"in g};function isDataView(s){return s&&DataView.prototype.isPrototypeOf(s)}if(support.arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isArrayBufferView=ArrayBuffer.isView||function(s){return s&&viewClasses.indexOf(Object.prototype.toString.call(s))>-1};function normalizeName(s){if(typeof s!="string"&&(s=String(s)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(s)||s==="")throw new TypeError('Invalid character in header field name: "'+s+'"');return s.toLowerCase()}function normalizeValue(s){return typeof s!="string"&&(s=String(s)),s}function iteratorFor(s){var e={next:function(){var a=s.shift();return{done:a===void 0,value:a}}};return support.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Headers$1(s){this.map={},s instanceof Headers$1?s.forEach(function(e,a){this.append(a,e)},this):Array.isArray(s)?s.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):s&&Object.getOwnPropertyNames(s).forEach(function(e){this.append(e,s[e])},this)}Headers$1.prototype.append=function(s,e){s=normalizeName(s),e=normalizeValue(e);var a=this.map[s];this.map[s]=a?a+", "+e:e};Headers$1.prototype.delete=function(s){delete this.map[normalizeName(s)]};Headers$1.prototype.get=function(s){return s=normalizeName(s),this.has(s)?this.map[s]:null};Headers$1.prototype.has=function(s){return this.map.hasOwnProperty(normalizeName(s))};Headers$1.prototype.set=function(s,e){this.map[normalizeName(s)]=normalizeValue(e)};Headers$1.prototype.forEach=function(s,e){for(var a in this.map)this.map.hasOwnProperty(a)&&s.call(e,this.map[a],a,this)};Headers$1.prototype.keys=function(){var s=[];return this.forEach(function(e,a){s.push(a)}),iteratorFor(s)};Headers$1.prototype.values=function(){var s=[];return this.forEach(function(e){s.push(e)}),iteratorFor(s)};Headers$1.prototype.entries=function(){var s=[];return this.forEach(function(e,a){s.push([a,e])}),iteratorFor(s)};support.iterable&&(Headers$1.prototype[Symbol.iterator]=Headers$1.prototype.entries);function consumed(s){if(!s._noBody){if(s.bodyUsed)return Promise.reject(new TypeError("Already read"));s.bodyUsed=!0}}function fileReaderReady(s){return new Promise(function(e,a){s.onload=function(){e(s.result)},s.onerror=function(){a(s.error)}})}function readBlobAsArrayBuffer(s){var e=new FileReader,a=fileReaderReady(e);return e.readAsArrayBuffer(s),a}function readBlobAsText(s){var e=new FileReader,a=fileReaderReady(e),r=/charset=([A-Za-z0-9_-]+)/.exec(s.type),l=r?r[1]:"utf-8";return e.readAsText(s,l),a}function readArrayBufferAsText(s){for(var e=new Uint8Array(s),a=new Array(e.length),r=0;r<e.length;r++)a[r]=String.fromCharCode(e[r]);return a.join("")}function bufferClone(s){if(s.slice)return s.slice(0);var e=new Uint8Array(s.byteLength);return e.set(new Uint8Array(s)),e.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(s){this.bodyUsed=this.bodyUsed,this._bodyInit=s,s?typeof s=="string"?this._bodyText=s:support.blob&&Blob.prototype.isPrototypeOf(s)?this._bodyBlob=s:support.formData&&FormData.prototype.isPrototypeOf(s)?this._bodyFormData=s:support.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)?this._bodyText=s.toString():support.arrayBuffer&&support.blob&&isDataView(s)?(this._bodyArrayBuffer=bufferClone(s.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(s)||isArrayBufferView(s))?this._bodyArrayBuffer=bufferClone(s):this._bodyText=s=Object.prototype.toString.call(s):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof s=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support.blob&&(this.blob=function(){var s=consumed(this);if(s)return s;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var s=consumed(this);return s||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(support.blob)return this.blob().then(readBlobAsArrayBuffer);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var s=consumed(this);if(s)return s;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}var methods=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function normalizeMethod(s){var e=s.toUpperCase();return methods.indexOf(e)>-1?e:s}function Request(s,e){if(!(this instanceof Request))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var a=e.body;if(s instanceof Request){if(s.bodyUsed)throw new TypeError("Already read");this.url=s.url,this.credentials=s.credentials,e.headers||(this.headers=new Headers$1(s.headers)),this.method=s.method,this.mode=s.mode,this.signal=s.signal,!a&&s._bodyInit!=null&&(a=s._bodyInit,s.bodyUsed=!0)}else this.url=String(s);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Headers$1(e.headers)),this.method=normalizeMethod(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in g){var u=new AbortController;return u.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var l=/\?/;this.url+=(l.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})};function decode(s){var e=new FormData;return s.trim().split("&").forEach(function(a){if(a){var r=a.split("="),l=r.shift().replace(/\+/g," "),u=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(l),decodeURIComponent(u))}}),e}function parseHeaders(s){var e=new Headers$1,a=s.replace(/\r?\n[\t ]+/g," ");return a.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var l=r.split(":"),u=l.shift().trim();if(u){var d=l.join(":").trim();try{e.append(u,d)}catch(h){console.warn("Response "+h.message)}}}),e}Body.call(Request.prototype);function Response(s,e){if(!(this instanceof Response))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Headers$1(e.headers),this.url=e.url||"",this._initBody(s)}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers$1(this.headers),url:this.url})};Response.error=function(){var s=new Response(null,{status:200,statusText:""});return s.ok=!1,s.status=0,s.type="error",s};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(s,e){if(redirectStatuses.indexOf(e)===-1)throw new RangeError("Invalid status code");return new Response(null,{status:e,headers:{location:s}})};var DOMException=g.DOMException;try{new DOMException}catch{DOMException=function(e,a){this.message=e,this.name=a;var r=Error(e);this.stack=r.stack},DOMException.prototype=Object.create(Error.prototype),DOMException.prototype.constructor=DOMException}function fetch$1(s,e){return new Promise(function(a,r){var l=new Request(s,e);if(l.signal&&l.signal.aborted)return r(new DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function d(){u.abort()}u.onload=function(){var m={statusText:u.statusText,headers:parseHeaders(u.getAllResponseHeaders()||"")};l.url.indexOf("file://")===0&&(u.status<200||u.status>599)?m.status=200:m.status=u.status,m.url="responseURL"in u?u.responseURL:m.headers.get("X-Request-URL");var b="response"in u?u.response:u.responseText;setTimeout(function(){a(new Response(b,m))},0)},u.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request timed out"))},0)},u.onabort=function(){setTimeout(function(){r(new DOMException("Aborted","AbortError"))},0)};function h(m){try{return m===""&&g.location.href?g.location.href:m}catch{return m}}if(u.open(l.method,h(l.url),!0),l.credentials==="include"?u.withCredentials=!0:l.credentials==="omit"&&(u.withCredentials=!1),"responseType"in u&&(support.blob?u.responseType="blob":support.arrayBuffer&&(u.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Headers$1||g.Headers&&e.headers instanceof g.Headers)){var p=[];Object.getOwnPropertyNames(e.headers).forEach(function(m){p.push(normalizeName(m)),u.setRequestHeader(m,normalizeValue(e.headers[m]))}),l.headers.forEach(function(m,b){p.indexOf(b)===-1&&u.setRequestHeader(b,m)})}else l.headers.forEach(function(m,b){u.setRequestHeader(b,m)});l.signal&&(l.signal.addEventListener("abort",d),u.onreadystatechange=function(){u.readyState===4&&l.signal.removeEventListener("abort",d)}),u.send(typeof l._bodyInit>"u"?null:l._bodyInit)})}fetch$1.polyfill=!0;g.fetch||(g.fetch=fetch$1,g.Headers=Headers$1,g.Request=Request,g.Response=Response);const version="0.5.14",defaultPort="11434",defaultHost=`http://127.0.0.1:${defaultPort}`;var __defProp$1=Object.defineProperty,__defNormalProp$1=(s,e,a)=>e in s?__defProp$1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,__publicField$1=(s,e,a)=>(__defNormalProp$1(s,typeof e!="symbol"?e+"":e,a),a);class ResponseError extends Error{constructor(e,a){super(e),this.error=e,this.status_code=a,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,ResponseError)}}class AbortableAsyncIterator{constructor(e,a,r){__publicField$1(this,"abortController"),__publicField$1(this,"itr"),__publicField$1(this,"doneCallback"),this.abortController=e,this.itr=a,this.doneCallback=r}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(const e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}}const checkOk=async s=>{var r;if(s.ok)return;let e=`Error ${s.status}: ${s.statusText}`,a=null;if((r=s.headers.get("content-type"))!=null&&r.includes("application/json"))try{a=await s.json(),e=a.error||e}catch{console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await s.text()||e}catch{console.log("Failed to get text from error response")}throw new ResponseError(e,s.status)};function getPlatform(){var s;if(typeof window<"u"&&window.navigator){const e=navigator;return"userAgentData"in e&&((s=e.userAgentData)!=null&&s.platform)?`${e.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process<"u")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function normalizeHeaders(s){if(s instanceof Headers){const e={};return s.forEach((a,r)=>{e[r]=a}),e}else return Array.isArray(s)?Object.fromEntries(s):s||{}}const fetchWithHeaders=async(s,e,a={})=>{const r={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${version} (${getPlatform()})`};a.headers=normalizeHeaders(a.headers);const l=Object.fromEntries(Object.entries(a.headers).filter(([u])=>!Object.keys(r).some(d=>d.toLowerCase()===u.toLowerCase())));return a.headers={...r,...l},s(e,a)},get=async(s,e,a)=>{const r=await fetchWithHeaders(s,e,{headers:a==null?void 0:a.headers});return await checkOk(r),r},post=async(s,e,a,r)=>{const u=(h=>h!==null&&typeof h=="object"&&!Array.isArray(h))(a)?JSON.stringify(a):a,d=await fetchWithHeaders(s,e,{method:"POST",body:u,signal:r==null?void 0:r.signal,headers:r==null?void 0:r.headers});return await checkOk(d),d},del=async(s,e,a,r)=>{const l=await fetchWithHeaders(s,e,{method:"DELETE",body:JSON.stringify(a),headers:r==null?void 0:r.headers});return await checkOk(l),l},parseJSON=async function*(s){const e=new TextDecoder("utf-8");let a="";const r=s.getReader();for(;;){const{done:l,value:u}=await r.read();if(l)break;a+=e.decode(u);const d=a.split(`
`);a=d.pop()??"";for(const h of d)try{yield JSON.parse(h)}catch{console.warn("invalid json: ",h)}}for(const l of a.split(`
`).filter(u=>u!==""))try{yield JSON.parse(l)}catch{console.warn("invalid json: ",l)}},formatHost=s=>{if(!s)return defaultHost;let e=s.includes("://");s.startsWith(":")&&(s=`http://127.0.0.1${s}`,e=!0),e||(s=`http://${s}`);const a=new URL(s);let r=a.port;r||(e?r=a.protocol==="https:"?"443":"80":r=defaultPort);let l=`${a.protocol}//${a.hostname}:${r}${a.pathname}`;return l.endsWith("/")&&(l=l.slice(0,-1)),l};var __defProp=Object.defineProperty,__defNormalProp=(s,e,a)=>e in s?__defProp(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,__publicField=(s,e,a)=>(__defNormalProp(s,typeof e!="symbol"?e+"":e,a),a);let Ollama$1=class{constructor(e){__publicField(this,"config"),__publicField(this,"fetch"),__publicField(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e==null?void 0:e.headers},e!=null&&e.proxy||(this.config.host=formatHost((e==null?void 0:e.host)??defaultHost)),this.fetch=(e==null?void 0:e.fetch)??fetch}abort(){for(const e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,a){a.stream=a.stream??!1;const r=`${this.config.host}/api/${e}`;if(a.stream){const u=new AbortController,d=await post(this.fetch,r,a,{signal:u.signal,headers:this.config.headers});if(!d.body)throw new Error("Missing body");const h=parseJSON(d.body),p=new AbortableAsyncIterator(u,h,()=>{const m=this.ongoingStreamedRequests.indexOf(p);m>-1&&this.ongoingStreamedRequests.splice(m,1)});return this.ongoingStreamedRequests.push(p),p}return await(await post(this.fetch,r,a,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){const a=new Uint8Array(e);let r="";const l=a.byteLength;for(let u=0;u<l;u++)r+=String.fromCharCode(a[u]);return btoa(r)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(const a of e.messages)a.images&&(a.images=await Promise.all(a.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await del(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await post(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await get(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await post(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await post(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await post(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await get(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}};new Ollama$1;class BaseLLM extends BaseLanguageModel{constructor({concurrency:e,...a}){super(e?{maxConcurrency:e,...a}:a),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}async invoke(e,a){const r=BaseLLM._convertInputToPromptValue(e);return(await this.generatePrompt([r],a,a==null?void 0:a.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,a,r){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){const[a,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=a.signal,[a,r]}async*_streamIterator(e,a){if(this._streamResponseChunks===BaseLLM.prototype._streamResponseChunks)yield this.invoke(e,a);else{const r=BaseLLM._convertInputToPromptValue(e),[l,u]=this._separateRunnableConfigFromCallOptionsCompat(a),d=await CallbackManager.configure(l.callbacks,this.callbacks,l.tags,this.tags,l.metadata,this.metadata,{verbose:this.verbose}),h={options:u,invocation_params:this==null?void 0:this.invocationParams(u),batch_size:1},p=await(d==null?void 0:d.handleLLMStart(this.toJSON(),[r.toString()],l.runId,void 0,h,void 0,void 0,l.runName));let m=new GenerationChunk({text:""});try{for await(const b of this._streamResponseChunks(r.toString(),u,p==null?void 0:p[0]))m?m=m.concat(b):m=b,typeof b.text=="string"&&(yield b.text)}catch(b){throw await Promise.all((p??[]).map(v=>v==null?void 0:v.handleLLMError(b))),b}await Promise.all((p??[]).map(b=>b==null?void 0:b.handleLLMEnd({generations:[[m]]})))}}async generatePrompt(e,a,r){const l=e.map(u=>u.toString());return this.generate(l,a,r)}invocationParams(e){return{}}_flattenLLMResult(e){const a=[];for(let r=0;r<e.generations.length;r+=1){const l=e.generations[r];if(r===0)a.push({generations:[l],llmOutput:e.llmOutput});else{const u=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;a.push({generations:[l],llmOutput:u})}}return a}async _generateUncached(e,a,r,l){let u;if(l!==void 0&&l.length===e.length)u=l;else{const m=await CallbackManager.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),b={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:e.length};u=await(m==null?void 0:m.handleLLMStart(this.toJSON(),e,r.runId,void 0,b,void 0,void 0,r==null?void 0:r.runName))}const d=!!(u!=null&&u[0].handlers.find(callbackHandlerPrefersStreaming));let h;if(d&&e.length===1&&this._streamResponseChunks!==BaseLLM.prototype._streamResponseChunks)try{const m=await this._streamResponseChunks(e[0],a,u==null?void 0:u[0]);let b;for await(const v of m)b===void 0?b=v:b=concat(b,v);if(b===void 0)throw new Error("Received empty response from chat model call.");h={generations:[[b]],llmOutput:{}},await(u==null?void 0:u[0].handleLLMEnd(h))}catch(m){throw await(u==null?void 0:u[0].handleLLMError(m)),m}else{try{h=await this._generate(e,a,u==null?void 0:u[0])}catch(b){throw await Promise.all((u??[]).map(v=>v==null?void 0:v.handleLLMError(b))),b}const m=this._flattenLLMResult(h);await Promise.all((u??[]).map((b,v)=>b==null?void 0:b.handleLLMEnd(m[v])))}const p=(u==null?void 0:u.map(m=>m.runId))||void 0;return Object.defineProperty(h,RUN_KEY,{value:p?{runIds:p}:void 0,configurable:!0}),h}async _generateCached({prompts:e,cache:a,llmStringKey:r,parsedOptions:l,handledOptions:u,runId:d}){const h=await CallbackManager.configure(u.callbacks,this.callbacks,u.tags,this.tags,u.metadata,this.metadata,{verbose:this.verbose}),p={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:e.length},m=await(h==null?void 0:h.handleLLMStart(this.toJSON(),e,d,void 0,p,void 0,void 0,u==null?void 0:u.runName)),b=[],A=(await Promise.allSettled(e.map(async(T,O)=>{const N=await a.lookup(T,r);return N==null&&b.push(O),N}))).map((T,O)=>({result:T,runManager:m==null?void 0:m[O]})).filter(({result:T})=>T.status==="fulfilled"&&T.value!=null||T.status==="rejected"),E=[];await Promise.all(A.map(async({result:T,runManager:O},N)=>{if(T.status==="fulfilled"){const P=T.value;return E[N]=P.map(k=>(k.generationInfo={...k.generationInfo,tokenUsage:{}},k)),P.length&&await(O==null?void 0:O.handleLLMNewToken(P[0].text)),O==null?void 0:O.handleLLMEnd({generations:[P]},void 0,void 0,void 0,{cached:!0})}else return await(O==null?void 0:O.handleLLMError(T.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(T.reason)}));const S={generations:E,missingPromptIndices:b,startedRunManagers:m};return Object.defineProperty(S,RUN_KEY,{value:m?{runIds:m==null?void 0:m.map(T=>T.runId)}:void 0,configurable:!0}),S}async generate(e,a,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let l;Array.isArray(a)?l={stop:a}:l=a;const[u,d]=this._separateRunnableConfigFromCallOptionsCompat(l);if(u.callbacks=u.callbacks??r,!this.cache)return this._generateUncached(e,d,u);const{cache:h}=this,p=this._getSerializedCacheKeyParametersForCall(d),{generations:m,missingPromptIndices:b,startedRunManagers:v}=await this._generateCached({prompts:e,cache:h,llmStringKey:p,parsedOptions:d,handledOptions:u,runId:u.runId});let A={};if(b.length>0){const E=await this._generateUncached(b.map(S=>e[S]),d,u,v!==void 0?b.map(S=>v==null?void 0:v[S]):void 0);await Promise.all(E.generations.map(async(S,T)=>{const O=b[T];return m[O]=S,h.update(e[O],p,S)})),A=E.llmOutput??{}}return{generations:m,llmOutput:A}}async call(e,a,r){const{generations:l}=await this.generate([e],a,r);return l[0][0].text}async predict(e,a,r){return this.call(e,a,r)}async predictMessages(e,a,r){const l=getBufferString(e),u=await this.call(l,a,r);return new AIMessage(u)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}}class LLM extends BaseLLM{async _generate(e,a,r){return{generations:await Promise.all(e.map((u,d)=>this._call(u,{...a,promptIndex:d},r).then(h=>[{text:h}])))}}}class Ollama extends LLM{static lc_name(){return"Ollama"}constructor(e){var a;super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16KV",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMLock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.baseUrl=(a=e==null?void 0:e.baseUrl)!=null&&a.endsWith("/")?e==null?void 0:e.baseUrl.slice(0,-1):(e==null?void 0:e.baseUrl)??this.baseUrl,this.client=new Ollama$1({host:this.baseUrl,headers:e==null?void 0:e.headers}),this.keepAlive=e==null?void 0:e.keepAlive,this.embeddingOnly=e==null?void 0:e.embeddingOnly,this.f16KV=e==null?void 0:e.f16Kv,this.frequencyPenalty=e==null?void 0:e.frequencyPenalty,this.logitsAll=e==null?void 0:e.logitsAll,this.lowVram=e==null?void 0:e.lowVram,this.mainGpu=e==null?void 0:e.mainGpu,this.mirostat=e==null?void 0:e.mirostat,this.mirostatEta=e==null?void 0:e.mirostatEta,this.mirostatTau=e==null?void 0:e.mirostatTau,this.numBatch=e==null?void 0:e.numBatch,this.numCtx=e==null?void 0:e.numCtx,this.numGpu=e==null?void 0:e.numGpu,this.numKeep=e==null?void 0:e.numKeep,this.numPredict=e==null?void 0:e.numPredict,this.numThread=e==null?void 0:e.numThread,this.penalizeNewline=e==null?void 0:e.penalizeNewline,this.presencePenalty=e==null?void 0:e.presencePenalty,this.repeatLastN=e==null?void 0:e.repeatLastN,this.repeatPenalty=e==null?void 0:e.repeatPenalty,this.temperature=e==null?void 0:e.temperature,this.stop=e==null?void 0:e.stop,this.tfsZ=e==null?void 0:e.tfsZ,this.topK=e==null?void 0:e.topK,this.topP=e==null?void 0:e.topP,this.typicalP=e==null?void 0:e.typicalP,this.useMLock=e==null?void 0:e.useMlock,this.useMMap=e==null?void 0:e.useMmap,this.vocabOnly=e==null?void 0:e.vocabOnly,this.format=e==null?void 0:e.format}_llmType(){return"ollama"}invocationParams(e){return{model:this.model,format:this.format,keep_alive:this.keepAlive,images:e==null?void 0:e.images,options:{embedding_only:this.embeddingOnly,f16_kv:this.f16KV,frequency_penalty:this.frequencyPenalty,logits_all:this.logitsAll,low_vram:this.lowVram,main_gpu:this.mainGpu,mirostat:this.mirostat,mirostat_eta:this.mirostatEta,mirostat_tau:this.mirostatTau,num_batch:this.numBatch,num_ctx:this.numCtx,num_gpu:this.numGpu,num_keep:this.numKeep,num_predict:this.numPredict,num_thread:this.numThread,penalize_newline:this.penalizeNewline,presence_penalty:this.presencePenalty,repeat_last_n:this.repeatLastN,repeat_penalty:this.repeatPenalty,temperature:this.temperature,stop:(e==null?void 0:e.stop)??this.stop,tfs_z:this.tfsZ,top_k:this.topK,top_p:this.topP,typical_p:this.typicalP,use_mlock:this.useMLock,use_mmap:this.useMMap,vocab_only:this.vocabOnly}}}async*_streamResponseChunks(e,a,r){var u;const l=await this.caller.call(async()=>this.client.generate({...this.invocationParams(a),prompt:e,stream:!0}));for await(const d of l){if((u=a.signal)!=null&&u.aborted)throw new Error("This operation was aborted");d.done?yield new GenerationChunk({text:"",generationInfo:{model:d.model,total_duration:d.total_duration,load_duration:d.load_duration,prompt_eval_count:d.prompt_eval_count,prompt_eval_duration:d.prompt_eval_duration,eval_count:d.eval_count,eval_duration:d.eval_duration}}):(yield new GenerationChunk({text:d.response,generationInfo:{...d,response:void 0}}),await(r==null?void 0:r.handleLLMNewToken(d.response??"")))}}async _call(e,a,r){const l=[];for await(const u of this._streamResponseChunks(e,a,r))l.push(u.text);return l.join("")}}class BaseListChatMessageHistory extends Serializable{addUserMessage(e){return this.addMessage(new HumanMessage(e))}addAIChatMessage(e){return this.addMessage(new AIMessage(e))}addAIMessage(e){return this.addMessage(new AIMessage(e))}async addMessages(e){for(const a of e)await this.addMessage(a)}clear(){throw new Error("Not implemented.")}}class InMemoryChatMessageHistory extends BaseListChatMessageHistory{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}}const llm=new Ollama({model:"llama3.2"}),chatHistory=new InMemoryChatMessageHistory,generateReply=async({input_message:s})=>{await chatHistory.addMessage(new HumanMessage(s));const e=await chatHistory.getMessages(),a=await llm.invoke(e);return await chatHistory.addMessage(new AIMessage(a)),a},tickimg="/assets/tick-JVtJza_6.png",AiSettings=()=>React.createElement("div",{className:"AiSettings"},React.createElement("div",{className:"inputContainer"},React.createElement("input",{placeholder:"Server IP"}),React.createElement("div",{className:"ipSubmitButton"},React.createElement("img",{src:tickimg,alt:""})))),Chatbot=()=>{const[s,e]=reactExports.useState([]),[a,r]=reactExports.useState("chat"),l=(u,d)=>{u.trim()!==""&&e(h=>[...h,{text:u,sender:d}])};return React.createElement("div",{className:"Chatbot"},React.createElement("div",{className:"titleBar"},React.createElement("div",{className:"settingsButton",onClick:()=>r(a==="settings"?"chat":"settings")}," "),React.createElement("h2",null,"Ollama AI in ReactJS")),a==="settings"&&React.createElement(AiSettings,null),a==="help"&&React.createElement(HelpMenu,null),a==="chat"&&React.createElement(React.Fragment,null,React.createElement(ChatBody,{messages:s}),React.createElement(UserInput,{addMessage:l})))},ChatBody=({messages:s})=>React.createElement("div",{className:"chatBody"},React.createElement("div",{className:"responseBox"},s.map((e,a)=>React.createElement(Message,{key:a,message:e})))),UserInput=({addMessage:s})=>{const[e,a]=reactExports.useState(""),r=()=>{e.trim()!==""&&(s(e,"user"),a(""),generateReply({input_message:e}).then(l=>{s(l,"ai")}).catch(l=>console.error("Error generating reply:",l)))};return React.createElement("div",{className:"userInput"},React.createElement("input",{placeholder:"Enter Your Prompt",value:e,onChange:l=>a(l.target.value),onKeyDown:l=>l.key==="Enter"&&r()}),React.createElement("div",{className:"submitButton",onClick:r},React.createElement("h3",null,"Enter")))},Message=({message:s})=>React.createElement("div",{className:`Message ${s.sender}`},React.createElement("p",null,s.text)),HelpMenu=()=>React.createElement("div",{className:"helpMenu"},React.createElement("h3",null,"Help & FAQs"),React.createElement("p",null,"Here you can find help and frequently asked questions.")),CMD=({openBgEdit:s,openCalculator:e})=>{const[a,r]=reactExports.useState(""),[l,u]=reactExports.useState("white"),d=()=>{const p=a.trim().toLowerCase();p==="bgedit"?s?s():console.error("openWindow function is not available"):p==="color 2"?u("#009500"):p==="color 6"?u("yellow"):p==="calc"&&e()},h=p=>{p.key==="Enter"&&(d(),r(""))};return React.createElement("div",{className:"CMD"},React.createElement("div",{className:"initialText",style:{color:l}},React.createElement("p",null,"Microsoft Windows [Version 98]"),React.createElement("p",null,"(c) Microsoft Corporation. All rights reserved."),React.createElement("p",null,"--")),React.createElement("div",{className:"userInput",style:{color:l}},React.createElement("p",null,"C:\\Windows\\System32>"),React.createElement("input",{placeholder:"Enter command",value:a,onChange:p=>r(p.target.value),onKeyDown:h})))},BgEdit=({color:s,setDesktopBgColor:e})=>{const[a,r]=reactExports.useState(s);reactExports.useEffect(()=>{r(s)},[s]);const l=d=>{r(d.target.value)},u=()=>{e(a)};return React.createElement("div",{className:"BgEdit"},React.createElement("h2",null,"Background Editor"),React.createElement("input",{type:"color",value:a,onChange:l}),React.createElement("button",{onClick:u},"Apply Color"))},Calculator=()=>{const[input,setInput]=reactExports.useState(""),handleClick=value=>{if(value==="C")setInput("");else if(value==="=")try{setInput(eval(input).toString())}catch{setInput("Error")}else setInput(s=>s+value)},buttons=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","C","+","="];return React.createElement("div",{className:"Calculator"},React.createElement("div",{className:"display"},input||"0"),React.createElement("div",{className:"buttons"},buttons.map((s,e)=>React.createElement("button",{key:e,onClick:()=>handleClick(s)},s))))},notesStoreKey="notesStore";let notesStore={};const loadNotesStore=()=>{const s=localStorage.getItem(notesStoreKey);if(s)try{notesStore=JSON.parse(s)}catch{notesStore={}}};loadNotesStore();async function generateHash(s){const e=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(a)).map(l=>l.toString(16).padStart(2,"0")).join("")}const Notepad=()=>{const[s,e]=reactExports.useState(""),[a,r]=reactExports.useState(""),l=async()=>{const d=await generateHash(s);notesStore[d]=s,localStorage.setItem(notesStoreKey,JSON.stringify(notesStore)),r(d);try{await navigator.clipboard.writeText(d),alert(`Your note's hash key is:
${d}

The key has also been copied to your clipboard.`)}catch{alert(`Your note's hash key is:
${d}

Failed to copy to clipboard.`)}},u=()=>{const d=prompt("Enter your note's hash key:");d&&(d in notesStore?(e(notesStore[d]),r(d)):alert("Note not found. Make sure the key is correct."))};return React.createElement("div",{className:"Notepad"},React.createElement("div",null,React.createElement("button",{onClick:l},"Gen Key"),React.createElement("button",{onClick:u},"Load Key")),React.createElement("textarea",{value:s,onChange:d=>e(d.target.value),placeholder:"CMD Commands: bgedit, color 2, color 6, calc"}),a&&React.createElement("p",null,React.createElement("strong",null,"Hash Key:")," ",a))};function WindowManager({windowStates:s,repoUrl:e,handleRepoChange:a,bringToFront:r,closeWindow:l,setDesktopBgColor:u,openBgEdit:d,openCalculator:h}){return React.createElement(React.Fragment,null,s.music.isOpen&&React.createElement(Menu98,{id:"music",title:"Music Player",width:750,height:800,onClose:()=>l("music"),onFocus:()=>r("music"),position:s.music,zIndex:s.music.zIndex},React.createElement(MusicPlayer,{repoUrl:e})),s.settings.isOpen&&React.createElement(Menu98,{id:"settings",title:"Settings",width:350,height:100,onClose:()=>l("settings"),onFocus:()=>r("settings"),position:s.settings,zIndex:s.settings.zIndex},React.createElement(Settings,{onSubmitRepo:a})),s.equalizer.isOpen&&React.createElement(Menu98,{id:"equalizer",title:"Equalizer",width:800,height:800,onClose:()=>l("equalizer"),onFocus:()=>r("equalizer"),position:s.equalizer,zIndex:s.equalizer.zIndex},React.createElement("h2",null,"Work in progress lad")),s.assistant.isOpen&&React.createElement(Menu98,{id:"assistant",title:"Assistant",width:800,height:800,onClose:()=>l("assistant"),onFocus:()=>r("assistant"),position:s.assistant,zIndex:s.assistant.zIndex},React.createElement(Chatbot,null)),s.cmd.isOpen&&React.createElement(Menu98,{id:"cmd",title:"CMD",width:800,height:500,onClose:()=>l("cmd"),onFocus:()=>r("cmd"),position:s.cmd,zIndex:s.cmd.zIndex},React.createElement(CMD,{openBgEdit:d,openCalculator:h})),s.bgedit.isOpen&&React.createElement(Menu98,{id:"bgedit",title:"Background Editor",width:800,height:800,onClose:()=>l("bgedit"),onFocus:()=>r("bgedit"),position:s.bgedit,zIndex:s.bgedit.zIndex},React.createElement(BgEdit,{setDesktopBgColor:u})),s.calculator.isOpen&&React.createElement(Menu98,{id:"calculator",title:"Calculator",width:300,height:500,onClose:()=>l("calculator"),onFocus:()=>r("calculator"),position:s.calculator,zIndex:s.calculator.zIndex},React.createElement(Calculator,null)),s.notepad.isOpen&&React.createElement(Menu98,{id:"notepad",title:"Notepad",width:800,height:500,onClose:()=>l("notepad"),onFocus:()=>r("notepad"),position:s.notepad,zIndex:s.notepad.zIndex},React.createElement(Notepad,null)))}const musicplayericon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEUAAACAgID//wDAwMAAAAAA//8A/wD///8AgACE6PTJAAAAAXRSTlMAQObYZgAAAAFiS0dEBxZhiOsAAAAHdElNRQfiBBMBIhnib8pPAAABdUlEQVQ4y3WUTW6DMBBGQcoBOjIk6xKpe3eS0GWQuEBLfYCK4n3EIgfopseu58fBxcm3Aj89z3iMKIokEPJUZCmhafZ46LP12hFAuyLl1glYE/ARoD2ngvdTBFglYEvgQ0GilCfv/Q3MiwKYgLZdlHoIyqRgni8RlM4hV9+z0JpqAaQICII9KDCOFQYkGNC9DLIyESDB2htAUqZnMCwYI6CkXoLyVfWdYcFWC0CH1bnYdCyYFBwHeutY0LYEyIg2JjMi4Gc1rCQHosMjg6fdYWbsWm4X00sEFuYLHVBAHAkLLVqohwXQ98fCjK/N6G6d0yGsCIgBDLE2bapCMPzRaW05tQpIYJCddlcKsBCMlzFcDB4ISDERkMFA81eAhgQywl7OdguwRg0Cn7AABDEaP7r3TgBo2CDQg4Cq59CU2AjrAqTh6/UCZHz3gJDWoDmwGPAahOFKKQUnP+L/KHj7/bkP8jwGdON3QbzYdfgT2fR50j9Dlj/uX7Pd5lE/IwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNC0xOVQwMTozNDoyNS0wNDowMHQ28t4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDQtMTlUMDE6MzQ6MjUtMDQ6MDAFa0piAAAAAElFTkSuQmCC",settingsicon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAHlBMVEUAAAB/f3/AwMD///8AAAAAgIAAAIAAAP8A/wAAgABTa5L5AAAAAXRSTlMAQObYZgAAAAFiS0dEAxEMTPIAAAAHdElNRQfiBBMBJCt84jxJAAAA8ElEQVQ4y62U0Q2CMBBAS+ICBzeAqB/6WTD6SwUGMJENjBOYsIIruK2FK9iWq8HoSz9IX6537bUI0ROBgxiJVzayGOYjZ34No0hyGzmKKHMi0lniXVHiimrEE3Uz8AfRrV9z4qZhRbd7Xhx0yJUTx7Zt75yQeq09V5UKiOb8tbh0W5x/JMF+WC3XQsGSbS1CXLBCQVpw91AHmCxYOegAEuATQy+i3Eca4abub9yvIjW5J2JjyrXE9hFYavecmxxFQBR0hCVKGif6UEgvc5guMaUPpADpB0AowKSWCsEZVKv39jsyZP4ifbHU1kU1QXzkBXbdlY4knE+xAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA0LTE5VDAxOjM2OjQzLTA0OjAw1XweXgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNC0xOVQwMTozNjo0My0wNDowMKQhpuIAAAAASUVORK5CYII=",equalizericon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEUAAACAgID///8AAADAwMCAgAD//wDIuPtlAAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAHdElNRQfiBhoANCCn+IFNAAABIUlEQVQ4y73SS3KEIBAGYKzJHAD0AoK4NoUeQCRcYMB9GOf+Vwj44iFu0wvL4qtfmkYAbBUwLOCrwEHV3R2UdzB2N9CUN4B9JAEfScBHUjgjKZwRB5QdwGwFoHpkn3DDxgOd+Hiuh6AmXPNjPQAq7WKFr6BMnwUqGwd879aDMssOEIXwlC2x36l5HbX71LMxG6BoDyVmjFcQ0eZP/LGv5BtdgTpAZSZhjHlnoKVta7tysP5X6IDmsyzLu8okfqSUE7zClmB9CkDr2SWqCzzYYBOQW4hPDsQ0y2k9eTwr8DUO6tdNV6TTLYhWOyT3gQd9XFRytUTDPODh5SaSAfLio+CZ/woP/drUFQgT58EjwELwPDQ+EENY/woirR0eLK0O/AHxOomaeb43LQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNi0yNlQwMDo1MjozMi0wNDowMOzClQAAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDYtMjZUMDA6NTI6MzItMDQ6MDCdny28AAAAAElFTkSuQmCC",aiicon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfiBhoAKix6D/K5AAABr0lEQVRYw9VWwZGDMAyUPBRGBbSTGmhHFdCZ7mEMtpGsBe4yc5tHEiztWlpbCVMMNZ8ykAmEKdFmLsygzPSEPGMjolkjieTTb0P6Q0THESnkeCnxWGArLgR4XUGECQnC9mrDPwNVZz9mwIqwjCr4UIQSsQ4O65978FWTu/O8XoLjpl1x9k63MHjGmJ4LQOKdUP1ViQiYP/eEroXtTvyCENsCjcwL7MzQqLhLWiO4B7cKMbthC2j98V23LAEtpD41LpsQCnUi4gbBs0jNb0gV8CnyqmBSGv0guBWA/6tCWAI8Jr8nPbjJCiVpeeIwTS7HwME7N+P//2R6Au+n6Q7bAxXybGi9LBYLLYoOO830RGJmaPM6Ic6A6jl28oIF6hWTHPE9Z3ekpUtdKLaDqd9UzVr9qxAzPZZgc1uFOZXGiktgu8fdew3JjhzrKruqV0OW0IZej3cmv3ZirvfuiSzuSFazRTknb5tF+wVLZDmHGkBfc1wumhzq7VOGL3ebnaKAu+izUxRQ19AabTdIsrmewGj319Fh29tKNAJxc9j57Eskb8FORHEyJW8Bo/Fw9uIHOR2I4H61TfIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjZUMDA6NDI6NDQtMDQ6MDBEWXbjAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI2VDAwOjQyOjQ0LTA0OjAwNQTOXwAAAABJRU5ErkJggg==",cmdicon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuNBLfpoMAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuNAADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADX5rshveZftAAABgtJREFUaEPtmU9Mk9kah5/vT5HaQoFiE0IiE0IwN0wkXYwLrwYnorkh0ehixg0qCfEPK0NBIwszC124MDCZlWhcqWuNOG7QpBRbiKNBooYBSQaqGaRY9VpaKP36nbso7bWfbcUEL3rTJ3mTk/e85z3nd07OOd9pIc/aIrnd7ipVVVFV1Vj3VaPrOkIIJLfbPaUoCoqiGGO+alICPB6PmJ2dZXp6Gk3TkGUZVVWRZQVYBBYAydg+hSRBPA7z87BuHRQUQCiUvVxQAGYzCGHMJAAFsKJpOvG4xocTu7S0hCRJKIqCJEkUFxdjsViQvF6v8Hg8dHV1UVdXh67rjI2NLSetB/4BxNO6ysTPP8Nff8Eff8BPP8HUVOby33+D12tszfLgw0AfpaVQU/MDT58+ZWFhAQCn08ni4mJqbPv372fz5s2oAPF4nLq6Os6dO0c4HMbn8/D775eYnv4F+BcQW56hzLS0wK+/Jgb2229w6RL4fJnLjx/Djz8aMwCsA+YAQVdXPd9//09GRka4ffs2sixz8uRJ5ufn8Xq99Pb2oqoqiqIgA8iyjK7rhMNhAOx2OzYbwAbADBQDtqwWDNp4/NjG5KSNUCh3eWLi4/YJKwQqgTIWFv7N4uIiVquViooKNE1LG9vGjRuRJAlJkhIroKoqY2Nj+Hw+7HY74XAETQN4vbwPsq+A1Qp9fQlL8uEMZypbLLCwALr+3zooWO4vyujofSIRCyaTCQC/34/P56OsrIxwOJzaD0BiDwwNDdHZ2UlVVRU2mw1NW2Jq6k8ikUbgO0DPKkCWjQP5NJnbKMsHxiCVlUFKSr5DURTevHnDq1evqK6uprCwkGg0yvj4OM3NzWzatCkhYHh4mI6ODkPCdShKlPin9++qIUkJcSvp8+DBg9TW1ib2gPj4TAP+t4OHxNG60j6TY5aNFd8aOQUUFRUZXSmsViuynN7cGJ8pZrXJml2WZUKhECUlJRw+fJi2tjaOHj1KW1sbu3btYn5+Hl3X0wYYCoWorq7m0KFDNDU1pWK+KF6vV1y4cEEsHzMCELIsC4vFIgDR2NgoZmdnhRBCRKNRoeu6uHnzZirWarWmtW1paRGBQED09/en+VfbmpubxdmzZ0XGFUheaufPn+fMmTNMTk4yNDTEo0ePGB4eprKykv7+/tQsf0hRUREbNmygpKQkzfelyCggyc6dO9m2bRs9PT1s3bo1Ze/evWPLli1UVFQAUFNTQ2trK7W1tbx9+5ZAIEAsFmP37t2UlpYSCoWMqVeNnAI0TUPTNIqLi9P8PT09uFwuBgYGAGhoaKC7u5ve3l6uXbvGgQMHALh69Sp79+5Na7va5BQghEAIkXrsmEwmysvLuXPnDleuXGFychKAQCDAyMgIExMTALjdbgoKCnA4HEQiEfiCJ1LOjMkPJi3xYUQsFuP169c0NTXR2tpKTU0NAH19fezYsYNjx46l2gaDQYLBIPX19VRVVX32ibRSsTmjkk/N9+/fp/nb29vp7u6moaEhzQ9gNpsBOHLkCBcvXuT48eNcvnzZGPZJzGbzikTkfAjfu3ePSCRCe3s7Lpcr5TeZTDx48ICZmRkA9uzZQ0dHB+Pj46lV8Pv9jI6OYrfbKSsrw2w2c+PGDex2O7FYLJXrQyRJQlVVfD4fJ06cMFZnJKMAWZYxm82cPn2axsZGrl+/jsPhYGlpCZPJxK1bt9i3b18q3uFw4HQ603IAWCwW5ubmePnyJdu3b8fpdOJwOIhGo8ZQWBZgMpmYm5szVmUlowBd11NPuYcPH3Lq1CnWr19PPB5HUZTU5k0yMDCAy+UiEAik+T0eD52dnczMzPDkyZO0PNmQZZnp6WmjOzuZbuKkFRUVfeRLmtVqFbIsfxSTzf+5lsxj9Cct502cJNcFlDxVjDHZ/J/LSk+tnAK+BfIC1pq8gLUmL2CtyQtYa/IC1pr/DwGZfxv9utF1PfHkvX//vnj27Bl3796lsLBwRc+4tST5Q0N5eTmlpaVIg4ODU36/n4mJCVRVTf1x8LWj63piFQYHB6tevHjB8+fPvykB8Xg858suT5483wj/AQsE9M1/K4A+AAAAAElFTkSuQmCC",notepadicon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOBtp6qgAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuOAADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACrgCETU544KAAACw9JREFUaEPNmntwVNeRh787c+chaUYaQC9jDAIpFl4gQrEdA0EYh4SywVlvZQ0latfAlmzhSlwKdikiScVhFKIERBxssHlWysHlZK1AlsAahFF4xLFjmZUsv7aILAdhQKCH9ZoZ5s7MnXs7f8yMLAS4IAjhX1VXzTmnz5w+fbtPn+57AfB6vQqfYRUgcVoBWICWeLsl3l5xg3hsQBewbpA8AIPluwhWr9ereL1eAZg7d+6K5557bklpaek4q9VKU1OTWlVVNaWqqqronnvuSWptbVVuv/32tG3bts0tKSnJG26eNWvWTPF6vbOLi4ud6enpWfX19Q8AAeBsXN5LNmI9duwYAFVVVUVTpkz5TWFh4aRp06YJQGFh4ZcmTpw4u6ioKMnj8ZhpaWnJ+fn5s6dPn543derUYefJzc392rx582yapo1766235mVmZhaNGTPGaGtr+zOgx5/UpVi+fHnZ1q1b+3t7e+Xw4cNSUVEh7e3tIiJy/vx5qaiokNraWtF1XSKRiBw4cGDYeUzTlK6uLtm1a5csXbpUFixYIHv27JH169cL8Bfg1qFyE7dDFEUZqyhKqsfjIRAISHV1NSkpKQC4XC6qq6vp6+tDVVVsNhv9/f0MN4+iKLjdbk6fPs1LL72Epml4PB5xOBwAUwH7ILnjOKpYAEQkJCJEIhHGjBmjlJeXY5omAKZpUl5eTkZGxsC0jIwMbgSPYRikp6dTVFSEoijouq7Ex/qBGBO/VaB2HNSOgvtiJrV8+XLv5s2bJRAIiGEY4vP5xDAMEZGBtqZpkoCmaTeEJxwOS319vVRUVMjMmTPl0KFD8uyzzwpwCsiJbWC/Bw69C4dWkzChBEQEi8WC2+3GYrFc1HY6nYgIIoLT6Rx2ngScTidJSUmYponIgM8aQDscGw8pv4S8Apg8iqEbUJSLT6nLtS/XN7R9ub6h7aF9iX7TNDEMIz6uoCgCoMIDearq/C54SmA8cFsviQ2ICIqiXKSJm4HE+oM0j9UaARgLjxxwOseWwhTAOjCuADzxxBPe3Nzc1fPnzyc1NRVd1wcYRgoWi4VoNEp3dze1tbXU1R3gZz+rpLm5Rx5/vFOB+UAeEyfa2bYNsrKksqDAErtClJeXezMzM1ffddddJCcnYxjG0P8fURw7doTdu2v4yU9+zt//nkF5eSpwB9nZBitXBnnsMRejR1sqFUXxqgC9vb3k5ORQUFCAx+O5KU/AarUSCoVobv4ICNLU9CEbN2po2ljgNkBh587DzJz5BzZt+iW7d6dCwgcikQiqquJyubBYLDgcjhGnxPoOB6jqBGADR49+mfr6TG69VeG11yA7ewJ//evDbNyYRFNTbOMWALvdTjQaJRAIYJom4XB4xCkajeL3++nri+D3307M5vPJznZSVgazZkF7+2Tuv38+HR2Qnq5Bwom/CD6gquDzmdTUhPn97yfi800EYpqfNQs2b4YNG6C93QSasNl6KnV9fsyJvwinUEqKg/5+k7Ky0xw8mMfChemsXFlHZuYE2tsns2wZtLf7cLm6CAYtmCaVMMkLwLJly7xbtmy5KMzfDJw796kUFx8Q+ERKSi5If/+jUld3UEAEDHG5WgSOC0QFxMvQSHwz8c47jRQX/xuvvLIAOMmbbybz1FO/YsOGefGbRCPBIMBXvjiBLBG8Ojs7efHF37Bjx3b+9Kc9tLbewWOPZQCjgRAu11mCQTDNsUBy7FpEsBJyb24gs9sddHf3UFy8hL6+btatW8t3vvM4DQ2d3Hffx8AcoBvoGKR5H/A+0FsJ/xrzgZKSEu/zzz8v3d3dYhiGhEKhEaCYv3V09MqcOfPk1Vf/V/x+v6xd+wuZNOkWgWUCRwU64j4g8d9/idPrn/nAzQlkTqCDpKRXuXDhFI2Np2hoaGD79l9z8uR5XK6dWCz7gI+AXuA80CWxHL8BOOwk4Q1333333KysrLn5+fk4HA4ikQiGYdwQikZNTNPAYomgKPXo+g/w+z/m6adr2blzJ729PbjdowkENETqgVvieu4GgkpsM5t8ULMPeHuEfUDQ9WTc7gBTp/4Ku/17QAGRyCPs27efRYtiXElJyWhacNC8EuA/BJoV2OKH9xfGE/2RPIUsQDKm2YDDcYTs7HtR1VHxfoPm5k/ZtKmZF17YBTTicikEgzZMMyLgVuD7QPf78NwLwPb4n8ayopELZFER2SciT4pIn4j8QUQmiK775fz5bnn99V2yatXXZfr0gWqdgEPiCb0PKB2kESWhlhFCGHgacANeoBr4d6LRbJqa/h9Nq2PWrCp++tPjeGOH42CcAxYM0jyJItcNNiELpulkzJguPJ5GYDnwQ+B+IITP101XVxcQJiOjkdTUGgDq659i5sxxwFqgE4fD0ZqSkvKVnp6evrjMAzmnFWDOnDlzk5KS5qalpREKhfD5fAQCgeukIH6/j/7+VlyuN0hN/R1wBngDuIVo9BHOnRtPT8+nTJ68kaSkowCEw9DU9DA1NXdw770G6eknOXPmgk/TtP+O14cuxfAHMk1CIZFQqE807QHR9f0i0i0ik0Tkt6LrQTl+/CP5+ONfi64XJKosEg4jq1fHbH/evEflj3/cJ2vX/iJRF5owVG5uXCBz4nB04nAcx+l8AlV1ACeAnYRCs+no8DF27J+57bZXUNX3AGhrg717U3E41jJnTjGq+n+kpblwuWKp45UwrBlZKBQhEokgEgL2AT8G7icaVQkEHicQyOfECYV3392P0/kDotE6fD7QNHjzTfB6FzNjxky+/e0Z9PY6iER0otHP90cVYNSoUQSDQd57773rCGSJIBVk6tSXsNu3xwOQQmvrWHbvvpPGxlLefvssfn8DX/0q2O0xm79wAb71rVWsX/917HYVTQtetvB1OagAoVAIm81GVlbWP3kKxYKUxfI+Ltdx7PaHOXs2i/r6NTid3+Bvf/Nz+vStLFq0kEcfdSGioOsqIrEDxTBMcnPHkZnpoa2tjVAofG0b8Pv9OJ1OJk2ahNPpHMpzlTAwjPNo2v+gaSv44AMPP/pRI5mZ2ygouINvfvMbPPTQQ1itnyUjQ2EYBu3tHUSj0aFDV8QwBTIdeIaGhkcoKmqgqOgBVDXABx/s4bXXXqW6ej0PPvjg5wr/z0IFcLvdhEIhTp48edUmlKiltrf30Nb2LjbbKs6c+Rdmz/5PIpE2RCL4/T4Mw8A0TUzTRNf1i+qeg5HIznRdx2azDR2+IlTiJW1d1+no6MDv91+VEyuKgtVq5Z13Gtmy5UVM8yGefHIRpaVfxjAMIpEIzc3NV23Lg3EtT0ohHsgKCwtXL1my5JpLiwmtgYLNZsNutw1o+Uravhw+Ky02s3fvXurq6qisrOTEiROsXLnyE+Be4JOh8647kKWkpODxePB40khJSY5vwo7dbr+E9/Mosb7Vah145XQ1GNZAdj2UWN8wjGt6TzHCGdnV4ciRI+zfv/+qTChxnV6bl5e3auHChaSmpko4HL52z7tOJE6hnp4e9u7dy44dO3j55Zflww8/VMrKyvridZXWofMUgKVLl5bNmDFjzeLFi1NHjx498BJuJGG1WtE0jcbGRurq6mhpaWHx4sW0tLRQUVHxBlAMtA2dN6DpdevWFSUnJ+/Pyclxjx8/XkzTVEZyEzabjb6+PrZu3cqdd94p+fn5Sk1NDQcPHtze2dlZHv9m4hKBlMEfeyxZsmRFTk7Of7nd7ntGUngAVVXx+XxUVVVRWlrKtGnTfM8888zvTp06tRWI3bmHZGMD+JzPbW4mnQRGxWW6ok/+Ay0yZ1Ulp74LAAAAAElFTkSuQmCC",bgediticon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOBtp6qgAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAA8nYBAOgDAADydgEA6AMAAFBhaW50Lk5FVCA1LjEuOAADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADMbhZ8SlPoHAAACTVJREFUaEPNmmtwVOUZx3/nstfcExIgATVKCVqkxDHARFPrjO043TrWjpgtosNYLJaKtkVbe7FOO51ab9UmTlprmKEzVqHVL7V0tO1EFKliKgyXYjAESCGBkASySfaS3XPO0w+7m+yebHYTscBv5nzY53nnnPf/Xp7nefcchU8Bn79lIbACqAMWAZXAHE1Vi8rLijVVVYPACeCkiBwCPhDkvSM9/R1vvbZB7PebCYrdMF18/pZ5wB3ASqAWcNnbqKpKRVkJqprxMVFgn4i8KiJbNjX7u+0NpkPGO2fD52+pBjYCdwLFdn8qOQSkMiIir4jw1KbmxsN2ZzZy3jmJz9/iBL4PPAwU2v2ZmIGAJKMi8oxhmL/a3LIqYndmYlp39vlblgCtiTU+bT6BgCR7LEvWbmpu3G132FHtBjs+f0sj8O5MO3+O1KqqsmPtA1vvtDvsZBXg87c8CGwBCuy+84BXUZSX1j6wdaPdkcqUAhKdf85uP98oivJ0NhEZBSSWzQXvfJKEiIzLaZKAxIZ90W6/0CiK8vtvbNh6jd2eJsDnb3Elos2FWPO58Kqq0rpm/cueVKN9Bh4+z9FmptTquvZIqmE8QPv8LZcDe6abpKbDOeSBbIxallW7qdl/GNsMfO/T7HwuRMCyBMsSZljN5SuK8lDyh0J89OcD+4GitKYJRGBoNIZpTU7dpgimKXhcKoVePW20M81AZMwkZggFeTpet45hWowEDcaiJl6Pjq7Zn5CRYcuylmxq9ncnBWwEnra3AjBMoaLUzXfuuwGvx4V9vEzDZPDsKAcO9vC3tiOEx0zyPBoi6QIsSwiPmVxfV0n98moq5xbjcTsxTYvhkTCdXX38Y3sXx3uDeD1a2jMyISKPtDY1PpEU8F6inp9ENGZRPS+fpidX4XI67O40uv/bR9Pv2tjz0SBetzYugMQs3nvXNaxYtiDxWwiHo2i6hsupAzA8EuaVP7ezY1cPXk/cloX2/R0nlis+f0sNsDdTPU9SQFU+zz7ux+t1sX3Hfnb86zAulw4ieDxOFl9VRf3yRbhcDnp6B9jwyGuEIyYOh0ZFWTGRMeH+tdeyoi7e+Q/3HOWfb3dyuj+E06lxVc0svvzFxZSVFRAKR3n2+TY6jwVwOuxBMo2oZclSbeFinw+43e5NYlpCSaGTm29ajMOhs6u9k8c3H6C/b4TO7gD7Dg2y+fVOyjxRaj9XTWGBl7ODZ2jff5o8t46qObhhRRW3+moBeGfnIZ757S6GAmPEYhajIYMDHWc41n2autr55Hld5OfpvPP+cVzOrAI04EN1pnFf01TmFuoU5ukUeHVKChx8dp6HN7d3ERgOAnDp/DIiUQsBTBMa6q8AYGBgmJdf209RvgO3S0PTFHRNobjQwb6Osxzs6AWg+rJyivIdWJIzPi1TE2fYc0JEUFUFRYlHENOyUBQwTaG81EXl3Pg+6Og8xZlAFC1DpMnzaOw90ENn1ym6jvSh68qkiGdHUZQaNXEAnzaGYfGf/iiDgRiDgRj9Q1EO9Ua49eZFFBZ4iRkmuz7spsCrY1pCabELj9sJwKm+4SnDpNulsbO9l0cfb+PZF3YRjVnjA5KFShWYY7dm4/LqCp7bUMu6VVezbtXV3H/3UrY+9xVW3lZPJBJl66vv0vZ+L3luDUsEh0MbzwOxmJk2qiLxATEMwTAEBQWvW8PlzB1Gic/8PDXXwdzOsmsXcu+am1iz+kbWrL6Ru75+A8vratA0laPH+th74KQtU0z8Sh1QkfioV83Jo2qON+XKY265BzX36KMoSl7OYGun6+hJTp48m5ZdPR4nl10ymysXzeeXj93Olld30vLSXgq9U+eNUMTgC/Xz8d++DMuyICFKEELBMZ74TRv9g5GM+yUVFRiyG7Pxwb8P07Dur2x47M349dM3ueeh1/nWQ6+w78AxHA6dO75WT8M1FYQiZtr/BqlBRVUUxsYMAsMhAsNhhgIhojEDl9OBx+NEUZScNZKIBFXglN2RDYeuUVflYm5p4ipzUTXLxcmBCE0vbGc0GMHlcnDTF2oYChnEYiaWFe+K06mNd8rj1nh/90l++PM3+PEv3uDBH23jrXc6AEg0z4miKCdUIB58z5F8j87H3SMMDg4DMLuiGJeucmZojHAkCkDlnCIMI713lmVhWYJpSfoUTY9eFYjLPkcEwaGrOBN1jWGYaBr0nxnjRM8ZAGoWzqWizIVhpm7seP5QFWW8/9lX/QQickgF2u2ObJimxalhg5HQxBUYNfjoeJivfulyZlfEg9qRY6fR1Himffvdw4gIpSX53N24lFDYIBwxMc14KR6NWQwHDdzuuPi4KNuDM/OBtnCxLwx8E8gYkey1UP9AgFleiysXlPKZy4pZcGkRi2vKuGflEm67ZRlOp4P+gQDNL+7AMoWSIi9Hjo9QXurg0ktmUVVZyqIFJYSCIWIxE7dbY/7cfFbesoiG62rQdY3T/cP8ffthLEuyJbOoCD/5VMtpgBM9A7S0trFzdx/F+U7Ky0pQFIVozGKNfwmfvy6eMwBCoTEA3G7neFjuOtLH5pfbOXEqiEPPWsy17zt4dHlSwCc+0JDYiGeHghz8qIdtbV0ERg3yPRPnAVWNr+9g2KBuSTkN9Vcwf14pXq8LRAhHYpzuD7B773He2nkCEclVSiMiP2htanwyKWBe4kiZMStnO1ICWCIYluB2qBTm6WiJ0cx0pByLmoxFLfK9OnleByAEwybBkIGmgsetT2f9px8piYt4Hvh2ertzI5OAJCLxKpaZbVqIj/4LrU2N92H7V+IZIB7EzwOKAqqqJMpwuzcroyITy31cwLYt648CT443u0gRkadT3+LYd8pTM80L55ndMcN8ItWQJmDblvVRYC0wkmq/SAhaltz7B9urJ/sMsG3L+n0JERcVIrIu0yunSQKIi/gT8IDdfqEQkY2tTY1/tNuZSgBxEc0Xg4hE539ttyeZUgATIhov0J4IicjqbJ0nlwAmltP15zk67bFEGqZaNqnkFMDExm4AHv0/J7tREflZLGbUb2qavGEzMbMcGC85qhPvElZPVTslyVZK2Eh8aiBPJV9cTJecd54K28ceSwG3vU0OARfmY49MJD63WQ4sS/ncZramqsVTfm4jvPdxd2/Hjr98d3J9PgP+B2Bq3pU5T9UCAAAAAElFTkSuQmCC";function App(){const[s,e]=reactExports.useState("#008C8A"),a=()=>{m("bgedit")},r=()=>{m("calculator")},{windowStates:l,repoUrl:u,handleRepoChange:d,handleDragEnd:h,bringToFront:p,openWindow:m,closeWindow:b}=useWindowManager("https://api.github.com/repos/amberleafhash/toonStorage/contents/"),v=[{id:1,name:"Settings",icon:settingsicon,onClick:()=>m("settings"),showOnDesktop:!0},{id:2,name:"Music Player",icon:musicplayericon,onClick:()=>m("music"),showOnDesktop:!0},{id:3,name:"Equalizer",icon:equalizericon,onClick:()=>m("equalizer"),showOnDesktop:!0},{id:4,name:"Assistant",icon:aiicon,onClick:()=>m("assistant"),showOnDesktop:!0},{id:5,name:"CMD",icon:cmdicon,onClick:()=>m("cmd"),showOnDesktop:!0},{id:6,name:"Notepad",icon:notepadicon,onClick:()=>m("notepad"),showOnDesktop:!1},{id:7,name:"BGedit",icon:bgediticon,onClick:()=>m("bgedit"),showOnDesktop:!1}],A=Object.entries(l).filter(([E,S])=>S.isOpen).map(([E])=>{const S=v.find(T=>T.name.toLowerCase()===E.toLowerCase());return{id:E,appTitle:S?S.name:E,icon:S?S.icon:null,onClick:()=>p(E)}});return React.createElement(DndContext,{onDragEnd:h},React.createElement("div",{className:"App"},React.createElement(WindowManager,{windowStates:l,repoUrl:u,handleRepoChange:d,bringToFront:p,closeWindow:b,setDesktopBgColor:e,openBgEdit:a,openCalculator:r}),React.createElement(Desktop,{icons:v.filter(E=>E.showOnDesktop),bgColor:s}),React.createElement(Taskbar,{icons:v,taskbarItems:A,windowStates:l})))}ReactDOM.createRoot(document.querySelector("#main")).render(React.createElement(React.StrictMode,null," ",React.createElement(App,null)));
